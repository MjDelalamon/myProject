function Qw(i,t){for(var n=0;n<t.length;n++){const o=t[n];if(typeof o!="string"&&!Array.isArray(o)){for(const u in o)if(u!=="default"&&!(u in i)){const d=Object.getOwnPropertyDescriptor(o,u);d&&Object.defineProperty(i,u,d.get?d:{enumerable:!0,get:()=>o[u]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))o(u);new MutationObserver(u=>{for(const d of u)if(d.type==="childList")for(const A of d.addedNodes)A.tagName==="LINK"&&A.rel==="modulepreload"&&o(A)}).observe(document,{childList:!0,subtree:!0});function n(u){const d={};return u.integrity&&(d.integrity=u.integrity),u.referrerPolicy&&(d.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?d.credentials="include":u.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function o(u){if(u.ep)return;u.ep=!0;const d=n(u);fetch(u.href,d)}})();var wh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Jy(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var g1={exports:{}},zc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t2;function Ww(){if(t2)return zc;t2=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(o,u,d){var A=null;if(d!==void 0&&(A=""+d),u.key!==void 0&&(A=""+u.key),"key"in u){d={};for(var C in u)C!=="key"&&(d[C]=u[C])}else d=u;return u=d.ref,{$$typeof:i,type:o,key:A,ref:u!==void 0?u:null,props:d}}return zc.Fragment=t,zc.jsx=n,zc.jsxs=n,zc}var e2;function Kw(){return e2||(e2=1,g1.exports=Ww()),g1.exports}var D=Kw(),m1={exports:{}},me={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n2;function Zw(){if(n2)return me;n2=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),A=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),I=Symbol.iterator;function O(Z){return Z===null||typeof Z!="object"?null:(Z=I&&Z[I]||Z["@@iterator"],typeof Z=="function"?Z:null)}var H={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},X=Object.assign,J={};function q(Z,It,Ot){this.props=Z,this.context=It,this.refs=J,this.updater=Ot||H}q.prototype.isReactComponent={},q.prototype.setState=function(Z,It){if(typeof Z!="object"&&typeof Z!="function"&&Z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Z,It,"setState")},q.prototype.forceUpdate=function(Z){this.updater.enqueueForceUpdate(this,Z,"forceUpdate")};function Q(){}Q.prototype=q.prototype;function ft(Z,It,Ot){this.props=Z,this.context=It,this.refs=J,this.updater=Ot||H}var nt=ft.prototype=new Q;nt.constructor=ft,X(nt,q.prototype),nt.isPureReactComponent=!0;var _t=Array.isArray,mt={H:null,A:null,T:null,S:null,V:null},Tt=Object.prototype.hasOwnProperty;function U(Z,It,Ot,Mt,Ht,fe){return Ot=fe.ref,{$$typeof:i,type:Z,key:It,ref:Ot!==void 0?Ot:null,props:fe}}function F(Z,It){return U(Z.type,It,void 0,void 0,void 0,Z.props)}function k(Z){return typeof Z=="object"&&Z!==null&&Z.$$typeof===i}function et(Z){var It={"=":"=0",":":"=2"};return"$"+Z.replace(/[=:]/g,function(Ot){return It[Ot]})}var tt=/\/+/g;function K(Z,It){return typeof Z=="object"&&Z!==null&&Z.key!=null?et(""+Z.key):It.toString(36)}function Y(){}function Pt(Z){switch(Z.status){case"fulfilled":return Z.value;case"rejected":throw Z.reason;default:switch(typeof Z.status=="string"?Z.then(Y,Y):(Z.status="pending",Z.then(function(It){Z.status==="pending"&&(Z.status="fulfilled",Z.value=It)},function(It){Z.status==="pending"&&(Z.status="rejected",Z.reason=It)})),Z.status){case"fulfilled":return Z.value;case"rejected":throw Z.reason}}throw Z}function st(Z,It,Ot,Mt,Ht){var fe=typeof Z;(fe==="undefined"||fe==="boolean")&&(Z=null);var Bt=!1;if(Z===null)Bt=!0;else switch(fe){case"bigint":case"string":case"number":Bt=!0;break;case"object":switch(Z.$$typeof){case i:case t:Bt=!0;break;case v:return Bt=Z._init,st(Bt(Z._payload),It,Ot,Mt,Ht)}}if(Bt)return Ht=Ht(Z),Bt=Mt===""?"."+K(Z,0):Mt,_t(Ht)?(Ot="",Bt!=null&&(Ot=Bt.replace(tt,"$&/")+"/"),st(Ht,It,Ot,"",function(Pr){return Pr})):Ht!=null&&(k(Ht)&&(Ht=F(Ht,Ot+(Ht.key==null||Z&&Z.key===Ht.key?"":(""+Ht.key).replace(tt,"$&/")+"/")+Bt)),It.push(Ht)),1;Bt=0;var jn=Mt===""?".":Mt+":";if(_t(Z))for(var oe=0;oe<Z.length;oe++)Mt=Z[oe],fe=jn+K(Mt,oe),Bt+=st(Mt,It,Ot,fe,Ht);else if(oe=O(Z),typeof oe=="function")for(Z=oe.call(Z),oe=0;!(Mt=Z.next()).done;)Mt=Mt.value,fe=jn+K(Mt,oe++),Bt+=st(Mt,It,Ot,fe,Ht);else if(fe==="object"){if(typeof Z.then=="function")return st(Pt(Z),It,Ot,Mt,Ht);throw It=String(Z),Error("Objects are not valid as a React child (found: "+(It==="[object Object]"?"object with keys {"+Object.keys(Z).join(", ")+"}":It)+"). If you meant to render a collection of children, use an array instead.")}return Bt}function ut(Z,It,Ot){if(Z==null)return Z;var Mt=[],Ht=0;return st(Z,Mt,"","",function(fe){return It.call(Ot,fe,Ht++)}),Mt}function xt(Z){if(Z._status===-1){var It=Z._result;It=It(),It.then(function(Ot){(Z._status===0||Z._status===-1)&&(Z._status=1,Z._result=Ot)},function(Ot){(Z._status===0||Z._status===-1)&&(Z._status=2,Z._result=Ot)}),Z._status===-1&&(Z._status=0,Z._result=It)}if(Z._status===1)return Z._result.default;throw Z._result}var jt=typeof reportError=="function"?reportError:function(Z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var It=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Z=="object"&&Z!==null&&typeof Z.message=="string"?String(Z.message):String(Z),error:Z});if(!window.dispatchEvent(It))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Z);return}console.error(Z)};function $t(){}return me.Children={map:ut,forEach:function(Z,It,Ot){ut(Z,function(){It.apply(this,arguments)},Ot)},count:function(Z){var It=0;return ut(Z,function(){It++}),It},toArray:function(Z){return ut(Z,function(It){return It})||[]},only:function(Z){if(!k(Z))throw Error("React.Children.only expected to receive a single React element child.");return Z}},me.Component=q,me.Fragment=n,me.Profiler=u,me.PureComponent=ft,me.StrictMode=o,me.Suspense=_,me.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=mt,me.__COMPILER_RUNTIME={__proto__:null,c:function(Z){return mt.H.useMemoCache(Z)}},me.cache=function(Z){return function(){return Z.apply(null,arguments)}},me.cloneElement=function(Z,It,Ot){if(Z==null)throw Error("The argument must be a React element, but you passed "+Z+".");var Mt=X({},Z.props),Ht=Z.key,fe=void 0;if(It!=null)for(Bt in It.ref!==void 0&&(fe=void 0),It.key!==void 0&&(Ht=""+It.key),It)!Tt.call(It,Bt)||Bt==="key"||Bt==="__self"||Bt==="__source"||Bt==="ref"&&It.ref===void 0||(Mt[Bt]=It[Bt]);var Bt=arguments.length-2;if(Bt===1)Mt.children=Ot;else if(1<Bt){for(var jn=Array(Bt),oe=0;oe<Bt;oe++)jn[oe]=arguments[oe+2];Mt.children=jn}return U(Z.type,Ht,void 0,void 0,fe,Mt)},me.createContext=function(Z){return Z={$$typeof:A,_currentValue:Z,_currentValue2:Z,_threadCount:0,Provider:null,Consumer:null},Z.Provider=Z,Z.Consumer={$$typeof:d,_context:Z},Z},me.createElement=function(Z,It,Ot){var Mt,Ht={},fe=null;if(It!=null)for(Mt in It.key!==void 0&&(fe=""+It.key),It)Tt.call(It,Mt)&&Mt!=="key"&&Mt!=="__self"&&Mt!=="__source"&&(Ht[Mt]=It[Mt]);var Bt=arguments.length-2;if(Bt===1)Ht.children=Ot;else if(1<Bt){for(var jn=Array(Bt),oe=0;oe<Bt;oe++)jn[oe]=arguments[oe+2];Ht.children=jn}if(Z&&Z.defaultProps)for(Mt in Bt=Z.defaultProps,Bt)Ht[Mt]===void 0&&(Ht[Mt]=Bt[Mt]);return U(Z,fe,void 0,void 0,null,Ht)},me.createRef=function(){return{current:null}},me.forwardRef=function(Z){return{$$typeof:C,render:Z}},me.isValidElement=k,me.lazy=function(Z){return{$$typeof:v,_payload:{_status:-1,_result:Z},_init:xt}},me.memo=function(Z,It){return{$$typeof:x,type:Z,compare:It===void 0?null:It}},me.startTransition=function(Z){var It=mt.T,Ot={};mt.T=Ot;try{var Mt=Z(),Ht=mt.S;Ht!==null&&Ht(Ot,Mt),typeof Mt=="object"&&Mt!==null&&typeof Mt.then=="function"&&Mt.then($t,jt)}catch(fe){jt(fe)}finally{mt.T=It}},me.unstable_useCacheRefresh=function(){return mt.H.useCacheRefresh()},me.use=function(Z){return mt.H.use(Z)},me.useActionState=function(Z,It,Ot){return mt.H.useActionState(Z,It,Ot)},me.useCallback=function(Z,It){return mt.H.useCallback(Z,It)},me.useContext=function(Z){return mt.H.useContext(Z)},me.useDebugValue=function(){},me.useDeferredValue=function(Z,It){return mt.H.useDeferredValue(Z,It)},me.useEffect=function(Z,It,Ot){var Mt=mt.H;if(typeof Ot=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Mt.useEffect(Z,It)},me.useId=function(){return mt.H.useId()},me.useImperativeHandle=function(Z,It,Ot){return mt.H.useImperativeHandle(Z,It,Ot)},me.useInsertionEffect=function(Z,It){return mt.H.useInsertionEffect(Z,It)},me.useLayoutEffect=function(Z,It){return mt.H.useLayoutEffect(Z,It)},me.useMemo=function(Z,It){return mt.H.useMemo(Z,It)},me.useOptimistic=function(Z,It){return mt.H.useOptimistic(Z,It)},me.useReducer=function(Z,It,Ot){return mt.H.useReducer(Z,It,Ot)},me.useRef=function(Z){return mt.H.useRef(Z)},me.useState=function(Z){return mt.H.useState(Z)},me.useSyncExternalStore=function(Z,It,Ot){return mt.H.useSyncExternalStore(Z,It,Ot)},me.useTransition=function(){return mt.H.useTransition()},me.version="19.1.1",me}var r2;function l0(){return r2||(r2=1,m1.exports=Zw()),m1.exports}var at=l0();const xn=Jy(at);var p1={exports:{}},Hc={},y1={exports:{}},x1={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i2;function Jw(){return i2||(i2=1,function(i){function t(ut,xt){var jt=ut.length;ut.push(xt);t:for(;0<jt;){var $t=jt-1>>>1,Z=ut[$t];if(0<u(Z,xt))ut[$t]=xt,ut[jt]=Z,jt=$t;else break t}}function n(ut){return ut.length===0?null:ut[0]}function o(ut){if(ut.length===0)return null;var xt=ut[0],jt=ut.pop();if(jt!==xt){ut[0]=jt;t:for(var $t=0,Z=ut.length,It=Z>>>1;$t<It;){var Ot=2*($t+1)-1,Mt=ut[Ot],Ht=Ot+1,fe=ut[Ht];if(0>u(Mt,jt))Ht<Z&&0>u(fe,Mt)?(ut[$t]=fe,ut[Ht]=jt,$t=Ht):(ut[$t]=Mt,ut[Ot]=jt,$t=Ot);else if(Ht<Z&&0>u(fe,jt))ut[$t]=fe,ut[Ht]=jt,$t=Ht;else break t}}return xt}function u(ut,xt){var jt=ut.sortIndex-xt.sortIndex;return jt!==0?jt:ut.id-xt.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;i.unstable_now=function(){return d.now()}}else{var A=Date,C=A.now();i.unstable_now=function(){return A.now()-C}}var _=[],x=[],v=1,I=null,O=3,H=!1,X=!1,J=!1,q=!1,Q=typeof setTimeout=="function"?setTimeout:null,ft=typeof clearTimeout=="function"?clearTimeout:null,nt=typeof setImmediate<"u"?setImmediate:null;function _t(ut){for(var xt=n(x);xt!==null;){if(xt.callback===null)o(x);else if(xt.startTime<=ut)o(x),xt.sortIndex=xt.expirationTime,t(_,xt);else break;xt=n(x)}}function mt(ut){if(J=!1,_t(ut),!X)if(n(_)!==null)X=!0,Tt||(Tt=!0,K());else{var xt=n(x);xt!==null&&st(mt,xt.startTime-ut)}}var Tt=!1,U=-1,F=5,k=-1;function et(){return q?!0:!(i.unstable_now()-k<F)}function tt(){if(q=!1,Tt){var ut=i.unstable_now();k=ut;var xt=!0;try{t:{X=!1,J&&(J=!1,ft(U),U=-1),H=!0;var jt=O;try{e:{for(_t(ut),I=n(_);I!==null&&!(I.expirationTime>ut&&et());){var $t=I.callback;if(typeof $t=="function"){I.callback=null,O=I.priorityLevel;var Z=$t(I.expirationTime<=ut);if(ut=i.unstable_now(),typeof Z=="function"){I.callback=Z,_t(ut),xt=!0;break e}I===n(_)&&o(_),_t(ut)}else o(_);I=n(_)}if(I!==null)xt=!0;else{var It=n(x);It!==null&&st(mt,It.startTime-ut),xt=!1}}break t}finally{I=null,O=jt,H=!1}xt=void 0}}finally{xt?K():Tt=!1}}}var K;if(typeof nt=="function")K=function(){nt(tt)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,Pt=Y.port2;Y.port1.onmessage=tt,K=function(){Pt.postMessage(null)}}else K=function(){Q(tt,0)};function st(ut,xt){U=Q(function(){ut(i.unstable_now())},xt)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(ut){ut.callback=null},i.unstable_forceFrameRate=function(ut){0>ut||125<ut?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<ut?Math.floor(1e3/ut):5},i.unstable_getCurrentPriorityLevel=function(){return O},i.unstable_next=function(ut){switch(O){case 1:case 2:case 3:var xt=3;break;default:xt=O}var jt=O;O=xt;try{return ut()}finally{O=jt}},i.unstable_requestPaint=function(){q=!0},i.unstable_runWithPriority=function(ut,xt){switch(ut){case 1:case 2:case 3:case 4:case 5:break;default:ut=3}var jt=O;O=ut;try{return xt()}finally{O=jt}},i.unstable_scheduleCallback=function(ut,xt,jt){var $t=i.unstable_now();switch(typeof jt=="object"&&jt!==null?(jt=jt.delay,jt=typeof jt=="number"&&0<jt?$t+jt:$t):jt=$t,ut){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=jt+Z,ut={id:v++,callback:xt,priorityLevel:ut,startTime:jt,expirationTime:Z,sortIndex:-1},jt>$t?(ut.sortIndex=jt,t(x,ut),n(_)===null&&ut===n(x)&&(J?(ft(U),U=-1):J=!0,st(mt,jt-$t))):(ut.sortIndex=Z,t(_,ut),X||H||(X=!0,Tt||(Tt=!0,K()))),ut},i.unstable_shouldYield=et,i.unstable_wrapCallback=function(ut){var xt=O;return function(){var jt=O;O=xt;try{return ut.apply(this,arguments)}finally{O=jt}}}}(x1)),x1}var s2;function $w(){return s2||(s2=1,y1.exports=Jw()),y1.exports}var E1={exports:{}},Yr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a2;function t_(){if(a2)return Yr;a2=1;var i=l0();function t(_){var x="https://react.dev/errors/"+_;if(1<arguments.length){x+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)x+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+_+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var o={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},u=Symbol.for("react.portal");function d(_,x,v){var I=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:I==null?null:""+I,children:_,containerInfo:x,implementation:v}}var A=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function C(_,x){if(_==="font")return"";if(typeof x=="string")return x==="use-credentials"?x:""}return Yr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,Yr.createPortal=function(_,x){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x||x.nodeType!==1&&x.nodeType!==9&&x.nodeType!==11)throw Error(t(299));return d(_,x,null,v)},Yr.flushSync=function(_){var x=A.T,v=o.p;try{if(A.T=null,o.p=2,_)return _()}finally{A.T=x,o.p=v,o.d.f()}},Yr.preconnect=function(_,x){typeof _=="string"&&(x?(x=x.crossOrigin,x=typeof x=="string"?x==="use-credentials"?x:"":void 0):x=null,o.d.C(_,x))},Yr.prefetchDNS=function(_){typeof _=="string"&&o.d.D(_)},Yr.preinit=function(_,x){if(typeof _=="string"&&x&&typeof x.as=="string"){var v=x.as,I=C(v,x.crossOrigin),O=typeof x.integrity=="string"?x.integrity:void 0,H=typeof x.fetchPriority=="string"?x.fetchPriority:void 0;v==="style"?o.d.S(_,typeof x.precedence=="string"?x.precedence:void 0,{crossOrigin:I,integrity:O,fetchPriority:H}):v==="script"&&o.d.X(_,{crossOrigin:I,integrity:O,fetchPriority:H,nonce:typeof x.nonce=="string"?x.nonce:void 0})}},Yr.preinitModule=function(_,x){if(typeof _=="string")if(typeof x=="object"&&x!==null){if(x.as==null||x.as==="script"){var v=C(x.as,x.crossOrigin);o.d.M(_,{crossOrigin:v,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0})}}else x==null&&o.d.M(_)},Yr.preload=function(_,x){if(typeof _=="string"&&typeof x=="object"&&x!==null&&typeof x.as=="string"){var v=x.as,I=C(v,x.crossOrigin);o.d.L(_,v,{crossOrigin:I,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0,type:typeof x.type=="string"?x.type:void 0,fetchPriority:typeof x.fetchPriority=="string"?x.fetchPriority:void 0,referrerPolicy:typeof x.referrerPolicy=="string"?x.referrerPolicy:void 0,imageSrcSet:typeof x.imageSrcSet=="string"?x.imageSrcSet:void 0,imageSizes:typeof x.imageSizes=="string"?x.imageSizes:void 0,media:typeof x.media=="string"?x.media:void 0})}},Yr.preloadModule=function(_,x){if(typeof _=="string")if(x){var v=C(x.as,x.crossOrigin);o.d.m(_,{as:typeof x.as=="string"&&x.as!=="script"?x.as:void 0,crossOrigin:v,integrity:typeof x.integrity=="string"?x.integrity:void 0})}else o.d.m(_)},Yr.requestFormReset=function(_){o.d.r(_)},Yr.unstable_batchedUpdates=function(_,x){return _(x)},Yr.useFormState=function(_,x,v){return A.H.useFormState(_,x,v)},Yr.useFormStatus=function(){return A.H.useHostTransitionStatus()},Yr.version="19.1.1",Yr}var o2;function e_(){if(o2)return E1.exports;o2=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),E1.exports=t_(),E1.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l2;function n_(){if(l2)return Hc;l2=1;var i=$w(),t=l0(),n=e_();function o(e){var s="https://react.dev/errors/"+e;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)s+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+e+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function d(e){var s=e,c=e;if(e.alternate)for(;s.return;)s=s.return;else{e=s;do s=e,(s.flags&4098)!==0&&(c=s.return),e=s.return;while(e)}return s.tag===3?c:null}function A(e){if(e.tag===13){var s=e.memoizedState;if(s===null&&(e=e.alternate,e!==null&&(s=e.memoizedState)),s!==null)return s.dehydrated}return null}function C(e){if(d(e)!==e)throw Error(o(188))}function _(e){var s=e.alternate;if(!s){if(s=d(e),s===null)throw Error(o(188));return s!==e?null:e}for(var c=e,g=s;;){var E=c.return;if(E===null)break;var T=E.alternate;if(T===null){if(g=E.return,g!==null){c=g;continue}break}if(E.child===T.child){for(T=E.child;T;){if(T===c)return C(E),e;if(T===g)return C(E),s;T=T.sibling}throw Error(o(188))}if(c.return!==g.return)c=E,g=T;else{for(var M=!1,V=E.child;V;){if(V===c){M=!0,c=E,g=T;break}if(V===g){M=!0,g=E,c=T;break}V=V.sibling}if(!M){for(V=T.child;V;){if(V===c){M=!0,c=T,g=E;break}if(V===g){M=!0,g=T,c=E;break}V=V.sibling}if(!M)throw Error(o(189))}}if(c.alternate!==g)throw Error(o(190))}if(c.tag!==3)throw Error(o(188));return c.stateNode.current===c?e:s}function x(e){var s=e.tag;if(s===5||s===26||s===27||s===6)return e;for(e=e.child;e!==null;){if(s=x(e),s!==null)return s;e=e.sibling}return null}var v=Object.assign,I=Symbol.for("react.element"),O=Symbol.for("react.transitional.element"),H=Symbol.for("react.portal"),X=Symbol.for("react.fragment"),J=Symbol.for("react.strict_mode"),q=Symbol.for("react.profiler"),Q=Symbol.for("react.provider"),ft=Symbol.for("react.consumer"),nt=Symbol.for("react.context"),_t=Symbol.for("react.forward_ref"),mt=Symbol.for("react.suspense"),Tt=Symbol.for("react.suspense_list"),U=Symbol.for("react.memo"),F=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),et=Symbol.for("react.memo_cache_sentinel"),tt=Symbol.iterator;function K(e){return e===null||typeof e!="object"?null:(e=tt&&e[tt]||e["@@iterator"],typeof e=="function"?e:null)}var Y=Symbol.for("react.client.reference");function Pt(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Y?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case X:return"Fragment";case q:return"Profiler";case J:return"StrictMode";case mt:return"Suspense";case Tt:return"SuspenseList";case k:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case H:return"Portal";case nt:return(e.displayName||"Context")+".Provider";case ft:return(e._context.displayName||"Context")+".Consumer";case _t:var s=e.render;return e=e.displayName,e||(e=s.displayName||s.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case U:return s=e.displayName||null,s!==null?s:Pt(e.type)||"Memo";case F:s=e._payload,e=e._init;try{return Pt(e(s))}catch{}}return null}var st=Array.isArray,ut=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,xt=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,jt={pending:!1,data:null,method:null,action:null},$t=[],Z=-1;function It(e){return{current:e}}function Ot(e){0>Z||(e.current=$t[Z],$t[Z]=null,Z--)}function Mt(e,s){Z++,$t[Z]=e.current,e.current=s}var Ht=It(null),fe=It(null),Bt=It(null),jn=It(null);function oe(e,s){switch(Mt(Bt,s),Mt(fe,e),Mt(Ht,null),s.nodeType){case 9:case 11:e=(e=s.documentElement)&&(e=e.namespaceURI)?Ip(e):0;break;default:if(e=s.tagName,s=s.namespaceURI)s=Ip(s),e=Rp(s,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Ot(Ht),Mt(Ht,e)}function Pr(){Ot(Ht),Ot(fe),Ot(Bt)}function ei(e){e.memoizedState!==null&&Mt(jn,e);var s=Ht.current,c=Rp(s,e.type);s!==c&&(Mt(fe,e),Mt(Ht,c))}function In(e){fe.current===e&&(Ot(Ht),Ot(fe)),jn.current===e&&(Ot(jn),kc._currentValue=jt)}var Vi=Object.prototype.hasOwnProperty,Ee=i.unstable_scheduleCallback,ni=i.unstable_cancelCallback,kr=i.unstable_shouldYield,As=i.unstable_requestPaint,Qe=i.unstable_now,We=i.unstable_getCurrentPriorityLevel,Ae=i.unstable_ImmediatePriority,is=i.unstable_UserBlockingPriority,qt=i.unstable_NormalPriority,wa=i.unstable_LowPriority,qs=i.unstable_IdlePriority,Kr=i.log,_a=i.unstable_setDisableYieldValue,Le=null,Fe=null;function zn(e){if(typeof Kr=="function"&&_a(e),Fe&&typeof Fe.setStrictMode=="function")try{Fe.setStrictMode(Le,e)}catch{}}var je=Math.clz32?Math.clz32:Ys,Ao=Math.log,Ta=Math.LN2;function Ys(e){return e>>>=0,e===0?32:31-(Ao(e)/Ta|0)|0}var sn=256,Vt=4194304;function Ye(e){var s=e&42;if(s!==0)return s;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Be(e,s,c){var g=e.pendingLanes;if(g===0)return 0;var E=0,T=e.suspendedLanes,M=e.pingedLanes;e=e.warmLanes;var V=g&134217727;return V!==0?(g=V&~T,g!==0?E=Ye(g):(M&=V,M!==0?E=Ye(M):c||(c=V&~e,c!==0&&(E=Ye(c))))):(V=g&~T,V!==0?E=Ye(V):M!==0?E=Ye(M):c||(c=g&~e,c!==0&&(E=Ye(c)))),E===0?0:s!==0&&s!==E&&(s&T)===0&&(T=E&-E,c=s&-s,T>=c||T===32&&(c&4194048)!==0)?s:E}function Ke(e,s){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&s)===0}function ss(e,s){switch(e){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xs(){var e=sn;return sn<<=1,(sn&4194048)===0&&(sn=256),e}function Ca(){var e=Vt;return Vt<<=1,(Vt&62914560)===0&&(Vt=4194304),e}function ge(e){for(var s=[],c=0;31>c;c++)s.push(e);return s}function Tr(e,s){e.pendingLanes|=s,s!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Sa(e,s,c,g,E,T){var M=e.pendingLanes;e.pendingLanes=c,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=c,e.entangledLanes&=c,e.errorRecoveryDisabledLanes&=c,e.shellSuspendCounter=0;var V=e.entanglements,W=e.expirationTimes,gt=e.hiddenUpdates;for(c=M&~c;0<c;){var Ct=31-je(c),Rt=1<<Ct;V[Ct]=0,W[Ct]=-1;var pt=gt[Ct];if(pt!==null)for(gt[Ct]=null,Ct=0;Ct<pt.length;Ct++){var At=pt[Ct];At!==null&&(At.lane&=-536870913)}c&=~Rt}g!==0&&yi(e,g,0),T!==0&&E===0&&e.tag!==0&&(e.suspendedLanes|=T&~(M&~s))}function yi(e,s,c){e.pendingLanes|=s,e.suspendedLanes&=~s;var g=31-je(s);e.entangledLanes|=s,e.entanglements[g]=e.entanglements[g]|1073741824|c&4194090}function Cr(e,s){var c=e.entangledLanes|=s;for(e=e.entanglements;c;){var g=31-je(c),E=1<<g;E&s|e[g]&s&&(e[g]|=s),c&=~E}}function Ui(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Vn(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Zr(){var e=xt.p;return e!==0?e:(e=window.event,e===void 0?32:Qp(e.type))}function Qs(e,s){var c=xt.p;try{return xt.p=e,s()}finally{xt.p=c}}var Oe=Math.random().toString(36).slice(2),Kn="__reactFiber$"+Oe,an="__reactProps$"+Oe,Vr="__reactContainer$"+Oe,ir="__reactEvents$"+Oe,as="__reactListeners$"+Oe,Zn="__reactHandles$"+Oe,zt="__reactResources$"+Oe,ri="__reactMarker$"+Oe;function Fi(e){delete e[Kn],delete e[an],delete e[ir],delete e[as],delete e[Zn]}function Rn(e){var s=e[Kn];if(s)return s;for(var c=e.parentNode;c;){if(s=c[Vr]||c[Kn]){if(c=s.alternate,s.child!==null||c!==null&&c.child!==null)for(e=Op(e);e!==null;){if(c=e[Kn])return c;e=Op(e)}return s}e=c,c=e.parentNode}return null}function Sr(e){if(e=e[Kn]||e[Vr]){var s=e.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return e}return null}function Jr(e){var s=e.tag;if(s===5||s===26||s===27||s===6)return e.stateNode;throw Error(o(33))}function sr(e){var s=e[zt];return s||(s=e[zt]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function ze(e){e[ri]=!0}var wo=new Set,va={};function Hn(e,s){wn(e,s),wn(e+"Capture",s)}function wn(e,s){for(va[e]=s,e=0;e<s.length;e++)wo.add(s[e])}var $e=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),_o={},Ur={};function ba(e){return Vi.call(Ur,e)?!0:Vi.call(_o,e)?!1:$e.test(e)?Ur[e]=!0:(_o[e]=!0,!1)}function vt(e,s,c){if(ba(s))if(c===null)e.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":e.removeAttribute(s);return;case"boolean":var g=s.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){e.removeAttribute(s);return}}e.setAttribute(s,""+c)}}function ji(e,s,c){if(c===null)e.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(s);return}e.setAttribute(s,""+c)}}function pe(e,s,c,g){if(g===null)e.removeAttribute(c);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(c);return}e.setAttributeNS(s,c,""+g)}}var ii,Jo;function ye(e){if(ii===void 0)try{throw Error()}catch(c){var s=c.stack.trim().match(/\n( *(at )?)/);ii=s&&s[1]||"",Jo=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ii+e+Jo}var _e=!1;function de(e,s){if(!e||_e)return"";_e=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(s){var Rt=function(){throw Error()};if(Object.defineProperty(Rt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Rt,[])}catch(At){var pt=At}Reflect.construct(e,[],Rt)}else{try{Rt.call()}catch(At){pt=At}e.call(Rt.prototype)}}else{try{throw Error()}catch(At){pt=At}(Rt=e())&&typeof Rt.catch=="function"&&Rt.catch(function(){})}}catch(At){if(At&&pt&&typeof At.stack=="string")return[At.stack,pt.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var E=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");E&&E.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var T=g.DetermineComponentFrameRoot(),M=T[0],V=T[1];if(M&&V){var W=M.split(`
`),gt=V.split(`
`);for(E=g=0;g<W.length&&!W[g].includes("DetermineComponentFrameRoot");)g++;for(;E<gt.length&&!gt[E].includes("DetermineComponentFrameRoot");)E++;if(g===W.length||E===gt.length)for(g=W.length-1,E=gt.length-1;1<=g&&0<=E&&W[g]!==gt[E];)E--;for(;1<=g&&0<=E;g--,E--)if(W[g]!==gt[E]){if(g!==1||E!==1)do if(g--,E--,0>E||W[g]!==gt[E]){var Ct=`
`+W[g].replace(" at new "," at ");return e.displayName&&Ct.includes("<anonymous>")&&(Ct=Ct.replace("<anonymous>",e.displayName)),Ct}while(1<=g&&0<=E);break}}}finally{_e=!1,Error.prepareStackTrace=c}return(c=e?e.displayName||e.name:"")?ye(c):""}function Ws(e){switch(e.tag){case 26:case 27:case 5:return ye(e.type);case 16:return ye("Lazy");case 13:return ye("Suspense");case 19:return ye("SuspenseList");case 0:case 15:return de(e.type,!1);case 11:return de(e.type.render,!1);case 1:return de(e.type,!0);case 31:return ye("Activity");default:return""}}function ws(e){try{var s="";do s+=Ws(e),e=e.return;while(e);return s}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}function fr(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function _n(e){var s=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function zi(e){var s=_n(e)?"checked":"value",c=Object.getOwnPropertyDescriptor(e.constructor.prototype,s),g=""+e[s];if(!e.hasOwnProperty(s)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var E=c.get,T=c.set;return Object.defineProperty(e,s,{configurable:!0,get:function(){return E.call(this)},set:function(M){g=""+M,T.call(this,M)}}),Object.defineProperty(e,s,{enumerable:c.enumerable}),{getValue:function(){return g},setValue:function(M){g=""+M},stopTracking:function(){e._valueTracker=null,delete e[s]}}}}function Ia(e){e._valueTracker||(e._valueTracker=zi(e))}function un(e){if(!e)return!1;var s=e._valueTracker;if(!s)return!0;var c=s.getValue(),g="";return e&&(g=_n(e)?e.checked?"true":"false":e.value),e=g,e!==c?(s.setValue(e),!0):!1}function Fr(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var nc=/[\n"\\]/g;function hn(e){return e.replace(nc,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function xe(e,s,c,g,E,T,M,V){e.name="",M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?e.type=M:e.removeAttribute("type"),s!=null?M==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+fr(s)):e.value!==""+fr(s)&&(e.value=""+fr(s)):M!=="submit"&&M!=="reset"||e.removeAttribute("value"),s!=null?lt(e,M,fr(s)):c!=null?lt(e,M,fr(c)):g!=null&&e.removeAttribute("value"),E==null&&T!=null&&(e.defaultChecked=!!T),E!=null&&(e.checked=E&&typeof E!="function"&&typeof E!="symbol"),V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"?e.name=""+fr(V):e.removeAttribute("name")}function Nn(e,s,c,g,E,T,M,V){if(T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(e.type=T),s!=null||c!=null){if(!(T!=="submit"&&T!=="reset"||s!=null))return;c=c!=null?""+fr(c):"",s=s!=null?""+fr(s):c,V||s===e.value||(e.value=s),e.defaultValue=s}g=g??E,g=typeof g!="function"&&typeof g!="symbol"&&!!g,e.checked=V?e.checked:!!g,e.defaultChecked=!!g,M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"&&(e.name=M)}function lt(e,s,c){s==="number"&&Fr(e.ownerDocument)===e||e.defaultValue===""+c||(e.defaultValue=""+c)}function z(e,s,c,g){if(e=e.options,s){s={};for(var E=0;E<c.length;E++)s["$"+c[E]]=!0;for(c=0;c<e.length;c++)E=s.hasOwnProperty("$"+e[c].value),e[c].selected!==E&&(e[c].selected=E),E&&g&&(e[c].defaultSelected=!0)}else{for(c=""+fr(c),s=null,E=0;E<e.length;E++){if(e[E].value===c){e[E].selected=!0,g&&(e[E].defaultSelected=!0);return}s!==null||e[E].disabled||(s=e[E])}s!==null&&(s.selected=!0)}}function Ft(e,s,c){if(s!=null&&(s=""+fr(s),s!==e.value&&(e.value=s),c==null)){e.defaultValue!==s&&(e.defaultValue=s);return}e.defaultValue=c!=null?""+fr(c):""}function pn(e,s,c,g){if(s==null){if(g!=null){if(c!=null)throw Error(o(92));if(st(g)){if(1<g.length)throw Error(o(93));g=g[0]}c=g}c==null&&(c=""),s=c}c=fr(s),e.defaultValue=c,g=e.textContent,g===c&&g!==""&&g!==null&&(e.value=g)}function Tn(e,s){if(s){var c=e.firstChild;if(c&&c===e.lastChild&&c.nodeType===3){c.nodeValue=s;return}}e.textContent=s}var Ks=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ra(e,s,c){var g=s.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?g?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="":g?e.setProperty(s,c):typeof c!="number"||c===0||Ks.has(s)?s==="float"?e.cssFloat=c:e[s]=(""+c).trim():e[s]=c+"px"}function xr(e,s,c){if(s!=null&&typeof s!="object")throw Error(o(62));if(e=e.style,c!=null){for(var g in c)!c.hasOwnProperty(g)||s!=null&&s.hasOwnProperty(g)||(g.indexOf("--")===0?e.setProperty(g,""):g==="float"?e.cssFloat="":e[g]="");for(var E in s)g=s[E],s.hasOwnProperty(E)&&c[E]!==g&&Ra(e,E,g)}else for(var T in s)s.hasOwnProperty(T)&&Ra(e,T,s[T])}function Wt(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fn=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),$o=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Na(e){return $o.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var xi=null;function vr(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ei=null,os=null;function Dn(e){var s=Sr(e);if(s&&(e=s.stateNode)){var c=e[an]||null;t:switch(e=s.stateNode,s.type){case"input":if(xe(e,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),s=c.name,c.type==="radio"&&s!=null){for(c=e;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+hn(""+s)+'"][type="radio"]'),s=0;s<c.length;s++){var g=c[s];if(g!==e&&g.form===e.form){var E=g[an]||null;if(!E)throw Error(o(90));xe(g,E.value,E.defaultValue,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name)}}for(s=0;s<c.length;s++)g=c[s],g.form===e.form&&un(g)}break t;case"textarea":Ft(e,c.value,c.defaultValue);break t;case"select":s=c.value,s!=null&&z(e,!!c.multiple,s,!1)}}}var jr=!1;function Ai(e,s,c){if(jr)return e(s,c);jr=!0;try{var g=e(s);return g}finally{if(jr=!1,(Ei!==null||os!==null)&&(th(),Ei&&(s=Ei,e=os,os=Ei=null,Dn(s),e)))for(s=0;s<e.length;s++)Dn(e[s])}}function Kt(e,s){var c=e.stateNode;if(c===null)return null;var g=c[an]||null;if(g===null)return null;c=g[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(e=e.type,g=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!g;break t;default:e=!1}if(e)return null;if(c&&typeof c!="function")throw Error(o(231,s,typeof c));return c}var wi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ee=!1;if(wi)try{var Cn={};Object.defineProperty(Cn,"passive",{get:function(){ee=!0}}),window.addEventListener("test",Cn,Cn),window.removeEventListener("test",Cn,Cn)}catch{ee=!1}var Hi=null,Gi=null,qi=null;function _i(){if(qi)return qi;var e,s=Gi,c=s.length,g,E="value"in Hi?Hi.value:Hi.textContent,T=E.length;for(e=0;e<c&&s[e]===E[e];e++);var M=c-e;for(g=1;g<=M&&s[c-g]===E[T-g];g++);return qi=E.slice(e,1<g?1-g:void 0)}function Yi(e){var s=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&s===13&&(e=13)):e=s,e===10&&(e=13),32<=e||e===13?e:0}function zr(){return!0}function ls(){return!1}function Mn(e){function s(c,g,E,T,M){this._reactName=c,this._targetInst=E,this.type=g,this.nativeEvent=T,this.target=M,this.currentTarget=null;for(var V in e)e.hasOwnProperty(V)&&(c=e[V],this[V]=c?c(T):T[V]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?zr:ls,this.isPropagationStopped=ls,this}return v(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=zr)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=zr)},persist:function(){},isPersistent:zr}),s}var Ue={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xi=Mn(Ue),Ti=v({},Ue,{view:0,detail:0}),dr=Mn(Ti),Zs,Js,Ci,$s=v({},Ti,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:us,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ci&&(Ci&&e.type==="mousemove"?(Zs=e.screenX-Ci.screenX,Js=e.screenY-Ci.screenY):Js=Zs=0,Ci=e),Zs)},movementY:function(e){return"movementY"in e?e.movementY:Js}}),si=Mn($s),tl=v({},$s,{dataTransfer:0}),He=Mn(tl),_s=v({},Ti,{relatedTarget:0}),cs=Mn(_s),ai=v({},Ue,{animationName:0,elapsedTime:0,pseudoElement:0}),Da=Mn(ai),Et=v({},Ue,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ae=Mn(Et),Jn=v({},Ue,{data:0}),Ts=Mn(Jn),Cs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},el={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function To(e){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(e):(e=nl[e])?!!s[e]:!1}function us(){return To}var On=v({},Ti,{key:function(e){if(e.key){var s=Cs[e.key]||e.key;if(s!=="Unidentified")return s}return e.type==="keypress"?(e=Yi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?el[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:us,charCode:function(e){return e.type==="keypress"?Yi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Yi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Ss=Mn(On),dn=v({},$s,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vs=Mn(dn),br=v({},Ti,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:us}),Ge=Mn(br),Jt=v({},Ue,{propertyName:0,elapsedTime:0,pseudoElement:0}),rl=Mn(Jt),Ze=v({},$s,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),oi=Mn(Ze),Gn=v({},Ue,{newState:0,oldState:0}),il=Mn(Gn),$r=[9,13,27,32],li=wi&&"CompositionEvent"in window,y=null;wi&&"documentMode"in document&&(y=document.documentMode);var b=wi&&"TextEvent"in window&&!y,N=wi&&(!li||y&&8<y&&11>=y),j=" ",ct=!1;function wt(e,s){switch(e){case"keyup":return $r.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ut(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var be=!1;function Sn(e,s){switch(e){case"compositionend":return Ut(s);case"keypress":return s.which!==32?null:(ct=!0,j);case"textInput":return e=s.data,e===j&&ct?null:e;default:return null}}function Ie(e,s){if(be)return e==="compositionend"||!li&&wt(e,s)?(e=_i(),qi=Gi=Hi=null,be=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return N&&s.locale!=="ko"?null:s.data;default:return null}}var gn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ln(e){var s=e&&e.nodeName&&e.nodeName.toLowerCase();return s==="input"?!!gn[e.type]:s==="textarea"}function qn(e,s,c,g){Ei?os?os.push(g):os=[g]:Ei=g,s=ah(s,"onChange"),0<s.length&&(c=new Xi("onChange","change",null,c,g),e.push({event:c,listeners:s}))}var ar=null,$n=null;function Co(e){Tp(e,0)}function Ma(e){var s=Jr(e);if(un(s))return e}function Au(e,s){if(e==="change")return s}var rc=!1;if(wi){var ci;if(wi){var ic="oninput"in document;if(!ic){var sl=document.createElement("div");sl.setAttribute("oninput","return;"),ic=typeof sl.oninput=="function"}ci=ic}else ci=!1;rc=ci&&(!document.documentMode||9<document.documentMode)}function Oa(){ar&&(ar.detachEvent("onpropertychange",Re),$n=ar=null)}function Re(e){if(e.propertyName==="value"&&Ma($n)){var s=[];qn(s,$n,e,vr(e)),Ai(Co,s)}}function al(e,s,c){e==="focusin"?(Oa(),ar=s,$n=c,ar.attachEvent("onpropertychange",Re)):e==="focusout"&&Oa()}function L(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ma($n)}function r(e,s){if(e==="click")return Ma(s)}function a(e,s){if(e==="input"||e==="change")return Ma(s)}function l(e,s){return e===s&&(e!==0||1/e===1/s)||e!==e&&s!==s}var h=typeof Object.is=="function"?Object.is:l;function f(e,s){if(h(e,s))return!0;if(typeof e!="object"||e===null||typeof s!="object"||s===null)return!1;var c=Object.keys(e),g=Object.keys(s);if(c.length!==g.length)return!1;for(g=0;g<c.length;g++){var E=c[g];if(!Vi.call(s,E)||!h(e[E],s[E]))return!1}return!0}function m(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function p(e,s){var c=m(e);e=0;for(var g;c;){if(c.nodeType===3){if(g=e+c.textContent.length,e<=s&&g>=s)return{node:c,offset:s-e};e=g}t:{for(;c;){if(c.nextSibling){c=c.nextSibling;break t}c=c.parentNode}c=void 0}c=m(c)}}function w(e,s){return e&&s?e===s?!0:e&&e.nodeType===3?!1:s&&s.nodeType===3?w(e,s.parentNode):"contains"in e?e.contains(s):e.compareDocumentPosition?!!(e.compareDocumentPosition(s)&16):!1:!1}function S(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var s=Fr(e.document);s instanceof e.HTMLIFrameElement;){try{var c=typeof s.contentWindow.location.href=="string"}catch{c=!1}if(c)e=s.contentWindow;else break;s=Fr(e.document)}return s}function R(e){var s=e&&e.nodeName&&e.nodeName.toLowerCase();return s&&(s==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||s==="textarea"||e.contentEditable==="true")}var B=wi&&"documentMode"in document&&11>=document.documentMode,P=null,G=null,$=null,rt=!1;function ht(e,s,c){var g=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;rt||P==null||P!==Fr(g)||(g=P,"selectionStart"in g&&R(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),$&&f($,g)||($=g,g=ah(G,"onSelect"),0<g.length&&(s=new Xi("onSelect","select",null,s,c),e.push({event:s,listeners:g}),s.target=P)))}function yt(e,s){var c={};return c[e.toLowerCase()]=s.toLowerCase(),c["Webkit"+e]="webkit"+s,c["Moz"+e]="moz"+s,c}var Lt={animationend:yt("Animation","AnimationEnd"),animationiteration:yt("Animation","AnimationIteration"),animationstart:yt("Animation","AnimationStart"),transitionrun:yt("Transition","TransitionRun"),transitionstart:yt("Transition","TransitionStart"),transitioncancel:yt("Transition","TransitionCancel"),transitionend:yt("Transition","TransitionEnd")},kt={},Dt={};wi&&(Dt=document.createElement("div").style,"AnimationEvent"in window||(delete Lt.animationend.animation,delete Lt.animationiteration.animation,delete Lt.animationstart.animation),"TransitionEvent"in window||delete Lt.transitionend.transition);function ue(e){if(kt[e])return kt[e];if(!Lt[e])return e;var s=Lt[e],c;for(c in s)if(s.hasOwnProperty(c)&&c in Dt)return kt[e]=s[c];return e}var le=ue("animationend"),Ir=ue("animationiteration"),ui=ue("animationstart"),Hr=ue("transitionrun"),tn=ue("transitionstart"),gr=ue("transitioncancel"),Gr=ue("transitionend"),ta=new Map,bs="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");bs.push("scrollEnd");function Si(e,s){ta.set(e,s),Hn(s,[e])}var wu=new WeakMap;function Qi(e,s){if(typeof e=="object"&&e!==null){var c=wu.get(e);return c!==void 0?c:(s={value:e,source:s,stack:ws(s)},wu.set(e,s),s)}return{value:e,source:s,stack:ws(s)}}var Wi=[],ol=0,Df=0;function _u(){for(var e=ol,s=Df=ol=0;s<e;){var c=Wi[s];Wi[s++]=null;var g=Wi[s];Wi[s++]=null;var E=Wi[s];Wi[s++]=null;var T=Wi[s];if(Wi[s++]=null,g!==null&&E!==null){var M=g.pending;M===null?E.next=E:(E.next=M.next,M.next=E),g.pending=E}T!==0&&og(c,E,T)}}function Tu(e,s,c,g){Wi[ol++]=e,Wi[ol++]=s,Wi[ol++]=c,Wi[ol++]=g,Df|=g,e.lanes|=g,e=e.alternate,e!==null&&(e.lanes|=g)}function Mf(e,s,c,g){return Tu(e,s,c,g),Cu(e)}function ll(e,s){return Tu(e,null,null,s),Cu(e)}function og(e,s,c){e.lanes|=c;var g=e.alternate;g!==null&&(g.lanes|=c);for(var E=!1,T=e.return;T!==null;)T.childLanes|=c,g=T.alternate,g!==null&&(g.childLanes|=c),T.tag===22&&(e=T.stateNode,e===null||e._visibility&1||(E=!0)),e=T,T=T.return;return e.tag===3?(T=e.stateNode,E&&s!==null&&(E=31-je(c),e=T.hiddenUpdates,g=e[E],g===null?e[E]=[s]:g.push(s),s.lane=c|536870912),T):null}function Cu(e){if(50<Rc)throw Rc=0,Vd=null,Error(o(185));for(var s=e.return;s!==null;)e=s,s=e.return;return e.tag===3?e.stateNode:null}var cl={};function OA(e,s,c,g){this.tag=e,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vi(e,s,c,g){return new OA(e,s,c,g)}function Of(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ea(e,s){var c=e.alternate;return c===null?(c=vi(e.tag,s,e.key,e.mode),c.elementType=e.elementType,c.type=e.type,c.stateNode=e.stateNode,c.alternate=e,e.alternate=c):(c.pendingProps=s,c.type=e.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=e.flags&65011712,c.childLanes=e.childLanes,c.lanes=e.lanes,c.child=e.child,c.memoizedProps=e.memoizedProps,c.memoizedState=e.memoizedState,c.updateQueue=e.updateQueue,s=e.dependencies,c.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},c.sibling=e.sibling,c.index=e.index,c.ref=e.ref,c.refCleanup=e.refCleanup,c}function lg(e,s){e.flags&=65011714;var c=e.alternate;return c===null?(e.childLanes=0,e.lanes=s,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=c.childLanes,e.lanes=c.lanes,e.child=c.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=c.memoizedProps,e.memoizedState=c.memoizedState,e.updateQueue=c.updateQueue,e.type=c.type,s=c.dependencies,e.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),e}function Su(e,s,c,g,E,T){var M=0;if(g=e,typeof e=="function")Of(e)&&(M=1);else if(typeof e=="string")M=Bw(e,c,Ht.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case k:return e=vi(31,c,s,E),e.elementType=k,e.lanes=T,e;case X:return So(c.children,E,T,s);case J:M=8,E|=24;break;case q:return e=vi(12,c,s,E|2),e.elementType=q,e.lanes=T,e;case mt:return e=vi(13,c,s,E),e.elementType=mt,e.lanes=T,e;case Tt:return e=vi(19,c,s,E),e.elementType=Tt,e.lanes=T,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Q:case nt:M=10;break t;case ft:M=9;break t;case _t:M=11;break t;case U:M=14;break t;case F:M=16,g=null;break t}M=29,c=Error(o(130,e===null?"null":typeof e,"")),g=null}return s=vi(M,c,s,E),s.elementType=e,s.type=g,s.lanes=T,s}function So(e,s,c,g){return e=vi(7,e,g,s),e.lanes=c,e}function Lf(e,s,c){return e=vi(6,e,null,s),e.lanes=c,e}function Bf(e,s,c){return s=vi(4,e.children!==null?e.children:[],e.key,s),s.lanes=c,s.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},s}var ul=[],hl=0,vu=null,bu=0,Ki=[],Zi=0,vo=null,na=1,ra="";function bo(e,s){ul[hl++]=bu,ul[hl++]=vu,vu=e,bu=s}function cg(e,s,c){Ki[Zi++]=na,Ki[Zi++]=ra,Ki[Zi++]=vo,vo=e;var g=na;e=ra;var E=32-je(g)-1;g&=~(1<<E),c+=1;var T=32-je(s)+E;if(30<T){var M=E-E%5;T=(g&(1<<M)-1).toString(32),g>>=M,E-=M,na=1<<32-je(s)+E|c<<E|g,ra=T+e}else na=1<<T|c<<E|g,ra=e}function Pf(e){e.return!==null&&(bo(e,1),cg(e,1,0))}function kf(e){for(;e===vu;)vu=ul[--hl],ul[hl]=null,bu=ul[--hl],ul[hl]=null;for(;e===vo;)vo=Ki[--Zi],Ki[Zi]=null,ra=Ki[--Zi],Ki[Zi]=null,na=Ki[--Zi],Ki[Zi]=null}var ti=null,Yn=null,Xe=!1,Io=null,Is=!1,Vf=Error(o(519));function Ro(e){var s=Error(o(418,""));throw oc(Qi(s,e)),Vf}function ug(e){var s=e.stateNode,c=e.type,g=e.memoizedProps;switch(s[Kn]=e,s[an]=g,c){case"dialog":Se("cancel",s),Se("close",s);break;case"iframe":case"object":case"embed":Se("load",s);break;case"video":case"audio":for(c=0;c<Dc.length;c++)Se(Dc[c],s);break;case"source":Se("error",s);break;case"img":case"image":case"link":Se("error",s),Se("load",s);break;case"details":Se("toggle",s);break;case"input":Se("invalid",s),Nn(s,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0),Ia(s);break;case"select":Se("invalid",s);break;case"textarea":Se("invalid",s),pn(s,g.value,g.defaultValue,g.children),Ia(s)}c=g.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||s.textContent===""+c||g.suppressHydrationWarning===!0||bp(s.textContent,c)?(g.popover!=null&&(Se("beforetoggle",s),Se("toggle",s)),g.onScroll!=null&&Se("scroll",s),g.onScrollEnd!=null&&Se("scrollend",s),g.onClick!=null&&(s.onclick=oh),s=!0):s=!1,s||Ro(e)}function hg(e){for(ti=e.return;ti;)switch(ti.tag){case 5:case 13:Is=!1;return;case 27:case 3:Is=!0;return;default:ti=ti.return}}function sc(e){if(e!==ti)return!1;if(!Xe)return hg(e),Xe=!0,!1;var s=e.tag,c;if((c=s!==3&&s!==27)&&((c=s===5)&&(c=e.type,c=!(c!=="form"&&c!=="button")||t1(e.type,e.memoizedProps)),c=!c),c&&Yn&&Ro(e),hg(e),s===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));t:{for(e=e.nextSibling,s=0;e;){if(e.nodeType===8)if(c=e.data,c==="/$"){if(s===0){Yn=fs(e.nextSibling);break t}s--}else c!=="$"&&c!=="$!"&&c!=="$?"||s++;e=e.nextSibling}Yn=null}}else s===27?(s=Yn,Wa(e.type)?(e=i1,i1=null,Yn=e):Yn=s):Yn=ti?fs(e.stateNode.nextSibling):null;return!0}function ac(){Yn=ti=null,Xe=!1}function fg(){var e=Io;return e!==null&&(di===null?di=e:di.push.apply(di,e),Io=null),e}function oc(e){Io===null?Io=[e]:Io.push(e)}var Uf=It(null),No=null,ia=null;function La(e,s,c){Mt(Uf,s._currentValue),s._currentValue=c}function sa(e){e._currentValue=Uf.current,Ot(Uf)}function Ff(e,s,c){for(;e!==null;){var g=e.alternate;if((e.childLanes&s)!==s?(e.childLanes|=s,g!==null&&(g.childLanes|=s)):g!==null&&(g.childLanes&s)!==s&&(g.childLanes|=s),e===c)break;e=e.return}}function jf(e,s,c,g){var E=e.child;for(E!==null&&(E.return=e);E!==null;){var T=E.dependencies;if(T!==null){var M=E.child;T=T.firstContext;t:for(;T!==null;){var V=T;T=E;for(var W=0;W<s.length;W++)if(V.context===s[W]){T.lanes|=c,V=T.alternate,V!==null&&(V.lanes|=c),Ff(T.return,c,e),g||(M=null);break t}T=V.next}}else if(E.tag===18){if(M=E.return,M===null)throw Error(o(341));M.lanes|=c,T=M.alternate,T!==null&&(T.lanes|=c),Ff(M,c,e),M=null}else M=E.child;if(M!==null)M.return=E;else for(M=E;M!==null;){if(M===e){M=null;break}if(E=M.sibling,E!==null){E.return=M.return,M=E;break}M=M.return}E=M}}function lc(e,s,c,g){e=null;for(var E=s,T=!1;E!==null;){if(!T){if((E.flags&524288)!==0)T=!0;else if((E.flags&262144)!==0)break}if(E.tag===10){var M=E.alternate;if(M===null)throw Error(o(387));if(M=M.memoizedProps,M!==null){var V=E.type;h(E.pendingProps.value,M.value)||(e!==null?e.push(V):e=[V])}}else if(E===jn.current){if(M=E.alternate,M===null)throw Error(o(387));M.memoizedState.memoizedState!==E.memoizedState.memoizedState&&(e!==null?e.push(kc):e=[kc])}E=E.return}e!==null&&jf(s,e,c,g),s.flags|=262144}function Iu(e){for(e=e.firstContext;e!==null;){if(!h(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Do(e){No=e,ia=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function qr(e){return dg(No,e)}function Ru(e,s){return No===null&&Do(e),dg(e,s)}function dg(e,s){var c=s._currentValue;if(s={context:s,memoizedValue:c,next:null},ia===null){if(e===null)throw Error(o(308));ia=s,e.dependencies={lanes:0,firstContext:s},e.flags|=524288}else ia=ia.next=s;return c}var LA=typeof AbortController<"u"?AbortController:function(){var e=[],s=this.signal={aborted:!1,addEventListener:function(c,g){e.push(g)}};this.abort=function(){s.aborted=!0,e.forEach(function(c){return c()})}},BA=i.unstable_scheduleCallback,PA=i.unstable_NormalPriority,mr={$$typeof:nt,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function zf(){return{controller:new LA,data:new Map,refCount:0}}function cc(e){e.refCount--,e.refCount===0&&BA(PA,function(){e.controller.abort()})}var uc=null,Hf=0,fl=0,dl=null;function kA(e,s){if(uc===null){var c=uc=[];Hf=0,fl=qd(),dl={status:"pending",value:void 0,then:function(g){c.push(g)}}}return Hf++,s.then(gg,gg),s}function gg(){if(--Hf===0&&uc!==null){dl!==null&&(dl.status="fulfilled");var e=uc;uc=null,fl=0,dl=null;for(var s=0;s<e.length;s++)(0,e[s])()}}function VA(e,s){var c=[],g={status:"pending",value:null,reason:null,then:function(E){c.push(E)}};return e.then(function(){g.status="fulfilled",g.value=s;for(var E=0;E<c.length;E++)(0,c[E])(s)},function(E){for(g.status="rejected",g.reason=E,E=0;E<c.length;E++)(0,c[E])(void 0)}),g}var mg=ut.S;ut.S=function(e,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&kA(e,s),mg!==null&&mg(e,s)};var Mo=It(null);function Gf(){var e=Mo.current;return e!==null?e:yn.pooledCache}function Nu(e,s){s===null?Mt(Mo,Mo.current):Mt(Mo,s.pool)}function pg(){var e=Gf();return e===null?null:{parent:mr._currentValue,pool:e}}var hc=Error(o(460)),yg=Error(o(474)),Du=Error(o(542)),qf={then:function(){}};function xg(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Mu(){}function Eg(e,s,c){switch(c=e[c],c===void 0?e.push(s):c!==s&&(s.then(Mu,Mu),s=c),s.status){case"fulfilled":return s.value;case"rejected":throw e=s.reason,wg(e),e;default:if(typeof s.status=="string")s.then(Mu,Mu);else{if(e=yn,e!==null&&100<e.shellSuspendCounter)throw Error(o(482));e=s,e.status="pending",e.then(function(g){if(s.status==="pending"){var E=s;E.status="fulfilled",E.value=g}},function(g){if(s.status==="pending"){var E=s;E.status="rejected",E.reason=g}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw e=s.reason,wg(e),e}throw fc=s,hc}}var fc=null;function Ag(){if(fc===null)throw Error(o(459));var e=fc;return fc=null,e}function wg(e){if(e===hc||e===Du)throw Error(o(483))}var Ba=!1;function Yf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Xf(e,s){e=e.updateQueue,s.updateQueue===e&&(s.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Pa(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ka(e,s,c){var g=e.updateQueue;if(g===null)return null;if(g=g.shared,(en&2)!==0){var E=g.pending;return E===null?s.next=s:(s.next=E.next,E.next=s),g.pending=s,s=Cu(e),og(e,null,c),s}return Tu(e,g,s,c),Cu(e)}function dc(e,s,c){if(s=s.updateQueue,s!==null&&(s=s.shared,(c&4194048)!==0)){var g=s.lanes;g&=e.pendingLanes,c|=g,s.lanes=c,Cr(e,c)}}function Qf(e,s){var c=e.updateQueue,g=e.alternate;if(g!==null&&(g=g.updateQueue,c===g)){var E=null,T=null;if(c=c.firstBaseUpdate,c!==null){do{var M={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};T===null?E=T=M:T=T.next=M,c=c.next}while(c!==null);T===null?E=T=s:T=T.next=s}else E=T=s;c={baseState:g.baseState,firstBaseUpdate:E,lastBaseUpdate:T,shared:g.shared,callbacks:g.callbacks},e.updateQueue=c;return}e=c.lastBaseUpdate,e===null?c.firstBaseUpdate=s:e.next=s,c.lastBaseUpdate=s}var Wf=!1;function gc(){if(Wf){var e=dl;if(e!==null)throw e}}function mc(e,s,c,g){Wf=!1;var E=e.updateQueue;Ba=!1;var T=E.firstBaseUpdate,M=E.lastBaseUpdate,V=E.shared.pending;if(V!==null){E.shared.pending=null;var W=V,gt=W.next;W.next=null,M===null?T=gt:M.next=gt,M=W;var Ct=e.alternate;Ct!==null&&(Ct=Ct.updateQueue,V=Ct.lastBaseUpdate,V!==M&&(V===null?Ct.firstBaseUpdate=gt:V.next=gt,Ct.lastBaseUpdate=W))}if(T!==null){var Rt=E.baseState;M=0,Ct=gt=W=null,V=T;do{var pt=V.lane&-536870913,At=pt!==V.lane;if(At?(Pe&pt)===pt:(g&pt)===pt){pt!==0&&pt===fl&&(Wf=!0),Ct!==null&&(Ct=Ct.next={lane:0,tag:V.tag,payload:V.payload,callback:null,next:null});t:{var se=e,ne=V;pt=s;var cn=c;switch(ne.tag){case 1:if(se=ne.payload,typeof se=="function"){Rt=se.call(cn,Rt,pt);break t}Rt=se;break t;case 3:se.flags=se.flags&-65537|128;case 0:if(se=ne.payload,pt=typeof se=="function"?se.call(cn,Rt,pt):se,pt==null)break t;Rt=v({},Rt,pt);break t;case 2:Ba=!0}}pt=V.callback,pt!==null&&(e.flags|=64,At&&(e.flags|=8192),At=E.callbacks,At===null?E.callbacks=[pt]:At.push(pt))}else At={lane:pt,tag:V.tag,payload:V.payload,callback:V.callback,next:null},Ct===null?(gt=Ct=At,W=Rt):Ct=Ct.next=At,M|=pt;if(V=V.next,V===null){if(V=E.shared.pending,V===null)break;At=V,V=At.next,At.next=null,E.lastBaseUpdate=At,E.shared.pending=null}}while(!0);Ct===null&&(W=Rt),E.baseState=W,E.firstBaseUpdate=gt,E.lastBaseUpdate=Ct,T===null&&(E.shared.lanes=0),qa|=M,e.lanes=M,e.memoizedState=Rt}}function _g(e,s){if(typeof e!="function")throw Error(o(191,e));e.call(s)}function Tg(e,s){var c=e.callbacks;if(c!==null)for(e.callbacks=null,e=0;e<c.length;e++)_g(c[e],s)}var gl=It(null),Ou=It(0);function Cg(e,s){e=fa,Mt(Ou,e),Mt(gl,s),fa=e|s.baseLanes}function Kf(){Mt(Ou,fa),Mt(gl,gl.current)}function Zf(){fa=Ou.current,Ot(gl),Ot(Ou)}var Va=0,we=null,on=null,or=null,Lu=!1,ml=!1,Oo=!1,Bu=0,pc=0,pl=null,UA=0;function tr(){throw Error(o(321))}function Jf(e,s){if(s===null)return!1;for(var c=0;c<s.length&&c<e.length;c++)if(!h(e[c],s[c]))return!1;return!0}function $f(e,s,c,g,E,T){return Va=T,we=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,ut.H=e===null||e.memoizedState===null?om:lm,Oo=!1,T=c(g,E),Oo=!1,ml&&(T=vg(s,c,g,E)),Sg(e),T}function Sg(e){ut.H=ju;var s=on!==null&&on.next!==null;if(Va=0,or=on=we=null,Lu=!1,pc=0,pl=null,s)throw Error(o(300));e===null||Er||(e=e.dependencies,e!==null&&Iu(e)&&(Er=!0))}function vg(e,s,c,g){we=e;var E=0;do{if(ml&&(pl=null),pc=0,ml=!1,25<=E)throw Error(o(301));if(E+=1,or=on=null,e.updateQueue!=null){var T=e.updateQueue;T.lastEffect=null,T.events=null,T.stores=null,T.memoCache!=null&&(T.memoCache.index=0)}ut.H=YA,T=s(c,g)}while(ml);return T}function FA(){var e=ut.H,s=e.useState()[0];return s=typeof s.then=="function"?yc(s):s,e=e.useState()[0],(on!==null?on.memoizedState:null)!==e&&(we.flags|=1024),s}function td(){var e=Bu!==0;return Bu=0,e}function ed(e,s,c){s.updateQueue=e.updateQueue,s.flags&=-2053,e.lanes&=~c}function nd(e){if(Lu){for(e=e.memoizedState;e!==null;){var s=e.queue;s!==null&&(s.pending=null),e=e.next}Lu=!1}Va=0,or=on=we=null,ml=!1,pc=Bu=0,pl=null}function hi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return or===null?we.memoizedState=or=e:or=or.next=e,or}function lr(){if(on===null){var e=we.alternate;e=e!==null?e.memoizedState:null}else e=on.next;var s=or===null?we.memoizedState:or.next;if(s!==null)or=s,on=e;else{if(e===null)throw we.alternate===null?Error(o(467)):Error(o(310));on=e,e={memoizedState:on.memoizedState,baseState:on.baseState,baseQueue:on.baseQueue,queue:on.queue,next:null},or===null?we.memoizedState=or=e:or=or.next=e}return or}function rd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function yc(e){var s=pc;return pc+=1,pl===null&&(pl=[]),e=Eg(pl,e,s),s=we,(or===null?s.memoizedState:or.next)===null&&(s=s.alternate,ut.H=s===null||s.memoizedState===null?om:lm),e}function Pu(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return yc(e);if(e.$$typeof===nt)return qr(e)}throw Error(o(438,String(e)))}function id(e){var s=null,c=we.updateQueue;if(c!==null&&(s=c.memoCache),s==null){var g=we.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(s={data:g.data.map(function(E){return E.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),c===null&&(c=rd(),we.updateQueue=c),c.memoCache=s,c=s.data[s.index],c===void 0)for(c=s.data[s.index]=Array(e),g=0;g<e;g++)c[g]=et;return s.index++,c}function aa(e,s){return typeof s=="function"?s(e):s}function ku(e){var s=lr();return sd(s,on,e)}function sd(e,s,c){var g=e.queue;if(g===null)throw Error(o(311));g.lastRenderedReducer=c;var E=e.baseQueue,T=g.pending;if(T!==null){if(E!==null){var M=E.next;E.next=T.next,T.next=M}s.baseQueue=E=T,g.pending=null}if(T=e.baseState,E===null)e.memoizedState=T;else{s=E.next;var V=M=null,W=null,gt=s,Ct=!1;do{var Rt=gt.lane&-536870913;if(Rt!==gt.lane?(Pe&Rt)===Rt:(Va&Rt)===Rt){var pt=gt.revertLane;if(pt===0)W!==null&&(W=W.next={lane:0,revertLane:0,action:gt.action,hasEagerState:gt.hasEagerState,eagerState:gt.eagerState,next:null}),Rt===fl&&(Ct=!0);else if((Va&pt)===pt){gt=gt.next,pt===fl&&(Ct=!0);continue}else Rt={lane:0,revertLane:gt.revertLane,action:gt.action,hasEagerState:gt.hasEagerState,eagerState:gt.eagerState,next:null},W===null?(V=W=Rt,M=T):W=W.next=Rt,we.lanes|=pt,qa|=pt;Rt=gt.action,Oo&&c(T,Rt),T=gt.hasEagerState?gt.eagerState:c(T,Rt)}else pt={lane:Rt,revertLane:gt.revertLane,action:gt.action,hasEagerState:gt.hasEagerState,eagerState:gt.eagerState,next:null},W===null?(V=W=pt,M=T):W=W.next=pt,we.lanes|=Rt,qa|=Rt;gt=gt.next}while(gt!==null&&gt!==s);if(W===null?M=T:W.next=V,!h(T,e.memoizedState)&&(Er=!0,Ct&&(c=dl,c!==null)))throw c;e.memoizedState=T,e.baseState=M,e.baseQueue=W,g.lastRenderedState=T}return E===null&&(g.lanes=0),[e.memoizedState,g.dispatch]}function ad(e){var s=lr(),c=s.queue;if(c===null)throw Error(o(311));c.lastRenderedReducer=e;var g=c.dispatch,E=c.pending,T=s.memoizedState;if(E!==null){c.pending=null;var M=E=E.next;do T=e(T,M.action),M=M.next;while(M!==E);h(T,s.memoizedState)||(Er=!0),s.memoizedState=T,s.baseQueue===null&&(s.baseState=T),c.lastRenderedState=T}return[T,g]}function bg(e,s,c){var g=we,E=lr(),T=Xe;if(T){if(c===void 0)throw Error(o(407));c=c()}else c=s();var M=!h((on||E).memoizedState,c);M&&(E.memoizedState=c,Er=!0),E=E.queue;var V=Ng.bind(null,g,E,e);if(xc(2048,8,V,[e]),E.getSnapshot!==s||M||or!==null&&or.memoizedState.tag&1){if(g.flags|=2048,yl(9,Vu(),Rg.bind(null,g,E,c,s),null),yn===null)throw Error(o(349));T||(Va&124)!==0||Ig(g,s,c)}return c}function Ig(e,s,c){e.flags|=16384,e={getSnapshot:s,value:c},s=we.updateQueue,s===null?(s=rd(),we.updateQueue=s,s.stores=[e]):(c=s.stores,c===null?s.stores=[e]:c.push(e))}function Rg(e,s,c,g){s.value=c,s.getSnapshot=g,Dg(s)&&Mg(e)}function Ng(e,s,c){return c(function(){Dg(s)&&Mg(e)})}function Dg(e){var s=e.getSnapshot;e=e.value;try{var c=s();return!h(e,c)}catch{return!0}}function Mg(e){var s=ll(e,2);s!==null&&Di(s,e,2)}function od(e){var s=hi();if(typeof e=="function"){var c=e;if(e=c(),Oo){zn(!0);try{c()}finally{zn(!1)}}}return s.memoizedState=s.baseState=e,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:aa,lastRenderedState:e},s}function Og(e,s,c,g){return e.baseState=c,sd(e,on,typeof g=="function"?g:aa)}function jA(e,s,c,g,E){if(Fu(e))throw Error(o(485));if(e=s.action,e!==null){var T={payload:E,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(M){T.listeners.push(M)}};ut.T!==null?c(!0):T.isTransition=!1,g(T),c=s.pending,c===null?(T.next=s.pending=T,Lg(s,T)):(T.next=c.next,s.pending=c.next=T)}}function Lg(e,s){var c=s.action,g=s.payload,E=e.state;if(s.isTransition){var T=ut.T,M={};ut.T=M;try{var V=c(E,g),W=ut.S;W!==null&&W(M,V),Bg(e,s,V)}catch(gt){ld(e,s,gt)}finally{ut.T=T}}else try{T=c(E,g),Bg(e,s,T)}catch(gt){ld(e,s,gt)}}function Bg(e,s,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(g){Pg(e,s,g)},function(g){return ld(e,s,g)}):Pg(e,s,c)}function Pg(e,s,c){s.status="fulfilled",s.value=c,kg(s),e.state=c,s=e.pending,s!==null&&(c=s.next,c===s?e.pending=null:(c=c.next,s.next=c,Lg(e,c)))}function ld(e,s,c){var g=e.pending;if(e.pending=null,g!==null){g=g.next;do s.status="rejected",s.reason=c,kg(s),s=s.next;while(s!==g)}e.action=null}function kg(e){e=e.listeners;for(var s=0;s<e.length;s++)(0,e[s])()}function Vg(e,s){return s}function Ug(e,s){if(Xe){var c=yn.formState;if(c!==null){t:{var g=we;if(Xe){if(Yn){e:{for(var E=Yn,T=Is;E.nodeType!==8;){if(!T){E=null;break e}if(E=fs(E.nextSibling),E===null){E=null;break e}}T=E.data,E=T==="F!"||T==="F"?E:null}if(E){Yn=fs(E.nextSibling),g=E.data==="F!";break t}}Ro(g)}g=!1}g&&(s=c[0])}}return c=hi(),c.memoizedState=c.baseState=s,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vg,lastRenderedState:s},c.queue=g,c=im.bind(null,we,g),g.dispatch=c,g=od(!1),T=dd.bind(null,we,!1,g.queue),g=hi(),E={state:s,dispatch:null,action:e,pending:null},g.queue=E,c=jA.bind(null,we,E,T,c),E.dispatch=c,g.memoizedState=e,[s,c,!1]}function Fg(e){var s=lr();return jg(s,on,e)}function jg(e,s,c){if(s=sd(e,s,Vg)[0],e=ku(aa)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var g=yc(s)}catch(M){throw M===hc?Du:M}else g=s;s=lr();var E=s.queue,T=E.dispatch;return c!==s.memoizedState&&(we.flags|=2048,yl(9,Vu(),zA.bind(null,E,c),null)),[g,T,e]}function zA(e,s){e.action=s}function zg(e){var s=lr(),c=on;if(c!==null)return jg(s,c,e);lr(),s=s.memoizedState,c=lr();var g=c.queue.dispatch;return c.memoizedState=e,[s,g,!1]}function yl(e,s,c,g){return e={tag:e,create:c,deps:g,inst:s,next:null},s=we.updateQueue,s===null&&(s=rd(),we.updateQueue=s),c=s.lastEffect,c===null?s.lastEffect=e.next=e:(g=c.next,c.next=e,e.next=g,s.lastEffect=e),e}function Vu(){return{destroy:void 0,resource:void 0}}function Hg(){return lr().memoizedState}function Uu(e,s,c,g){var E=hi();g=g===void 0?null:g,we.flags|=e,E.memoizedState=yl(1|s,Vu(),c,g)}function xc(e,s,c,g){var E=lr();g=g===void 0?null:g;var T=E.memoizedState.inst;on!==null&&g!==null&&Jf(g,on.memoizedState.deps)?E.memoizedState=yl(s,T,c,g):(we.flags|=e,E.memoizedState=yl(1|s,T,c,g))}function Gg(e,s){Uu(8390656,8,e,s)}function qg(e,s){xc(2048,8,e,s)}function Yg(e,s){return xc(4,2,e,s)}function Xg(e,s){return xc(4,4,e,s)}function Qg(e,s){if(typeof s=="function"){e=e();var c=s(e);return function(){typeof c=="function"?c():s(null)}}if(s!=null)return e=e(),s.current=e,function(){s.current=null}}function Wg(e,s,c){c=c!=null?c.concat([e]):null,xc(4,4,Qg.bind(null,s,e),c)}function cd(){}function Kg(e,s){var c=lr();s=s===void 0?null:s;var g=c.memoizedState;return s!==null&&Jf(s,g[1])?g[0]:(c.memoizedState=[e,s],e)}function Zg(e,s){var c=lr();s=s===void 0?null:s;var g=c.memoizedState;if(s!==null&&Jf(s,g[1]))return g[0];if(g=e(),Oo){zn(!0);try{e()}finally{zn(!1)}}return c.memoizedState=[g,s],g}function ud(e,s,c){return c===void 0||(Va&1073741824)!==0?e.memoizedState=s:(e.memoizedState=c,e=tp(),we.lanes|=e,qa|=e,c)}function Jg(e,s,c,g){return h(c,s)?c:gl.current!==null?(e=ud(e,c,g),h(e,s)||(Er=!0),e):(Va&42)===0?(Er=!0,e.memoizedState=c):(e=tp(),we.lanes|=e,qa|=e,s)}function $g(e,s,c,g,E){var T=xt.p;xt.p=T!==0&&8>T?T:8;var M=ut.T,V={};ut.T=V,dd(e,!1,s,c);try{var W=E(),gt=ut.S;if(gt!==null&&gt(V,W),W!==null&&typeof W=="object"&&typeof W.then=="function"){var Ct=VA(W,g);Ec(e,s,Ct,Ni(e))}else Ec(e,s,g,Ni(e))}catch(Rt){Ec(e,s,{then:function(){},status:"rejected",reason:Rt},Ni())}finally{xt.p=T,ut.T=M}}function HA(){}function hd(e,s,c,g){if(e.tag!==5)throw Error(o(476));var E=tm(e).queue;$g(e,E,s,jt,c===null?HA:function(){return em(e),c(g)})}function tm(e){var s=e.memoizedState;if(s!==null)return s;s={memoizedState:jt,baseState:jt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:aa,lastRenderedState:jt},next:null};var c={};return s.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:aa,lastRenderedState:c},next:null},e.memoizedState=s,e=e.alternate,e!==null&&(e.memoizedState=s),s}function em(e){var s=tm(e).next.queue;Ec(e,s,{},Ni())}function fd(){return qr(kc)}function nm(){return lr().memoizedState}function rm(){return lr().memoizedState}function GA(e){for(var s=e.return;s!==null;){switch(s.tag){case 24:case 3:var c=Ni();e=Pa(c);var g=ka(s,e,c);g!==null&&(Di(g,s,c),dc(g,s,c)),s={cache:zf()},e.payload=s;return}s=s.return}}function qA(e,s,c){var g=Ni();c={lane:g,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null},Fu(e)?sm(s,c):(c=Mf(e,s,c,g),c!==null&&(Di(c,e,g),am(c,s,g)))}function im(e,s,c){var g=Ni();Ec(e,s,c,g)}function Ec(e,s,c,g){var E={lane:g,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null};if(Fu(e))sm(s,E);else{var T=e.alternate;if(e.lanes===0&&(T===null||T.lanes===0)&&(T=s.lastRenderedReducer,T!==null))try{var M=s.lastRenderedState,V=T(M,c);if(E.hasEagerState=!0,E.eagerState=V,h(V,M))return Tu(e,s,E,0),yn===null&&_u(),!1}catch{}finally{}if(c=Mf(e,s,E,g),c!==null)return Di(c,e,g),am(c,s,g),!0}return!1}function dd(e,s,c,g){if(g={lane:2,revertLane:qd(),action:g,hasEagerState:!1,eagerState:null,next:null},Fu(e)){if(s)throw Error(o(479))}else s=Mf(e,c,g,2),s!==null&&Di(s,e,2)}function Fu(e){var s=e.alternate;return e===we||s!==null&&s===we}function sm(e,s){ml=Lu=!0;var c=e.pending;c===null?s.next=s:(s.next=c.next,c.next=s),e.pending=s}function am(e,s,c){if((c&4194048)!==0){var g=s.lanes;g&=e.pendingLanes,c|=g,s.lanes=c,Cr(e,c)}}var ju={readContext:qr,use:Pu,useCallback:tr,useContext:tr,useEffect:tr,useImperativeHandle:tr,useLayoutEffect:tr,useInsertionEffect:tr,useMemo:tr,useReducer:tr,useRef:tr,useState:tr,useDebugValue:tr,useDeferredValue:tr,useTransition:tr,useSyncExternalStore:tr,useId:tr,useHostTransitionStatus:tr,useFormState:tr,useActionState:tr,useOptimistic:tr,useMemoCache:tr,useCacheRefresh:tr},om={readContext:qr,use:Pu,useCallback:function(e,s){return hi().memoizedState=[e,s===void 0?null:s],e},useContext:qr,useEffect:Gg,useImperativeHandle:function(e,s,c){c=c!=null?c.concat([e]):null,Uu(4194308,4,Qg.bind(null,s,e),c)},useLayoutEffect:function(e,s){return Uu(4194308,4,e,s)},useInsertionEffect:function(e,s){Uu(4,2,e,s)},useMemo:function(e,s){var c=hi();s=s===void 0?null:s;var g=e();if(Oo){zn(!0);try{e()}finally{zn(!1)}}return c.memoizedState=[g,s],g},useReducer:function(e,s,c){var g=hi();if(c!==void 0){var E=c(s);if(Oo){zn(!0);try{c(s)}finally{zn(!1)}}}else E=s;return g.memoizedState=g.baseState=E,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:E},g.queue=e,e=e.dispatch=qA.bind(null,we,e),[g.memoizedState,e]},useRef:function(e){var s=hi();return e={current:e},s.memoizedState=e},useState:function(e){e=od(e);var s=e.queue,c=im.bind(null,we,s);return s.dispatch=c,[e.memoizedState,c]},useDebugValue:cd,useDeferredValue:function(e,s){var c=hi();return ud(c,e,s)},useTransition:function(){var e=od(!1);return e=$g.bind(null,we,e.queue,!0,!1),hi().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,s,c){var g=we,E=hi();if(Xe){if(c===void 0)throw Error(o(407));c=c()}else{if(c=s(),yn===null)throw Error(o(349));(Pe&124)!==0||Ig(g,s,c)}E.memoizedState=c;var T={value:c,getSnapshot:s};return E.queue=T,Gg(Ng.bind(null,g,T,e),[e]),g.flags|=2048,yl(9,Vu(),Rg.bind(null,g,T,c,s),null),c},useId:function(){var e=hi(),s=yn.identifierPrefix;if(Xe){var c=ra,g=na;c=(g&~(1<<32-je(g)-1)).toString(32)+c,s=""+s+"R"+c,c=Bu++,0<c&&(s+="H"+c.toString(32)),s+=""}else c=UA++,s=""+s+"r"+c.toString(32)+"";return e.memoizedState=s},useHostTransitionStatus:fd,useFormState:Ug,useActionState:Ug,useOptimistic:function(e){var s=hi();s.memoizedState=s.baseState=e;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=c,s=dd.bind(null,we,!0,c),c.dispatch=s,[e,s]},useMemoCache:id,useCacheRefresh:function(){return hi().memoizedState=GA.bind(null,we)}},lm={readContext:qr,use:Pu,useCallback:Kg,useContext:qr,useEffect:qg,useImperativeHandle:Wg,useInsertionEffect:Yg,useLayoutEffect:Xg,useMemo:Zg,useReducer:ku,useRef:Hg,useState:function(){return ku(aa)},useDebugValue:cd,useDeferredValue:function(e,s){var c=lr();return Jg(c,on.memoizedState,e,s)},useTransition:function(){var e=ku(aa)[0],s=lr().memoizedState;return[typeof e=="boolean"?e:yc(e),s]},useSyncExternalStore:bg,useId:nm,useHostTransitionStatus:fd,useFormState:Fg,useActionState:Fg,useOptimistic:function(e,s){var c=lr();return Og(c,on,e,s)},useMemoCache:id,useCacheRefresh:rm},YA={readContext:qr,use:Pu,useCallback:Kg,useContext:qr,useEffect:qg,useImperativeHandle:Wg,useInsertionEffect:Yg,useLayoutEffect:Xg,useMemo:Zg,useReducer:ad,useRef:Hg,useState:function(){return ad(aa)},useDebugValue:cd,useDeferredValue:function(e,s){var c=lr();return on===null?ud(c,e,s):Jg(c,on.memoizedState,e,s)},useTransition:function(){var e=ad(aa)[0],s=lr().memoizedState;return[typeof e=="boolean"?e:yc(e),s]},useSyncExternalStore:bg,useId:nm,useHostTransitionStatus:fd,useFormState:zg,useActionState:zg,useOptimistic:function(e,s){var c=lr();return on!==null?Og(c,on,e,s):(c.baseState=e,[e,c.queue.dispatch])},useMemoCache:id,useCacheRefresh:rm},xl=null,Ac=0;function zu(e){var s=Ac;return Ac+=1,xl===null&&(xl=[]),Eg(xl,e,s)}function wc(e,s){s=s.props.ref,e.ref=s!==void 0?s:null}function Hu(e,s){throw s.$$typeof===I?Error(o(525)):(e=Object.prototype.toString.call(s),Error(o(31,e==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":e)))}function cm(e){var s=e._init;return s(e._payload)}function um(e){function s(ot,it){if(e){var dt=ot.deletions;dt===null?(ot.deletions=[it],ot.flags|=16):dt.push(it)}}function c(ot,it){if(!e)return null;for(;it!==null;)s(ot,it),it=it.sibling;return null}function g(ot){for(var it=new Map;ot!==null;)ot.key!==null?it.set(ot.key,ot):it.set(ot.index,ot),ot=ot.sibling;return it}function E(ot,it){return ot=ea(ot,it),ot.index=0,ot.sibling=null,ot}function T(ot,it,dt){return ot.index=dt,e?(dt=ot.alternate,dt!==null?(dt=dt.index,dt<it?(ot.flags|=67108866,it):dt):(ot.flags|=67108866,it)):(ot.flags|=1048576,it)}function M(ot){return e&&ot.alternate===null&&(ot.flags|=67108866),ot}function V(ot,it,dt,St){return it===null||it.tag!==6?(it=Lf(dt,ot.mode,St),it.return=ot,it):(it=E(it,dt),it.return=ot,it)}function W(ot,it,dt,St){var Qt=dt.type;return Qt===X?Ct(ot,it,dt.props.children,St,dt.key):it!==null&&(it.elementType===Qt||typeof Qt=="object"&&Qt!==null&&Qt.$$typeof===F&&cm(Qt)===it.type)?(it=E(it,dt.props),wc(it,dt),it.return=ot,it):(it=Su(dt.type,dt.key,dt.props,null,ot.mode,St),wc(it,dt),it.return=ot,it)}function gt(ot,it,dt,St){return it===null||it.tag!==4||it.stateNode.containerInfo!==dt.containerInfo||it.stateNode.implementation!==dt.implementation?(it=Bf(dt,ot.mode,St),it.return=ot,it):(it=E(it,dt.children||[]),it.return=ot,it)}function Ct(ot,it,dt,St,Qt){return it===null||it.tag!==7?(it=So(dt,ot.mode,St,Qt),it.return=ot,it):(it=E(it,dt),it.return=ot,it)}function Rt(ot,it,dt){if(typeof it=="string"&&it!==""||typeof it=="number"||typeof it=="bigint")return it=Lf(""+it,ot.mode,dt),it.return=ot,it;if(typeof it=="object"&&it!==null){switch(it.$$typeof){case O:return dt=Su(it.type,it.key,it.props,null,ot.mode,dt),wc(dt,it),dt.return=ot,dt;case H:return it=Bf(it,ot.mode,dt),it.return=ot,it;case F:var St=it._init;return it=St(it._payload),Rt(ot,it,dt)}if(st(it)||K(it))return it=So(it,ot.mode,dt,null),it.return=ot,it;if(typeof it.then=="function")return Rt(ot,zu(it),dt);if(it.$$typeof===nt)return Rt(ot,Ru(ot,it),dt);Hu(ot,it)}return null}function pt(ot,it,dt,St){var Qt=it!==null?it.key:null;if(typeof dt=="string"&&dt!==""||typeof dt=="number"||typeof dt=="bigint")return Qt!==null?null:V(ot,it,""+dt,St);if(typeof dt=="object"&&dt!==null){switch(dt.$$typeof){case O:return dt.key===Qt?W(ot,it,dt,St):null;case H:return dt.key===Qt?gt(ot,it,dt,St):null;case F:return Qt=dt._init,dt=Qt(dt._payload),pt(ot,it,dt,St)}if(st(dt)||K(dt))return Qt!==null?null:Ct(ot,it,dt,St,null);if(typeof dt.then=="function")return pt(ot,it,zu(dt),St);if(dt.$$typeof===nt)return pt(ot,it,Ru(ot,dt),St);Hu(ot,dt)}return null}function At(ot,it,dt,St,Qt){if(typeof St=="string"&&St!==""||typeof St=="number"||typeof St=="bigint")return ot=ot.get(dt)||null,V(it,ot,""+St,Qt);if(typeof St=="object"&&St!==null){switch(St.$$typeof){case O:return ot=ot.get(St.key===null?dt:St.key)||null,W(it,ot,St,Qt);case H:return ot=ot.get(St.key===null?dt:St.key)||null,gt(it,ot,St,Qt);case F:var Te=St._init;return St=Te(St._payload),At(ot,it,dt,St,Qt)}if(st(St)||K(St))return ot=ot.get(dt)||null,Ct(it,ot,St,Qt,null);if(typeof St.then=="function")return At(ot,it,dt,zu(St),Qt);if(St.$$typeof===nt)return At(ot,it,dt,Ru(it,St),Qt);Hu(it,St)}return null}function se(ot,it,dt,St){for(var Qt=null,Te=null,Zt=it,re=it=0,wr=null;Zt!==null&&re<dt.length;re++){Zt.index>re?(wr=Zt,Zt=null):wr=Zt.sibling;var qe=pt(ot,Zt,dt[re],St);if(qe===null){Zt===null&&(Zt=wr);break}e&&Zt&&qe.alternate===null&&s(ot,Zt),it=T(qe,it,re),Te===null?Qt=qe:Te.sibling=qe,Te=qe,Zt=wr}if(re===dt.length)return c(ot,Zt),Xe&&bo(ot,re),Qt;if(Zt===null){for(;re<dt.length;re++)Zt=Rt(ot,dt[re],St),Zt!==null&&(it=T(Zt,it,re),Te===null?Qt=Zt:Te.sibling=Zt,Te=Zt);return Xe&&bo(ot,re),Qt}for(Zt=g(Zt);re<dt.length;re++)wr=At(Zt,ot,re,dt[re],St),wr!==null&&(e&&wr.alternate!==null&&Zt.delete(wr.key===null?re:wr.key),it=T(wr,it,re),Te===null?Qt=wr:Te.sibling=wr,Te=wr);return e&&Zt.forEach(function(to){return s(ot,to)}),Xe&&bo(ot,re),Qt}function ne(ot,it,dt,St){if(dt==null)throw Error(o(151));for(var Qt=null,Te=null,Zt=it,re=it=0,wr=null,qe=dt.next();Zt!==null&&!qe.done;re++,qe=dt.next()){Zt.index>re?(wr=Zt,Zt=null):wr=Zt.sibling;var to=pt(ot,Zt,qe.value,St);if(to===null){Zt===null&&(Zt=wr);break}e&&Zt&&to.alternate===null&&s(ot,Zt),it=T(to,it,re),Te===null?Qt=to:Te.sibling=to,Te=to,Zt=wr}if(qe.done)return c(ot,Zt),Xe&&bo(ot,re),Qt;if(Zt===null){for(;!qe.done;re++,qe=dt.next())qe=Rt(ot,qe.value,St),qe!==null&&(it=T(qe,it,re),Te===null?Qt=qe:Te.sibling=qe,Te=qe);return Xe&&bo(ot,re),Qt}for(Zt=g(Zt);!qe.done;re++,qe=dt.next())qe=At(Zt,ot,re,qe.value,St),qe!==null&&(e&&qe.alternate!==null&&Zt.delete(qe.key===null?re:qe.key),it=T(qe,it,re),Te===null?Qt=qe:Te.sibling=qe,Te=qe);return e&&Zt.forEach(function(Xw){return s(ot,Xw)}),Xe&&bo(ot,re),Qt}function cn(ot,it,dt,St){if(typeof dt=="object"&&dt!==null&&dt.type===X&&dt.key===null&&(dt=dt.props.children),typeof dt=="object"&&dt!==null){switch(dt.$$typeof){case O:t:{for(var Qt=dt.key;it!==null;){if(it.key===Qt){if(Qt=dt.type,Qt===X){if(it.tag===7){c(ot,it.sibling),St=E(it,dt.props.children),St.return=ot,ot=St;break t}}else if(it.elementType===Qt||typeof Qt=="object"&&Qt!==null&&Qt.$$typeof===F&&cm(Qt)===it.type){c(ot,it.sibling),St=E(it,dt.props),wc(St,dt),St.return=ot,ot=St;break t}c(ot,it);break}else s(ot,it);it=it.sibling}dt.type===X?(St=So(dt.props.children,ot.mode,St,dt.key),St.return=ot,ot=St):(St=Su(dt.type,dt.key,dt.props,null,ot.mode,St),wc(St,dt),St.return=ot,ot=St)}return M(ot);case H:t:{for(Qt=dt.key;it!==null;){if(it.key===Qt)if(it.tag===4&&it.stateNode.containerInfo===dt.containerInfo&&it.stateNode.implementation===dt.implementation){c(ot,it.sibling),St=E(it,dt.children||[]),St.return=ot,ot=St;break t}else{c(ot,it);break}else s(ot,it);it=it.sibling}St=Bf(dt,ot.mode,St),St.return=ot,ot=St}return M(ot);case F:return Qt=dt._init,dt=Qt(dt._payload),cn(ot,it,dt,St)}if(st(dt))return se(ot,it,dt,St);if(K(dt)){if(Qt=K(dt),typeof Qt!="function")throw Error(o(150));return dt=Qt.call(dt),ne(ot,it,dt,St)}if(typeof dt.then=="function")return cn(ot,it,zu(dt),St);if(dt.$$typeof===nt)return cn(ot,it,Ru(ot,dt),St);Hu(ot,dt)}return typeof dt=="string"&&dt!==""||typeof dt=="number"||typeof dt=="bigint"?(dt=""+dt,it!==null&&it.tag===6?(c(ot,it.sibling),St=E(it,dt),St.return=ot,ot=St):(c(ot,it),St=Lf(dt,ot.mode,St),St.return=ot,ot=St),M(ot)):c(ot,it)}return function(ot,it,dt,St){try{Ac=0;var Qt=cn(ot,it,dt,St);return xl=null,Qt}catch(Zt){if(Zt===hc||Zt===Du)throw Zt;var Te=vi(29,Zt,null,ot.mode);return Te.lanes=St,Te.return=ot,Te}finally{}}}var El=um(!0),hm=um(!1),Ji=It(null),Rs=null;function Ua(e){var s=e.alternate;Mt(pr,pr.current&1),Mt(Ji,e),Rs===null&&(s===null||gl.current!==null||s.memoizedState!==null)&&(Rs=e)}function fm(e){if(e.tag===22){if(Mt(pr,pr.current),Mt(Ji,e),Rs===null){var s=e.alternate;s!==null&&s.memoizedState!==null&&(Rs=e)}}else Fa()}function Fa(){Mt(pr,pr.current),Mt(Ji,Ji.current)}function oa(e){Ot(Ji),Rs===e&&(Rs=null),Ot(pr)}var pr=It(0);function Gu(e){for(var s=e;s!==null;){if(s.tag===13){var c=s.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||r1(c)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function gd(e,s,c,g){s=e.memoizedState,c=c(g,s),c=c==null?s:v({},s,c),e.memoizedState=c,e.lanes===0&&(e.updateQueue.baseState=c)}var md={enqueueSetState:function(e,s,c){e=e._reactInternals;var g=Ni(),E=Pa(g);E.payload=s,c!=null&&(E.callback=c),s=ka(e,E,g),s!==null&&(Di(s,e,g),dc(s,e,g))},enqueueReplaceState:function(e,s,c){e=e._reactInternals;var g=Ni(),E=Pa(g);E.tag=1,E.payload=s,c!=null&&(E.callback=c),s=ka(e,E,g),s!==null&&(Di(s,e,g),dc(s,e,g))},enqueueForceUpdate:function(e,s){e=e._reactInternals;var c=Ni(),g=Pa(c);g.tag=2,s!=null&&(g.callback=s),s=ka(e,g,c),s!==null&&(Di(s,e,c),dc(s,e,c))}};function dm(e,s,c,g,E,T,M){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(g,T,M):s.prototype&&s.prototype.isPureReactComponent?!f(c,g)||!f(E,T):!0}function gm(e,s,c,g){e=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(c,g),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(c,g),s.state!==e&&md.enqueueReplaceState(s,s.state,null)}function Lo(e,s){var c=s;if("ref"in s){c={};for(var g in s)g!=="ref"&&(c[g]=s[g])}if(e=e.defaultProps){c===s&&(c=v({},c));for(var E in e)c[E]===void 0&&(c[E]=e[E])}return c}var qu=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function mm(e){qu(e)}function pm(e){console.error(e)}function ym(e){qu(e)}function Yu(e,s){try{var c=e.onUncaughtError;c(s.value,{componentStack:s.stack})}catch(g){setTimeout(function(){throw g})}}function xm(e,s,c){try{var g=e.onCaughtError;g(c.value,{componentStack:c.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(E){setTimeout(function(){throw E})}}function pd(e,s,c){return c=Pa(c),c.tag=3,c.payload={element:null},c.callback=function(){Yu(e,s)},c}function Em(e){return e=Pa(e),e.tag=3,e}function Am(e,s,c,g){var E=c.type.getDerivedStateFromError;if(typeof E=="function"){var T=g.value;e.payload=function(){return E(T)},e.callback=function(){xm(s,c,g)}}var M=c.stateNode;M!==null&&typeof M.componentDidCatch=="function"&&(e.callback=function(){xm(s,c,g),typeof E!="function"&&(Ya===null?Ya=new Set([this]):Ya.add(this));var V=g.stack;this.componentDidCatch(g.value,{componentStack:V!==null?V:""})})}function XA(e,s,c,g,E){if(c.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(s=c.alternate,s!==null&&lc(s,c,E,!0),c=Ji.current,c!==null){switch(c.tag){case 13:return Rs===null?Fd():c.alternate===null&&Xn===0&&(Xn=3),c.flags&=-257,c.flags|=65536,c.lanes=E,g===qf?c.flags|=16384:(s=c.updateQueue,s===null?c.updateQueue=new Set([g]):s.add(g),zd(e,g,E)),!1;case 22:return c.flags|=65536,g===qf?c.flags|=16384:(s=c.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([g])},c.updateQueue=s):(c=s.retryQueue,c===null?s.retryQueue=new Set([g]):c.add(g)),zd(e,g,E)),!1}throw Error(o(435,c.tag))}return zd(e,g,E),Fd(),!1}if(Xe)return s=Ji.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=E,g!==Vf&&(e=Error(o(422),{cause:g}),oc(Qi(e,c)))):(g!==Vf&&(s=Error(o(423),{cause:g}),oc(Qi(s,c))),e=e.current.alternate,e.flags|=65536,E&=-E,e.lanes|=E,g=Qi(g,c),E=pd(e.stateNode,g,E),Qf(e,E),Xn!==4&&(Xn=2)),!1;var T=Error(o(520),{cause:g});if(T=Qi(T,c),Ic===null?Ic=[T]:Ic.push(T),Xn!==4&&(Xn=2),s===null)return!0;g=Qi(g,c),c=s;do{switch(c.tag){case 3:return c.flags|=65536,e=E&-E,c.lanes|=e,e=pd(c.stateNode,g,e),Qf(c,e),!1;case 1:if(s=c.type,T=c.stateNode,(c.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(Ya===null||!Ya.has(T))))return c.flags|=65536,E&=-E,c.lanes|=E,E=Em(E),Am(E,e,c,g),Qf(c,E),!1}c=c.return}while(c!==null);return!1}var wm=Error(o(461)),Er=!1;function Rr(e,s,c,g){s.child=e===null?hm(s,null,c,g):El(s,e.child,c,g)}function _m(e,s,c,g,E){c=c.render;var T=s.ref;if("ref"in g){var M={};for(var V in g)V!=="ref"&&(M[V]=g[V])}else M=g;return Do(s),g=$f(e,s,c,M,T,E),V=td(),e!==null&&!Er?(ed(e,s,E),la(e,s,E)):(Xe&&V&&Pf(s),s.flags|=1,Rr(e,s,g,E),s.child)}function Tm(e,s,c,g,E){if(e===null){var T=c.type;return typeof T=="function"&&!Of(T)&&T.defaultProps===void 0&&c.compare===null?(s.tag=15,s.type=T,Cm(e,s,T,g,E)):(e=Su(c.type,null,g,s,s.mode,E),e.ref=s.ref,e.return=s,s.child=e)}if(T=e.child,!Cd(e,E)){var M=T.memoizedProps;if(c=c.compare,c=c!==null?c:f,c(M,g)&&e.ref===s.ref)return la(e,s,E)}return s.flags|=1,e=ea(T,g),e.ref=s.ref,e.return=s,s.child=e}function Cm(e,s,c,g,E){if(e!==null){var T=e.memoizedProps;if(f(T,g)&&e.ref===s.ref)if(Er=!1,s.pendingProps=g=T,Cd(e,E))(e.flags&131072)!==0&&(Er=!0);else return s.lanes=e.lanes,la(e,s,E)}return yd(e,s,c,g,E)}function Sm(e,s,c){var g=s.pendingProps,E=g.children,T=e!==null?e.memoizedState:null;if(g.mode==="hidden"){if((s.flags&128)!==0){if(g=T!==null?T.baseLanes|c:c,e!==null){for(E=s.child=e.child,T=0;E!==null;)T=T|E.lanes|E.childLanes,E=E.sibling;s.childLanes=T&~g}else s.childLanes=0,s.child=null;return vm(e,s,g,c)}if((c&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},e!==null&&Nu(s,T!==null?T.cachePool:null),T!==null?Cg(s,T):Kf(),fm(s);else return s.lanes=s.childLanes=536870912,vm(e,s,T!==null?T.baseLanes|c:c,c)}else T!==null?(Nu(s,T.cachePool),Cg(s,T),Fa(),s.memoizedState=null):(e!==null&&Nu(s,null),Kf(),Fa());return Rr(e,s,E,c),s.child}function vm(e,s,c,g){var E=Gf();return E=E===null?null:{parent:mr._currentValue,pool:E},s.memoizedState={baseLanes:c,cachePool:E},e!==null&&Nu(s,null),Kf(),fm(s),e!==null&&lc(e,s,g,!0),null}function Xu(e,s){var c=s.ref;if(c===null)e!==null&&e.ref!==null&&(s.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(o(284));(e===null||e.ref!==c)&&(s.flags|=4194816)}}function yd(e,s,c,g,E){return Do(s),c=$f(e,s,c,g,void 0,E),g=td(),e!==null&&!Er?(ed(e,s,E),la(e,s,E)):(Xe&&g&&Pf(s),s.flags|=1,Rr(e,s,c,E),s.child)}function bm(e,s,c,g,E,T){return Do(s),s.updateQueue=null,c=vg(s,g,c,E),Sg(e),g=td(),e!==null&&!Er?(ed(e,s,T),la(e,s,T)):(Xe&&g&&Pf(s),s.flags|=1,Rr(e,s,c,T),s.child)}function Im(e,s,c,g,E){if(Do(s),s.stateNode===null){var T=cl,M=c.contextType;typeof M=="object"&&M!==null&&(T=qr(M)),T=new c(g,T),s.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,T.updater=md,s.stateNode=T,T._reactInternals=s,T=s.stateNode,T.props=g,T.state=s.memoizedState,T.refs={},Yf(s),M=c.contextType,T.context=typeof M=="object"&&M!==null?qr(M):cl,T.state=s.memoizedState,M=c.getDerivedStateFromProps,typeof M=="function"&&(gd(s,c,M,g),T.state=s.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(M=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),M!==T.state&&md.enqueueReplaceState(T,T.state,null),mc(s,g,T,E),gc(),T.state=s.memoizedState),typeof T.componentDidMount=="function"&&(s.flags|=4194308),g=!0}else if(e===null){T=s.stateNode;var V=s.memoizedProps,W=Lo(c,V);T.props=W;var gt=T.context,Ct=c.contextType;M=cl,typeof Ct=="object"&&Ct!==null&&(M=qr(Ct));var Rt=c.getDerivedStateFromProps;Ct=typeof Rt=="function"||typeof T.getSnapshotBeforeUpdate=="function",V=s.pendingProps!==V,Ct||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(V||gt!==M)&&gm(s,T,g,M),Ba=!1;var pt=s.memoizedState;T.state=pt,mc(s,g,T,E),gc(),gt=s.memoizedState,V||pt!==gt||Ba?(typeof Rt=="function"&&(gd(s,c,Rt,g),gt=s.memoizedState),(W=Ba||dm(s,c,W,g,pt,gt,M))?(Ct||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(s.flags|=4194308)):(typeof T.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=g,s.memoizedState=gt),T.props=g,T.state=gt,T.context=M,g=W):(typeof T.componentDidMount=="function"&&(s.flags|=4194308),g=!1)}else{T=s.stateNode,Xf(e,s),M=s.memoizedProps,Ct=Lo(c,M),T.props=Ct,Rt=s.pendingProps,pt=T.context,gt=c.contextType,W=cl,typeof gt=="object"&&gt!==null&&(W=qr(gt)),V=c.getDerivedStateFromProps,(gt=typeof V=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(M!==Rt||pt!==W)&&gm(s,T,g,W),Ba=!1,pt=s.memoizedState,T.state=pt,mc(s,g,T,E),gc();var At=s.memoizedState;M!==Rt||pt!==At||Ba||e!==null&&e.dependencies!==null&&Iu(e.dependencies)?(typeof V=="function"&&(gd(s,c,V,g),At=s.memoizedState),(Ct=Ba||dm(s,c,Ct,g,pt,At,W)||e!==null&&e.dependencies!==null&&Iu(e.dependencies))?(gt||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(g,At,W),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(g,At,W)),typeof T.componentDidUpdate=="function"&&(s.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof T.componentDidUpdate!="function"||M===e.memoizedProps&&pt===e.memoizedState||(s.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||M===e.memoizedProps&&pt===e.memoizedState||(s.flags|=1024),s.memoizedProps=g,s.memoizedState=At),T.props=g,T.state=At,T.context=W,g=Ct):(typeof T.componentDidUpdate!="function"||M===e.memoizedProps&&pt===e.memoizedState||(s.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||M===e.memoizedProps&&pt===e.memoizedState||(s.flags|=1024),g=!1)}return T=g,Xu(e,s),g=(s.flags&128)!==0,T||g?(T=s.stateNode,c=g&&typeof c.getDerivedStateFromError!="function"?null:T.render(),s.flags|=1,e!==null&&g?(s.child=El(s,e.child,null,E),s.child=El(s,null,c,E)):Rr(e,s,c,E),s.memoizedState=T.state,e=s.child):e=la(e,s,E),e}function Rm(e,s,c,g){return ac(),s.flags|=256,Rr(e,s,c,g),s.child}var xd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ed(e){return{baseLanes:e,cachePool:pg()}}function Ad(e,s,c){return e=e!==null?e.childLanes&~c:0,s&&(e|=$i),e}function Nm(e,s,c){var g=s.pendingProps,E=!1,T=(s.flags&128)!==0,M;if((M=T)||(M=e!==null&&e.memoizedState===null?!1:(pr.current&2)!==0),M&&(E=!0,s.flags&=-129),M=(s.flags&32)!==0,s.flags&=-33,e===null){if(Xe){if(E?Ua(s):Fa(),Xe){var V=Yn,W;if(W=V){t:{for(W=V,V=Is;W.nodeType!==8;){if(!V){V=null;break t}if(W=fs(W.nextSibling),W===null){V=null;break t}}V=W}V!==null?(s.memoizedState={dehydrated:V,treeContext:vo!==null?{id:na,overflow:ra}:null,retryLane:536870912,hydrationErrors:null},W=vi(18,null,null,0),W.stateNode=V,W.return=s,s.child=W,ti=s,Yn=null,W=!0):W=!1}W||Ro(s)}if(V=s.memoizedState,V!==null&&(V=V.dehydrated,V!==null))return r1(V)?s.lanes=32:s.lanes=536870912,null;oa(s)}return V=g.children,g=g.fallback,E?(Fa(),E=s.mode,V=Qu({mode:"hidden",children:V},E),g=So(g,E,c,null),V.return=s,g.return=s,V.sibling=g,s.child=V,E=s.child,E.memoizedState=Ed(c),E.childLanes=Ad(e,M,c),s.memoizedState=xd,g):(Ua(s),wd(s,V))}if(W=e.memoizedState,W!==null&&(V=W.dehydrated,V!==null)){if(T)s.flags&256?(Ua(s),s.flags&=-257,s=_d(e,s,c)):s.memoizedState!==null?(Fa(),s.child=e.child,s.flags|=128,s=null):(Fa(),E=g.fallback,V=s.mode,g=Qu({mode:"visible",children:g.children},V),E=So(E,V,c,null),E.flags|=2,g.return=s,E.return=s,g.sibling=E,s.child=g,El(s,e.child,null,c),g=s.child,g.memoizedState=Ed(c),g.childLanes=Ad(e,M,c),s.memoizedState=xd,s=E);else if(Ua(s),r1(V)){if(M=V.nextSibling&&V.nextSibling.dataset,M)var gt=M.dgst;M=gt,g=Error(o(419)),g.stack="",g.digest=M,oc({value:g,source:null,stack:null}),s=_d(e,s,c)}else if(Er||lc(e,s,c,!1),M=(c&e.childLanes)!==0,Er||M){if(M=yn,M!==null&&(g=c&-c,g=(g&42)!==0?1:Ui(g),g=(g&(M.suspendedLanes|c))!==0?0:g,g!==0&&g!==W.retryLane))throw W.retryLane=g,ll(e,g),Di(M,e,g),wm;V.data==="$?"||Fd(),s=_d(e,s,c)}else V.data==="$?"?(s.flags|=192,s.child=e.child,s=null):(e=W.treeContext,Yn=fs(V.nextSibling),ti=s,Xe=!0,Io=null,Is=!1,e!==null&&(Ki[Zi++]=na,Ki[Zi++]=ra,Ki[Zi++]=vo,na=e.id,ra=e.overflow,vo=s),s=wd(s,g.children),s.flags|=4096);return s}return E?(Fa(),E=g.fallback,V=s.mode,W=e.child,gt=W.sibling,g=ea(W,{mode:"hidden",children:g.children}),g.subtreeFlags=W.subtreeFlags&65011712,gt!==null?E=ea(gt,E):(E=So(E,V,c,null),E.flags|=2),E.return=s,g.return=s,g.sibling=E,s.child=g,g=E,E=s.child,V=e.child.memoizedState,V===null?V=Ed(c):(W=V.cachePool,W!==null?(gt=mr._currentValue,W=W.parent!==gt?{parent:gt,pool:gt}:W):W=pg(),V={baseLanes:V.baseLanes|c,cachePool:W}),E.memoizedState=V,E.childLanes=Ad(e,M,c),s.memoizedState=xd,g):(Ua(s),c=e.child,e=c.sibling,c=ea(c,{mode:"visible",children:g.children}),c.return=s,c.sibling=null,e!==null&&(M=s.deletions,M===null?(s.deletions=[e],s.flags|=16):M.push(e)),s.child=c,s.memoizedState=null,c)}function wd(e,s){return s=Qu({mode:"visible",children:s},e.mode),s.return=e,e.child=s}function Qu(e,s){return e=vi(22,e,null,s),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function _d(e,s,c){return El(s,e.child,null,c),e=wd(s,s.pendingProps.children),e.flags|=2,s.memoizedState=null,e}function Dm(e,s,c){e.lanes|=s;var g=e.alternate;g!==null&&(g.lanes|=s),Ff(e.return,s,c)}function Td(e,s,c,g,E){var T=e.memoizedState;T===null?e.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:g,tail:c,tailMode:E}:(T.isBackwards=s,T.rendering=null,T.renderingStartTime=0,T.last=g,T.tail=c,T.tailMode=E)}function Mm(e,s,c){var g=s.pendingProps,E=g.revealOrder,T=g.tail;if(Rr(e,s,g.children,c),g=pr.current,(g&2)!==0)g=g&1|2,s.flags|=128;else{if(e!==null&&(e.flags&128)!==0)t:for(e=s.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Dm(e,c,s);else if(e.tag===19)Dm(e,c,s);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===s)break t;for(;e.sibling===null;){if(e.return===null||e.return===s)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}g&=1}switch(Mt(pr,g),E){case"forwards":for(c=s.child,E=null;c!==null;)e=c.alternate,e!==null&&Gu(e)===null&&(E=c),c=c.sibling;c=E,c===null?(E=s.child,s.child=null):(E=c.sibling,c.sibling=null),Td(s,!1,E,c,T);break;case"backwards":for(c=null,E=s.child,s.child=null;E!==null;){if(e=E.alternate,e!==null&&Gu(e)===null){s.child=E;break}e=E.sibling,E.sibling=c,c=E,E=e}Td(s,!0,c,null,T);break;case"together":Td(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function la(e,s,c){if(e!==null&&(s.dependencies=e.dependencies),qa|=s.lanes,(c&s.childLanes)===0)if(e!==null){if(lc(e,s,c,!1),(c&s.childLanes)===0)return null}else return null;if(e!==null&&s.child!==e.child)throw Error(o(153));if(s.child!==null){for(e=s.child,c=ea(e,e.pendingProps),s.child=c,c.return=s;e.sibling!==null;)e=e.sibling,c=c.sibling=ea(e,e.pendingProps),c.return=s;c.sibling=null}return s.child}function Cd(e,s){return(e.lanes&s)!==0?!0:(e=e.dependencies,!!(e!==null&&Iu(e)))}function QA(e,s,c){switch(s.tag){case 3:oe(s,s.stateNode.containerInfo),La(s,mr,e.memoizedState.cache),ac();break;case 27:case 5:ei(s);break;case 4:oe(s,s.stateNode.containerInfo);break;case 10:La(s,s.type,s.memoizedProps.value);break;case 13:var g=s.memoizedState;if(g!==null)return g.dehydrated!==null?(Ua(s),s.flags|=128,null):(c&s.child.childLanes)!==0?Nm(e,s,c):(Ua(s),e=la(e,s,c),e!==null?e.sibling:null);Ua(s);break;case 19:var E=(e.flags&128)!==0;if(g=(c&s.childLanes)!==0,g||(lc(e,s,c,!1),g=(c&s.childLanes)!==0),E){if(g)return Mm(e,s,c);s.flags|=128}if(E=s.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),Mt(pr,pr.current),g)break;return null;case 22:case 23:return s.lanes=0,Sm(e,s,c);case 24:La(s,mr,e.memoizedState.cache)}return la(e,s,c)}function Om(e,s,c){if(e!==null)if(e.memoizedProps!==s.pendingProps)Er=!0;else{if(!Cd(e,c)&&(s.flags&128)===0)return Er=!1,QA(e,s,c);Er=(e.flags&131072)!==0}else Er=!1,Xe&&(s.flags&1048576)!==0&&cg(s,bu,s.index);switch(s.lanes=0,s.tag){case 16:t:{e=s.pendingProps;var g=s.elementType,E=g._init;if(g=E(g._payload),s.type=g,typeof g=="function")Of(g)?(e=Lo(g,e),s.tag=1,s=Im(null,s,g,e,c)):(s.tag=0,s=yd(null,s,g,e,c));else{if(g!=null){if(E=g.$$typeof,E===_t){s.tag=11,s=_m(null,s,g,e,c);break t}else if(E===U){s.tag=14,s=Tm(null,s,g,e,c);break t}}throw s=Pt(g)||g,Error(o(306,s,""))}}return s;case 0:return yd(e,s,s.type,s.pendingProps,c);case 1:return g=s.type,E=Lo(g,s.pendingProps),Im(e,s,g,E,c);case 3:t:{if(oe(s,s.stateNode.containerInfo),e===null)throw Error(o(387));g=s.pendingProps;var T=s.memoizedState;E=T.element,Xf(e,s),mc(s,g,null,c);var M=s.memoizedState;if(g=M.cache,La(s,mr,g),g!==T.cache&&jf(s,[mr],c,!0),gc(),g=M.element,T.isDehydrated)if(T={element:g,isDehydrated:!1,cache:M.cache},s.updateQueue.baseState=T,s.memoizedState=T,s.flags&256){s=Rm(e,s,g,c);break t}else if(g!==E){E=Qi(Error(o(424)),s),oc(E),s=Rm(e,s,g,c);break t}else{switch(e=s.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Yn=fs(e.firstChild),ti=s,Xe=!0,Io=null,Is=!0,c=hm(s,null,g,c),s.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(ac(),g===E){s=la(e,s,c);break t}Rr(e,s,g,c)}s=s.child}return s;case 26:return Xu(e,s),e===null?(c=kp(s.type,null,s.pendingProps,null))?s.memoizedState=c:Xe||(c=s.type,e=s.pendingProps,g=lh(Bt.current).createElement(c),g[Kn]=s,g[an]=e,Dr(g,c,e),ze(g),s.stateNode=g):s.memoizedState=kp(s.type,e.memoizedProps,s.pendingProps,e.memoizedState),null;case 27:return ei(s),e===null&&Xe&&(g=s.stateNode=Lp(s.type,s.pendingProps,Bt.current),ti=s,Is=!0,E=Yn,Wa(s.type)?(i1=E,Yn=fs(g.firstChild)):Yn=E),Rr(e,s,s.pendingProps.children,c),Xu(e,s),e===null&&(s.flags|=4194304),s.child;case 5:return e===null&&Xe&&((E=g=Yn)&&(g=_w(g,s.type,s.pendingProps,Is),g!==null?(s.stateNode=g,ti=s,Yn=fs(g.firstChild),Is=!1,E=!0):E=!1),E||Ro(s)),ei(s),E=s.type,T=s.pendingProps,M=e!==null?e.memoizedProps:null,g=T.children,t1(E,T)?g=null:M!==null&&t1(E,M)&&(s.flags|=32),s.memoizedState!==null&&(E=$f(e,s,FA,null,null,c),kc._currentValue=E),Xu(e,s),Rr(e,s,g,c),s.child;case 6:return e===null&&Xe&&((e=c=Yn)&&(c=Tw(c,s.pendingProps,Is),c!==null?(s.stateNode=c,ti=s,Yn=null,e=!0):e=!1),e||Ro(s)),null;case 13:return Nm(e,s,c);case 4:return oe(s,s.stateNode.containerInfo),g=s.pendingProps,e===null?s.child=El(s,null,g,c):Rr(e,s,g,c),s.child;case 11:return _m(e,s,s.type,s.pendingProps,c);case 7:return Rr(e,s,s.pendingProps,c),s.child;case 8:return Rr(e,s,s.pendingProps.children,c),s.child;case 12:return Rr(e,s,s.pendingProps.children,c),s.child;case 10:return g=s.pendingProps,La(s,s.type,g.value),Rr(e,s,g.children,c),s.child;case 9:return E=s.type._context,g=s.pendingProps.children,Do(s),E=qr(E),g=g(E),s.flags|=1,Rr(e,s,g,c),s.child;case 14:return Tm(e,s,s.type,s.pendingProps,c);case 15:return Cm(e,s,s.type,s.pendingProps,c);case 19:return Mm(e,s,c);case 31:return g=s.pendingProps,c=s.mode,g={mode:g.mode,children:g.children},e===null?(c=Qu(g,c),c.ref=s.ref,s.child=c,c.return=s,s=c):(c=ea(e.child,g),c.ref=s.ref,s.child=c,c.return=s,s=c),s;case 22:return Sm(e,s,c);case 24:return Do(s),g=qr(mr),e===null?(E=Gf(),E===null&&(E=yn,T=zf(),E.pooledCache=T,T.refCount++,T!==null&&(E.pooledCacheLanes|=c),E=T),s.memoizedState={parent:g,cache:E},Yf(s),La(s,mr,E)):((e.lanes&c)!==0&&(Xf(e,s),mc(s,null,null,c),gc()),E=e.memoizedState,T=s.memoizedState,E.parent!==g?(E={parent:g,cache:g},s.memoizedState=E,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=E),La(s,mr,g)):(g=T.cache,La(s,mr,g),g!==E.cache&&jf(s,[mr],c,!0))),Rr(e,s,s.pendingProps.children,c),s.child;case 29:throw s.pendingProps}throw Error(o(156,s.tag))}function ca(e){e.flags|=4}function Lm(e,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!zp(s)){if(s=Ji.current,s!==null&&((Pe&4194048)===Pe?Rs!==null:(Pe&62914560)!==Pe&&(Pe&536870912)===0||s!==Rs))throw fc=qf,yg;e.flags|=8192}}function Wu(e,s){s!==null&&(e.flags|=4),e.flags&16384&&(s=e.tag!==22?Ca():536870912,e.lanes|=s,Tl|=s)}function _c(e,s){if(!Xe)switch(e.tailMode){case"hidden":s=e.tail;for(var c=null;s!==null;)s.alternate!==null&&(c=s),s=s.sibling;c===null?e.tail=null:c.sibling=null;break;case"collapsed":c=e.tail;for(var g=null;c!==null;)c.alternate!==null&&(g=c),c=c.sibling;g===null?s||e.tail===null?e.tail=null:e.tail.sibling=null:g.sibling=null}}function Un(e){var s=e.alternate!==null&&e.alternate.child===e.child,c=0,g=0;if(s)for(var E=e.child;E!==null;)c|=E.lanes|E.childLanes,g|=E.subtreeFlags&65011712,g|=E.flags&65011712,E.return=e,E=E.sibling;else for(E=e.child;E!==null;)c|=E.lanes|E.childLanes,g|=E.subtreeFlags,g|=E.flags,E.return=e,E=E.sibling;return e.subtreeFlags|=g,e.childLanes=c,s}function WA(e,s,c){var g=s.pendingProps;switch(kf(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Un(s),null;case 1:return Un(s),null;case 3:return c=s.stateNode,g=null,e!==null&&(g=e.memoizedState.cache),s.memoizedState.cache!==g&&(s.flags|=2048),sa(mr),Pr(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(e===null||e.child===null)&&(sc(s)?ca(s):e===null||e.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,fg())),Un(s),null;case 26:return c=s.memoizedState,e===null?(ca(s),c!==null?(Un(s),Lm(s,c)):(Un(s),s.flags&=-16777217)):c?c!==e.memoizedState?(ca(s),Un(s),Lm(s,c)):(Un(s),s.flags&=-16777217):(e.memoizedProps!==g&&ca(s),Un(s),s.flags&=-16777217),null;case 27:In(s),c=Bt.current;var E=s.type;if(e!==null&&s.stateNode!=null)e.memoizedProps!==g&&ca(s);else{if(!g){if(s.stateNode===null)throw Error(o(166));return Un(s),null}e=Ht.current,sc(s)?ug(s):(e=Lp(E,g,c),s.stateNode=e,ca(s))}return Un(s),null;case 5:if(In(s),c=s.type,e!==null&&s.stateNode!=null)e.memoizedProps!==g&&ca(s);else{if(!g){if(s.stateNode===null)throw Error(o(166));return Un(s),null}if(e=Ht.current,sc(s))ug(s);else{switch(E=lh(Bt.current),e){case 1:e=E.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:e=E.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":e=E.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":e=E.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":e=E.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof g.is=="string"?E.createElement("select",{is:g.is}):E.createElement("select"),g.multiple?e.multiple=!0:g.size&&(e.size=g.size);break;default:e=typeof g.is=="string"?E.createElement(c,{is:g.is}):E.createElement(c)}}e[Kn]=s,e[an]=g;t:for(E=s.child;E!==null;){if(E.tag===5||E.tag===6)e.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===s)break t;for(;E.sibling===null;){if(E.return===null||E.return===s)break t;E=E.return}E.sibling.return=E.return,E=E.sibling}s.stateNode=e;t:switch(Dr(e,c,g),c){case"button":case"input":case"select":case"textarea":e=!!g.autoFocus;break t;case"img":e=!0;break t;default:e=!1}e&&ca(s)}}return Un(s),s.flags&=-16777217,null;case 6:if(e&&s.stateNode!=null)e.memoizedProps!==g&&ca(s);else{if(typeof g!="string"&&s.stateNode===null)throw Error(o(166));if(e=Bt.current,sc(s)){if(e=s.stateNode,c=s.memoizedProps,g=null,E=ti,E!==null)switch(E.tag){case 27:case 5:g=E.memoizedProps}e[Kn]=s,e=!!(e.nodeValue===c||g!==null&&g.suppressHydrationWarning===!0||bp(e.nodeValue,c)),e||Ro(s)}else e=lh(e).createTextNode(g),e[Kn]=s,s.stateNode=e}return Un(s),null;case 13:if(g=s.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(E=sc(s),g!==null&&g.dehydrated!==null){if(e===null){if(!E)throw Error(o(318));if(E=s.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(o(317));E[Kn]=s}else ac(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Un(s),E=!1}else E=fg(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=E),E=!0;if(!E)return s.flags&256?(oa(s),s):(oa(s),null)}if(oa(s),(s.flags&128)!==0)return s.lanes=c,s;if(c=g!==null,e=e!==null&&e.memoizedState!==null,c){g=s.child,E=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(E=g.alternate.memoizedState.cachePool.pool);var T=null;g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(T=g.memoizedState.cachePool.pool),T!==E&&(g.flags|=2048)}return c!==e&&c&&(s.child.flags|=8192),Wu(s,s.updateQueue),Un(s),null;case 4:return Pr(),e===null&&Wd(s.stateNode.containerInfo),Un(s),null;case 10:return sa(s.type),Un(s),null;case 19:if(Ot(pr),E=s.memoizedState,E===null)return Un(s),null;if(g=(s.flags&128)!==0,T=E.rendering,T===null)if(g)_c(E,!1);else{if(Xn!==0||e!==null&&(e.flags&128)!==0)for(e=s.child;e!==null;){if(T=Gu(e),T!==null){for(s.flags|=128,_c(E,!1),e=T.updateQueue,s.updateQueue=e,Wu(s,e),s.subtreeFlags=0,e=c,c=s.child;c!==null;)lg(c,e),c=c.sibling;return Mt(pr,pr.current&1|2),s.child}e=e.sibling}E.tail!==null&&Qe()>Ju&&(s.flags|=128,g=!0,_c(E,!1),s.lanes=4194304)}else{if(!g)if(e=Gu(T),e!==null){if(s.flags|=128,g=!0,e=e.updateQueue,s.updateQueue=e,Wu(s,e),_c(E,!0),E.tail===null&&E.tailMode==="hidden"&&!T.alternate&&!Xe)return Un(s),null}else 2*Qe()-E.renderingStartTime>Ju&&c!==536870912&&(s.flags|=128,g=!0,_c(E,!1),s.lanes=4194304);E.isBackwards?(T.sibling=s.child,s.child=T):(e=E.last,e!==null?e.sibling=T:s.child=T,E.last=T)}return E.tail!==null?(s=E.tail,E.rendering=s,E.tail=s.sibling,E.renderingStartTime=Qe(),s.sibling=null,e=pr.current,Mt(pr,g?e&1|2:e&1),s):(Un(s),null);case 22:case 23:return oa(s),Zf(),g=s.memoizedState!==null,e!==null?e.memoizedState!==null!==g&&(s.flags|=8192):g&&(s.flags|=8192),g?(c&536870912)!==0&&(s.flags&128)===0&&(Un(s),s.subtreeFlags&6&&(s.flags|=8192)):Un(s),c=s.updateQueue,c!==null&&Wu(s,c.retryQueue),c=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(c=e.memoizedState.cachePool.pool),g=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(g=s.memoizedState.cachePool.pool),g!==c&&(s.flags|=2048),e!==null&&Ot(Mo),null;case 24:return c=null,e!==null&&(c=e.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),sa(mr),Un(s),null;case 25:return null;case 30:return null}throw Error(o(156,s.tag))}function KA(e,s){switch(kf(s),s.tag){case 1:return e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 3:return sa(mr),Pr(),e=s.flags,(e&65536)!==0&&(e&128)===0?(s.flags=e&-65537|128,s):null;case 26:case 27:case 5:return In(s),null;case 13:if(oa(s),e=s.memoizedState,e!==null&&e.dehydrated!==null){if(s.alternate===null)throw Error(o(340));ac()}return e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 19:return Ot(pr),null;case 4:return Pr(),null;case 10:return sa(s.type),null;case 22:case 23:return oa(s),Zf(),e!==null&&Ot(Mo),e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 24:return sa(mr),null;case 25:return null;default:return null}}function Bm(e,s){switch(kf(s),s.tag){case 3:sa(mr),Pr();break;case 26:case 27:case 5:In(s);break;case 4:Pr();break;case 13:oa(s);break;case 19:Ot(pr);break;case 10:sa(s.type);break;case 22:case 23:oa(s),Zf(),e!==null&&Ot(Mo);break;case 24:sa(mr)}}function Tc(e,s){try{var c=s.updateQueue,g=c!==null?c.lastEffect:null;if(g!==null){var E=g.next;c=E;do{if((c.tag&e)===e){g=void 0;var T=c.create,M=c.inst;g=T(),M.destroy=g}c=c.next}while(c!==E)}}catch(V){mn(s,s.return,V)}}function ja(e,s,c){try{var g=s.updateQueue,E=g!==null?g.lastEffect:null;if(E!==null){var T=E.next;g=T;do{if((g.tag&e)===e){var M=g.inst,V=M.destroy;if(V!==void 0){M.destroy=void 0,E=s;var W=c,gt=V;try{gt()}catch(Ct){mn(E,W,Ct)}}}g=g.next}while(g!==T)}}catch(Ct){mn(s,s.return,Ct)}}function Pm(e){var s=e.updateQueue;if(s!==null){var c=e.stateNode;try{Tg(s,c)}catch(g){mn(e,e.return,g)}}}function km(e,s,c){c.props=Lo(e.type,e.memoizedProps),c.state=e.memoizedState;try{c.componentWillUnmount()}catch(g){mn(e,s,g)}}function Cc(e,s){try{var c=e.ref;if(c!==null){switch(e.tag){case 26:case 27:case 5:var g=e.stateNode;break;case 30:g=e.stateNode;break;default:g=e.stateNode}typeof c=="function"?e.refCleanup=c(g):c.current=g}}catch(E){mn(e,s,E)}}function Ns(e,s){var c=e.ref,g=e.refCleanup;if(c!==null)if(typeof g=="function")try{g()}catch(E){mn(e,s,E)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(E){mn(e,s,E)}else c.current=null}function Vm(e){var s=e.type,c=e.memoizedProps,g=e.stateNode;try{t:switch(s){case"button":case"input":case"select":case"textarea":c.autoFocus&&g.focus();break t;case"img":c.src?g.src=c.src:c.srcSet&&(g.srcset=c.srcSet)}}catch(E){mn(e,e.return,E)}}function Sd(e,s,c){try{var g=e.stateNode;yw(g,e.type,c,s),g[an]=s}catch(E){mn(e,e.return,E)}}function Um(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Wa(e.type)||e.tag===4}function vd(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||Um(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Wa(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function bd(e,s,c){var g=e.tag;if(g===5||g===6)e=e.stateNode,s?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(e,s):(s=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,s.appendChild(e),c=c._reactRootContainer,c!=null||s.onclick!==null||(s.onclick=oh));else if(g!==4&&(g===27&&Wa(e.type)&&(c=e.stateNode,s=null),e=e.child,e!==null))for(bd(e,s,c),e=e.sibling;e!==null;)bd(e,s,c),e=e.sibling}function Ku(e,s,c){var g=e.tag;if(g===5||g===6)e=e.stateNode,s?c.insertBefore(e,s):c.appendChild(e);else if(g!==4&&(g===27&&Wa(e.type)&&(c=e.stateNode),e=e.child,e!==null))for(Ku(e,s,c),e=e.sibling;e!==null;)Ku(e,s,c),e=e.sibling}function Fm(e){var s=e.stateNode,c=e.memoizedProps;try{for(var g=e.type,E=s.attributes;E.length;)s.removeAttributeNode(E[0]);Dr(s,g,c),s[Kn]=e,s[an]=c}catch(T){mn(e,e.return,T)}}var ua=!1,er=!1,Id=!1,jm=typeof WeakSet=="function"?WeakSet:Set,Ar=null;function ZA(e,s){if(e=e.containerInfo,Jd=gh,e=S(e),R(e)){if("selectionStart"in e)var c={start:e.selectionStart,end:e.selectionEnd};else t:{c=(c=e.ownerDocument)&&c.defaultView||window;var g=c.getSelection&&c.getSelection();if(g&&g.rangeCount!==0){c=g.anchorNode;var E=g.anchorOffset,T=g.focusNode;g=g.focusOffset;try{c.nodeType,T.nodeType}catch{c=null;break t}var M=0,V=-1,W=-1,gt=0,Ct=0,Rt=e,pt=null;e:for(;;){for(var At;Rt!==c||E!==0&&Rt.nodeType!==3||(V=M+E),Rt!==T||g!==0&&Rt.nodeType!==3||(W=M+g),Rt.nodeType===3&&(M+=Rt.nodeValue.length),(At=Rt.firstChild)!==null;)pt=Rt,Rt=At;for(;;){if(Rt===e)break e;if(pt===c&&++gt===E&&(V=M),pt===T&&++Ct===g&&(W=M),(At=Rt.nextSibling)!==null)break;Rt=pt,pt=Rt.parentNode}Rt=At}c=V===-1||W===-1?null:{start:V,end:W}}else c=null}c=c||{start:0,end:0}}else c=null;for($d={focusedElem:e,selectionRange:c},gh=!1,Ar=s;Ar!==null;)if(s=Ar,e=s.child,(s.subtreeFlags&1024)!==0&&e!==null)e.return=s,Ar=e;else for(;Ar!==null;){switch(s=Ar,T=s.alternate,e=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&T!==null){e=void 0,c=s,E=T.memoizedProps,T=T.memoizedState,g=c.stateNode;try{var se=Lo(c.type,E,c.elementType===c.type);e=g.getSnapshotBeforeUpdate(se,T),g.__reactInternalSnapshotBeforeUpdate=e}catch(ne){mn(c,c.return,ne)}}break;case 3:if((e&1024)!==0){if(e=s.stateNode.containerInfo,c=e.nodeType,c===9)n1(e);else if(c===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":n1(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(o(163))}if(e=s.sibling,e!==null){e.return=s.return,Ar=e;break}Ar=s.return}}function zm(e,s,c){var g=c.flags;switch(c.tag){case 0:case 11:case 15:za(e,c),g&4&&Tc(5,c);break;case 1:if(za(e,c),g&4)if(e=c.stateNode,s===null)try{e.componentDidMount()}catch(M){mn(c,c.return,M)}else{var E=Lo(c.type,s.memoizedProps);s=s.memoizedState;try{e.componentDidUpdate(E,s,e.__reactInternalSnapshotBeforeUpdate)}catch(M){mn(c,c.return,M)}}g&64&&Pm(c),g&512&&Cc(c,c.return);break;case 3:if(za(e,c),g&64&&(e=c.updateQueue,e!==null)){if(s=null,c.child!==null)switch(c.child.tag){case 27:case 5:s=c.child.stateNode;break;case 1:s=c.child.stateNode}try{Tg(e,s)}catch(M){mn(c,c.return,M)}}break;case 27:s===null&&g&4&&Fm(c);case 26:case 5:za(e,c),s===null&&g&4&&Vm(c),g&512&&Cc(c,c.return);break;case 12:za(e,c);break;case 13:za(e,c),g&4&&qm(e,c),g&64&&(e=c.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(c=aw.bind(null,c),Cw(e,c))));break;case 22:if(g=c.memoizedState!==null||ua,!g){s=s!==null&&s.memoizedState!==null||er,E=ua;var T=er;ua=g,(er=s)&&!T?Ha(e,c,(c.subtreeFlags&8772)!==0):za(e,c),ua=E,er=T}break;case 30:break;default:za(e,c)}}function Hm(e){var s=e.alternate;s!==null&&(e.alternate=null,Hm(s)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(s=e.stateNode,s!==null&&Fi(s)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Bn=null,fi=!1;function ha(e,s,c){for(c=c.child;c!==null;)Gm(e,s,c),c=c.sibling}function Gm(e,s,c){if(Fe&&typeof Fe.onCommitFiberUnmount=="function")try{Fe.onCommitFiberUnmount(Le,c)}catch{}switch(c.tag){case 26:er||Ns(c,s),ha(e,s,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:er||Ns(c,s);var g=Bn,E=fi;Wa(c.type)&&(Bn=c.stateNode,fi=!1),ha(e,s,c),Oc(c.stateNode),Bn=g,fi=E;break;case 5:er||Ns(c,s);case 6:if(g=Bn,E=fi,Bn=null,ha(e,s,c),Bn=g,fi=E,Bn!==null)if(fi)try{(Bn.nodeType===9?Bn.body:Bn.nodeName==="HTML"?Bn.ownerDocument.body:Bn).removeChild(c.stateNode)}catch(T){mn(c,s,T)}else try{Bn.removeChild(c.stateNode)}catch(T){mn(c,s,T)}break;case 18:Bn!==null&&(fi?(e=Bn,Mp(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,c.stateNode),jc(e)):Mp(Bn,c.stateNode));break;case 4:g=Bn,E=fi,Bn=c.stateNode.containerInfo,fi=!0,ha(e,s,c),Bn=g,fi=E;break;case 0:case 11:case 14:case 15:er||ja(2,c,s),er||ja(4,c,s),ha(e,s,c);break;case 1:er||(Ns(c,s),g=c.stateNode,typeof g.componentWillUnmount=="function"&&km(c,s,g)),ha(e,s,c);break;case 21:ha(e,s,c);break;case 22:er=(g=er)||c.memoizedState!==null,ha(e,s,c),er=g;break;default:ha(e,s,c)}}function qm(e,s){if(s.memoizedState===null&&(e=s.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{jc(e)}catch(c){mn(s,s.return,c)}}function JA(e){switch(e.tag){case 13:case 19:var s=e.stateNode;return s===null&&(s=e.stateNode=new jm),s;case 22:return e=e.stateNode,s=e._retryCache,s===null&&(s=e._retryCache=new jm),s;default:throw Error(o(435,e.tag))}}function Rd(e,s){var c=JA(e);s.forEach(function(g){var E=ow.bind(null,e,g);c.has(g)||(c.add(g),g.then(E,E))})}function bi(e,s){var c=s.deletions;if(c!==null)for(var g=0;g<c.length;g++){var E=c[g],T=e,M=s,V=M;t:for(;V!==null;){switch(V.tag){case 27:if(Wa(V.type)){Bn=V.stateNode,fi=!1;break t}break;case 5:Bn=V.stateNode,fi=!1;break t;case 3:case 4:Bn=V.stateNode.containerInfo,fi=!0;break t}V=V.return}if(Bn===null)throw Error(o(160));Gm(T,M,E),Bn=null,fi=!1,T=E.alternate,T!==null&&(T.return=null),E.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)Ym(s,e),s=s.sibling}var hs=null;function Ym(e,s){var c=e.alternate,g=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:bi(s,e),Ii(e),g&4&&(ja(3,e,e.return),Tc(3,e),ja(5,e,e.return));break;case 1:bi(s,e),Ii(e),g&512&&(er||c===null||Ns(c,c.return)),g&64&&ua&&(e=e.updateQueue,e!==null&&(g=e.callbacks,g!==null&&(c=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=c===null?g:c.concat(g))));break;case 26:var E=hs;if(bi(s,e),Ii(e),g&512&&(er||c===null||Ns(c,c.return)),g&4){var T=c!==null?c.memoizedState:null;if(g=e.memoizedState,c===null)if(g===null)if(e.stateNode===null){t:{g=e.type,c=e.memoizedProps,E=E.ownerDocument||E;e:switch(g){case"title":T=E.getElementsByTagName("title")[0],(!T||T[ri]||T[Kn]||T.namespaceURI==="http://www.w3.org/2000/svg"||T.hasAttribute("itemprop"))&&(T=E.createElement(g),E.head.insertBefore(T,E.querySelector("head > title"))),Dr(T,g,c),T[Kn]=e,ze(T),g=T;break t;case"link":var M=Fp("link","href",E).get(g+(c.href||""));if(M){for(var V=0;V<M.length;V++)if(T=M[V],T.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&T.getAttribute("rel")===(c.rel==null?null:c.rel)&&T.getAttribute("title")===(c.title==null?null:c.title)&&T.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){M.splice(V,1);break e}}T=E.createElement(g),Dr(T,g,c),E.head.appendChild(T);break;case"meta":if(M=Fp("meta","content",E).get(g+(c.content||""))){for(V=0;V<M.length;V++)if(T=M[V],T.getAttribute("content")===(c.content==null?null:""+c.content)&&T.getAttribute("name")===(c.name==null?null:c.name)&&T.getAttribute("property")===(c.property==null?null:c.property)&&T.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&T.getAttribute("charset")===(c.charSet==null?null:c.charSet)){M.splice(V,1);break e}}T=E.createElement(g),Dr(T,g,c),E.head.appendChild(T);break;default:throw Error(o(468,g))}T[Kn]=e,ze(T),g=T}e.stateNode=g}else jp(E,e.type,e.stateNode);else e.stateNode=Up(E,g,e.memoizedProps);else T!==g?(T===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):T.count--,g===null?jp(E,e.type,e.stateNode):Up(E,g,e.memoizedProps)):g===null&&e.stateNode!==null&&Sd(e,e.memoizedProps,c.memoizedProps)}break;case 27:bi(s,e),Ii(e),g&512&&(er||c===null||Ns(c,c.return)),c!==null&&g&4&&Sd(e,e.memoizedProps,c.memoizedProps);break;case 5:if(bi(s,e),Ii(e),g&512&&(er||c===null||Ns(c,c.return)),e.flags&32){E=e.stateNode;try{Tn(E,"")}catch(At){mn(e,e.return,At)}}g&4&&e.stateNode!=null&&(E=e.memoizedProps,Sd(e,E,c!==null?c.memoizedProps:E)),g&1024&&(Id=!0);break;case 6:if(bi(s,e),Ii(e),g&4){if(e.stateNode===null)throw Error(o(162));g=e.memoizedProps,c=e.stateNode;try{c.nodeValue=g}catch(At){mn(e,e.return,At)}}break;case 3:if(hh=null,E=hs,hs=ch(s.containerInfo),bi(s,e),hs=E,Ii(e),g&4&&c!==null&&c.memoizedState.isDehydrated)try{jc(s.containerInfo)}catch(At){mn(e,e.return,At)}Id&&(Id=!1,Xm(e));break;case 4:g=hs,hs=ch(e.stateNode.containerInfo),bi(s,e),Ii(e),hs=g;break;case 12:bi(s,e),Ii(e);break;case 13:bi(s,e),Ii(e),e.child.flags&8192&&e.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Bd=Qe()),g&4&&(g=e.updateQueue,g!==null&&(e.updateQueue=null,Rd(e,g)));break;case 22:E=e.memoizedState!==null;var W=c!==null&&c.memoizedState!==null,gt=ua,Ct=er;if(ua=gt||E,er=Ct||W,bi(s,e),er=Ct,ua=gt,Ii(e),g&8192)t:for(s=e.stateNode,s._visibility=E?s._visibility&-2:s._visibility|1,E&&(c===null||W||ua||er||Bo(e)),c=null,s=e;;){if(s.tag===5||s.tag===26){if(c===null){W=c=s;try{if(T=W.stateNode,E)M=T.style,typeof M.setProperty=="function"?M.setProperty("display","none","important"):M.display="none";else{V=W.stateNode;var Rt=W.memoizedProps.style,pt=Rt!=null&&Rt.hasOwnProperty("display")?Rt.display:null;V.style.display=pt==null||typeof pt=="boolean"?"":(""+pt).trim()}}catch(At){mn(W,W.return,At)}}}else if(s.tag===6){if(c===null){W=s;try{W.stateNode.nodeValue=E?"":W.memoizedProps}catch(At){mn(W,W.return,At)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===e)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break t;for(;s.sibling===null;){if(s.return===null||s.return===e)break t;c===s&&(c=null),s=s.return}c===s&&(c=null),s.sibling.return=s.return,s=s.sibling}g&4&&(g=e.updateQueue,g!==null&&(c=g.retryQueue,c!==null&&(g.retryQueue=null,Rd(e,c))));break;case 19:bi(s,e),Ii(e),g&4&&(g=e.updateQueue,g!==null&&(e.updateQueue=null,Rd(e,g)));break;case 30:break;case 21:break;default:bi(s,e),Ii(e)}}function Ii(e){var s=e.flags;if(s&2){try{for(var c,g=e.return;g!==null;){if(Um(g)){c=g;break}g=g.return}if(c==null)throw Error(o(160));switch(c.tag){case 27:var E=c.stateNode,T=vd(e);Ku(e,T,E);break;case 5:var M=c.stateNode;c.flags&32&&(Tn(M,""),c.flags&=-33);var V=vd(e);Ku(e,V,M);break;case 3:case 4:var W=c.stateNode.containerInfo,gt=vd(e);bd(e,gt,W);break;default:throw Error(o(161))}}catch(Ct){mn(e,e.return,Ct)}e.flags&=-3}s&4096&&(e.flags&=-4097)}function Xm(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var s=e;Xm(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),e=e.sibling}}function za(e,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)zm(e,s.alternate,s),s=s.sibling}function Bo(e){for(e=e.child;e!==null;){var s=e;switch(s.tag){case 0:case 11:case 14:case 15:ja(4,s,s.return),Bo(s);break;case 1:Ns(s,s.return);var c=s.stateNode;typeof c.componentWillUnmount=="function"&&km(s,s.return,c),Bo(s);break;case 27:Oc(s.stateNode);case 26:case 5:Ns(s,s.return),Bo(s);break;case 22:s.memoizedState===null&&Bo(s);break;case 30:Bo(s);break;default:Bo(s)}e=e.sibling}}function Ha(e,s,c){for(c=c&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var g=s.alternate,E=e,T=s,M=T.flags;switch(T.tag){case 0:case 11:case 15:Ha(E,T,c),Tc(4,T);break;case 1:if(Ha(E,T,c),g=T,E=g.stateNode,typeof E.componentDidMount=="function")try{E.componentDidMount()}catch(gt){mn(g,g.return,gt)}if(g=T,E=g.updateQueue,E!==null){var V=g.stateNode;try{var W=E.shared.hiddenCallbacks;if(W!==null)for(E.shared.hiddenCallbacks=null,E=0;E<W.length;E++)_g(W[E],V)}catch(gt){mn(g,g.return,gt)}}c&&M&64&&Pm(T),Cc(T,T.return);break;case 27:Fm(T);case 26:case 5:Ha(E,T,c),c&&g===null&&M&4&&Vm(T),Cc(T,T.return);break;case 12:Ha(E,T,c);break;case 13:Ha(E,T,c),c&&M&4&&qm(E,T);break;case 22:T.memoizedState===null&&Ha(E,T,c),Cc(T,T.return);break;case 30:break;default:Ha(E,T,c)}s=s.sibling}}function Nd(e,s){var c=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(c=e.memoizedState.cachePool.pool),e=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(e=s.memoizedState.cachePool.pool),e!==c&&(e!=null&&e.refCount++,c!=null&&cc(c))}function Dd(e,s){e=null,s.alternate!==null&&(e=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==e&&(s.refCount++,e!=null&&cc(e))}function Ds(e,s,c,g){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Qm(e,s,c,g),s=s.sibling}function Qm(e,s,c,g){var E=s.flags;switch(s.tag){case 0:case 11:case 15:Ds(e,s,c,g),E&2048&&Tc(9,s);break;case 1:Ds(e,s,c,g);break;case 3:Ds(e,s,c,g),E&2048&&(e=null,s.alternate!==null&&(e=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==e&&(s.refCount++,e!=null&&cc(e)));break;case 12:if(E&2048){Ds(e,s,c,g),e=s.stateNode;try{var T=s.memoizedProps,M=T.id,V=T.onPostCommit;typeof V=="function"&&V(M,s.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(W){mn(s,s.return,W)}}else Ds(e,s,c,g);break;case 13:Ds(e,s,c,g);break;case 23:break;case 22:T=s.stateNode,M=s.alternate,s.memoizedState!==null?T._visibility&2?Ds(e,s,c,g):Sc(e,s):T._visibility&2?Ds(e,s,c,g):(T._visibility|=2,Al(e,s,c,g,(s.subtreeFlags&10256)!==0)),E&2048&&Nd(M,s);break;case 24:Ds(e,s,c,g),E&2048&&Dd(s.alternate,s);break;default:Ds(e,s,c,g)}}function Al(e,s,c,g,E){for(E=E&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var T=e,M=s,V=c,W=g,gt=M.flags;switch(M.tag){case 0:case 11:case 15:Al(T,M,V,W,E),Tc(8,M);break;case 23:break;case 22:var Ct=M.stateNode;M.memoizedState!==null?Ct._visibility&2?Al(T,M,V,W,E):Sc(T,M):(Ct._visibility|=2,Al(T,M,V,W,E)),E&&gt&2048&&Nd(M.alternate,M);break;case 24:Al(T,M,V,W,E),E&&gt&2048&&Dd(M.alternate,M);break;default:Al(T,M,V,W,E)}s=s.sibling}}function Sc(e,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var c=e,g=s,E=g.flags;switch(g.tag){case 22:Sc(c,g),E&2048&&Nd(g.alternate,g);break;case 24:Sc(c,g),E&2048&&Dd(g.alternate,g);break;default:Sc(c,g)}s=s.sibling}}var vc=8192;function wl(e){if(e.subtreeFlags&vc)for(e=e.child;e!==null;)Wm(e),e=e.sibling}function Wm(e){switch(e.tag){case 26:wl(e),e.flags&vc&&e.memoizedState!==null&&kw(hs,e.memoizedState,e.memoizedProps);break;case 5:wl(e);break;case 3:case 4:var s=hs;hs=ch(e.stateNode.containerInfo),wl(e),hs=s;break;case 22:e.memoizedState===null&&(s=e.alternate,s!==null&&s.memoizedState!==null?(s=vc,vc=16777216,wl(e),vc=s):wl(e));break;default:wl(e)}}function Km(e){var s=e.alternate;if(s!==null&&(e=s.child,e!==null)){s.child=null;do s=e.sibling,e.sibling=null,e=s;while(e!==null)}}function bc(e){var s=e.deletions;if((e.flags&16)!==0){if(s!==null)for(var c=0;c<s.length;c++){var g=s[c];Ar=g,Jm(g,e)}Km(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Zm(e),e=e.sibling}function Zm(e){switch(e.tag){case 0:case 11:case 15:bc(e),e.flags&2048&&ja(9,e,e.return);break;case 3:bc(e);break;case 12:bc(e);break;case 22:var s=e.stateNode;e.memoizedState!==null&&s._visibility&2&&(e.return===null||e.return.tag!==13)?(s._visibility&=-3,Zu(e)):bc(e);break;default:bc(e)}}function Zu(e){var s=e.deletions;if((e.flags&16)!==0){if(s!==null)for(var c=0;c<s.length;c++){var g=s[c];Ar=g,Jm(g,e)}Km(e)}for(e=e.child;e!==null;){switch(s=e,s.tag){case 0:case 11:case 15:ja(8,s,s.return),Zu(s);break;case 22:c=s.stateNode,c._visibility&2&&(c._visibility&=-3,Zu(s));break;default:Zu(s)}e=e.sibling}}function Jm(e,s){for(;Ar!==null;){var c=Ar;switch(c.tag){case 0:case 11:case 15:ja(8,c,s);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var g=c.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:cc(c.memoizedState.cache)}if(g=c.child,g!==null)g.return=c,Ar=g;else t:for(c=e;Ar!==null;){g=Ar;var E=g.sibling,T=g.return;if(Hm(g),g===c){Ar=null;break t}if(E!==null){E.return=T,Ar=E;break t}Ar=T}}}var $A={getCacheForType:function(e){var s=qr(mr),c=s.data.get(e);return c===void 0&&(c=e(),s.data.set(e,c)),c}},tw=typeof WeakMap=="function"?WeakMap:Map,en=0,yn=null,Ce=null,Pe=0,nn=0,Ri=null,Ga=!1,_l=!1,Md=!1,fa=0,Xn=0,qa=0,Po=0,Od=0,$i=0,Tl=0,Ic=null,di=null,Ld=!1,Bd=0,Ju=1/0,$u=null,Ya=null,Nr=0,Xa=null,Cl=null,Sl=0,Pd=0,kd=null,$m=null,Rc=0,Vd=null;function Ni(){if((en&2)!==0&&Pe!==0)return Pe&-Pe;if(ut.T!==null){var e=fl;return e!==0?e:qd()}return Zr()}function tp(){$i===0&&($i=(Pe&536870912)===0||Xe?Xs():536870912);var e=Ji.current;return e!==null&&(e.flags|=32),$i}function Di(e,s,c){(e===yn&&(nn===2||nn===9)||e.cancelPendingCommit!==null)&&(vl(e,0),Qa(e,Pe,$i,!1)),Tr(e,c),((en&2)===0||e!==yn)&&(e===yn&&((en&2)===0&&(Po|=c),Xn===4&&Qa(e,Pe,$i,!1)),Ms(e))}function ep(e,s,c){if((en&6)!==0)throw Error(o(327));var g=!c&&(s&124)===0&&(s&e.expiredLanes)===0||Ke(e,s),E=g?rw(e,s):jd(e,s,!0),T=g;do{if(E===0){_l&&!g&&Qa(e,s,0,!1);break}else{if(c=e.current.alternate,T&&!ew(c)){E=jd(e,s,!1),T=!1;continue}if(E===2){if(T=s,e.errorRecoveryDisabledLanes&T)var M=0;else M=e.pendingLanes&-536870913,M=M!==0?M:M&536870912?536870912:0;if(M!==0){s=M;t:{var V=e;E=Ic;var W=V.current.memoizedState.isDehydrated;if(W&&(vl(V,M).flags|=256),M=jd(V,M,!1),M!==2){if(Md&&!W){V.errorRecoveryDisabledLanes|=T,Po|=T,E=4;break t}T=di,di=E,T!==null&&(di===null?di=T:di.push.apply(di,T))}E=M}if(T=!1,E!==2)continue}}if(E===1){vl(e,0),Qa(e,s,0,!0);break}t:{switch(g=e,T=E,T){case 0:case 1:throw Error(o(345));case 4:if((s&4194048)!==s)break;case 6:Qa(g,s,$i,!Ga);break t;case 2:di=null;break;case 3:case 5:break;default:throw Error(o(329))}if((s&62914560)===s&&(E=Bd+300-Qe(),10<E)){if(Qa(g,s,$i,!Ga),Be(g,0,!0)!==0)break t;g.timeoutHandle=Np(np.bind(null,g,c,di,$u,Ld,s,$i,Po,Tl,Ga,T,2,-0,0),E);break t}np(g,c,di,$u,Ld,s,$i,Po,Tl,Ga,T,0,-0,0)}}break}while(!0);Ms(e)}function np(e,s,c,g,E,T,M,V,W,gt,Ct,Rt,pt,At){if(e.timeoutHandle=-1,Rt=s.subtreeFlags,(Rt&8192||(Rt&16785408)===16785408)&&(Pc={stylesheets:null,count:0,unsuspend:Pw},Wm(s),Rt=Vw(),Rt!==null)){e.cancelPendingCommit=Rt(cp.bind(null,e,s,T,c,g,E,M,V,W,Ct,1,pt,At)),Qa(e,T,M,!gt);return}cp(e,s,T,c,g,E,M,V,W)}function ew(e){for(var s=e;;){var c=s.tag;if((c===0||c===11||c===15)&&s.flags&16384&&(c=s.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var g=0;g<c.length;g++){var E=c[g],T=E.getSnapshot;E=E.value;try{if(!h(T(),E))return!1}catch{return!1}}if(c=s.child,s.subtreeFlags&16384&&c!==null)c.return=s,s=c;else{if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Qa(e,s,c,g){s&=~Od,s&=~Po,e.suspendedLanes|=s,e.pingedLanes&=~s,g&&(e.warmLanes|=s),g=e.expirationTimes;for(var E=s;0<E;){var T=31-je(E),M=1<<T;g[T]=-1,E&=~M}c!==0&&yi(e,c,s)}function th(){return(en&6)===0?(Nc(0),!1):!0}function Ud(){if(Ce!==null){if(nn===0)var e=Ce.return;else e=Ce,ia=No=null,nd(e),xl=null,Ac=0,e=Ce;for(;e!==null;)Bm(e.alternate,e),e=e.return;Ce=null}}function vl(e,s){var c=e.timeoutHandle;c!==-1&&(e.timeoutHandle=-1,Ew(c)),c=e.cancelPendingCommit,c!==null&&(e.cancelPendingCommit=null,c()),Ud(),yn=e,Ce=c=ea(e.current,null),Pe=s,nn=0,Ri=null,Ga=!1,_l=Ke(e,s),Md=!1,Tl=$i=Od=Po=qa=Xn=0,di=Ic=null,Ld=!1,(s&8)!==0&&(s|=s&32);var g=e.entangledLanes;if(g!==0)for(e=e.entanglements,g&=s;0<g;){var E=31-je(g),T=1<<E;s|=e[E],g&=~T}return fa=s,_u(),c}function rp(e,s){we=null,ut.H=ju,s===hc||s===Du?(s=Ag(),nn=3):s===yg?(s=Ag(),nn=4):nn=s===wm?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Ri=s,Ce===null&&(Xn=1,Yu(e,Qi(s,e.current)))}function ip(){var e=ut.H;return ut.H=ju,e===null?ju:e}function sp(){var e=ut.A;return ut.A=$A,e}function Fd(){Xn=4,Ga||(Pe&4194048)!==Pe&&Ji.current!==null||(_l=!0),(qa&134217727)===0&&(Po&134217727)===0||yn===null||Qa(yn,Pe,$i,!1)}function jd(e,s,c){var g=en;en|=2;var E=ip(),T=sp();(yn!==e||Pe!==s)&&($u=null,vl(e,s)),s=!1;var M=Xn;t:do try{if(nn!==0&&Ce!==null){var V=Ce,W=Ri;switch(nn){case 8:Ud(),M=6;break t;case 3:case 2:case 9:case 6:Ji.current===null&&(s=!0);var gt=nn;if(nn=0,Ri=null,bl(e,V,W,gt),c&&_l){M=0;break t}break;default:gt=nn,nn=0,Ri=null,bl(e,V,W,gt)}}nw(),M=Xn;break}catch(Ct){rp(e,Ct)}while(!0);return s&&e.shellSuspendCounter++,ia=No=null,en=g,ut.H=E,ut.A=T,Ce===null&&(yn=null,Pe=0,_u()),M}function nw(){for(;Ce!==null;)ap(Ce)}function rw(e,s){var c=en;en|=2;var g=ip(),E=sp();yn!==e||Pe!==s?($u=null,Ju=Qe()+500,vl(e,s)):_l=Ke(e,s);t:do try{if(nn!==0&&Ce!==null){s=Ce;var T=Ri;e:switch(nn){case 1:nn=0,Ri=null,bl(e,s,T,1);break;case 2:case 9:if(xg(T)){nn=0,Ri=null,op(s);break}s=function(){nn!==2&&nn!==9||yn!==e||(nn=7),Ms(e)},T.then(s,s);break t;case 3:nn=7;break t;case 4:nn=5;break t;case 7:xg(T)?(nn=0,Ri=null,op(s)):(nn=0,Ri=null,bl(e,s,T,7));break;case 5:var M=null;switch(Ce.tag){case 26:M=Ce.memoizedState;case 5:case 27:var V=Ce;if(!M||zp(M)){nn=0,Ri=null;var W=V.sibling;if(W!==null)Ce=W;else{var gt=V.return;gt!==null?(Ce=gt,eh(gt)):Ce=null}break e}}nn=0,Ri=null,bl(e,s,T,5);break;case 6:nn=0,Ri=null,bl(e,s,T,6);break;case 8:Ud(),Xn=6;break t;default:throw Error(o(462))}}iw();break}catch(Ct){rp(e,Ct)}while(!0);return ia=No=null,ut.H=g,ut.A=E,en=c,Ce!==null?0:(yn=null,Pe=0,_u(),Xn)}function iw(){for(;Ce!==null&&!kr();)ap(Ce)}function ap(e){var s=Om(e.alternate,e,fa);e.memoizedProps=e.pendingProps,s===null?eh(e):Ce=s}function op(e){var s=e,c=s.alternate;switch(s.tag){case 15:case 0:s=bm(c,s,s.pendingProps,s.type,void 0,Pe);break;case 11:s=bm(c,s,s.pendingProps,s.type.render,s.ref,Pe);break;case 5:nd(s);default:Bm(c,s),s=Ce=lg(s,fa),s=Om(c,s,fa)}e.memoizedProps=e.pendingProps,s===null?eh(e):Ce=s}function bl(e,s,c,g){ia=No=null,nd(s),xl=null,Ac=0;var E=s.return;try{if(XA(e,E,s,c,Pe)){Xn=1,Yu(e,Qi(c,e.current)),Ce=null;return}}catch(T){if(E!==null)throw Ce=E,T;Xn=1,Yu(e,Qi(c,e.current)),Ce=null;return}s.flags&32768?(Xe||g===1?e=!0:_l||(Pe&536870912)!==0?e=!1:(Ga=e=!0,(g===2||g===9||g===3||g===6)&&(g=Ji.current,g!==null&&g.tag===13&&(g.flags|=16384))),lp(s,e)):eh(s)}function eh(e){var s=e;do{if((s.flags&32768)!==0){lp(s,Ga);return}e=s.return;var c=WA(s.alternate,s,fa);if(c!==null){Ce=c;return}if(s=s.sibling,s!==null){Ce=s;return}Ce=s=e}while(s!==null);Xn===0&&(Xn=5)}function lp(e,s){do{var c=KA(e.alternate,e);if(c!==null){c.flags&=32767,Ce=c;return}if(c=e.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!s&&(e=e.sibling,e!==null)){Ce=e;return}Ce=e=c}while(e!==null);Xn=6,Ce=null}function cp(e,s,c,g,E,T,M,V,W){e.cancelPendingCommit=null;do nh();while(Nr!==0);if((en&6)!==0)throw Error(o(327));if(s!==null){if(s===e.current)throw Error(o(177));if(T=s.lanes|s.childLanes,T|=Df,Sa(e,c,T,M,V,W),e===yn&&(Ce=yn=null,Pe=0),Cl=s,Xa=e,Sl=c,Pd=T,kd=E,$m=g,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,lw(qt,function(){return gp(),null})):(e.callbackNode=null,e.callbackPriority=0),g=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||g){g=ut.T,ut.T=null,E=xt.p,xt.p=2,M=en,en|=4;try{ZA(e,s,c)}finally{en=M,xt.p=E,ut.T=g}}Nr=1,up(),hp(),fp()}}function up(){if(Nr===1){Nr=0;var e=Xa,s=Cl,c=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||c){c=ut.T,ut.T=null;var g=xt.p;xt.p=2;var E=en;en|=4;try{Ym(s,e);var T=$d,M=S(e.containerInfo),V=T.focusedElem,W=T.selectionRange;if(M!==V&&V&&V.ownerDocument&&w(V.ownerDocument.documentElement,V)){if(W!==null&&R(V)){var gt=W.start,Ct=W.end;if(Ct===void 0&&(Ct=gt),"selectionStart"in V)V.selectionStart=gt,V.selectionEnd=Math.min(Ct,V.value.length);else{var Rt=V.ownerDocument||document,pt=Rt&&Rt.defaultView||window;if(pt.getSelection){var At=pt.getSelection(),se=V.textContent.length,ne=Math.min(W.start,se),cn=W.end===void 0?ne:Math.min(W.end,se);!At.extend&&ne>cn&&(M=cn,cn=ne,ne=M);var ot=p(V,ne),it=p(V,cn);if(ot&&it&&(At.rangeCount!==1||At.anchorNode!==ot.node||At.anchorOffset!==ot.offset||At.focusNode!==it.node||At.focusOffset!==it.offset)){var dt=Rt.createRange();dt.setStart(ot.node,ot.offset),At.removeAllRanges(),ne>cn?(At.addRange(dt),At.extend(it.node,it.offset)):(dt.setEnd(it.node,it.offset),At.addRange(dt))}}}}for(Rt=[],At=V;At=At.parentNode;)At.nodeType===1&&Rt.push({element:At,left:At.scrollLeft,top:At.scrollTop});for(typeof V.focus=="function"&&V.focus(),V=0;V<Rt.length;V++){var St=Rt[V];St.element.scrollLeft=St.left,St.element.scrollTop=St.top}}gh=!!Jd,$d=Jd=null}finally{en=E,xt.p=g,ut.T=c}}e.current=s,Nr=2}}function hp(){if(Nr===2){Nr=0;var e=Xa,s=Cl,c=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||c){c=ut.T,ut.T=null;var g=xt.p;xt.p=2;var E=en;en|=4;try{zm(e,s.alternate,s)}finally{en=E,xt.p=g,ut.T=c}}Nr=3}}function fp(){if(Nr===4||Nr===3){Nr=0,As();var e=Xa,s=Cl,c=Sl,g=$m;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Nr=5:(Nr=0,Cl=Xa=null,dp(e,e.pendingLanes));var E=e.pendingLanes;if(E===0&&(Ya=null),Vn(c),s=s.stateNode,Fe&&typeof Fe.onCommitFiberRoot=="function")try{Fe.onCommitFiberRoot(Le,s,void 0,(s.current.flags&128)===128)}catch{}if(g!==null){s=ut.T,E=xt.p,xt.p=2,ut.T=null;try{for(var T=e.onRecoverableError,M=0;M<g.length;M++){var V=g[M];T(V.value,{componentStack:V.stack})}}finally{ut.T=s,xt.p=E}}(Sl&3)!==0&&nh(),Ms(e),E=e.pendingLanes,(c&4194090)!==0&&(E&42)!==0?e===Vd?Rc++:(Rc=0,Vd=e):Rc=0,Nc(0)}}function dp(e,s){(e.pooledCacheLanes&=s)===0&&(s=e.pooledCache,s!=null&&(e.pooledCache=null,cc(s)))}function nh(e){return up(),hp(),fp(),gp()}function gp(){if(Nr!==5)return!1;var e=Xa,s=Pd;Pd=0;var c=Vn(Sl),g=ut.T,E=xt.p;try{xt.p=32>c?32:c,ut.T=null,c=kd,kd=null;var T=Xa,M=Sl;if(Nr=0,Cl=Xa=null,Sl=0,(en&6)!==0)throw Error(o(331));var V=en;if(en|=4,Zm(T.current),Qm(T,T.current,M,c),en=V,Nc(0,!1),Fe&&typeof Fe.onPostCommitFiberRoot=="function")try{Fe.onPostCommitFiberRoot(Le,T)}catch{}return!0}finally{xt.p=E,ut.T=g,dp(e,s)}}function mp(e,s,c){s=Qi(c,s),s=pd(e.stateNode,s,2),e=ka(e,s,2),e!==null&&(Tr(e,2),Ms(e))}function mn(e,s,c){if(e.tag===3)mp(e,e,c);else for(;s!==null;){if(s.tag===3){mp(s,e,c);break}else if(s.tag===1){var g=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Ya===null||!Ya.has(g))){e=Qi(c,e),c=Em(2),g=ka(s,c,2),g!==null&&(Am(c,g,s,e),Tr(g,2),Ms(g));break}}s=s.return}}function zd(e,s,c){var g=e.pingCache;if(g===null){g=e.pingCache=new tw;var E=new Set;g.set(s,E)}else E=g.get(s),E===void 0&&(E=new Set,g.set(s,E));E.has(c)||(Md=!0,E.add(c),e=sw.bind(null,e,s,c),s.then(e,e))}function sw(e,s,c){var g=e.pingCache;g!==null&&g.delete(s),e.pingedLanes|=e.suspendedLanes&c,e.warmLanes&=~c,yn===e&&(Pe&c)===c&&(Xn===4||Xn===3&&(Pe&62914560)===Pe&&300>Qe()-Bd?(en&2)===0&&vl(e,0):Od|=c,Tl===Pe&&(Tl=0)),Ms(e)}function pp(e,s){s===0&&(s=Ca()),e=ll(e,s),e!==null&&(Tr(e,s),Ms(e))}function aw(e){var s=e.memoizedState,c=0;s!==null&&(c=s.retryLane),pp(e,c)}function ow(e,s){var c=0;switch(e.tag){case 13:var g=e.stateNode,E=e.memoizedState;E!==null&&(c=E.retryLane);break;case 19:g=e.stateNode;break;case 22:g=e.stateNode._retryCache;break;default:throw Error(o(314))}g!==null&&g.delete(s),pp(e,c)}function lw(e,s){return Ee(e,s)}var rh=null,Il=null,Hd=!1,ih=!1,Gd=!1,ko=0;function Ms(e){e!==Il&&e.next===null&&(Il===null?rh=Il=e:Il=Il.next=e),ih=!0,Hd||(Hd=!0,uw())}function Nc(e,s){if(!Gd&&ih){Gd=!0;do for(var c=!1,g=rh;g!==null;){if(e!==0){var E=g.pendingLanes;if(E===0)var T=0;else{var M=g.suspendedLanes,V=g.pingedLanes;T=(1<<31-je(42|e)+1)-1,T&=E&~(M&~V),T=T&201326741?T&201326741|1:T?T|2:0}T!==0&&(c=!0,Ap(g,T))}else T=Pe,T=Be(g,g===yn?T:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(T&3)===0||Ke(g,T)||(c=!0,Ap(g,T));g=g.next}while(c);Gd=!1}}function cw(){yp()}function yp(){ih=Hd=!1;var e=0;ko!==0&&(xw()&&(e=ko),ko=0);for(var s=Qe(),c=null,g=rh;g!==null;){var E=g.next,T=xp(g,s);T===0?(g.next=null,c===null?rh=E:c.next=E,E===null&&(Il=c)):(c=g,(e!==0||(T&3)!==0)&&(ih=!0)),g=E}Nc(e)}function xp(e,s){for(var c=e.suspendedLanes,g=e.pingedLanes,E=e.expirationTimes,T=e.pendingLanes&-62914561;0<T;){var M=31-je(T),V=1<<M,W=E[M];W===-1?((V&c)===0||(V&g)!==0)&&(E[M]=ss(V,s)):W<=s&&(e.expiredLanes|=V),T&=~V}if(s=yn,c=Pe,c=Be(e,e===s?c:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),g=e.callbackNode,c===0||e===s&&(nn===2||nn===9)||e.cancelPendingCommit!==null)return g!==null&&g!==null&&ni(g),e.callbackNode=null,e.callbackPriority=0;if((c&3)===0||Ke(e,c)){if(s=c&-c,s===e.callbackPriority)return s;switch(g!==null&&ni(g),Vn(c)){case 2:case 8:c=is;break;case 32:c=qt;break;case 268435456:c=qs;break;default:c=qt}return g=Ep.bind(null,e),c=Ee(c,g),e.callbackPriority=s,e.callbackNode=c,s}return g!==null&&g!==null&&ni(g),e.callbackPriority=2,e.callbackNode=null,2}function Ep(e,s){if(Nr!==0&&Nr!==5)return e.callbackNode=null,e.callbackPriority=0,null;var c=e.callbackNode;if(nh()&&e.callbackNode!==c)return null;var g=Pe;return g=Be(e,e===yn?g:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),g===0?null:(ep(e,g,s),xp(e,Qe()),e.callbackNode!=null&&e.callbackNode===c?Ep.bind(null,e):null)}function Ap(e,s){if(nh())return null;ep(e,s,!0)}function uw(){Aw(function(){(en&6)!==0?Ee(Ae,cw):yp()})}function qd(){return ko===0&&(ko=Xs()),ko}function wp(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Na(""+e)}function _p(e,s){var c=s.ownerDocument.createElement("input");return c.name=s.name,c.value=s.value,e.id&&c.setAttribute("form",e.id),s.parentNode.insertBefore(c,s),e=new FormData(e),c.parentNode.removeChild(c),e}function hw(e,s,c,g,E){if(s==="submit"&&c&&c.stateNode===E){var T=wp((E[an]||null).action),M=g.submitter;M&&(s=(s=M[an]||null)?wp(s.formAction):M.getAttribute("formAction"),s!==null&&(T=s,M=null));var V=new Xi("action","action",null,g,E);e.push({event:V,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(ko!==0){var W=M?_p(E,M):new FormData(E);hd(c,{pending:!0,data:W,method:E.method,action:T},null,W)}}else typeof T=="function"&&(V.preventDefault(),W=M?_p(E,M):new FormData(E),hd(c,{pending:!0,data:W,method:E.method,action:T},T,W))},currentTarget:E}]})}}for(var Yd=0;Yd<bs.length;Yd++){var Xd=bs[Yd],fw=Xd.toLowerCase(),dw=Xd[0].toUpperCase()+Xd.slice(1);Si(fw,"on"+dw)}Si(le,"onAnimationEnd"),Si(Ir,"onAnimationIteration"),Si(ui,"onAnimationStart"),Si("dblclick","onDoubleClick"),Si("focusin","onFocus"),Si("focusout","onBlur"),Si(Hr,"onTransitionRun"),Si(tn,"onTransitionStart"),Si(gr,"onTransitionCancel"),Si(Gr,"onTransitionEnd"),wn("onMouseEnter",["mouseout","mouseover"]),wn("onMouseLeave",["mouseout","mouseover"]),wn("onPointerEnter",["pointerout","pointerover"]),wn("onPointerLeave",["pointerout","pointerover"]),Hn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Hn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Hn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Hn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Hn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Hn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Dc));function Tp(e,s){s=(s&4)!==0;for(var c=0;c<e.length;c++){var g=e[c],E=g.event;g=g.listeners;t:{var T=void 0;if(s)for(var M=g.length-1;0<=M;M--){var V=g[M],W=V.instance,gt=V.currentTarget;if(V=V.listener,W!==T&&E.isPropagationStopped())break t;T=V,E.currentTarget=gt;try{T(E)}catch(Ct){qu(Ct)}E.currentTarget=null,T=W}else for(M=0;M<g.length;M++){if(V=g[M],W=V.instance,gt=V.currentTarget,V=V.listener,W!==T&&E.isPropagationStopped())break t;T=V,E.currentTarget=gt;try{T(E)}catch(Ct){qu(Ct)}E.currentTarget=null,T=W}}}}function Se(e,s){var c=s[ir];c===void 0&&(c=s[ir]=new Set);var g=e+"__bubble";c.has(g)||(Cp(s,e,2,!1),c.add(g))}function Qd(e,s,c){var g=0;s&&(g|=4),Cp(c,e,g,s)}var sh="_reactListening"+Math.random().toString(36).slice(2);function Wd(e){if(!e[sh]){e[sh]=!0,wo.forEach(function(c){c!=="selectionchange"&&(gw.has(c)||Qd(c,!1,e),Qd(c,!0,e))});var s=e.nodeType===9?e:e.ownerDocument;s===null||s[sh]||(s[sh]=!0,Qd("selectionchange",!1,s))}}function Cp(e,s,c,g){switch(Qp(s)){case 2:var E=jw;break;case 8:E=zw;break;default:E=c1}c=E.bind(null,s,c,e),E=void 0,!ee||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(E=!0),g?E!==void 0?e.addEventListener(s,c,{capture:!0,passive:E}):e.addEventListener(s,c,!0):E!==void 0?e.addEventListener(s,c,{passive:E}):e.addEventListener(s,c,!1)}function Kd(e,s,c,g,E){var T=g;if((s&1)===0&&(s&2)===0&&g!==null)t:for(;;){if(g===null)return;var M=g.tag;if(M===3||M===4){var V=g.stateNode.containerInfo;if(V===E)break;if(M===4)for(M=g.return;M!==null;){var W=M.tag;if((W===3||W===4)&&M.stateNode.containerInfo===E)return;M=M.return}for(;V!==null;){if(M=Rn(V),M===null)return;if(W=M.tag,W===5||W===6||W===26||W===27){g=T=M;continue t}V=V.parentNode}}g=g.return}Ai(function(){var gt=T,Ct=vr(c),Rt=[];t:{var pt=ta.get(e);if(pt!==void 0){var At=Xi,se=e;switch(e){case"keypress":if(Yi(c)===0)break t;case"keydown":case"keyup":At=Ss;break;case"focusin":se="focus",At=cs;break;case"focusout":se="blur",At=cs;break;case"beforeblur":case"afterblur":At=cs;break;case"click":if(c.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":At=si;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":At=He;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":At=Ge;break;case le:case Ir:case ui:At=Da;break;case Gr:At=rl;break;case"scroll":case"scrollend":At=dr;break;case"wheel":At=oi;break;case"copy":case"cut":case"paste":At=ae;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":At=vs;break;case"toggle":case"beforetoggle":At=il}var ne=(s&4)!==0,cn=!ne&&(e==="scroll"||e==="scrollend"),ot=ne?pt!==null?pt+"Capture":null:pt;ne=[];for(var it=gt,dt;it!==null;){var St=it;if(dt=St.stateNode,St=St.tag,St!==5&&St!==26&&St!==27||dt===null||ot===null||(St=Kt(it,ot),St!=null&&ne.push(Mc(it,St,dt))),cn)break;it=it.return}0<ne.length&&(pt=new At(pt,se,null,c,Ct),Rt.push({event:pt,listeners:ne}))}}if((s&7)===0){t:{if(pt=e==="mouseover"||e==="pointerover",At=e==="mouseout"||e==="pointerout",pt&&c!==xi&&(se=c.relatedTarget||c.fromElement)&&(Rn(se)||se[Vr]))break t;if((At||pt)&&(pt=Ct.window===Ct?Ct:(pt=Ct.ownerDocument)?pt.defaultView||pt.parentWindow:window,At?(se=c.relatedTarget||c.toElement,At=gt,se=se?Rn(se):null,se!==null&&(cn=d(se),ne=se.tag,se!==cn||ne!==5&&ne!==27&&ne!==6)&&(se=null)):(At=null,se=gt),At!==se)){if(ne=si,St="onMouseLeave",ot="onMouseEnter",it="mouse",(e==="pointerout"||e==="pointerover")&&(ne=vs,St="onPointerLeave",ot="onPointerEnter",it="pointer"),cn=At==null?pt:Jr(At),dt=se==null?pt:Jr(se),pt=new ne(St,it+"leave",At,c,Ct),pt.target=cn,pt.relatedTarget=dt,St=null,Rn(Ct)===gt&&(ne=new ne(ot,it+"enter",se,c,Ct),ne.target=dt,ne.relatedTarget=cn,St=ne),cn=St,At&&se)e:{for(ne=At,ot=se,it=0,dt=ne;dt;dt=Rl(dt))it++;for(dt=0,St=ot;St;St=Rl(St))dt++;for(;0<it-dt;)ne=Rl(ne),it--;for(;0<dt-it;)ot=Rl(ot),dt--;for(;it--;){if(ne===ot||ot!==null&&ne===ot.alternate)break e;ne=Rl(ne),ot=Rl(ot)}ne=null}else ne=null;At!==null&&Sp(Rt,pt,At,ne,!1),se!==null&&cn!==null&&Sp(Rt,cn,se,ne,!0)}}t:{if(pt=gt?Jr(gt):window,At=pt.nodeName&&pt.nodeName.toLowerCase(),At==="select"||At==="input"&&pt.type==="file")var Qt=Au;else if(Ln(pt))if(rc)Qt=a;else{Qt=L;var Te=al}else At=pt.nodeName,!At||At.toLowerCase()!=="input"||pt.type!=="checkbox"&&pt.type!=="radio"?gt&&Wt(gt.elementType)&&(Qt=Au):Qt=r;if(Qt&&(Qt=Qt(e,gt))){qn(Rt,Qt,c,Ct);break t}Te&&Te(e,pt,gt),e==="focusout"&&gt&&pt.type==="number"&&gt.memoizedProps.value!=null&&lt(pt,"number",pt.value)}switch(Te=gt?Jr(gt):window,e){case"focusin":(Ln(Te)||Te.contentEditable==="true")&&(P=Te,G=gt,$=null);break;case"focusout":$=G=P=null;break;case"mousedown":rt=!0;break;case"contextmenu":case"mouseup":case"dragend":rt=!1,ht(Rt,c,Ct);break;case"selectionchange":if(B)break;case"keydown":case"keyup":ht(Rt,c,Ct)}var Zt;if(li)t:{switch(e){case"compositionstart":var re="onCompositionStart";break t;case"compositionend":re="onCompositionEnd";break t;case"compositionupdate":re="onCompositionUpdate";break t}re=void 0}else be?wt(e,c)&&(re="onCompositionEnd"):e==="keydown"&&c.keyCode===229&&(re="onCompositionStart");re&&(N&&c.locale!=="ko"&&(be||re!=="onCompositionStart"?re==="onCompositionEnd"&&be&&(Zt=_i()):(Hi=Ct,Gi="value"in Hi?Hi.value:Hi.textContent,be=!0)),Te=ah(gt,re),0<Te.length&&(re=new Ts(re,e,null,c,Ct),Rt.push({event:re,listeners:Te}),Zt?re.data=Zt:(Zt=Ut(c),Zt!==null&&(re.data=Zt)))),(Zt=b?Sn(e,c):Ie(e,c))&&(re=ah(gt,"onBeforeInput"),0<re.length&&(Te=new Ts("onBeforeInput","beforeinput",null,c,Ct),Rt.push({event:Te,listeners:re}),Te.data=Zt)),hw(Rt,e,gt,c,Ct)}Tp(Rt,s)})}function Mc(e,s,c){return{instance:e,listener:s,currentTarget:c}}function ah(e,s){for(var c=s+"Capture",g=[];e!==null;){var E=e,T=E.stateNode;if(E=E.tag,E!==5&&E!==26&&E!==27||T===null||(E=Kt(e,c),E!=null&&g.unshift(Mc(e,E,T)),E=Kt(e,s),E!=null&&g.push(Mc(e,E,T))),e.tag===3)return g;e=e.return}return[]}function Rl(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Sp(e,s,c,g,E){for(var T=s._reactName,M=[];c!==null&&c!==g;){var V=c,W=V.alternate,gt=V.stateNode;if(V=V.tag,W!==null&&W===g)break;V!==5&&V!==26&&V!==27||gt===null||(W=gt,E?(gt=Kt(c,T),gt!=null&&M.unshift(Mc(c,gt,W))):E||(gt=Kt(c,T),gt!=null&&M.push(Mc(c,gt,W)))),c=c.return}M.length!==0&&e.push({event:s,listeners:M})}var mw=/\r\n?/g,pw=/\u0000|\uFFFD/g;function vp(e){return(typeof e=="string"?e:""+e).replace(mw,`
`).replace(pw,"")}function bp(e,s){return s=vp(s),vp(e)===s}function oh(){}function ln(e,s,c,g,E,T){switch(c){case"children":typeof g=="string"?s==="body"||s==="textarea"&&g===""||Tn(e,g):(typeof g=="number"||typeof g=="bigint")&&s!=="body"&&Tn(e,""+g);break;case"className":ji(e,"class",g);break;case"tabIndex":ji(e,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":ji(e,c,g);break;case"style":xr(e,g,T);break;case"data":if(s!=="object"){ji(e,"data",g);break}case"src":case"href":if(g===""&&(s!=="a"||c!=="href")){e.removeAttribute(c);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){e.removeAttribute(c);break}g=Na(""+g),e.setAttribute(c,g);break;case"action":case"formAction":if(typeof g=="function"){e.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof T=="function"&&(c==="formAction"?(s!=="input"&&ln(e,s,"name",E.name,E,null),ln(e,s,"formEncType",E.formEncType,E,null),ln(e,s,"formMethod",E.formMethod,E,null),ln(e,s,"formTarget",E.formTarget,E,null)):(ln(e,s,"encType",E.encType,E,null),ln(e,s,"method",E.method,E,null),ln(e,s,"target",E.target,E,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){e.removeAttribute(c);break}g=Na(""+g),e.setAttribute(c,g);break;case"onClick":g!=null&&(e.onclick=oh);break;case"onScroll":g!=null&&Se("scroll",e);break;case"onScrollEnd":g!=null&&Se("scrollend",e);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(o(61));if(c=g.__html,c!=null){if(E.children!=null)throw Error(o(60));e.innerHTML=c}}break;case"multiple":e.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":e.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){e.removeAttribute("xlink:href");break}c=Na(""+g),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?e.setAttribute(c,""+g):e.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?e.setAttribute(c,""):e.removeAttribute(c);break;case"capture":case"download":g===!0?e.setAttribute(c,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?e.setAttribute(c,g):e.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?e.setAttribute(c,g):e.removeAttribute(c);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?e.removeAttribute(c):e.setAttribute(c,g);break;case"popover":Se("beforetoggle",e),Se("toggle",e),vt(e,"popover",g);break;case"xlinkActuate":pe(e,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":pe(e,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":pe(e,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":pe(e,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":pe(e,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":pe(e,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":pe(e,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":pe(e,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":pe(e,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":vt(e,"is",g);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=fn.get(c)||c,vt(e,c,g))}}function Zd(e,s,c,g,E,T){switch(c){case"style":xr(e,g,T);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(o(61));if(c=g.__html,c!=null){if(E.children!=null)throw Error(o(60));e.innerHTML=c}}break;case"children":typeof g=="string"?Tn(e,g):(typeof g=="number"||typeof g=="bigint")&&Tn(e,""+g);break;case"onScroll":g!=null&&Se("scroll",e);break;case"onScrollEnd":g!=null&&Se("scrollend",e);break;case"onClick":g!=null&&(e.onclick=oh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!va.hasOwnProperty(c))t:{if(c[0]==="o"&&c[1]==="n"&&(E=c.endsWith("Capture"),s=c.slice(2,E?c.length-7:void 0),T=e[an]||null,T=T!=null?T[c]:null,typeof T=="function"&&e.removeEventListener(s,T,E),typeof g=="function")){typeof T!="function"&&T!==null&&(c in e?e[c]=null:e.hasAttribute(c)&&e.removeAttribute(c)),e.addEventListener(s,g,E);break t}c in e?e[c]=g:g===!0?e.setAttribute(c,""):vt(e,c,g)}}}function Dr(e,s,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Se("error",e),Se("load",e);var g=!1,E=!1,T;for(T in c)if(c.hasOwnProperty(T)){var M=c[T];if(M!=null)switch(T){case"src":g=!0;break;case"srcSet":E=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:ln(e,s,T,M,c,null)}}E&&ln(e,s,"srcSet",c.srcSet,c,null),g&&ln(e,s,"src",c.src,c,null);return;case"input":Se("invalid",e);var V=T=M=E=null,W=null,gt=null;for(g in c)if(c.hasOwnProperty(g)){var Ct=c[g];if(Ct!=null)switch(g){case"name":E=Ct;break;case"type":M=Ct;break;case"checked":W=Ct;break;case"defaultChecked":gt=Ct;break;case"value":T=Ct;break;case"defaultValue":V=Ct;break;case"children":case"dangerouslySetInnerHTML":if(Ct!=null)throw Error(o(137,s));break;default:ln(e,s,g,Ct,c,null)}}Nn(e,T,V,W,gt,M,E,!1),Ia(e);return;case"select":Se("invalid",e),g=M=T=null;for(E in c)if(c.hasOwnProperty(E)&&(V=c[E],V!=null))switch(E){case"value":T=V;break;case"defaultValue":M=V;break;case"multiple":g=V;default:ln(e,s,E,V,c,null)}s=T,c=M,e.multiple=!!g,s!=null?z(e,!!g,s,!1):c!=null&&z(e,!!g,c,!0);return;case"textarea":Se("invalid",e),T=E=g=null;for(M in c)if(c.hasOwnProperty(M)&&(V=c[M],V!=null))switch(M){case"value":g=V;break;case"defaultValue":E=V;break;case"children":T=V;break;case"dangerouslySetInnerHTML":if(V!=null)throw Error(o(91));break;default:ln(e,s,M,V,c,null)}pn(e,g,E,T),Ia(e);return;case"option":for(W in c)if(c.hasOwnProperty(W)&&(g=c[W],g!=null))switch(W){case"selected":e.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:ln(e,s,W,g,c,null)}return;case"dialog":Se("beforetoggle",e),Se("toggle",e),Se("cancel",e),Se("close",e);break;case"iframe":case"object":Se("load",e);break;case"video":case"audio":for(g=0;g<Dc.length;g++)Se(Dc[g],e);break;case"image":Se("error",e),Se("load",e);break;case"details":Se("toggle",e);break;case"embed":case"source":case"link":Se("error",e),Se("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(gt in c)if(c.hasOwnProperty(gt)&&(g=c[gt],g!=null))switch(gt){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:ln(e,s,gt,g,c,null)}return;default:if(Wt(s)){for(Ct in c)c.hasOwnProperty(Ct)&&(g=c[Ct],g!==void 0&&Zd(e,s,Ct,g,c,void 0));return}}for(V in c)c.hasOwnProperty(V)&&(g=c[V],g!=null&&ln(e,s,V,g,c,null))}function yw(e,s,c,g){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var E=null,T=null,M=null,V=null,W=null,gt=null,Ct=null;for(At in c){var Rt=c[At];if(c.hasOwnProperty(At)&&Rt!=null)switch(At){case"checked":break;case"value":break;case"defaultValue":W=Rt;default:g.hasOwnProperty(At)||ln(e,s,At,null,g,Rt)}}for(var pt in g){var At=g[pt];if(Rt=c[pt],g.hasOwnProperty(pt)&&(At!=null||Rt!=null))switch(pt){case"type":T=At;break;case"name":E=At;break;case"checked":gt=At;break;case"defaultChecked":Ct=At;break;case"value":M=At;break;case"defaultValue":V=At;break;case"children":case"dangerouslySetInnerHTML":if(At!=null)throw Error(o(137,s));break;default:At!==Rt&&ln(e,s,pt,At,g,Rt)}}xe(e,M,V,W,gt,Ct,T,E);return;case"select":At=M=V=pt=null;for(T in c)if(W=c[T],c.hasOwnProperty(T)&&W!=null)switch(T){case"value":break;case"multiple":At=W;default:g.hasOwnProperty(T)||ln(e,s,T,null,g,W)}for(E in g)if(T=g[E],W=c[E],g.hasOwnProperty(E)&&(T!=null||W!=null))switch(E){case"value":pt=T;break;case"defaultValue":V=T;break;case"multiple":M=T;default:T!==W&&ln(e,s,E,T,g,W)}s=V,c=M,g=At,pt!=null?z(e,!!c,pt,!1):!!g!=!!c&&(s!=null?z(e,!!c,s,!0):z(e,!!c,c?[]:"",!1));return;case"textarea":At=pt=null;for(V in c)if(E=c[V],c.hasOwnProperty(V)&&E!=null&&!g.hasOwnProperty(V))switch(V){case"value":break;case"children":break;default:ln(e,s,V,null,g,E)}for(M in g)if(E=g[M],T=c[M],g.hasOwnProperty(M)&&(E!=null||T!=null))switch(M){case"value":pt=E;break;case"defaultValue":At=E;break;case"children":break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(o(91));break;default:E!==T&&ln(e,s,M,E,g,T)}Ft(e,pt,At);return;case"option":for(var se in c)if(pt=c[se],c.hasOwnProperty(se)&&pt!=null&&!g.hasOwnProperty(se))switch(se){case"selected":e.selected=!1;break;default:ln(e,s,se,null,g,pt)}for(W in g)if(pt=g[W],At=c[W],g.hasOwnProperty(W)&&pt!==At&&(pt!=null||At!=null))switch(W){case"selected":e.selected=pt&&typeof pt!="function"&&typeof pt!="symbol";break;default:ln(e,s,W,pt,g,At)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ne in c)pt=c[ne],c.hasOwnProperty(ne)&&pt!=null&&!g.hasOwnProperty(ne)&&ln(e,s,ne,null,g,pt);for(gt in g)if(pt=g[gt],At=c[gt],g.hasOwnProperty(gt)&&pt!==At&&(pt!=null||At!=null))switch(gt){case"children":case"dangerouslySetInnerHTML":if(pt!=null)throw Error(o(137,s));break;default:ln(e,s,gt,pt,g,At)}return;default:if(Wt(s)){for(var cn in c)pt=c[cn],c.hasOwnProperty(cn)&&pt!==void 0&&!g.hasOwnProperty(cn)&&Zd(e,s,cn,void 0,g,pt);for(Ct in g)pt=g[Ct],At=c[Ct],!g.hasOwnProperty(Ct)||pt===At||pt===void 0&&At===void 0||Zd(e,s,Ct,pt,g,At);return}}for(var ot in c)pt=c[ot],c.hasOwnProperty(ot)&&pt!=null&&!g.hasOwnProperty(ot)&&ln(e,s,ot,null,g,pt);for(Rt in g)pt=g[Rt],At=c[Rt],!g.hasOwnProperty(Rt)||pt===At||pt==null&&At==null||ln(e,s,Rt,pt,g,At)}var Jd=null,$d=null;function lh(e){return e.nodeType===9?e:e.ownerDocument}function Ip(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Rp(e,s){if(e===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&s==="foreignObject"?0:e}function t1(e,s){return e==="textarea"||e==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var e1=null;function xw(){var e=window.event;return e&&e.type==="popstate"?e===e1?!1:(e1=e,!0):(e1=null,!1)}var Np=typeof setTimeout=="function"?setTimeout:void 0,Ew=typeof clearTimeout=="function"?clearTimeout:void 0,Dp=typeof Promise=="function"?Promise:void 0,Aw=typeof queueMicrotask=="function"?queueMicrotask:typeof Dp<"u"?function(e){return Dp.resolve(null).then(e).catch(ww)}:Np;function ww(e){setTimeout(function(){throw e})}function Wa(e){return e==="head"}function Mp(e,s){var c=s,g=0,E=0;do{var T=c.nextSibling;if(e.removeChild(c),T&&T.nodeType===8)if(c=T.data,c==="/$"){if(0<g&&8>g){c=g;var M=e.ownerDocument;if(c&1&&Oc(M.documentElement),c&2&&Oc(M.body),c&4)for(c=M.head,Oc(c),M=c.firstChild;M;){var V=M.nextSibling,W=M.nodeName;M[ri]||W==="SCRIPT"||W==="STYLE"||W==="LINK"&&M.rel.toLowerCase()==="stylesheet"||c.removeChild(M),M=V}}if(E===0){e.removeChild(T),jc(s);return}E--}else c==="$"||c==="$?"||c==="$!"?E++:g=c.charCodeAt(0)-48;else g=0;c=T}while(c);jc(s)}function n1(e){var s=e.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var c=s;switch(s=s.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":n1(c),Fi(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}e.removeChild(c)}}function _w(e,s,c,g){for(;e.nodeType===1;){var E=c;if(e.nodeName.toLowerCase()!==s.toLowerCase()){if(!g&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(g){if(!e[ri])switch(s){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(T=e.getAttribute("rel"),T==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(T!==E.rel||e.getAttribute("href")!==(E.href==null||E.href===""?null:E.href)||e.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin)||e.getAttribute("title")!==(E.title==null?null:E.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(T=e.getAttribute("src"),(T!==(E.src==null?null:E.src)||e.getAttribute("type")!==(E.type==null?null:E.type)||e.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin))&&T&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(s==="input"&&e.type==="hidden"){var T=E.name==null?null:""+E.name;if(E.type==="hidden"&&e.getAttribute("name")===T)return e}else return e;if(e=fs(e.nextSibling),e===null)break}return null}function Tw(e,s,c){if(s==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!c||(e=fs(e.nextSibling),e===null))return null;return e}function r1(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function Cw(e,s){var c=e.ownerDocument;if(e.data!=="$?"||c.readyState==="complete")s();else{var g=function(){s(),c.removeEventListener("DOMContentLoaded",g)};c.addEventListener("DOMContentLoaded",g),e._reactRetry=g}}function fs(e){for(;e!=null;e=e.nextSibling){var s=e.nodeType;if(s===1||s===3)break;if(s===8){if(s=e.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return e}var i1=null;function Op(e){e=e.previousSibling;for(var s=0;e;){if(e.nodeType===8){var c=e.data;if(c==="$"||c==="$!"||c==="$?"){if(s===0)return e;s--}else c==="/$"&&s++}e=e.previousSibling}return null}function Lp(e,s,c){switch(s=lh(c),e){case"html":if(e=s.documentElement,!e)throw Error(o(452));return e;case"head":if(e=s.head,!e)throw Error(o(453));return e;case"body":if(e=s.body,!e)throw Error(o(454));return e;default:throw Error(o(451))}}function Oc(e){for(var s=e.attributes;s.length;)e.removeAttributeNode(s[0]);Fi(e)}var ts=new Map,Bp=new Set;function ch(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var da=xt.d;xt.d={f:Sw,r:vw,D:bw,C:Iw,L:Rw,m:Nw,X:Mw,S:Dw,M:Ow};function Sw(){var e=da.f(),s=th();return e||s}function vw(e){var s=Sr(e);s!==null&&s.tag===5&&s.type==="form"?em(s):da.r(e)}var Nl=typeof document>"u"?null:document;function Pp(e,s,c){var g=Nl;if(g&&typeof s=="string"&&s){var E=hn(s);E='link[rel="'+e+'"][href="'+E+'"]',typeof c=="string"&&(E+='[crossorigin="'+c+'"]'),Bp.has(E)||(Bp.add(E),e={rel:e,crossOrigin:c,href:s},g.querySelector(E)===null&&(s=g.createElement("link"),Dr(s,"link",e),ze(s),g.head.appendChild(s)))}}function bw(e){da.D(e),Pp("dns-prefetch",e,null)}function Iw(e,s){da.C(e,s),Pp("preconnect",e,s)}function Rw(e,s,c){da.L(e,s,c);var g=Nl;if(g&&e&&s){var E='link[rel="preload"][as="'+hn(s)+'"]';s==="image"&&c&&c.imageSrcSet?(E+='[imagesrcset="'+hn(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(E+='[imagesizes="'+hn(c.imageSizes)+'"]')):E+='[href="'+hn(e)+'"]';var T=E;switch(s){case"style":T=Dl(e);break;case"script":T=Ml(e)}ts.has(T)||(e=v({rel:"preload",href:s==="image"&&c&&c.imageSrcSet?void 0:e,as:s},c),ts.set(T,e),g.querySelector(E)!==null||s==="style"&&g.querySelector(Lc(T))||s==="script"&&g.querySelector(Bc(T))||(s=g.createElement("link"),Dr(s,"link",e),ze(s),g.head.appendChild(s)))}}function Nw(e,s){da.m(e,s);var c=Nl;if(c&&e){var g=s&&typeof s.as=="string"?s.as:"script",E='link[rel="modulepreload"][as="'+hn(g)+'"][href="'+hn(e)+'"]',T=E;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":T=Ml(e)}if(!ts.has(T)&&(e=v({rel:"modulepreload",href:e},s),ts.set(T,e),c.querySelector(E)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Bc(T)))return}g=c.createElement("link"),Dr(g,"link",e),ze(g),c.head.appendChild(g)}}}function Dw(e,s,c){da.S(e,s,c);var g=Nl;if(g&&e){var E=sr(g).hoistableStyles,T=Dl(e);s=s||"default";var M=E.get(T);if(!M){var V={loading:0,preload:null};if(M=g.querySelector(Lc(T)))V.loading=5;else{e=v({rel:"stylesheet",href:e,"data-precedence":s},c),(c=ts.get(T))&&s1(e,c);var W=M=g.createElement("link");ze(W),Dr(W,"link",e),W._p=new Promise(function(gt,Ct){W.onload=gt,W.onerror=Ct}),W.addEventListener("load",function(){V.loading|=1}),W.addEventListener("error",function(){V.loading|=2}),V.loading|=4,uh(M,s,g)}M={type:"stylesheet",instance:M,count:1,state:V},E.set(T,M)}}}function Mw(e,s){da.X(e,s);var c=Nl;if(c&&e){var g=sr(c).hoistableScripts,E=Ml(e),T=g.get(E);T||(T=c.querySelector(Bc(E)),T||(e=v({src:e,async:!0},s),(s=ts.get(E))&&a1(e,s),T=c.createElement("script"),ze(T),Dr(T,"link",e),c.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},g.set(E,T))}}function Ow(e,s){da.M(e,s);var c=Nl;if(c&&e){var g=sr(c).hoistableScripts,E=Ml(e),T=g.get(E);T||(T=c.querySelector(Bc(E)),T||(e=v({src:e,async:!0,type:"module"},s),(s=ts.get(E))&&a1(e,s),T=c.createElement("script"),ze(T),Dr(T,"link",e),c.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},g.set(E,T))}}function kp(e,s,c,g){var E=(E=Bt.current)?ch(E):null;if(!E)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(s=Dl(c.href),c=sr(E).hoistableStyles,g=c.get(s),g||(g={type:"style",instance:null,count:0,state:null},c.set(s,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){e=Dl(c.href);var T=sr(E).hoistableStyles,M=T.get(e);if(M||(E=E.ownerDocument||E,M={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},T.set(e,M),(T=E.querySelector(Lc(e)))&&!T._p&&(M.instance=T,M.state.loading=5),ts.has(e)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},ts.set(e,c),T||Lw(E,e,c,M.state))),s&&g===null)throw Error(o(528,""));return M}if(s&&g!==null)throw Error(o(529,""));return null;case"script":return s=c.async,c=c.src,typeof c=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Ml(c),c=sr(E).hoistableScripts,g=c.get(s),g||(g={type:"script",instance:null,count:0,state:null},c.set(s,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function Dl(e){return'href="'+hn(e)+'"'}function Lc(e){return'link[rel="stylesheet"]['+e+"]"}function Vp(e){return v({},e,{"data-precedence":e.precedence,precedence:null})}function Lw(e,s,c,g){e.querySelector('link[rel="preload"][as="style"]['+s+"]")?g.loading=1:(s=e.createElement("link"),g.preload=s,s.addEventListener("load",function(){return g.loading|=1}),s.addEventListener("error",function(){return g.loading|=2}),Dr(s,"link",c),ze(s),e.head.appendChild(s))}function Ml(e){return'[src="'+hn(e)+'"]'}function Bc(e){return"script[async]"+e}function Up(e,s,c){if(s.count++,s.instance===null)switch(s.type){case"style":var g=e.querySelector('style[data-href~="'+hn(c.href)+'"]');if(g)return s.instance=g,ze(g),g;var E=v({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return g=(e.ownerDocument||e).createElement("style"),ze(g),Dr(g,"style",E),uh(g,c.precedence,e),s.instance=g;case"stylesheet":E=Dl(c.href);var T=e.querySelector(Lc(E));if(T)return s.state.loading|=4,s.instance=T,ze(T),T;g=Vp(c),(E=ts.get(E))&&s1(g,E),T=(e.ownerDocument||e).createElement("link"),ze(T);var M=T;return M._p=new Promise(function(V,W){M.onload=V,M.onerror=W}),Dr(T,"link",g),s.state.loading|=4,uh(T,c.precedence,e),s.instance=T;case"script":return T=Ml(c.src),(E=e.querySelector(Bc(T)))?(s.instance=E,ze(E),E):(g=c,(E=ts.get(T))&&(g=v({},c),a1(g,E)),e=e.ownerDocument||e,E=e.createElement("script"),ze(E),Dr(E,"link",g),e.head.appendChild(E),s.instance=E);case"void":return null;default:throw Error(o(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(g=s.instance,s.state.loading|=4,uh(g,c.precedence,e));return s.instance}function uh(e,s,c){for(var g=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),E=g.length?g[g.length-1]:null,T=E,M=0;M<g.length;M++){var V=g[M];if(V.dataset.precedence===s)T=V;else if(T!==E)break}T?T.parentNode.insertBefore(e,T.nextSibling):(s=c.nodeType===9?c.head:c,s.insertBefore(e,s.firstChild))}function s1(e,s){e.crossOrigin==null&&(e.crossOrigin=s.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=s.referrerPolicy),e.title==null&&(e.title=s.title)}function a1(e,s){e.crossOrigin==null&&(e.crossOrigin=s.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=s.referrerPolicy),e.integrity==null&&(e.integrity=s.integrity)}var hh=null;function Fp(e,s,c){if(hh===null){var g=new Map,E=hh=new Map;E.set(c,g)}else E=hh,g=E.get(c),g||(g=new Map,E.set(c,g));if(g.has(e))return g;for(g.set(e,null),c=c.getElementsByTagName(e),E=0;E<c.length;E++){var T=c[E];if(!(T[ri]||T[Kn]||e==="link"&&T.getAttribute("rel")==="stylesheet")&&T.namespaceURI!=="http://www.w3.org/2000/svg"){var M=T.getAttribute(s)||"";M=e+M;var V=g.get(M);V?V.push(T):g.set(M,[T])}}return g}function jp(e,s,c){e=e.ownerDocument||e,e.head.insertBefore(c,s==="title"?e.querySelector("head > title"):null)}function Bw(e,s,c){if(c===1||s.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return e=s.disabled,typeof s.precedence=="string"&&e==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function zp(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var Pc=null;function Pw(){}function kw(e,s,c){if(Pc===null)throw Error(o(475));var g=Pc;if(s.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var E=Dl(c.href),T=e.querySelector(Lc(E));if(T){e=T._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(g.count++,g=fh.bind(g),e.then(g,g)),s.state.loading|=4,s.instance=T,ze(T);return}T=e.ownerDocument||e,c=Vp(c),(E=ts.get(E))&&s1(c,E),T=T.createElement("link"),ze(T);var M=T;M._p=new Promise(function(V,W){M.onload=V,M.onerror=W}),Dr(T,"link",c),s.instance=T}g.stylesheets===null&&(g.stylesheets=new Map),g.stylesheets.set(s,e),(e=s.state.preload)&&(s.state.loading&3)===0&&(g.count++,s=fh.bind(g),e.addEventListener("load",s),e.addEventListener("error",s))}}function Vw(){if(Pc===null)throw Error(o(475));var e=Pc;return e.stylesheets&&e.count===0&&o1(e,e.stylesheets),0<e.count?function(s){var c=setTimeout(function(){if(e.stylesheets&&o1(e,e.stylesheets),e.unsuspend){var g=e.unsuspend;e.unsuspend=null,g()}},6e4);return e.unsuspend=s,function(){e.unsuspend=null,clearTimeout(c)}}:null}function fh(){if(this.count--,this.count===0){if(this.stylesheets)o1(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var dh=null;function o1(e,s){e.stylesheets=null,e.unsuspend!==null&&(e.count++,dh=new Map,s.forEach(Uw,e),dh=null,fh.call(e))}function Uw(e,s){if(!(s.state.loading&4)){var c=dh.get(e);if(c)var g=c.get(null);else{c=new Map,dh.set(e,c);for(var E=e.querySelectorAll("link[data-precedence],style[data-precedence]"),T=0;T<E.length;T++){var M=E[T];(M.nodeName==="LINK"||M.getAttribute("media")!=="not all")&&(c.set(M.dataset.precedence,M),g=M)}g&&c.set(null,g)}E=s.instance,M=E.getAttribute("data-precedence"),T=c.get(M)||g,T===g&&c.set(null,E),c.set(M,E),this.count++,g=fh.bind(this),E.addEventListener("load",g),E.addEventListener("error",g),T?T.parentNode.insertBefore(E,T.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(E,e.firstChild)),s.state.loading|=4}}var kc={$$typeof:nt,Provider:null,Consumer:null,_currentValue:jt,_currentValue2:jt,_threadCount:0};function Fw(e,s,c,g,E,T,M,V){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ge(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ge(0),this.hiddenUpdates=ge(null),this.identifierPrefix=g,this.onUncaughtError=E,this.onCaughtError=T,this.onRecoverableError=M,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=V,this.incompleteTransitions=new Map}function Hp(e,s,c,g,E,T,M,V,W,gt,Ct,Rt){return e=new Fw(e,s,c,M,V,W,gt,Rt),s=1,T===!0&&(s|=24),T=vi(3,null,null,s),e.current=T,T.stateNode=e,s=zf(),s.refCount++,e.pooledCache=s,s.refCount++,T.memoizedState={element:g,isDehydrated:c,cache:s},Yf(T),e}function Gp(e){return e?(e=cl,e):cl}function qp(e,s,c,g,E,T){E=Gp(E),g.context===null?g.context=E:g.pendingContext=E,g=Pa(s),g.payload={element:c},T=T===void 0?null:T,T!==null&&(g.callback=T),c=ka(e,g,s),c!==null&&(Di(c,e,s),dc(c,e,s))}function Yp(e,s){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var c=e.retryLane;e.retryLane=c!==0&&c<s?c:s}}function l1(e,s){Yp(e,s),(e=e.alternate)&&Yp(e,s)}function Xp(e){if(e.tag===13){var s=ll(e,67108864);s!==null&&Di(s,e,67108864),l1(e,67108864)}}var gh=!0;function jw(e,s,c,g){var E=ut.T;ut.T=null;var T=xt.p;try{xt.p=2,c1(e,s,c,g)}finally{xt.p=T,ut.T=E}}function zw(e,s,c,g){var E=ut.T;ut.T=null;var T=xt.p;try{xt.p=8,c1(e,s,c,g)}finally{xt.p=T,ut.T=E}}function c1(e,s,c,g){if(gh){var E=u1(g);if(E===null)Kd(e,s,g,mh,c),Wp(e,g);else if(Gw(E,e,s,c,g))g.stopPropagation();else if(Wp(e,g),s&4&&-1<Hw.indexOf(e)){for(;E!==null;){var T=Sr(E);if(T!==null)switch(T.tag){case 3:if(T=T.stateNode,T.current.memoizedState.isDehydrated){var M=Ye(T.pendingLanes);if(M!==0){var V=T;for(V.pendingLanes|=2,V.entangledLanes|=2;M;){var W=1<<31-je(M);V.entanglements[1]|=W,M&=~W}Ms(T),(en&6)===0&&(Ju=Qe()+500,Nc(0))}}break;case 13:V=ll(T,2),V!==null&&Di(V,T,2),th(),l1(T,2)}if(T=u1(g),T===null&&Kd(e,s,g,mh,c),T===E)break;E=T}E!==null&&g.stopPropagation()}else Kd(e,s,g,null,c)}}function u1(e){return e=vr(e),h1(e)}var mh=null;function h1(e){if(mh=null,e=Rn(e),e!==null){var s=d(e);if(s===null)e=null;else{var c=s.tag;if(c===13){if(e=A(s),e!==null)return e;e=null}else if(c===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;e=null}else s!==e&&(e=null)}}return mh=e,null}function Qp(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(We()){case Ae:return 2;case is:return 8;case qt:case wa:return 32;case qs:return 268435456;default:return 32}default:return 32}}var f1=!1,Ka=null,Za=null,Ja=null,Vc=new Map,Uc=new Map,$a=[],Hw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Wp(e,s){switch(e){case"focusin":case"focusout":Ka=null;break;case"dragenter":case"dragleave":Za=null;break;case"mouseover":case"mouseout":Ja=null;break;case"pointerover":case"pointerout":Vc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Uc.delete(s.pointerId)}}function Fc(e,s,c,g,E,T){return e===null||e.nativeEvent!==T?(e={blockedOn:s,domEventName:c,eventSystemFlags:g,nativeEvent:T,targetContainers:[E]},s!==null&&(s=Sr(s),s!==null&&Xp(s)),e):(e.eventSystemFlags|=g,s=e.targetContainers,E!==null&&s.indexOf(E)===-1&&s.push(E),e)}function Gw(e,s,c,g,E){switch(s){case"focusin":return Ka=Fc(Ka,e,s,c,g,E),!0;case"dragenter":return Za=Fc(Za,e,s,c,g,E),!0;case"mouseover":return Ja=Fc(Ja,e,s,c,g,E),!0;case"pointerover":var T=E.pointerId;return Vc.set(T,Fc(Vc.get(T)||null,e,s,c,g,E)),!0;case"gotpointercapture":return T=E.pointerId,Uc.set(T,Fc(Uc.get(T)||null,e,s,c,g,E)),!0}return!1}function Kp(e){var s=Rn(e.target);if(s!==null){var c=d(s);if(c!==null){if(s=c.tag,s===13){if(s=A(c),s!==null){e.blockedOn=s,Qs(e.priority,function(){if(c.tag===13){var g=Ni();g=Ui(g);var E=ll(c,g);E!==null&&Di(E,c,g),l1(c,g)}});return}}else if(s===3&&c.stateNode.current.memoizedState.isDehydrated){e.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ph(e){if(e.blockedOn!==null)return!1;for(var s=e.targetContainers;0<s.length;){var c=u1(e.nativeEvent);if(c===null){c=e.nativeEvent;var g=new c.constructor(c.type,c);xi=g,c.target.dispatchEvent(g),xi=null}else return s=Sr(c),s!==null&&Xp(s),e.blockedOn=c,!1;s.shift()}return!0}function Zp(e,s,c){ph(e)&&c.delete(s)}function qw(){f1=!1,Ka!==null&&ph(Ka)&&(Ka=null),Za!==null&&ph(Za)&&(Za=null),Ja!==null&&ph(Ja)&&(Ja=null),Vc.forEach(Zp),Uc.forEach(Zp)}function yh(e,s){e.blockedOn===s&&(e.blockedOn=null,f1||(f1=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,qw)))}var xh=null;function Jp(e){xh!==e&&(xh=e,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){xh===e&&(xh=null);for(var s=0;s<e.length;s+=3){var c=e[s],g=e[s+1],E=e[s+2];if(typeof g!="function"){if(h1(g||c)===null)continue;break}var T=Sr(c);T!==null&&(e.splice(s,3),s-=3,hd(T,{pending:!0,data:E,method:c.method,action:g},g,E))}}))}function jc(e){function s(W){return yh(W,e)}Ka!==null&&yh(Ka,e),Za!==null&&yh(Za,e),Ja!==null&&yh(Ja,e),Vc.forEach(s),Uc.forEach(s);for(var c=0;c<$a.length;c++){var g=$a[c];g.blockedOn===e&&(g.blockedOn=null)}for(;0<$a.length&&(c=$a[0],c.blockedOn===null);)Kp(c),c.blockedOn===null&&$a.shift();if(c=(e.ownerDocument||e).$$reactFormReplay,c!=null)for(g=0;g<c.length;g+=3){var E=c[g],T=c[g+1],M=E[an]||null;if(typeof T=="function")M||Jp(c);else if(M){var V=null;if(T&&T.hasAttribute("formAction")){if(E=T,M=T[an]||null)V=M.formAction;else if(h1(E)!==null)continue}else V=M.action;typeof V=="function"?c[g+1]=V:(c.splice(g,3),g-=3),Jp(c)}}}function d1(e){this._internalRoot=e}Eh.prototype.render=d1.prototype.render=function(e){var s=this._internalRoot;if(s===null)throw Error(o(409));var c=s.current,g=Ni();qp(c,g,e,s,null,null)},Eh.prototype.unmount=d1.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var s=e.containerInfo;qp(e.current,2,null,e,null,null),th(),s[Vr]=null}};function Eh(e){this._internalRoot=e}Eh.prototype.unstable_scheduleHydration=function(e){if(e){var s=Zr();e={blockedOn:null,target:e,priority:s};for(var c=0;c<$a.length&&s!==0&&s<$a[c].priority;c++);$a.splice(c,0,e),c===0&&Kp(e)}};var $p=t.version;if($p!=="19.1.1")throw Error(o(527,$p,"19.1.1"));xt.findDOMNode=function(e){var s=e._reactInternals;if(s===void 0)throw typeof e.render=="function"?Error(o(188)):(e=Object.keys(e).join(","),Error(o(268,e)));return e=_(s),e=e!==null?x(e):null,e=e===null?null:e.stateNode,e};var Yw={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:ut,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ah=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ah.isDisabled&&Ah.supportsFiber)try{Le=Ah.inject(Yw),Fe=Ah}catch{}}return Hc.createRoot=function(e,s){if(!u(e))throw Error(o(299));var c=!1,g="",E=mm,T=pm,M=ym,V=null;return s!=null&&(s.unstable_strictMode===!0&&(c=!0),s.identifierPrefix!==void 0&&(g=s.identifierPrefix),s.onUncaughtError!==void 0&&(E=s.onUncaughtError),s.onCaughtError!==void 0&&(T=s.onCaughtError),s.onRecoverableError!==void 0&&(M=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(V=s.unstable_transitionCallbacks)),s=Hp(e,1,!1,null,null,c,g,E,T,M,V,null),e[Vr]=s.current,Wd(e),new d1(s)},Hc.hydrateRoot=function(e,s,c){if(!u(e))throw Error(o(299));var g=!1,E="",T=mm,M=pm,V=ym,W=null,gt=null;return c!=null&&(c.unstable_strictMode===!0&&(g=!0),c.identifierPrefix!==void 0&&(E=c.identifierPrefix),c.onUncaughtError!==void 0&&(T=c.onUncaughtError),c.onCaughtError!==void 0&&(M=c.onCaughtError),c.onRecoverableError!==void 0&&(V=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(W=c.unstable_transitionCallbacks),c.formState!==void 0&&(gt=c.formState)),s=Hp(e,1,!0,s,c??null,g,E,T,M,V,W,gt),s.context=Gp(null),c=s.current,g=Ni(),g=Ui(g),E=Pa(g),E.callback=null,ka(c,E,g),c=g,s.current.lanes=c,Tr(s,c),Ms(s),e[Vr]=s.current,Wd(e),new Eh(s)},Hc.version="19.1.1",Hc}var c2;function r_(){if(c2)return p1.exports;c2=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),p1.exports=n_(),p1.exports}var i_=r_();/**
 * react-router v7.8.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var u2="popstate";function s_(i={}){function t(u,d){let{pathname:A="/",search:C="",hash:_=""}=Yo(u.location.hash.substring(1));return!A.startsWith("/")&&!A.startsWith(".")&&(A="/"+A),O1("",{pathname:A,search:C,hash:_},d.state&&d.state.usr||null,d.state&&d.state.key||"default")}function n(u,d){let A=u.document.querySelector("base"),C="";if(A&&A.getAttribute("href")){let _=u.location.href,x=_.indexOf("#");C=x===-1?_:_.slice(0,x)}return C+"#"+(typeof d=="string"?d:eu(d))}function o(u,d){rs(u.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(d)})`)}return o_(t,n,o,i)}function kn(i,t){if(i===!1||i===null||typeof i>"u")throw new Error(t)}function rs(i,t){if(!i){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function a_(){return Math.random().toString(36).substring(2,10)}function h2(i,t){return{usr:i.state,key:i.key,idx:t}}function O1(i,t,n=null,o){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof t=="string"?Yo(t):t,state:n,key:t&&t.key||o||a_()}}function eu({pathname:i="/",search:t="",hash:n=""}){return t&&t!=="?"&&(i+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(i+=n.charAt(0)==="#"?n:"#"+n),i}function Yo(i){let t={};if(i){let n=i.indexOf("#");n>=0&&(t.hash=i.substring(n),i=i.substring(0,n));let o=i.indexOf("?");o>=0&&(t.search=i.substring(o),i=i.substring(0,o)),i&&(t.pathname=i)}return t}function o_(i,t,n,o={}){let{window:u=document.defaultView,v5Compat:d=!1}=o,A=u.history,C="POP",_=null,x=v();x==null&&(x=0,A.replaceState({...A.state,idx:x},""));function v(){return(A.state||{idx:null}).idx}function I(){C="POP";let q=v(),Q=q==null?null:q-x;x=q,_&&_({action:C,location:J.location,delta:Q})}function O(q,Q){C="PUSH";let ft=O1(J.location,q,Q);n&&n(ft,q),x=v()+1;let nt=h2(ft,x),_t=J.createHref(ft);try{A.pushState(nt,"",_t)}catch(mt){if(mt instanceof DOMException&&mt.name==="DataCloneError")throw mt;u.location.assign(_t)}d&&_&&_({action:C,location:J.location,delta:1})}function H(q,Q){C="REPLACE";let ft=O1(J.location,q,Q);n&&n(ft,q),x=v();let nt=h2(ft,x),_t=J.createHref(ft);A.replaceState(nt,"",_t),d&&_&&_({action:C,location:J.location,delta:0})}function X(q){return l_(q)}let J={get action(){return C},get location(){return i(u,A)},listen(q){if(_)throw new Error("A history only accepts one active listener");return u.addEventListener(u2,I),_=q,()=>{u.removeEventListener(u2,I),_=null}},createHref(q){return t(u,q)},createURL:X,encodeLocation(q){let Q=X(q);return{pathname:Q.pathname,search:Q.search,hash:Q.hash}},push:O,replace:H,go(q){return A.go(q)}};return J}function l_(i,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),kn(n,"No window.location.(origin|href) available to create URL");let o=typeof i=="string"?i:eu(i);return o=o.replace(/ $/,"%20"),!t&&o.startsWith("//")&&(o=n+o),new URL(o,n)}function $y(i,t,n="/"){return c_(i,t,n,!1)}function c_(i,t,n,o){let u=typeof t=="string"?Yo(t):t,d=ya(u.pathname||"/",n);if(d==null)return null;let A=tx(i);u_(A);let C=null;for(let _=0;C==null&&_<A.length;++_){let x=w_(d);C=E_(A[_],x,o)}return C}function tx(i,t=[],n=[],o=""){let u=(d,A,C)=>{let _={relativePath:C===void 0?d.path||"":C,caseSensitive:d.caseSensitive===!0,childrenIndex:A,route:d};_.relativePath.startsWith("/")&&(kn(_.relativePath.startsWith(o),`Absolute route path "${_.relativePath}" nested under path "${o}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),_.relativePath=_.relativePath.slice(o.length));let x=ma([o,_.relativePath]),v=n.concat(_);d.children&&d.children.length>0&&(kn(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${x}".`),tx(d.children,t,v,x)),!(d.path==null&&!d.index)&&t.push({path:x,score:y_(x,d.index),routesMeta:v})};return i.forEach((d,A)=>{if(d.path===""||!d.path?.includes("?"))u(d,A);else for(let C of ex(d.path))u(d,A,C)}),t}function ex(i){let t=i.split("/");if(t.length===0)return[];let[n,...o]=t,u=n.endsWith("?"),d=n.replace(/\?$/,"");if(o.length===0)return u?[d,""]:[d];let A=ex(o.join("/")),C=[];return C.push(...A.map(_=>_===""?d:[d,_].join("/"))),u&&C.push(...A),C.map(_=>i.startsWith("/")&&_===""?"/":_)}function u_(i){i.sort((t,n)=>t.score!==n.score?n.score-t.score:x_(t.routesMeta.map(o=>o.childrenIndex),n.routesMeta.map(o=>o.childrenIndex)))}var h_=/^:[\w-]+$/,f_=3,d_=2,g_=1,m_=10,p_=-2,f2=i=>i==="*";function y_(i,t){let n=i.split("/"),o=n.length;return n.some(f2)&&(o+=p_),t&&(o+=d_),n.filter(u=>!f2(u)).reduce((u,d)=>u+(h_.test(d)?f_:d===""?g_:m_),o)}function x_(i,t){return i.length===t.length&&i.slice(0,-1).every((o,u)=>o===t[u])?i[i.length-1]-t[t.length-1]:0}function E_(i,t,n=!1){let{routesMeta:o}=i,u={},d="/",A=[];for(let C=0;C<o.length;++C){let _=o[C],x=C===o.length-1,v=d==="/"?t:t.slice(d.length)||"/",I=Vh({path:_.relativePath,caseSensitive:_.caseSensitive,end:x},v),O=_.route;if(!I&&x&&n&&!o[o.length-1].route.index&&(I=Vh({path:_.relativePath,caseSensitive:_.caseSensitive,end:!1},v)),!I)return null;Object.assign(u,I.params),A.push({params:u,pathname:ma([d,I.pathname]),pathnameBase:S_(ma([d,I.pathnameBase])),route:O}),I.pathnameBase!=="/"&&(d=ma([d,I.pathnameBase]))}return A}function Vh(i,t){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[n,o]=A_(i.path,i.caseSensitive,i.end),u=t.match(n);if(!u)return null;let d=u[0],A=d.replace(/(.)\/+$/,"$1"),C=u.slice(1);return{params:o.reduce((x,{paramName:v,isOptional:I},O)=>{if(v==="*"){let X=C[O]||"";A=d.slice(0,d.length-X.length).replace(/(.)\/+$/,"$1")}const H=C[O];return I&&!H?x[v]=void 0:x[v]=(H||"").replace(/%2F/g,"/"),x},{}),pathname:d,pathnameBase:A,pattern:i}}function A_(i,t=!1,n=!0){rs(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let o=[],u="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(A,C,_)=>(o.push({paramName:C,isOptional:_!=null}),_?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(o.push({paramName:"*"}),u+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?u+="\\/*$":i!==""&&i!=="/"&&(u+="(?:(?=\\/|$))"),[new RegExp(u,t?void 0:"i"),o]}function w_(i){try{return i.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return rs(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),i}}function ya(i,t){if(t==="/")return i;if(!i.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,o=i.charAt(n);return o&&o!=="/"?null:i.slice(n)||"/"}function __(i,t="/"){let{pathname:n,search:o="",hash:u=""}=typeof i=="string"?Yo(i):i;return{pathname:n?n.startsWith("/")?n:T_(n,t):t,search:v_(o),hash:b_(u)}}function T_(i,t){let n=t.replace(/\/+$/,"").split("/");return i.split("/").forEach(u=>{u===".."?n.length>1&&n.pop():u!=="."&&n.push(u)}),n.length>1?n.join("/"):"/"}function A1(i,t,n,o){return`Cannot include a '${i}' character in a manually specified \`to.${t}\` field [${JSON.stringify(o)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function C_(i){return i.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function c0(i){let t=C_(i);return t.map((n,o)=>o===t.length-1?n.pathname:n.pathnameBase)}function u0(i,t,n,o=!1){let u;typeof i=="string"?u=Yo(i):(u={...i},kn(!u.pathname||!u.pathname.includes("?"),A1("?","pathname","search",u)),kn(!u.pathname||!u.pathname.includes("#"),A1("#","pathname","hash",u)),kn(!u.search||!u.search.includes("#"),A1("#","search","hash",u)));let d=i===""||u.pathname==="",A=d?"/":u.pathname,C;if(A==null)C=n;else{let I=t.length-1;if(!o&&A.startsWith("..")){let O=A.split("/");for(;O[0]==="..";)O.shift(),I-=1;u.pathname=O.join("/")}C=I>=0?t[I]:"/"}let _=__(u,C),x=A&&A!=="/"&&A.endsWith("/"),v=(d||A===".")&&n.endsWith("/");return!_.pathname.endsWith("/")&&(x||v)&&(_.pathname+="/"),_}var ma=i=>i.join("/").replace(/\/\/+/g,"/"),S_=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),v_=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,b_=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function I_(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}var nx=["POST","PUT","PATCH","DELETE"];new Set(nx);var R_=["GET",...nx];new Set(R_);var Kl=at.createContext(null);Kl.displayName="DataRouter";var lf=at.createContext(null);lf.displayName="DataRouterState";at.createContext(!1);var rx=at.createContext({isTransitioning:!1});rx.displayName="ViewTransition";var N_=at.createContext(new Map);N_.displayName="Fetchers";var D_=at.createContext(null);D_.displayName="Await";var Es=at.createContext(null);Es.displayName="Navigation";var hu=at.createContext(null);hu.displayName="Location";var Hs=at.createContext({outlet:null,matches:[],isDataRoute:!1});Hs.displayName="Route";var h0=at.createContext(null);h0.displayName="RouteError";function M_(i,{relative:t}={}){kn(Zl(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:o}=at.useContext(Es),{hash:u,pathname:d,search:A}=fu(i,{relative:t}),C=d;return n!=="/"&&(C=d==="/"?n:ma([n,d])),o.createHref({pathname:C,search:A,hash:u})}function Zl(){return at.useContext(hu)!=null}function yo(){return kn(Zl(),"useLocation() may be used only in the context of a <Router> component."),at.useContext(hu).location}var ix="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function sx(i){at.useContext(Es).static||at.useLayoutEffect(i)}function f0(){let{isDataRoute:i}=at.useContext(Hs);return i?q_():O_()}function O_(){kn(Zl(),"useNavigate() may be used only in the context of a <Router> component.");let i=at.useContext(Kl),{basename:t,navigator:n}=at.useContext(Es),{matches:o}=at.useContext(Hs),{pathname:u}=yo(),d=JSON.stringify(c0(o)),A=at.useRef(!1);return sx(()=>{A.current=!0}),at.useCallback((_,x={})=>{if(rs(A.current,ix),!A.current)return;if(typeof _=="number"){n.go(_);return}let v=u0(_,JSON.parse(d),u,x.relative==="path");i==null&&t!=="/"&&(v.pathname=v.pathname==="/"?t:ma([t,v.pathname])),(x.replace?n.replace:n.push)(v,x.state,x)},[t,n,d,u,i])}at.createContext(null);function fu(i,{relative:t}={}){let{matches:n}=at.useContext(Hs),{pathname:o}=yo(),u=JSON.stringify(c0(n));return at.useMemo(()=>u0(i,JSON.parse(u),o,t==="path"),[i,u,o,t])}function L_(i,t){return ax(i,t)}function ax(i,t,n,o){kn(Zl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=at.useContext(Es),{matches:d}=at.useContext(Hs),A=d[d.length-1],C=A?A.params:{},_=A?A.pathname:"/",x=A?A.pathnameBase:"/",v=A&&A.route;{let Q=v&&v.path||"";ox(_,!v||Q.endsWith("*")||Q.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${_}" (under <Route path="${Q}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${Q}"> to <Route path="${Q==="/"?"*":`${Q}/*`}">.`)}let I=yo(),O;if(t){let Q=typeof t=="string"?Yo(t):t;kn(x==="/"||Q.pathname?.startsWith(x),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${x}" but pathname "${Q.pathname}" was given in the \`location\` prop.`),O=Q}else O=I;let H=O.pathname||"/",X=H;if(x!=="/"){let Q=x.replace(/^\//,"").split("/");X="/"+H.replace(/^\//,"").split("/").slice(Q.length).join("/")}let J=$y(i,{pathname:X});rs(v||J!=null,`No routes matched location "${O.pathname}${O.search}${O.hash}" `),rs(J==null||J[J.length-1].route.element!==void 0||J[J.length-1].route.Component!==void 0||J[J.length-1].route.lazy!==void 0,`Matched leaf route at location "${O.pathname}${O.search}${O.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let q=U_(J&&J.map(Q=>Object.assign({},Q,{params:Object.assign({},C,Q.params),pathname:ma([x,u.encodeLocation?u.encodeLocation(Q.pathname).pathname:Q.pathname]),pathnameBase:Q.pathnameBase==="/"?x:ma([x,u.encodeLocation?u.encodeLocation(Q.pathnameBase).pathname:Q.pathnameBase])})),d,n,o);return t&&q?at.createElement(hu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...O},navigationType:"POP"}},q):q}function B_(){let i=G_(),t=I_(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),n=i instanceof Error?i.stack:null,o="rgba(200,200,200, 0.5)",u={padding:"0.5rem",backgroundColor:o},d={padding:"2px 4px",backgroundColor:o},A=null;return console.error("Error handled by React Router default ErrorBoundary:",i),A=at.createElement(at.Fragment,null,at.createElement("p",null," Hey developer "),at.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",at.createElement("code",{style:d},"ErrorBoundary")," or"," ",at.createElement("code",{style:d},"errorElement")," prop on your route.")),at.createElement(at.Fragment,null,at.createElement("h2",null,"Unexpected Application Error!"),at.createElement("h3",{style:{fontStyle:"italic"}},t),n?at.createElement("pre",{style:u},n):null,A)}var P_=at.createElement(B_,null),k_=class extends at.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,t){return t.location!==i.location||t.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:t.error,location:t.location,revalidation:i.revalidation||t.revalidation}}componentDidCatch(i,t){console.error("React Router caught the following error during render",i,t)}render(){return this.state.error!==void 0?at.createElement(Hs.Provider,{value:this.props.routeContext},at.createElement(h0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function V_({routeContext:i,match:t,children:n}){let o=at.useContext(Kl);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),at.createElement(Hs.Provider,{value:i},n)}function U_(i,t=[],n=null,o=null){if(i==null){if(!n)return null;if(n.errors)i=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)i=n.matches;else return null}let u=i,d=n?.errors;if(d!=null){let _=u.findIndex(x=>x.route.id&&d?.[x.route.id]!==void 0);kn(_>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),u=u.slice(0,Math.min(u.length,_+1))}let A=!1,C=-1;if(n)for(let _=0;_<u.length;_++){let x=u[_];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(C=_),x.route.id){let{loaderData:v,errors:I}=n,O=x.route.loader&&!v.hasOwnProperty(x.route.id)&&(!I||I[x.route.id]===void 0);if(x.route.lazy||O){A=!0,C>=0?u=u.slice(0,C+1):u=[u[0]];break}}}return u.reduceRight((_,x,v)=>{let I,O=!1,H=null,X=null;n&&(I=d&&x.route.id?d[x.route.id]:void 0,H=x.route.errorElement||P_,A&&(C<0&&v===0?(ox("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),O=!0,X=null):C===v&&(O=!0,X=x.route.hydrateFallbackElement||null)));let J=t.concat(u.slice(0,v+1)),q=()=>{let Q;return I?Q=H:O?Q=X:x.route.Component?Q=at.createElement(x.route.Component,null):x.route.element?Q=x.route.element:Q=_,at.createElement(V_,{match:x,routeContext:{outlet:_,matches:J,isDataRoute:n!=null},children:Q})};return n&&(x.route.ErrorBoundary||x.route.errorElement||v===0)?at.createElement(k_,{location:n.location,revalidation:n.revalidation,component:H,error:I,children:q(),routeContext:{outlet:null,matches:J,isDataRoute:!0}}):q()},null)}function d0(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function F_(i){let t=at.useContext(Kl);return kn(t,d0(i)),t}function j_(i){let t=at.useContext(lf);return kn(t,d0(i)),t}function z_(i){let t=at.useContext(Hs);return kn(t,d0(i)),t}function g0(i){let t=z_(i),n=t.matches[t.matches.length-1];return kn(n.route.id,`${i} can only be used on routes that contain a unique "id"`),n.route.id}function H_(){return g0("useRouteId")}function G_(){let i=at.useContext(h0),t=j_("useRouteError"),n=g0("useRouteError");return i!==void 0?i:t.errors?.[n]}function q_(){let{router:i}=F_("useNavigate"),t=g0("useNavigate"),n=at.useRef(!1);return sx(()=>{n.current=!0}),at.useCallback(async(u,d={})=>{rs(n.current,ix),n.current&&(typeof u=="number"?i.navigate(u):await i.navigate(u,{fromRouteId:t,...d}))},[i,t])}var d2={};function ox(i,t,n){!t&&!d2[i]&&(d2[i]=!0,rs(!1,n))}at.memo(Y_);function Y_({routes:i,future:t,state:n}){return ax(i,void 0,n,t)}function X_({to:i,replace:t,state:n,relative:o}){kn(Zl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:u}=at.useContext(Es);rs(!u,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:d}=at.useContext(Hs),{pathname:A}=yo(),C=f0(),_=u0(i,c0(d),A,o==="path"),x=JSON.stringify(_);return at.useEffect(()=>{C(JSON.parse(x),{replace:t,state:n,relative:o})},[C,x,o,t,n]),null}function Mi(i){kn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Q_({basename:i="/",children:t=null,location:n,navigationType:o="POP",navigator:u,static:d=!1}){kn(!Zl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let A=i.replace(/^\/*/,"/"),C=at.useMemo(()=>({basename:A,navigator:u,static:d,future:{}}),[A,u,d]);typeof n=="string"&&(n=Yo(n));let{pathname:_="/",search:x="",hash:v="",state:I=null,key:O="default"}=n,H=at.useMemo(()=>{let X=ya(_,A);return X==null?null:{location:{pathname:X,search:x,hash:v,state:I,key:O},navigationType:o}},[A,_,x,v,I,O,o]);return rs(H!=null,`<Router basename="${A}"> is not able to match the URL "${_}${x}${v}" because it does not start with the basename, so the <Router> won't render anything.`),H==null?null:at.createElement(Es.Provider,{value:C},at.createElement(hu.Provider,{children:t,value:H}))}function W_({children:i,location:t}){return L_(L1(i),t)}function L1(i,t=[]){let n=[];return at.Children.forEach(i,(o,u)=>{if(!at.isValidElement(o))return;let d=[...t,u];if(o.type===at.Fragment){n.push.apply(n,L1(o.props.children,d));return}kn(o.type===Mi,`[${typeof o.type=="string"?o.type:o.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),kn(!o.props.index||!o.props.children,"An index route cannot have child routes.");let A={id:o.props.id||d.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,loader:o.props.loader,action:o.props.action,hydrateFallbackElement:o.props.hydrateFallbackElement,HydrateFallback:o.props.HydrateFallback,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.hasErrorBoundary===!0||o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(A.children=L1(o.props.children,d)),n.push(A)}),n}var Rh="get",Nh="application/x-www-form-urlencoded";function cf(i){return i!=null&&typeof i.tagName=="string"}function K_(i){return cf(i)&&i.tagName.toLowerCase()==="button"}function Z_(i){return cf(i)&&i.tagName.toLowerCase()==="form"}function J_(i){return cf(i)&&i.tagName.toLowerCase()==="input"}function $_(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function tT(i,t){return i.button===0&&(!t||t==="_self")&&!$_(i)}var _h=null;function eT(){if(_h===null)try{new FormData(document.createElement("form"),0),_h=!1}catch{_h=!0}return _h}var nT=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function w1(i){return i!=null&&!nT.has(i)?(rs(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Nh}"`),null):i}function rT(i,t){let n,o,u,d,A;if(Z_(i)){let C=i.getAttribute("action");o=C?ya(C,t):null,n=i.getAttribute("method")||Rh,u=w1(i.getAttribute("enctype"))||Nh,d=new FormData(i)}else if(K_(i)||J_(i)&&(i.type==="submit"||i.type==="image")){let C=i.form;if(C==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let _=i.getAttribute("formaction")||C.getAttribute("action");if(o=_?ya(_,t):null,n=i.getAttribute("formmethod")||C.getAttribute("method")||Rh,u=w1(i.getAttribute("formenctype"))||w1(C.getAttribute("enctype"))||Nh,d=new FormData(C,i),!eT()){let{name:x,type:v,value:I}=i;if(v==="image"){let O=x?`${x}.`:"";d.append(`${O}x`,"0"),d.append(`${O}y`,"0")}else x&&d.append(x,I)}}else{if(cf(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Rh,o=null,u=Nh,A=i}return d&&u==="text/plain"&&(A=d,d=void 0),{action:o,method:n.toLowerCase(),encType:u,formData:d,body:A}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function m0(i,t){if(i===!1||i===null||typeof i>"u")throw new Error(t)}function iT(i,t,n){let o=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return o.pathname==="/"?o.pathname=`_root.${n}`:t&&ya(o.pathname,t)==="/"?o.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:o.pathname=`${o.pathname.replace(/\/$/,"")}.${n}`,o}async function sT(i,t){if(i.id in t)return t[i.id];try{let n=await import(i.module);return t[i.id]=n,n}catch(n){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function aT(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function oT(i,t,n){let o=await Promise.all(i.map(async u=>{let d=t.routes[u.route.id];if(d){let A=await sT(d,n);return A.links?A.links():[]}return[]}));return hT(o.flat(1).filter(aT).filter(u=>u.rel==="stylesheet"||u.rel==="preload").map(u=>u.rel==="stylesheet"?{...u,rel:"prefetch",as:"style"}:{...u,rel:"prefetch"}))}function g2(i,t,n,o,u,d){let A=(_,x)=>n[x]?_.route.id!==n[x].route.id:!0,C=(_,x)=>n[x].pathname!==_.pathname||n[x].route.path?.endsWith("*")&&n[x].params["*"]!==_.params["*"];return d==="assets"?t.filter((_,x)=>A(_,x)||C(_,x)):d==="data"?t.filter((_,x)=>{let v=o.routes[_.route.id];if(!v||!v.hasLoader)return!1;if(A(_,x)||C(_,x))return!0;if(_.route.shouldRevalidate){let I=_.route.shouldRevalidate({currentUrl:new URL(u.pathname+u.search+u.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(i,window.origin),nextParams:_.params,defaultShouldRevalidate:!0});if(typeof I=="boolean")return I}return!0}):[]}function lT(i,t,{includeHydrateFallback:n}={}){return cT(i.map(o=>{let u=t.routes[o.route.id];if(!u)return[];let d=[u.module];return u.clientActionModule&&(d=d.concat(u.clientActionModule)),u.clientLoaderModule&&(d=d.concat(u.clientLoaderModule)),n&&u.hydrateFallbackModule&&(d=d.concat(u.hydrateFallbackModule)),u.imports&&(d=d.concat(u.imports)),d}).flat(1))}function cT(i){return[...new Set(i)]}function uT(i){let t={},n=Object.keys(i).sort();for(let o of n)t[o]=i[o];return t}function hT(i,t){let n=new Set;return new Set(t),i.reduce((o,u)=>{let d=JSON.stringify(uT(u));return n.has(d)||(n.add(d),o.push({key:d,link:u})),o},[])}function lx(){let i=at.useContext(Kl);return m0(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function fT(){let i=at.useContext(lf);return m0(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var p0=at.createContext(void 0);p0.displayName="FrameworkContext";function cx(){let i=at.useContext(p0);return m0(i,"You must render this element inside a <HydratedRouter> element"),i}function dT(i,t){let n=at.useContext(p0),[o,u]=at.useState(!1),[d,A]=at.useState(!1),{onFocus:C,onBlur:_,onMouseEnter:x,onMouseLeave:v,onTouchStart:I}=t,O=at.useRef(null);at.useEffect(()=>{if(i==="render"&&A(!0),i==="viewport"){let J=Q=>{Q.forEach(ft=>{A(ft.isIntersecting)})},q=new IntersectionObserver(J,{threshold:.5});return O.current&&q.observe(O.current),()=>{q.disconnect()}}},[i]),at.useEffect(()=>{if(o){let J=setTimeout(()=>{A(!0)},100);return()=>{clearTimeout(J)}}},[o]);let H=()=>{u(!0)},X=()=>{u(!1),A(!1)};return n?i!=="intent"?[d,O,{}]:[d,O,{onFocus:Gc(C,H),onBlur:Gc(_,X),onMouseEnter:Gc(x,H),onMouseLeave:Gc(v,X),onTouchStart:Gc(I,H)}]:[!1,O,{}]}function Gc(i,t){return n=>{i&&i(n),n.defaultPrevented||t(n)}}function gT({page:i,...t}){let{router:n}=lx(),o=at.useMemo(()=>$y(n.routes,i,n.basename),[n.routes,i,n.basename]);return o?at.createElement(pT,{page:i,matches:o,...t}):null}function mT(i){let{manifest:t,routeModules:n}=cx(),[o,u]=at.useState([]);return at.useEffect(()=>{let d=!1;return oT(i,t,n).then(A=>{d||u(A)}),()=>{d=!0}},[i,t,n]),o}function pT({page:i,matches:t,...n}){let o=yo(),{manifest:u,routeModules:d}=cx(),{basename:A}=lx(),{loaderData:C,matches:_}=fT(),x=at.useMemo(()=>g2(i,t,_,u,o,"data"),[i,t,_,u,o]),v=at.useMemo(()=>g2(i,t,_,u,o,"assets"),[i,t,_,u,o]),I=at.useMemo(()=>{if(i===o.pathname+o.search+o.hash)return[];let X=new Set,J=!1;if(t.forEach(Q=>{let ft=u.routes[Q.route.id];!ft||!ft.hasLoader||(!x.some(nt=>nt.route.id===Q.route.id)&&Q.route.id in C&&d[Q.route.id]?.shouldRevalidate||ft.hasClientLoader?J=!0:X.add(Q.route.id))}),X.size===0)return[];let q=iT(i,A,"data");return J&&X.size>0&&q.searchParams.set("_routes",t.filter(Q=>X.has(Q.route.id)).map(Q=>Q.route.id).join(",")),[q.pathname+q.search]},[A,C,o,u,x,t,i,d]),O=at.useMemo(()=>lT(v,u),[v,u]),H=mT(v);return at.createElement(at.Fragment,null,I.map(X=>at.createElement("link",{key:X,rel:"prefetch",as:"fetch",href:X,...n})),O.map(X=>at.createElement("link",{key:X,rel:"modulepreload",href:X,...n})),H.map(({key:X,link:J})=>at.createElement("link",{key:X,nonce:n.nonce,...J})))}function yT(...i){return t=>{i.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var ux=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{ux&&(window.__reactRouterVersion="7.8.0")}catch{}function xT({basename:i,children:t,window:n}){let o=at.useRef();o.current==null&&(o.current=s_({window:n,v5Compat:!0}));let u=o.current,[d,A]=at.useState({action:u.action,location:u.location}),C=at.useCallback(_=>{at.startTransition(()=>A(_))},[A]);return at.useLayoutEffect(()=>u.listen(C),[u,C]),at.createElement(Q_,{basename:i,children:t,location:d.location,navigationType:d.action,navigator:u})}var hx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,gi=at.forwardRef(function({onClick:t,discover:n="render",prefetch:o="none",relative:u,reloadDocument:d,replace:A,state:C,target:_,to:x,preventScrollReset:v,viewTransition:I,...O},H){let{basename:X}=at.useContext(Es),J=typeof x=="string"&&hx.test(x),q,Q=!1;if(typeof x=="string"&&J&&(q=x,ux))try{let k=new URL(window.location.href),et=x.startsWith("//")?new URL(k.protocol+x):new URL(x),tt=ya(et.pathname,X);et.origin===k.origin&&tt!=null?x=tt+et.search+et.hash:Q=!0}catch{rs(!1,`<Link to="${x}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let ft=M_(x,{relative:u}),[nt,_t,mt]=dT(o,O),Tt=wT(x,{replace:A,state:C,target:_,preventScrollReset:v,relative:u,viewTransition:I});function U(k){t&&t(k),k.defaultPrevented||Tt(k)}let F=at.createElement("a",{...O,...mt,href:q||ft,onClick:Q||d?t:U,ref:yT(H,_t),target:_,"data-discover":!J&&n==="render"?"true":void 0});return nt&&!J?at.createElement(at.Fragment,null,F,at.createElement(gT,{page:ft})):F});gi.displayName="Link";var fx=at.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:o="",end:u=!1,style:d,to:A,viewTransition:C,children:_,...x},v){let I=fu(A,{relative:x.relative}),O=yo(),H=at.useContext(lf),{navigator:X,basename:J}=at.useContext(Es),q=H!=null&&vT(I)&&C===!0,Q=X.encodeLocation?X.encodeLocation(I).pathname:I.pathname,ft=O.pathname,nt=H&&H.navigation&&H.navigation.location?H.navigation.location.pathname:null;n||(ft=ft.toLowerCase(),nt=nt?nt.toLowerCase():null,Q=Q.toLowerCase()),nt&&J&&(nt=ya(nt,J)||nt);const _t=Q!=="/"&&Q.endsWith("/")?Q.length-1:Q.length;let mt=ft===Q||!u&&ft.startsWith(Q)&&ft.charAt(_t)==="/",Tt=nt!=null&&(nt===Q||!u&&nt.startsWith(Q)&&nt.charAt(Q.length)==="/"),U={isActive:mt,isPending:Tt,isTransitioning:q},F=mt?t:void 0,k;typeof o=="function"?k=o(U):k=[o,mt?"active":null,Tt?"pending":null,q?"transitioning":null].filter(Boolean).join(" ");let et=typeof d=="function"?d(U):d;return at.createElement(gi,{...x,"aria-current":F,className:k,ref:v,style:et,to:A,viewTransition:C},typeof _=="function"?_(U):_)});fx.displayName="NavLink";var ET=at.forwardRef(({discover:i="render",fetcherKey:t,navigate:n,reloadDocument:o,replace:u,state:d,method:A=Rh,action:C,onSubmit:_,relative:x,preventScrollReset:v,viewTransition:I,...O},H)=>{let X=CT(),J=ST(C,{relative:x}),q=A.toLowerCase()==="get"?"get":"post",Q=typeof C=="string"&&hx.test(C),ft=nt=>{if(_&&_(nt),nt.defaultPrevented)return;nt.preventDefault();let _t=nt.nativeEvent.submitter,mt=_t?.getAttribute("formmethod")||A;X(_t||nt.currentTarget,{fetcherKey:t,method:mt,navigate:n,replace:u,state:d,relative:x,preventScrollReset:v,viewTransition:I})};return at.createElement("form",{ref:H,method:q,action:J,onSubmit:o?_:ft,...O,"data-discover":!Q&&i==="render"?"true":void 0})});ET.displayName="Form";function AT(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function dx(i){let t=at.useContext(Kl);return kn(t,AT(i)),t}function wT(i,{target:t,replace:n,state:o,preventScrollReset:u,relative:d,viewTransition:A}={}){let C=f0(),_=yo(),x=fu(i,{relative:d});return at.useCallback(v=>{if(tT(v,t)){v.preventDefault();let I=n!==void 0?n:eu(_)===eu(x);C(i,{replace:I,state:o,preventScrollReset:u,relative:d,viewTransition:A})}},[_,C,x,n,o,t,i,u,d,A])}var _T=0,TT=()=>`__${String(++_T)}__`;function CT(){let{router:i}=dx("useSubmit"),{basename:t}=at.useContext(Es),n=H_();return at.useCallback(async(o,u={})=>{let{action:d,method:A,encType:C,formData:_,body:x}=rT(o,t);if(u.navigate===!1){let v=u.fetcherKey||TT();await i.fetch(v,n,u.action||d,{preventScrollReset:u.preventScrollReset,formData:_,body:x,formMethod:u.method||A,formEncType:u.encType||C,flushSync:u.flushSync})}else await i.navigate(u.action||d,{preventScrollReset:u.preventScrollReset,formData:_,body:x,formMethod:u.method||A,formEncType:u.encType||C,replace:u.replace,state:u.state,fromRouteId:n,flushSync:u.flushSync,viewTransition:u.viewTransition})},[i,t,n])}function ST(i,{relative:t}={}){let{basename:n}=at.useContext(Es),o=at.useContext(Hs);kn(o,"useFormAction must be used inside a RouteContext");let[u]=o.matches.slice(-1),d={...fu(i||".",{relative:t})},A=yo();if(i==null){d.search=A.search;let C=new URLSearchParams(d.search),_=C.getAll("index");if(_.some(v=>v==="")){C.delete("index"),_.filter(I=>I).forEach(I=>C.append("index",I));let v=C.toString();d.search=v?`?${v}`:""}}return(!i||i===".")&&u.route.index&&(d.search=d.search?d.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(d.pathname=d.pathname==="/"?n:ma([n,d.pathname])),eu(d)}function vT(i,{relative:t}={}){let n=at.useContext(rx);kn(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:o}=dx("useViewTransitionState"),u=fu(i,{relative:t});if(!n.isTransitioning)return!1;let d=ya(n.currentLocation.pathname,o)||n.currentLocation.pathname,A=ya(n.nextLocation.pathname,o)||n.nextLocation.pathname;return Vh(u.pathname,A)!=null||Vh(u.pathname,d)!=null}var gx={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},m2=xn.createContext&&xn.createContext(gx),bT=["attr","size","title"];function IT(i,t){if(i==null)return{};var n=RT(i,t),o,u;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(i);for(u=0;u<d.length;u++)o=d[u],!(t.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(i,o)&&(n[o]=i[o])}return n}function RT(i,t){if(i==null)return{};var n={};for(var o in i)if(Object.prototype.hasOwnProperty.call(i,o)){if(t.indexOf(o)>=0)continue;n[o]=i[o]}return n}function Uh(){return Uh=Object.assign?Object.assign.bind():function(i){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])}return i},Uh.apply(this,arguments)}function p2(i,t){var n=Object.keys(i);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(i);t&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(i,u).enumerable})),n.push.apply(n,o)}return n}function Fh(i){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?p2(Object(n),!0).forEach(function(o){NT(i,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(n)):p2(Object(n)).forEach(function(o){Object.defineProperty(i,o,Object.getOwnPropertyDescriptor(n,o))})}return i}function NT(i,t,n){return t=DT(t),t in i?Object.defineProperty(i,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):i[t]=n,i}function DT(i){var t=MT(i,"string");return typeof t=="symbol"?t:t+""}function MT(i,t){if(typeof i!="object"||!i)return i;var n=i[Symbol.toPrimitive];if(n!==void 0){var o=n.call(i,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(i)}function mx(i){return i&&i.map((t,n)=>xn.createElement(t.tag,Fh({key:n},t.attr),mx(t.child)))}function px(i){return t=>xn.createElement(OT,Uh({attr:Fh({},i.attr)},t),mx(i.child))}function OT(i){var t=n=>{var{attr:o,size:u,title:d}=i,A=IT(i,bT),C=u||n.size||"1em",_;return n.className&&(_=n.className),i.className&&(_=(_?_+" ":"")+i.className),xn.createElement("svg",Uh({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,o,A,{className:_,style:Fh(Fh({color:i.color||n.color},n.style),i.style),height:C,width:C,xmlns:"http://www.w3.org/2000/svg"}),d&&xn.createElement("title",null,d),i.children)};return m2!==void 0?xn.createElement(m2.Consumer,null,n=>t(n)):t(gx)}function LT(i){return px({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"15 18 9 12 15 6"},child:[]}]})(i)}function BT(i){return px({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 18 15 12 9 6"},child:[]}]})(i)}function Xo(){const[i,t]=at.useState(!1),n=[{to:"/dashboard",label:"Dashboard"},{to:"/customers",label:"Customers"},{to:"/orders",label:"Orders"},{to:"/rewards",label:"Rewards"},{to:"/menu",label:"Menu"},{to:"/wallet",label:"Wallet Requests"},{to:"/feedback",label:"Feedback"},{to:"/notifications",label:"Notifications"},{to:"/settings",label:"Settings"},{to:"/",label:"Logout"}];return D.jsxs(D.Fragment,{children:[D.jsxs("aside",{className:`sidebar ${i?"hidden":""}`,"aria-hidden":i,children:[D.jsx("h2",{className:"sidebar-title",children:"Admin Panel"}),D.jsx("nav",{className:"sidebar-nav",children:n.map(({to:o,label:u})=>D.jsx(fx,{to:o,className:({isActive:d})=>d?"sidebar-link active":"sidebar-link",tabIndex:i?-1:0,children:u},o))})]}),D.jsx("button",{className:"toggle-btn",onClick:()=>t(o=>!o),"aria-pressed":!i,"aria-label":i?"Open sidebar":"Close sidebar",children:i?D.jsx(BT,{size:20}):D.jsx(LT,{size:20})})]})}function PT(){return D.jsx("div",{className:"intro-container",children:D.jsxs("div",{className:"intro-card",children:[D.jsx("h1",{className:"intro-title",children:"Welcome!"}),D.jsx("div",{className:"intro-buttons",children:D.jsx(gi,{to:"/Owner",children:D.jsx("button",{className:"intro-button admin-button",children:"Start"})})})]})})}const kT=()=>{};var y2={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yx=function(i){const t=[];let n=0;for(let o=0;o<i.length;o++){let u=i.charCodeAt(o);u<128?t[n++]=u:u<2048?(t[n++]=u>>6|192,t[n++]=u&63|128):(u&64512)===55296&&o+1<i.length&&(i.charCodeAt(o+1)&64512)===56320?(u=65536+((u&1023)<<10)+(i.charCodeAt(++o)&1023),t[n++]=u>>18|240,t[n++]=u>>12&63|128,t[n++]=u>>6&63|128,t[n++]=u&63|128):(t[n++]=u>>12|224,t[n++]=u>>6&63|128,t[n++]=u&63|128)}return t},VT=function(i){const t=[];let n=0,o=0;for(;n<i.length;){const u=i[n++];if(u<128)t[o++]=String.fromCharCode(u);else if(u>191&&u<224){const d=i[n++];t[o++]=String.fromCharCode((u&31)<<6|d&63)}else if(u>239&&u<365){const d=i[n++],A=i[n++],C=i[n++],_=((u&7)<<18|(d&63)<<12|(A&63)<<6|C&63)-65536;t[o++]=String.fromCharCode(55296+(_>>10)),t[o++]=String.fromCharCode(56320+(_&1023))}else{const d=i[n++],A=i[n++];t[o++]=String.fromCharCode((u&15)<<12|(d&63)<<6|A&63)}}return t.join("")},xx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,t){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,o=[];for(let u=0;u<i.length;u+=3){const d=i[u],A=u+1<i.length,C=A?i[u+1]:0,_=u+2<i.length,x=_?i[u+2]:0,v=d>>2,I=(d&3)<<4|C>>4;let O=(C&15)<<2|x>>6,H=x&63;_||(H=64,A||(O=64)),o.push(n[v],n[I],n[O],n[H])}return o.join("")},encodeString(i,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(i):this.encodeByteArray(yx(i),t)},decodeString(i,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(i):VT(this.decodeStringToByteArray(i,t))},decodeStringToByteArray(i,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,o=[];for(let u=0;u<i.length;){const d=n[i.charAt(u++)],C=u<i.length?n[i.charAt(u)]:0;++u;const x=u<i.length?n[i.charAt(u)]:64;++u;const I=u<i.length?n[i.charAt(u)]:64;if(++u,d==null||C==null||x==null||I==null)throw new UT;const O=d<<2|C>>4;if(o.push(O),x!==64){const H=C<<4&240|x>>2;if(o.push(H),I!==64){const X=x<<6&192|I;o.push(X)}}}return o},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class UT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const FT=function(i){const t=yx(i);return xx.encodeByteArray(t,!0)},jh=function(i){return FT(i).replace(/\./g,"")},jT=function(i){try{return xx.decodeString(i,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HT=()=>zT().__FIREBASE_DEFAULTS__,GT=()=>{if(typeof process>"u"||typeof y2>"u")return;const i=y2.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},qT=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=i&&jT(i[1]);return t&&JSON.parse(t)},y0=()=>{try{return kT()||HT()||GT()||qT()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},YT=i=>y0()?.emulatorHosts?.[i],Ex=i=>{const t=YT(i);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const o=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),o]:[t.substring(0,n),o]},Ax=()=>y0()?.config;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,o)=>{n?this.reject(n):this.resolve(o),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,o))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uf(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function wx(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _x(i,t){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},o=t||"demo-project",u=i.iat||0,d=i.sub||i.user_id;if(!d)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const A={iss:`https://securetoken.google.com/${o}`,aud:o,iat:u,exp:u+3600,auth_time:u,sub:d,user_id:d,firebase:{sign_in_provider:"custom",identities:{}},...i};return[jh(JSON.stringify(n)),jh(JSON.stringify(A)),""].join(".")}const Kc={};function QT(){const i={prod:[],emulator:[]};for(const t of Object.keys(Kc))Kc[t]?i.emulator.push(t):i.prod.push(t);return i}function WT(i){let t=document.getElementById(i),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",i),n=!0),{created:n,element:t}}let x2=!1;function Tx(i,t){if(typeof window>"u"||typeof document>"u"||!uf(window.location.host)||Kc[i]===t||Kc[i]||x2)return;Kc[i]=t;function n(O){return`__firebase__banner__${O}`}const o="__firebase__banner",d=QT().prod.length>0;function A(){const O=document.getElementById(o);O&&O.remove()}function C(O){O.style.display="flex",O.style.background="#7faaf0",O.style.position="fixed",O.style.bottom="5px",O.style.left="5px",O.style.padding=".5em",O.style.borderRadius="5px",O.style.alignItems="center"}function _(O,H){O.setAttribute("width","24"),O.setAttribute("id",H),O.setAttribute("height","24"),O.setAttribute("viewBox","0 0 24 24"),O.setAttribute("fill","none"),O.style.marginLeft="-6px"}function x(){const O=document.createElement("span");return O.style.cursor="pointer",O.style.marginLeft="16px",O.style.fontSize="24px",O.innerHTML=" &times;",O.onclick=()=>{x2=!0,A()},O}function v(O,H){O.setAttribute("id",H),O.innerText="Learn more",O.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",O.setAttribute("target","__blank"),O.style.paddingLeft="5px",O.style.textDecoration="underline"}function I(){const O=WT(o),H=n("text"),X=document.getElementById(H)||document.createElement("span"),J=n("learnmore"),q=document.getElementById(J)||document.createElement("a"),Q=n("preprendIcon"),ft=document.getElementById(Q)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(O.created){const nt=O.element;C(nt),v(q,J);const _t=x();_(ft,Q),nt.append(ft,X,q,_t),document.body.appendChild(nt)}d?(X.innerText="Preview backend disconnected.",ft.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ft.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,X.innerText="Preview backend running in this workspace."),X.setAttribute("id",H)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",I):I()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KT(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ZT(){const i=y0()?.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function JT(){return!ZT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $T(){try{return typeof indexedDB=="object"}catch{return!1}}function tC(){return new Promise((i,t)=>{try{let n=!0;const o="validate-browser-context-for-indexeddb-analytics-module",u=self.indexedDB.open(o);u.onsuccess=()=>{u.result.close(),n||self.indexedDB.deleteDatabase(o),i(!0)},u.onupgradeneeded=()=>{n=!1},u.onerror=()=>{t(u.error?.message||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eC="FirebaseError";class Qo extends Error{constructor(t,n,o){super(n),this.code=t,this.customData=o,this.name=eC,Object.setPrototypeOf(this,Qo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Cx.prototype.create)}}class Cx{constructor(t,n,o){this.service=t,this.serviceName=n,this.errors=o}create(t,...n){const o=n[0]||{},u=`${this.service}/${t}`,d=this.errors[t],A=d?nC(d,o):"Error",C=`${this.serviceName}: ${A} (${u}).`;return new Qo(u,C,o)}}function nC(i,t){return i.replace(rC,(n,o)=>{const u=t[o];return u!=null?String(u):`<${o}?>`})}const rC=/\{\$([^}]+)}/g;function zh(i,t){if(i===t)return!0;const n=Object.keys(i),o=Object.keys(t);for(const u of n){if(!o.includes(u))return!1;const d=i[u],A=t[u];if(E2(d)&&E2(A)){if(!zh(d,A))return!1}else if(d!==A)return!1}for(const u of o)if(!n.includes(u))return!1;return!0}function E2(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ys(i){return i&&i._delegate?i._delegate:i}class zl{constructor(t,n,o){this.name=t,this.instanceFactory=n,this.type=o,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const o=new XT;if(this.instancesDeferred.set(n,o),this.isInitialized(n)||this.shouldAutoInitialize())try{const u=this.getOrInitializeService({instanceIdentifier:n});u&&o.resolve(u)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t?.identifier),o=t?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(u){if(o)return null;throw u}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(aC(t))try{this.getOrInitializeService({instanceIdentifier:Vo})}catch{}for(const[n,o]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(n);try{const d=this.getOrInitializeService({instanceIdentifier:u});o.resolve(d)}catch{}}}}clearInstance(t=Vo){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Vo){return this.instances.has(t)}getOptions(t=Vo){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,o=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(o))throw Error(`${this.name}(${o}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const u=this.getOrInitializeService({instanceIdentifier:o,options:n});for(const[d,A]of this.instancesDeferred.entries()){const C=this.normalizeInstanceIdentifier(d);o===C&&A.resolve(u)}return u}onInit(t,n){const o=this.normalizeInstanceIdentifier(n),u=this.onInitCallbacks.get(o)??new Set;u.add(t),this.onInitCallbacks.set(o,u);const d=this.instances.get(o);return d&&t(d,o),()=>{u.delete(t)}}invokeOnInitCallbacks(t,n){const o=this.onInitCallbacks.get(n);if(o)for(const u of o)try{u(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let o=this.instances.get(t);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:sC(t),options:n}),this.instances.set(t,o),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(o,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,o)}catch{}return o||null}normalizeInstanceIdentifier(t=Vo){return this.component?this.component.multipleInstances?t:Vo:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function sC(i){return i===Vo?void 0:i}function aC(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new iC(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ve;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Ve||(Ve={}));const lC={debug:Ve.DEBUG,verbose:Ve.VERBOSE,info:Ve.INFO,warn:Ve.WARN,error:Ve.ERROR,silent:Ve.SILENT},cC=Ve.INFO,uC={[Ve.DEBUG]:"log",[Ve.VERBOSE]:"log",[Ve.INFO]:"info",[Ve.WARN]:"warn",[Ve.ERROR]:"error"},hC=(i,t,...n)=>{if(t<i.logLevel)return;const o=new Date().toISOString(),u=uC[t];if(u)console[u](`[${o}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Sx{constructor(t){this.name=t,this._logLevel=cC,this._logHandler=hC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Ve))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?lC[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Ve.DEBUG,...t),this._logHandler(this,Ve.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Ve.VERBOSE,...t),this._logHandler(this,Ve.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Ve.INFO,...t),this._logHandler(this,Ve.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Ve.WARN,...t),this._logHandler(this,Ve.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Ve.ERROR,...t),this._logHandler(this,Ve.ERROR,...t)}}const fC=(i,t)=>t.some(n=>i instanceof n);let A2,w2;function dC(){return A2||(A2=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function gC(){return w2||(w2=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const vx=new WeakMap,B1=new WeakMap,bx=new WeakMap,_1=new WeakMap,x0=new WeakMap;function mC(i){const t=new Promise((n,o)=>{const u=()=>{i.removeEventListener("success",d),i.removeEventListener("error",A)},d=()=>{n(ro(i.result)),u()},A=()=>{o(i.error),u()};i.addEventListener("success",d),i.addEventListener("error",A)});return t.then(n=>{n instanceof IDBCursor&&vx.set(n,i)}).catch(()=>{}),x0.set(t,i),t}function pC(i){if(B1.has(i))return;const t=new Promise((n,o)=>{const u=()=>{i.removeEventListener("complete",d),i.removeEventListener("error",A),i.removeEventListener("abort",A)},d=()=>{n(),u()},A=()=>{o(i.error||new DOMException("AbortError","AbortError")),u()};i.addEventListener("complete",d),i.addEventListener("error",A),i.addEventListener("abort",A)});B1.set(i,t)}let P1={get(i,t,n){if(i instanceof IDBTransaction){if(t==="done")return B1.get(i);if(t==="objectStoreNames")return i.objectStoreNames||bx.get(i);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ro(i[t])},set(i,t,n){return i[t]=n,!0},has(i,t){return i instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in i}};function yC(i){P1=i(P1)}function xC(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const o=i.call(T1(this),t,...n);return bx.set(o,t.sort?t.sort():[t]),ro(o)}:gC().includes(i)?function(...t){return i.apply(T1(this),t),ro(vx.get(this))}:function(...t){return ro(i.apply(T1(this),t))}}function EC(i){return typeof i=="function"?xC(i):(i instanceof IDBTransaction&&pC(i),fC(i,dC())?new Proxy(i,P1):i)}function ro(i){if(i instanceof IDBRequest)return mC(i);if(_1.has(i))return _1.get(i);const t=EC(i);return t!==i&&(_1.set(i,t),x0.set(t,i)),t}const T1=i=>x0.get(i);function AC(i,t,{blocked:n,upgrade:o,blocking:u,terminated:d}={}){const A=indexedDB.open(i,t),C=ro(A);return o&&A.addEventListener("upgradeneeded",_=>{o(ro(A.result),_.oldVersion,_.newVersion,ro(A.transaction),_)}),n&&A.addEventListener("blocked",_=>n(_.oldVersion,_.newVersion,_)),C.then(_=>{d&&_.addEventListener("close",()=>d()),u&&_.addEventListener("versionchange",x=>u(x.oldVersion,x.newVersion,x))}).catch(()=>{}),C}const wC=["get","getKey","getAll","getAllKeys","count"],_C=["put","add","delete","clear"],C1=new Map;function _2(i,t){if(!(i instanceof IDBDatabase&&!(t in i)&&typeof t=="string"))return;if(C1.get(t))return C1.get(t);const n=t.replace(/FromIndex$/,""),o=t!==n,u=_C.includes(n);if(!(n in(o?IDBIndex:IDBObjectStore).prototype)||!(u||wC.includes(n)))return;const d=async function(A,...C){const _=this.transaction(A,u?"readwrite":"readonly");let x=_.store;return o&&(x=x.index(C.shift())),(await Promise.all([x[n](...C),u&&_.done]))[0]};return C1.set(t,d),d}yC(i=>({...i,get:(t,n,o)=>_2(t,n)||i.get(t,n,o),has:(t,n)=>!!_2(t,n)||i.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(CC(n)){const o=n.getImmediate();return`${o.library}/${o.version}`}else return null}).filter(n=>n).join(" ")}}function CC(i){return i.getComponent()?.type==="VERSION"}const k1="@firebase/app",T2="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xa=new Sx("@firebase/app"),SC="@firebase/app-compat",vC="@firebase/analytics-compat",bC="@firebase/analytics",IC="@firebase/app-check-compat",RC="@firebase/app-check",NC="@firebase/auth",DC="@firebase/auth-compat",MC="@firebase/database",OC="@firebase/data-connect",LC="@firebase/database-compat",BC="@firebase/functions",PC="@firebase/functions-compat",kC="@firebase/installations",VC="@firebase/installations-compat",UC="@firebase/messaging",FC="@firebase/messaging-compat",jC="@firebase/performance",zC="@firebase/performance-compat",HC="@firebase/remote-config",GC="@firebase/remote-config-compat",qC="@firebase/storage",YC="@firebase/storage-compat",XC="@firebase/firestore",QC="@firebase/ai",WC="@firebase/firestore-compat",KC="firebase",ZC="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1="[DEFAULT]",JC={[k1]:"fire-core",[SC]:"fire-core-compat",[bC]:"fire-analytics",[vC]:"fire-analytics-compat",[RC]:"fire-app-check",[IC]:"fire-app-check-compat",[NC]:"fire-auth",[DC]:"fire-auth-compat",[MC]:"fire-rtdb",[OC]:"fire-data-connect",[LC]:"fire-rtdb-compat",[BC]:"fire-fn",[PC]:"fire-fn-compat",[kC]:"fire-iid",[VC]:"fire-iid-compat",[UC]:"fire-fcm",[FC]:"fire-fcm-compat",[jC]:"fire-perf",[zC]:"fire-perf-compat",[HC]:"fire-rc",[GC]:"fire-rc-compat",[qC]:"fire-gcs",[YC]:"fire-gcs-compat",[XC]:"fire-fst",[WC]:"fire-fst-compat",[QC]:"fire-vertex","fire-js":"fire-js",[KC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hh=new Map,$C=new Map,U1=new Map;function C2(i,t){try{i.container.addComponent(t)}catch(n){xa.debug(`Component ${t.name} failed to register with FirebaseApp ${i.name}`,n)}}function nu(i){const t=i.name;if(U1.has(t))return xa.debug(`There were multiple attempts to register component ${t}.`),!1;U1.set(t,i);for(const n of Hh.values())C2(n,i);for(const n of $C.values())C2(n,i);return!0}function Ix(i,t){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(t)}function Rx(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t3={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},io=new Cx("app","Firebase",t3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e3{constructor(t,n,o){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=o,this.container.addComponent(new zl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw io.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nx=ZC;function hf(i,t={}){let n=i;typeof t!="object"&&(t={name:t});const o={name:V1,automaticDataCollectionEnabled:!0,...t},u=o.name;if(typeof u!="string"||!u)throw io.create("bad-app-name",{appName:String(u)});if(n||(n=Ax()),!n)throw io.create("no-options");const d=Hh.get(u);if(d){if(zh(n,d.options)&&zh(o,d.config))return d;throw io.create("duplicate-app",{appName:u})}const A=new oC(u);for(const _ of U1.values())A.addComponent(_);const C=new e3(n,o,A);return Hh.set(u,C),C}function Dx(i=V1){const t=Hh.get(i);if(!t&&i===V1&&Ax())return hf();if(!t)throw io.create("no-app",{appName:i});return t}function so(i,t,n){let o=JC[i]??i;n&&(o+=`-${n}`);const u=o.match(/\s|\//),d=t.match(/\s|\//);if(u||d){const A=[`Unable to register library "${o}" with version "${t}":`];u&&A.push(`library name "${o}" contains illegal characters (whitespace or "/")`),u&&d&&A.push("and"),d&&A.push(`version name "${t}" contains illegal characters (whitespace or "/")`),xa.warn(A.join(" "));return}nu(new zl(`${o}-version`,()=>({library:o,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n3="firebase-heartbeat-database",r3=1,ru="firebase-heartbeat-store";let S1=null;function Mx(){return S1||(S1=AC(n3,r3,{upgrade:(i,t)=>{switch(t){case 0:try{i.createObjectStore(ru)}catch(n){console.warn(n)}}}}).catch(i=>{throw io.create("idb-open",{originalErrorMessage:i.message})})),S1}async function i3(i){try{const n=(await Mx()).transaction(ru),o=await n.objectStore(ru).get(Ox(i));return await n.done,o}catch(t){if(t instanceof Qo)xa.warn(t.message);else{const n=io.create("idb-get",{originalErrorMessage:t?.message});xa.warn(n.message)}}}async function S2(i,t){try{const o=(await Mx()).transaction(ru,"readwrite");await o.objectStore(ru).put(t,Ox(i)),await o.done}catch(n){if(n instanceof Qo)xa.warn(n.message);else{const o=io.create("idb-set",{originalErrorMessage:n?.message});xa.warn(o.message)}}}function Ox(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s3=1024,a3=30;class o3{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new c3(n),this._heartbeatsCachePromise=this._storage.read().then(o=>(this._heartbeatsCache=o,o))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=v2();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(u=>u.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:n}),this._heartbeatsCache.heartbeats.length>a3){const u=u3(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){xa.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=v2(),{heartbeatsToSend:n,unsentEntries:o}=l3(this._heartbeatsCache.heartbeats),u=jh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(t){return xa.warn(t),""}}}function v2(){return new Date().toISOString().substring(0,10)}function l3(i,t=s3){const n=[];let o=i.slice();for(const u of i){const d=n.find(A=>A.agent===u.agent);if(d){if(d.dates.push(u.date),b2(n)>t){d.dates.pop();break}}else if(n.push({agent:u.agent,dates:[u.date]}),b2(n)>t){n.pop();break}o=o.slice(1)}return{heartbeatsToSend:n,unsentEntries:o}}class c3{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return $T()?tC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await i3(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const o=await this.read();return S2(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const o=await this.read();return S2(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...t.heartbeats]})}else return}}function b2(i){return jh(JSON.stringify({version:2,heartbeats:i})).length}function u3(i){if(i.length===0)return-1;let t=0,n=i[0].date;for(let o=1;o<i.length;o++)i[o].date<n&&(n=i[o].date,t=o);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h3(i){nu(new zl("platform-logger",t=>new TC(t),"PRIVATE")),nu(new zl("heartbeat",t=>new o3(t),"PRIVATE")),so(k1,T2,i),so(k1,T2,"esm2020"),so("fire-js","")}h3("");var f3="firebase",d3="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */so(f3,d3,"app");var I2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ao,Lx;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(U,F){function k(){}k.prototype=F.prototype,U.D=F.prototype,U.prototype=new k,U.prototype.constructor=U,U.C=function(et,tt,K){for(var Y=Array(arguments.length-2),Pt=2;Pt<arguments.length;Pt++)Y[Pt-2]=arguments[Pt];return F.prototype[tt].apply(et,Y)}}function n(){this.blockSize=-1}function o(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(o,n),o.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function u(U,F,k){k||(k=0);var et=Array(16);if(typeof F=="string")for(var tt=0;16>tt;++tt)et[tt]=F.charCodeAt(k++)|F.charCodeAt(k++)<<8|F.charCodeAt(k++)<<16|F.charCodeAt(k++)<<24;else for(tt=0;16>tt;++tt)et[tt]=F[k++]|F[k++]<<8|F[k++]<<16|F[k++]<<24;F=U.g[0],k=U.g[1],tt=U.g[2];var K=U.g[3],Y=F+(K^k&(tt^K))+et[0]+3614090360&4294967295;F=k+(Y<<7&4294967295|Y>>>25),Y=K+(tt^F&(k^tt))+et[1]+3905402710&4294967295,K=F+(Y<<12&4294967295|Y>>>20),Y=tt+(k^K&(F^k))+et[2]+606105819&4294967295,tt=K+(Y<<17&4294967295|Y>>>15),Y=k+(F^tt&(K^F))+et[3]+3250441966&4294967295,k=tt+(Y<<22&4294967295|Y>>>10),Y=F+(K^k&(tt^K))+et[4]+4118548399&4294967295,F=k+(Y<<7&4294967295|Y>>>25),Y=K+(tt^F&(k^tt))+et[5]+1200080426&4294967295,K=F+(Y<<12&4294967295|Y>>>20),Y=tt+(k^K&(F^k))+et[6]+2821735955&4294967295,tt=K+(Y<<17&4294967295|Y>>>15),Y=k+(F^tt&(K^F))+et[7]+4249261313&4294967295,k=tt+(Y<<22&4294967295|Y>>>10),Y=F+(K^k&(tt^K))+et[8]+1770035416&4294967295,F=k+(Y<<7&4294967295|Y>>>25),Y=K+(tt^F&(k^tt))+et[9]+2336552879&4294967295,K=F+(Y<<12&4294967295|Y>>>20),Y=tt+(k^K&(F^k))+et[10]+4294925233&4294967295,tt=K+(Y<<17&4294967295|Y>>>15),Y=k+(F^tt&(K^F))+et[11]+2304563134&4294967295,k=tt+(Y<<22&4294967295|Y>>>10),Y=F+(K^k&(tt^K))+et[12]+1804603682&4294967295,F=k+(Y<<7&4294967295|Y>>>25),Y=K+(tt^F&(k^tt))+et[13]+4254626195&4294967295,K=F+(Y<<12&4294967295|Y>>>20),Y=tt+(k^K&(F^k))+et[14]+2792965006&4294967295,tt=K+(Y<<17&4294967295|Y>>>15),Y=k+(F^tt&(K^F))+et[15]+1236535329&4294967295,k=tt+(Y<<22&4294967295|Y>>>10),Y=F+(tt^K&(k^tt))+et[1]+4129170786&4294967295,F=k+(Y<<5&4294967295|Y>>>27),Y=K+(k^tt&(F^k))+et[6]+3225465664&4294967295,K=F+(Y<<9&4294967295|Y>>>23),Y=tt+(F^k&(K^F))+et[11]+643717713&4294967295,tt=K+(Y<<14&4294967295|Y>>>18),Y=k+(K^F&(tt^K))+et[0]+3921069994&4294967295,k=tt+(Y<<20&4294967295|Y>>>12),Y=F+(tt^K&(k^tt))+et[5]+3593408605&4294967295,F=k+(Y<<5&4294967295|Y>>>27),Y=K+(k^tt&(F^k))+et[10]+38016083&4294967295,K=F+(Y<<9&4294967295|Y>>>23),Y=tt+(F^k&(K^F))+et[15]+3634488961&4294967295,tt=K+(Y<<14&4294967295|Y>>>18),Y=k+(K^F&(tt^K))+et[4]+3889429448&4294967295,k=tt+(Y<<20&4294967295|Y>>>12),Y=F+(tt^K&(k^tt))+et[9]+568446438&4294967295,F=k+(Y<<5&4294967295|Y>>>27),Y=K+(k^tt&(F^k))+et[14]+3275163606&4294967295,K=F+(Y<<9&4294967295|Y>>>23),Y=tt+(F^k&(K^F))+et[3]+4107603335&4294967295,tt=K+(Y<<14&4294967295|Y>>>18),Y=k+(K^F&(tt^K))+et[8]+1163531501&4294967295,k=tt+(Y<<20&4294967295|Y>>>12),Y=F+(tt^K&(k^tt))+et[13]+2850285829&4294967295,F=k+(Y<<5&4294967295|Y>>>27),Y=K+(k^tt&(F^k))+et[2]+4243563512&4294967295,K=F+(Y<<9&4294967295|Y>>>23),Y=tt+(F^k&(K^F))+et[7]+1735328473&4294967295,tt=K+(Y<<14&4294967295|Y>>>18),Y=k+(K^F&(tt^K))+et[12]+2368359562&4294967295,k=tt+(Y<<20&4294967295|Y>>>12),Y=F+(k^tt^K)+et[5]+4294588738&4294967295,F=k+(Y<<4&4294967295|Y>>>28),Y=K+(F^k^tt)+et[8]+2272392833&4294967295,K=F+(Y<<11&4294967295|Y>>>21),Y=tt+(K^F^k)+et[11]+1839030562&4294967295,tt=K+(Y<<16&4294967295|Y>>>16),Y=k+(tt^K^F)+et[14]+4259657740&4294967295,k=tt+(Y<<23&4294967295|Y>>>9),Y=F+(k^tt^K)+et[1]+2763975236&4294967295,F=k+(Y<<4&4294967295|Y>>>28),Y=K+(F^k^tt)+et[4]+1272893353&4294967295,K=F+(Y<<11&4294967295|Y>>>21),Y=tt+(K^F^k)+et[7]+4139469664&4294967295,tt=K+(Y<<16&4294967295|Y>>>16),Y=k+(tt^K^F)+et[10]+3200236656&4294967295,k=tt+(Y<<23&4294967295|Y>>>9),Y=F+(k^tt^K)+et[13]+681279174&4294967295,F=k+(Y<<4&4294967295|Y>>>28),Y=K+(F^k^tt)+et[0]+3936430074&4294967295,K=F+(Y<<11&4294967295|Y>>>21),Y=tt+(K^F^k)+et[3]+3572445317&4294967295,tt=K+(Y<<16&4294967295|Y>>>16),Y=k+(tt^K^F)+et[6]+76029189&4294967295,k=tt+(Y<<23&4294967295|Y>>>9),Y=F+(k^tt^K)+et[9]+3654602809&4294967295,F=k+(Y<<4&4294967295|Y>>>28),Y=K+(F^k^tt)+et[12]+3873151461&4294967295,K=F+(Y<<11&4294967295|Y>>>21),Y=tt+(K^F^k)+et[15]+530742520&4294967295,tt=K+(Y<<16&4294967295|Y>>>16),Y=k+(tt^K^F)+et[2]+3299628645&4294967295,k=tt+(Y<<23&4294967295|Y>>>9),Y=F+(tt^(k|~K))+et[0]+4096336452&4294967295,F=k+(Y<<6&4294967295|Y>>>26),Y=K+(k^(F|~tt))+et[7]+1126891415&4294967295,K=F+(Y<<10&4294967295|Y>>>22),Y=tt+(F^(K|~k))+et[14]+2878612391&4294967295,tt=K+(Y<<15&4294967295|Y>>>17),Y=k+(K^(tt|~F))+et[5]+4237533241&4294967295,k=tt+(Y<<21&4294967295|Y>>>11),Y=F+(tt^(k|~K))+et[12]+1700485571&4294967295,F=k+(Y<<6&4294967295|Y>>>26),Y=K+(k^(F|~tt))+et[3]+2399980690&4294967295,K=F+(Y<<10&4294967295|Y>>>22),Y=tt+(F^(K|~k))+et[10]+4293915773&4294967295,tt=K+(Y<<15&4294967295|Y>>>17),Y=k+(K^(tt|~F))+et[1]+2240044497&4294967295,k=tt+(Y<<21&4294967295|Y>>>11),Y=F+(tt^(k|~K))+et[8]+1873313359&4294967295,F=k+(Y<<6&4294967295|Y>>>26),Y=K+(k^(F|~tt))+et[15]+4264355552&4294967295,K=F+(Y<<10&4294967295|Y>>>22),Y=tt+(F^(K|~k))+et[6]+2734768916&4294967295,tt=K+(Y<<15&4294967295|Y>>>17),Y=k+(K^(tt|~F))+et[13]+1309151649&4294967295,k=tt+(Y<<21&4294967295|Y>>>11),Y=F+(tt^(k|~K))+et[4]+4149444226&4294967295,F=k+(Y<<6&4294967295|Y>>>26),Y=K+(k^(F|~tt))+et[11]+3174756917&4294967295,K=F+(Y<<10&4294967295|Y>>>22),Y=tt+(F^(K|~k))+et[2]+718787259&4294967295,tt=K+(Y<<15&4294967295|Y>>>17),Y=k+(K^(tt|~F))+et[9]+3951481745&4294967295,U.g[0]=U.g[0]+F&4294967295,U.g[1]=U.g[1]+(tt+(Y<<21&4294967295|Y>>>11))&4294967295,U.g[2]=U.g[2]+tt&4294967295,U.g[3]=U.g[3]+K&4294967295}o.prototype.u=function(U,F){F===void 0&&(F=U.length);for(var k=F-this.blockSize,et=this.B,tt=this.h,K=0;K<F;){if(tt==0)for(;K<=k;)u(this,U,K),K+=this.blockSize;if(typeof U=="string"){for(;K<F;)if(et[tt++]=U.charCodeAt(K++),tt==this.blockSize){u(this,et),tt=0;break}}else for(;K<F;)if(et[tt++]=U[K++],tt==this.blockSize){u(this,et),tt=0;break}}this.h=tt,this.o+=F},o.prototype.v=function(){var U=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);U[0]=128;for(var F=1;F<U.length-8;++F)U[F]=0;var k=8*this.o;for(F=U.length-8;F<U.length;++F)U[F]=k&255,k/=256;for(this.u(U),U=Array(16),F=k=0;4>F;++F)for(var et=0;32>et;et+=8)U[k++]=this.g[F]>>>et&255;return U};function d(U,F){var k=C;return Object.prototype.hasOwnProperty.call(k,U)?k[U]:k[U]=F(U)}function A(U,F){this.h=F;for(var k=[],et=!0,tt=U.length-1;0<=tt;tt--){var K=U[tt]|0;et&&K==F||(k[tt]=K,et=!1)}this.g=k}var C={};function _(U){return-128<=U&&128>U?d(U,function(F){return new A([F|0],0>F?-1:0)}):new A([U|0],0>U?-1:0)}function x(U){if(isNaN(U)||!isFinite(U))return I;if(0>U)return q(x(-U));for(var F=[],k=1,et=0;U>=k;et++)F[et]=U/k|0,k*=4294967296;return new A(F,0)}function v(U,F){if(U.length==0)throw Error("number format error: empty string");if(F=F||10,2>F||36<F)throw Error("radix out of range: "+F);if(U.charAt(0)=="-")return q(v(U.substring(1),F));if(0<=U.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=x(Math.pow(F,8)),et=I,tt=0;tt<U.length;tt+=8){var K=Math.min(8,U.length-tt),Y=parseInt(U.substring(tt,tt+K),F);8>K?(K=x(Math.pow(F,K)),et=et.j(K).add(x(Y))):(et=et.j(k),et=et.add(x(Y)))}return et}var I=_(0),O=_(1),H=_(16777216);i=A.prototype,i.m=function(){if(J(this))return-q(this).m();for(var U=0,F=1,k=0;k<this.g.length;k++){var et=this.i(k);U+=(0<=et?et:4294967296+et)*F,F*=4294967296}return U},i.toString=function(U){if(U=U||10,2>U||36<U)throw Error("radix out of range: "+U);if(X(this))return"0";if(J(this))return"-"+q(this).toString(U);for(var F=x(Math.pow(U,6)),k=this,et="";;){var tt=_t(k,F).g;k=Q(k,tt.j(F));var K=((0<k.g.length?k.g[0]:k.h)>>>0).toString(U);if(k=tt,X(k))return K+et;for(;6>K.length;)K="0"+K;et=K+et}},i.i=function(U){return 0>U?0:U<this.g.length?this.g[U]:this.h};function X(U){if(U.h!=0)return!1;for(var F=0;F<U.g.length;F++)if(U.g[F]!=0)return!1;return!0}function J(U){return U.h==-1}i.l=function(U){return U=Q(this,U),J(U)?-1:X(U)?0:1};function q(U){for(var F=U.g.length,k=[],et=0;et<F;et++)k[et]=~U.g[et];return new A(k,~U.h).add(O)}i.abs=function(){return J(this)?q(this):this},i.add=function(U){for(var F=Math.max(this.g.length,U.g.length),k=[],et=0,tt=0;tt<=F;tt++){var K=et+(this.i(tt)&65535)+(U.i(tt)&65535),Y=(K>>>16)+(this.i(tt)>>>16)+(U.i(tt)>>>16);et=Y>>>16,K&=65535,Y&=65535,k[tt]=Y<<16|K}return new A(k,k[k.length-1]&-2147483648?-1:0)};function Q(U,F){return U.add(q(F))}i.j=function(U){if(X(this)||X(U))return I;if(J(this))return J(U)?q(this).j(q(U)):q(q(this).j(U));if(J(U))return q(this.j(q(U)));if(0>this.l(H)&&0>U.l(H))return x(this.m()*U.m());for(var F=this.g.length+U.g.length,k=[],et=0;et<2*F;et++)k[et]=0;for(et=0;et<this.g.length;et++)for(var tt=0;tt<U.g.length;tt++){var K=this.i(et)>>>16,Y=this.i(et)&65535,Pt=U.i(tt)>>>16,st=U.i(tt)&65535;k[2*et+2*tt]+=Y*st,ft(k,2*et+2*tt),k[2*et+2*tt+1]+=K*st,ft(k,2*et+2*tt+1),k[2*et+2*tt+1]+=Y*Pt,ft(k,2*et+2*tt+1),k[2*et+2*tt+2]+=K*Pt,ft(k,2*et+2*tt+2)}for(et=0;et<F;et++)k[et]=k[2*et+1]<<16|k[2*et];for(et=F;et<2*F;et++)k[et]=0;return new A(k,0)};function ft(U,F){for(;(U[F]&65535)!=U[F];)U[F+1]+=U[F]>>>16,U[F]&=65535,F++}function nt(U,F){this.g=U,this.h=F}function _t(U,F){if(X(F))throw Error("division by zero");if(X(U))return new nt(I,I);if(J(U))return F=_t(q(U),F),new nt(q(F.g),q(F.h));if(J(F))return F=_t(U,q(F)),new nt(q(F.g),F.h);if(30<U.g.length){if(J(U)||J(F))throw Error("slowDivide_ only works with positive integers.");for(var k=O,et=F;0>=et.l(U);)k=mt(k),et=mt(et);var tt=Tt(k,1),K=Tt(et,1);for(et=Tt(et,2),k=Tt(k,2);!X(et);){var Y=K.add(et);0>=Y.l(U)&&(tt=tt.add(k),K=Y),et=Tt(et,1),k=Tt(k,1)}return F=Q(U,tt.j(F)),new nt(tt,F)}for(tt=I;0<=U.l(F);){for(k=Math.max(1,Math.floor(U.m()/F.m())),et=Math.ceil(Math.log(k)/Math.LN2),et=48>=et?1:Math.pow(2,et-48),K=x(k),Y=K.j(F);J(Y)||0<Y.l(U);)k-=et,K=x(k),Y=K.j(F);X(K)&&(K=O),tt=tt.add(K),U=Q(U,Y)}return new nt(tt,U)}i.A=function(U){return _t(this,U).h},i.and=function(U){for(var F=Math.max(this.g.length,U.g.length),k=[],et=0;et<F;et++)k[et]=this.i(et)&U.i(et);return new A(k,this.h&U.h)},i.or=function(U){for(var F=Math.max(this.g.length,U.g.length),k=[],et=0;et<F;et++)k[et]=this.i(et)|U.i(et);return new A(k,this.h|U.h)},i.xor=function(U){for(var F=Math.max(this.g.length,U.g.length),k=[],et=0;et<F;et++)k[et]=this.i(et)^U.i(et);return new A(k,this.h^U.h)};function mt(U){for(var F=U.g.length+1,k=[],et=0;et<F;et++)k[et]=U.i(et)<<1|U.i(et-1)>>>31;return new A(k,U.h)}function Tt(U,F){var k=F>>5;F%=32;for(var et=U.g.length-k,tt=[],K=0;K<et;K++)tt[K]=0<F?U.i(K+k)>>>F|U.i(K+k+1)<<32-F:U.i(K+k);return new A(tt,U.h)}o.prototype.digest=o.prototype.v,o.prototype.reset=o.prototype.s,o.prototype.update=o.prototype.u,Lx=o,A.prototype.add=A.prototype.add,A.prototype.multiply=A.prototype.j,A.prototype.modulo=A.prototype.A,A.prototype.compare=A.prototype.l,A.prototype.toNumber=A.prototype.m,A.prototype.toString=A.prototype.toString,A.prototype.getBits=A.prototype.i,A.fromNumber=x,A.fromString=v,ao=A}).apply(typeof I2<"u"?I2:typeof self<"u"?self:typeof window<"u"?window:{});var Th=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Bx,qc,Px,Dh,F1,kx,Vx,Ux;(function(){var i,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(y,b,N){return y==Array.prototype||y==Object.prototype||(y[b]=N.value),y};function n(y){y=[typeof globalThis=="object"&&globalThis,y,typeof window=="object"&&window,typeof self=="object"&&self,typeof Th=="object"&&Th];for(var b=0;b<y.length;++b){var N=y[b];if(N&&N.Math==Math)return N}throw Error("Cannot find global object")}var o=n(this);function u(y,b){if(b)t:{var N=o;y=y.split(".");for(var j=0;j<y.length-1;j++){var ct=y[j];if(!(ct in N))break t;N=N[ct]}y=y[y.length-1],j=N[y],b=b(j),b!=j&&b!=null&&t(N,y,{configurable:!0,writable:!0,value:b})}}function d(y,b){y instanceof String&&(y+="");var N=0,j=!1,ct={next:function(){if(!j&&N<y.length){var wt=N++;return{value:b(wt,y[wt]),done:!1}}return j=!0,{done:!0,value:void 0}}};return ct[Symbol.iterator]=function(){return ct},ct}u("Array.prototype.values",function(y){return y||function(){return d(this,function(b,N){return N})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var A=A||{},C=this||self;function _(y){var b=typeof y;return b=b!="object"?b:y?Array.isArray(y)?"array":b:"null",b=="array"||b=="object"&&typeof y.length=="number"}function x(y){var b=typeof y;return b=="object"&&y!=null||b=="function"}function v(y,b,N){return y.call.apply(y.bind,arguments)}function I(y,b,N){if(!y)throw Error();if(2<arguments.length){var j=Array.prototype.slice.call(arguments,2);return function(){var ct=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ct,j),y.apply(b,ct)}}return function(){return y.apply(b,arguments)}}function O(y,b,N){return O=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:I,O.apply(null,arguments)}function H(y,b){var N=Array.prototype.slice.call(arguments,1);return function(){var j=N.slice();return j.push.apply(j,arguments),y.apply(this,j)}}function X(y,b){function N(){}N.prototype=b.prototype,y.aa=b.prototype,y.prototype=new N,y.prototype.constructor=y,y.Qb=function(j,ct,wt){for(var Ut=Array(arguments.length-2),be=2;be<arguments.length;be++)Ut[be-2]=arguments[be];return b.prototype[ct].apply(j,Ut)}}function J(y){const b=y.length;if(0<b){const N=Array(b);for(let j=0;j<b;j++)N[j]=y[j];return N}return[]}function q(y,b){for(let N=1;N<arguments.length;N++){const j=arguments[N];if(_(j)){const ct=y.length||0,wt=j.length||0;y.length=ct+wt;for(let Ut=0;Ut<wt;Ut++)y[ct+Ut]=j[Ut]}else y.push(j)}}class Q{constructor(b,N){this.i=b,this.j=N,this.h=0,this.g=null}get(){let b;return 0<this.h?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function ft(y){return/^[\s\xa0]*$/.test(y)}function nt(){var y=C.navigator;return y&&(y=y.userAgent)?y:""}function _t(y){return _t[" "](y),y}_t[" "]=function(){};var mt=nt().indexOf("Gecko")!=-1&&!(nt().toLowerCase().indexOf("webkit")!=-1&&nt().indexOf("Edge")==-1)&&!(nt().indexOf("Trident")!=-1||nt().indexOf("MSIE")!=-1)&&nt().indexOf("Edge")==-1;function Tt(y,b,N){for(const j in y)b.call(N,y[j],j,y)}function U(y,b){for(const N in y)b.call(void 0,y[N],N,y)}function F(y){const b={};for(const N in y)b[N]=y[N];return b}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function et(y,b){let N,j;for(let ct=1;ct<arguments.length;ct++){j=arguments[ct];for(N in j)y[N]=j[N];for(let wt=0;wt<k.length;wt++)N=k[wt],Object.prototype.hasOwnProperty.call(j,N)&&(y[N]=j[N])}}function tt(y){var b=1;y=y.split(":");const N=[];for(;0<b&&y.length;)N.push(y.shift()),b--;return y.length&&N.push(y.join(":")),N}function K(y){C.setTimeout(()=>{throw y},0)}function Y(){var y=$t;let b=null;return y.g&&(b=y.g,y.g=y.g.next,y.g||(y.h=null),b.next=null),b}class Pt{constructor(){this.h=this.g=null}add(b,N){const j=st.get();j.set(b,N),this.h?this.h.next=j:this.g=j,this.h=j}}var st=new Q(()=>new ut,y=>y.reset());class ut{constructor(){this.next=this.g=this.h=null}set(b,N){this.h=b,this.g=N,this.next=null}reset(){this.next=this.g=this.h=null}}let xt,jt=!1,$t=new Pt,Z=()=>{const y=C.Promise.resolve(void 0);xt=()=>{y.then(It)}};var It=()=>{for(var y;y=Y();){try{y.h.call(y.g)}catch(N){K(N)}var b=st;b.j(y),100>b.h&&(b.h++,y.next=b.g,b.g=y)}jt=!1};function Ot(){this.s=this.s,this.C=this.C}Ot.prototype.s=!1,Ot.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ot.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Mt(y,b){this.type=y,this.g=this.target=b,this.defaultPrevented=!1}Mt.prototype.h=function(){this.defaultPrevented=!0};var Ht=function(){if(!C.addEventListener||!Object.defineProperty)return!1;var y=!1,b=Object.defineProperty({},"passive",{get:function(){y=!0}});try{const N=()=>{};C.addEventListener("test",N,b),C.removeEventListener("test",N,b)}catch{}return y}();function fe(y,b){if(Mt.call(this,y?y.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,y){var N=this.type=y.type,j=y.changedTouches&&y.changedTouches.length?y.changedTouches[0]:null;if(this.target=y.target||y.srcElement,this.g=b,b=y.relatedTarget){if(mt){t:{try{_t(b.nodeName);var ct=!0;break t}catch{}ct=!1}ct||(b=null)}}else N=="mouseover"?b=y.fromElement:N=="mouseout"&&(b=y.toElement);this.relatedTarget=b,j?(this.clientX=j.clientX!==void 0?j.clientX:j.pageX,this.clientY=j.clientY!==void 0?j.clientY:j.pageY,this.screenX=j.screenX||0,this.screenY=j.screenY||0):(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0),this.button=y.button,this.key=y.key||"",this.ctrlKey=y.ctrlKey,this.altKey=y.altKey,this.shiftKey=y.shiftKey,this.metaKey=y.metaKey,this.pointerId=y.pointerId||0,this.pointerType=typeof y.pointerType=="string"?y.pointerType:Bt[y.pointerType]||"",this.state=y.state,this.i=y,y.defaultPrevented&&fe.aa.h.call(this)}}X(fe,Mt);var Bt={2:"touch",3:"pen",4:"mouse"};fe.prototype.h=function(){fe.aa.h.call(this);var y=this.i;y.preventDefault?y.preventDefault():y.returnValue=!1};var jn="closure_listenable_"+(1e6*Math.random()|0),oe=0;function Pr(y,b,N,j,ct){this.listener=y,this.proxy=null,this.src=b,this.type=N,this.capture=!!j,this.ha=ct,this.key=++oe,this.da=this.fa=!1}function ei(y){y.da=!0,y.listener=null,y.proxy=null,y.src=null,y.ha=null}function In(y){this.src=y,this.g={},this.h=0}In.prototype.add=function(y,b,N,j,ct){var wt=y.toString();y=this.g[wt],y||(y=this.g[wt]=[],this.h++);var Ut=Ee(y,b,j,ct);return-1<Ut?(b=y[Ut],N||(b.fa=!1)):(b=new Pr(b,this.src,wt,!!j,ct),b.fa=N,y.push(b)),b};function Vi(y,b){var N=b.type;if(N in y.g){var j=y.g[N],ct=Array.prototype.indexOf.call(j,b,void 0),wt;(wt=0<=ct)&&Array.prototype.splice.call(j,ct,1),wt&&(ei(b),y.g[N].length==0&&(delete y.g[N],y.h--))}}function Ee(y,b,N,j){for(var ct=0;ct<y.length;++ct){var wt=y[ct];if(!wt.da&&wt.listener==b&&wt.capture==!!N&&wt.ha==j)return ct}return-1}var ni="closure_lm_"+(1e6*Math.random()|0),kr={};function As(y,b,N,j,ct){if(Array.isArray(b)){for(var wt=0;wt<b.length;wt++)As(y,b[wt],N,j,ct);return null}return N=_a(N),y&&y[jn]?y.K(b,N,x(j)?!!j.capture:!1,ct):Qe(y,b,N,!1,j,ct)}function Qe(y,b,N,j,ct,wt){if(!b)throw Error("Invalid event type");var Ut=x(ct)?!!ct.capture:!!ct,be=qs(y);if(be||(y[ni]=be=new In(y)),N=be.add(b,N,j,Ut,wt),N.proxy)return N;if(j=We(),N.proxy=j,j.src=y,j.listener=N,y.addEventListener)Ht||(ct=Ut),ct===void 0&&(ct=!1),y.addEventListener(b.toString(),j,ct);else if(y.attachEvent)y.attachEvent(qt(b.toString()),j);else if(y.addListener&&y.removeListener)y.addListener(j);else throw Error("addEventListener and attachEvent are unavailable.");return N}function We(){function y(N){return b.call(y.src,y.listener,N)}const b=wa;return y}function Ae(y,b,N,j,ct){if(Array.isArray(b))for(var wt=0;wt<b.length;wt++)Ae(y,b[wt],N,j,ct);else j=x(j)?!!j.capture:!!j,N=_a(N),y&&y[jn]?(y=y.i,b=String(b).toString(),b in y.g&&(wt=y.g[b],N=Ee(wt,N,j,ct),-1<N&&(ei(wt[N]),Array.prototype.splice.call(wt,N,1),wt.length==0&&(delete y.g[b],y.h--)))):y&&(y=qs(y))&&(b=y.g[b.toString()],y=-1,b&&(y=Ee(b,N,j,ct)),(N=-1<y?b[y]:null)&&is(N))}function is(y){if(typeof y!="number"&&y&&!y.da){var b=y.src;if(b&&b[jn])Vi(b.i,y);else{var N=y.type,j=y.proxy;b.removeEventListener?b.removeEventListener(N,j,y.capture):b.detachEvent?b.detachEvent(qt(N),j):b.addListener&&b.removeListener&&b.removeListener(j),(N=qs(b))?(Vi(N,y),N.h==0&&(N.src=null,b[ni]=null)):ei(y)}}}function qt(y){return y in kr?kr[y]:kr[y]="on"+y}function wa(y,b){if(y.da)y=!0;else{b=new fe(b,this);var N=y.listener,j=y.ha||y.src;y.fa&&is(y),y=N.call(j,b)}return y}function qs(y){return y=y[ni],y instanceof In?y:null}var Kr="__closure_events_fn_"+(1e9*Math.random()>>>0);function _a(y){return typeof y=="function"?y:(y[Kr]||(y[Kr]=function(b){return y.handleEvent(b)}),y[Kr])}function Le(){Ot.call(this),this.i=new In(this),this.M=this,this.F=null}X(Le,Ot),Le.prototype[jn]=!0,Le.prototype.removeEventListener=function(y,b,N,j){Ae(this,y,b,N,j)};function Fe(y,b){var N,j=y.F;if(j)for(N=[];j;j=j.F)N.push(j);if(y=y.M,j=b.type||b,typeof b=="string")b=new Mt(b,y);else if(b instanceof Mt)b.target=b.target||y;else{var ct=b;b=new Mt(j,y),et(b,ct)}if(ct=!0,N)for(var wt=N.length-1;0<=wt;wt--){var Ut=b.g=N[wt];ct=zn(Ut,j,!0,b)&&ct}if(Ut=b.g=y,ct=zn(Ut,j,!0,b)&&ct,ct=zn(Ut,j,!1,b)&&ct,N)for(wt=0;wt<N.length;wt++)Ut=b.g=N[wt],ct=zn(Ut,j,!1,b)&&ct}Le.prototype.N=function(){if(Le.aa.N.call(this),this.i){var y=this.i,b;for(b in y.g){for(var N=y.g[b],j=0;j<N.length;j++)ei(N[j]);delete y.g[b],y.h--}}this.F=null},Le.prototype.K=function(y,b,N,j){return this.i.add(String(y),b,!1,N,j)},Le.prototype.L=function(y,b,N,j){return this.i.add(String(y),b,!0,N,j)};function zn(y,b,N,j){if(b=y.i.g[String(b)],!b)return!0;b=b.concat();for(var ct=!0,wt=0;wt<b.length;++wt){var Ut=b[wt];if(Ut&&!Ut.da&&Ut.capture==N){var be=Ut.listener,Sn=Ut.ha||Ut.src;Ut.fa&&Vi(y.i,Ut),ct=be.call(Sn,j)!==!1&&ct}}return ct&&!j.defaultPrevented}function je(y,b,N){if(typeof y=="function")N&&(y=O(y,N));else if(y&&typeof y.handleEvent=="function")y=O(y.handleEvent,y);else throw Error("Invalid listener argument");return 2147483647<Number(b)?-1:C.setTimeout(y,b||0)}function Ao(y){y.g=je(()=>{y.g=null,y.i&&(y.i=!1,Ao(y))},y.l);const b=y.h;y.h=null,y.m.apply(null,b)}class Ta extends Ot{constructor(b,N){super(),this.m=b,this.l=N,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:Ao(this)}N(){super.N(),this.g&&(C.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ys(y){Ot.call(this),this.h=y,this.g={}}X(Ys,Ot);var sn=[];function Vt(y){Tt(y.g,function(b,N){this.g.hasOwnProperty(N)&&is(b)},y),y.g={}}Ys.prototype.N=function(){Ys.aa.N.call(this),Vt(this)},Ys.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ye=C.JSON.stringify,Be=C.JSON.parse,Ke=class{stringify(y){return C.JSON.stringify(y,void 0)}parse(y){return C.JSON.parse(y,void 0)}};function ss(){}ss.prototype.h=null;function Xs(y){return y.h||(y.h=y.i())}function Ca(){}var ge={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Tr(){Mt.call(this,"d")}X(Tr,Mt);function Sa(){Mt.call(this,"c")}X(Sa,Mt);var yi={},Cr=null;function Ui(){return Cr=Cr||new Le}yi.La="serverreachability";function Vn(y){Mt.call(this,yi.La,y)}X(Vn,Mt);function Zr(y){const b=Ui();Fe(b,new Vn(b))}yi.STAT_EVENT="statevent";function Qs(y,b){Mt.call(this,yi.STAT_EVENT,y),this.stat=b}X(Qs,Mt);function Oe(y){const b=Ui();Fe(b,new Qs(b,y))}yi.Ma="timingevent";function Kn(y,b){Mt.call(this,yi.Ma,y),this.size=b}X(Kn,Mt);function an(y,b){if(typeof y!="function")throw Error("Fn must not be null and must be a function");return C.setTimeout(function(){y()},b)}function Vr(){this.g=!0}Vr.prototype.xa=function(){this.g=!1};function ir(y,b,N,j,ct,wt){y.info(function(){if(y.g)if(wt)for(var Ut="",be=wt.split("&"),Sn=0;Sn<be.length;Sn++){var Ie=be[Sn].split("=");if(1<Ie.length){var gn=Ie[0];Ie=Ie[1];var Ln=gn.split("_");Ut=2<=Ln.length&&Ln[1]=="type"?Ut+(gn+"="+Ie+"&"):Ut+(gn+"=redacted&")}}else Ut=null;else Ut=wt;return"XMLHTTP REQ ("+j+") [attempt "+ct+"]: "+b+`
`+N+`
`+Ut})}function as(y,b,N,j,ct,wt,Ut){y.info(function(){return"XMLHTTP RESP ("+j+") [ attempt "+ct+"]: "+b+`
`+N+`
`+wt+" "+Ut})}function Zn(y,b,N,j){y.info(function(){return"XMLHTTP TEXT ("+b+"): "+ri(y,N)+(j?" "+j:"")})}function zt(y,b){y.info(function(){return"TIMEOUT: "+b})}Vr.prototype.info=function(){};function ri(y,b){if(!y.g)return b;if(!b)return null;try{var N=JSON.parse(b);if(N){for(y=0;y<N.length;y++)if(Array.isArray(N[y])){var j=N[y];if(!(2>j.length)){var ct=j[1];if(Array.isArray(ct)&&!(1>ct.length)){var wt=ct[0];if(wt!="noop"&&wt!="stop"&&wt!="close")for(var Ut=1;Ut<ct.length;Ut++)ct[Ut]=""}}}}return Ye(N)}catch{return b}}var Fi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Rn={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Sr;function Jr(){}X(Jr,ss),Jr.prototype.g=function(){return new XMLHttpRequest},Jr.prototype.i=function(){return{}},Sr=new Jr;function sr(y,b,N,j){this.j=y,this.i=b,this.l=N,this.R=j||1,this.U=new Ys(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ze}function ze(){this.i=null,this.g="",this.h=!1}var wo={},va={};function Hn(y,b,N){y.L=1,y.v=pn(xe(b)),y.m=N,y.P=!0,wn(y,null)}function wn(y,b){y.F=Date.now(),Ur(y),y.A=xe(y.v);var N=y.A,j=y.R;Array.isArray(j)||(j=[String(j)]),Dn(N.i,"t",j),y.C=0,N=y.j.J,y.h=new ze,y.g=rl(y.j,N?b:null,!y.m),0<y.O&&(y.M=new Ta(O(y.Y,y,y.g),y.O)),b=y.U,N=y.g,j=y.ca;var ct="readystatechange";Array.isArray(ct)||(ct&&(sn[0]=ct.toString()),ct=sn);for(var wt=0;wt<ct.length;wt++){var Ut=As(N,ct[wt],j||b.handleEvent,!1,b.h||b);if(!Ut)break;b.g[Ut.key]=Ut}b=y.H?F(y.H):{},y.m?(y.u||(y.u="POST"),b["Content-Type"]="application/x-www-form-urlencoded",y.g.ea(y.A,y.u,y.m,b)):(y.u="GET",y.g.ea(y.A,y.u,null,b)),Zr(),ir(y.i,y.u,y.A,y.l,y.R,y.m)}sr.prototype.ca=function(y){y=y.target;const b=this.M;b&&si(y)==3?b.j():this.Y(y)},sr.prototype.Y=function(y){try{if(y==this.g)t:{const Ln=si(this.g);var b=this.g.Ba();const qn=this.g.Z();if(!(3>Ln)&&(Ln!=3||this.g&&(this.h.h||this.g.oa()||tl(this.g)))){this.J||Ln!=4||b==7||(b==8||0>=qn?Zr(3):Zr(2)),vt(this);var N=this.g.Z();this.X=N;e:if($e(this)){var j=tl(this.g);y="";var ct=j.length,wt=si(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){pe(this),ji(this);var Ut="";break e}this.h.i=new C.TextDecoder}for(b=0;b<ct;b++)this.h.h=!0,y+=this.h.i.decode(j[b],{stream:!(wt&&b==ct-1)});j.length=0,this.h.g+=y,this.C=0,Ut=this.h.g}else Ut=this.g.oa();if(this.o=N==200,as(this.i,this.u,this.A,this.l,this.R,Ln,N),this.o){if(this.T&&!this.K){e:{if(this.g){var be,Sn=this.g;if((be=Sn.g?Sn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ft(be)){var Ie=be;break e}}Ie=null}if(N=Ie)Zn(this.i,this.l,N,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ii(this,N);else{this.o=!1,this.s=3,Oe(12),pe(this),ji(this);break t}}if(this.P){N=!0;let ar;for(;!this.J&&this.C<Ut.length;)if(ar=_o(this,Ut),ar==va){Ln==4&&(this.s=4,Oe(14),N=!1),Zn(this.i,this.l,null,"[Incomplete Response]");break}else if(ar==wo){this.s=4,Oe(15),Zn(this.i,this.l,Ut,"[Invalid Chunk]"),N=!1;break}else Zn(this.i,this.l,ar,null),ii(this,ar);if($e(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ln!=4||Ut.length!=0||this.h.h||(this.s=1,Oe(16),N=!1),this.o=this.o&&N,!N)Zn(this.i,this.l,Ut,"[Invalid Chunked Response]"),pe(this),ji(this);else if(0<Ut.length&&!this.W){this.W=!0;var gn=this.j;gn.g==this&&gn.ba&&!gn.M&&(gn.j.info("Great, no buffering proxy detected. Bytes received: "+Ut.length),us(gn),gn.M=!0,Oe(11))}}else Zn(this.i,this.l,Ut,null),ii(this,Ut);Ln==4&&pe(this),this.o&&!this.J&&(Ln==4?dn(this.j,this):(this.o=!1,Ur(this)))}else He(this.g),N==400&&0<Ut.indexOf("Unknown SID")?(this.s=3,Oe(12)):(this.s=0,Oe(13)),pe(this),ji(this)}}}catch{}finally{}};function $e(y){return y.g?y.u=="GET"&&y.L!=2&&y.j.Ca:!1}function _o(y,b){var N=y.C,j=b.indexOf(`
`,N);return j==-1?va:(N=Number(b.substring(N,j)),isNaN(N)?wo:(j+=1,j+N>b.length?va:(b=b.slice(j,j+N),y.C=j+N,b)))}sr.prototype.cancel=function(){this.J=!0,pe(this)};function Ur(y){y.S=Date.now()+y.I,ba(y,y.I)}function ba(y,b){if(y.B!=null)throw Error("WatchDog timer not null");y.B=an(O(y.ba,y),b)}function vt(y){y.B&&(C.clearTimeout(y.B),y.B=null)}sr.prototype.ba=function(){this.B=null;const y=Date.now();0<=y-this.S?(zt(this.i,this.A),this.L!=2&&(Zr(),Oe(17)),pe(this),this.s=2,ji(this)):ba(this,this.S-y)};function ji(y){y.j.G==0||y.J||dn(y.j,y)}function pe(y){vt(y);var b=y.M;b&&typeof b.ma=="function"&&b.ma(),y.M=null,Vt(y.U),y.g&&(b=y.g,y.g=null,b.abort(),b.ma())}function ii(y,b){try{var N=y.j;if(N.G!=0&&(N.g==y||Ws(N.h,y))){if(!y.K&&Ws(N.h,y)&&N.G==3){try{var j=N.Da.g.parse(b)}catch{j=null}if(Array.isArray(j)&&j.length==3){var ct=j;if(ct[0]==0){t:if(!N.u){if(N.g)if(N.g.F+3e3<y.F)Ss(N),Da(N);else break t;To(N),Oe(18)}}else N.za=ct[1],0<N.za-N.T&&37500>ct[2]&&N.F&&N.v==0&&!N.C&&(N.C=an(O(N.Za,N),6e3));if(1>=de(N.h)&&N.ca){try{N.ca()}catch{}N.ca=void 0}}else br(N,11)}else if((y.K||N.g==y)&&Ss(N),!ft(b))for(ct=N.Da.g.parse(b),b=0;b<ct.length;b++){let Ie=ct[b];if(N.T=Ie[0],Ie=Ie[1],N.G==2)if(Ie[0]=="c"){N.K=Ie[1],N.ia=Ie[2];const gn=Ie[3];gn!=null&&(N.la=gn,N.j.info("VER="+N.la));const Ln=Ie[4];Ln!=null&&(N.Aa=Ln,N.j.info("SVER="+N.Aa));const qn=Ie[5];qn!=null&&typeof qn=="number"&&0<qn&&(j=1.5*qn,N.L=j,N.j.info("backChannelRequestTimeoutMs_="+j)),j=N;const ar=y.g;if(ar){const $n=ar.g?ar.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($n){var wt=j.h;wt.g||$n.indexOf("spdy")==-1&&$n.indexOf("quic")==-1&&$n.indexOf("h2")==-1||(wt.j=wt.l,wt.g=new Set,wt.h&&(ws(wt,wt.h),wt.h=null))}if(j.D){const Co=ar.g?ar.g.getResponseHeader("X-HTTP-Session-Id"):null;Co&&(j.ya=Co,Ft(j.I,j.D,Co))}}N.G=3,N.l&&N.l.ua(),N.ba&&(N.R=Date.now()-y.F,N.j.info("Handshake RTT: "+N.R+"ms")),j=N;var Ut=y;if(j.qa=Jt(j,j.J?j.ia:null,j.W),Ut.K){fr(j.h,Ut);var be=Ut,Sn=j.L;Sn&&(be.I=Sn),be.B&&(vt(be),Ur(be)),j.g=Ut}else nl(j);0<N.i.length&&ae(N)}else Ie[0]!="stop"&&Ie[0]!="close"||br(N,7);else N.G==3&&(Ie[0]=="stop"||Ie[0]=="close"?Ie[0]=="stop"?br(N,7):ai(N):Ie[0]!="noop"&&N.l&&N.l.ta(Ie),N.v=0)}}Zr(4)}catch{}}var Jo=class{constructor(y,b){this.g=y,this.map=b}};function ye(y){this.l=y||10,C.PerformanceNavigationTiming?(y=C.performance.getEntriesByType("navigation"),y=0<y.length&&(y[0].nextHopProtocol=="hq"||y[0].nextHopProtocol=="h2")):y=!!(C.chrome&&C.chrome.loadTimes&&C.chrome.loadTimes()&&C.chrome.loadTimes().wasFetchedViaSpdy),this.j=y?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function _e(y){return y.h?!0:y.g?y.g.size>=y.j:!1}function de(y){return y.h?1:y.g?y.g.size:0}function Ws(y,b){return y.h?y.h==b:y.g?y.g.has(b):!1}function ws(y,b){y.g?y.g.add(b):y.h=b}function fr(y,b){y.h&&y.h==b?y.h=null:y.g&&y.g.has(b)&&y.g.delete(b)}ye.prototype.cancel=function(){if(this.i=_n(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const y of this.g.values())y.cancel();this.g.clear()}};function _n(y){if(y.h!=null)return y.i.concat(y.h.D);if(y.g!=null&&y.g.size!==0){let b=y.i;for(const N of y.g.values())b=b.concat(N.D);return b}return J(y.i)}function zi(y){if(y.V&&typeof y.V=="function")return y.V();if(typeof Map<"u"&&y instanceof Map||typeof Set<"u"&&y instanceof Set)return Array.from(y.values());if(typeof y=="string")return y.split("");if(_(y)){for(var b=[],N=y.length,j=0;j<N;j++)b.push(y[j]);return b}b=[],N=0;for(j in y)b[N++]=y[j];return b}function Ia(y){if(y.na&&typeof y.na=="function")return y.na();if(!y.V||typeof y.V!="function"){if(typeof Map<"u"&&y instanceof Map)return Array.from(y.keys());if(!(typeof Set<"u"&&y instanceof Set)){if(_(y)||typeof y=="string"){var b=[];y=y.length;for(var N=0;N<y;N++)b.push(N);return b}b=[],N=0;for(const j in y)b[N++]=j;return b}}}function un(y,b){if(y.forEach&&typeof y.forEach=="function")y.forEach(b,void 0);else if(_(y)||typeof y=="string")Array.prototype.forEach.call(y,b,void 0);else for(var N=Ia(y),j=zi(y),ct=j.length,wt=0;wt<ct;wt++)b.call(void 0,j[wt],N&&N[wt],y)}var Fr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function nc(y,b){if(y){y=y.split("&");for(var N=0;N<y.length;N++){var j=y[N].indexOf("="),ct=null;if(0<=j){var wt=y[N].substring(0,j);ct=y[N].substring(j+1)}else wt=y[N];b(wt,ct?decodeURIComponent(ct.replace(/\+/g," ")):"")}}}function hn(y){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,y instanceof hn){this.h=y.h,Nn(this,y.j),this.o=y.o,this.g=y.g,lt(this,y.s),this.l=y.l;var b=y.i,N=new xi;N.i=b.i,b.g&&(N.g=new Map(b.g),N.h=b.h),z(this,N),this.m=y.m}else y&&(b=String(y).match(Fr))?(this.h=!1,Nn(this,b[1]||"",!0),this.o=Tn(b[2]||""),this.g=Tn(b[3]||"",!0),lt(this,b[4]),this.l=Tn(b[5]||"",!0),z(this,b[6]||"",!0),this.m=Tn(b[7]||"")):(this.h=!1,this.i=new xi(null,this.h))}hn.prototype.toString=function(){var y=[],b=this.j;b&&y.push(Ks(b,xr,!0),":");var N=this.g;return(N||b=="file")&&(y.push("//"),(b=this.o)&&y.push(Ks(b,xr,!0),"@"),y.push(encodeURIComponent(String(N)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),N=this.s,N!=null&&y.push(":",String(N))),(N=this.l)&&(this.g&&N.charAt(0)!="/"&&y.push("/"),y.push(Ks(N,N.charAt(0)=="/"?fn:Wt,!0))),(N=this.i.toString())&&y.push("?",N),(N=this.m)&&y.push("#",Ks(N,Na)),y.join("")};function xe(y){return new hn(y)}function Nn(y,b,N){y.j=N?Tn(b,!0):b,y.j&&(y.j=y.j.replace(/:$/,""))}function lt(y,b){if(b){if(b=Number(b),isNaN(b)||0>b)throw Error("Bad port number "+b);y.s=b}else y.s=null}function z(y,b,N){b instanceof xi?(y.i=b,Ai(y.i,y.h)):(N||(b=Ks(b,$o)),y.i=new xi(b,y.h))}function Ft(y,b,N){y.i.set(b,N)}function pn(y){return Ft(y,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),y}function Tn(y,b){return y?b?decodeURI(y.replace(/%25/g,"%2525")):decodeURIComponent(y):""}function Ks(y,b,N){return typeof y=="string"?(y=encodeURI(y).replace(b,Ra),N&&(y=y.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y):null}function Ra(y){return y=y.charCodeAt(0),"%"+(y>>4&15).toString(16)+(y&15).toString(16)}var xr=/[#\/\?@]/g,Wt=/[#\?:]/g,fn=/[#\?]/g,$o=/[#\?@]/g,Na=/#/g;function xi(y,b){this.h=this.g=null,this.i=y||null,this.j=!!b}function vr(y){y.g||(y.g=new Map,y.h=0,y.i&&nc(y.i,function(b,N){y.add(decodeURIComponent(b.replace(/\+/g," ")),N)}))}i=xi.prototype,i.add=function(y,b){vr(this),this.i=null,y=jr(this,y);var N=this.g.get(y);return N||this.g.set(y,N=[]),N.push(b),this.h+=1,this};function Ei(y,b){vr(y),b=jr(y,b),y.g.has(b)&&(y.i=null,y.h-=y.g.get(b).length,y.g.delete(b))}function os(y,b){return vr(y),b=jr(y,b),y.g.has(b)}i.forEach=function(y,b){vr(this),this.g.forEach(function(N,j){N.forEach(function(ct){y.call(b,ct,j,this)},this)},this)},i.na=function(){vr(this);const y=Array.from(this.g.values()),b=Array.from(this.g.keys()),N=[];for(let j=0;j<b.length;j++){const ct=y[j];for(let wt=0;wt<ct.length;wt++)N.push(b[j])}return N},i.V=function(y){vr(this);let b=[];if(typeof y=="string")os(this,y)&&(b=b.concat(this.g.get(jr(this,y))));else{y=Array.from(this.g.values());for(let N=0;N<y.length;N++)b=b.concat(y[N])}return b},i.set=function(y,b){return vr(this),this.i=null,y=jr(this,y),os(this,y)&&(this.h-=this.g.get(y).length),this.g.set(y,[b]),this.h+=1,this},i.get=function(y,b){return y?(y=this.V(y),0<y.length?String(y[0]):b):b};function Dn(y,b,N){Ei(y,b),0<N.length&&(y.i=null,y.g.set(jr(y,b),J(N)),y.h+=N.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const y=[],b=Array.from(this.g.keys());for(var N=0;N<b.length;N++){var j=b[N];const wt=encodeURIComponent(String(j)),Ut=this.V(j);for(j=0;j<Ut.length;j++){var ct=wt;Ut[j]!==""&&(ct+="="+encodeURIComponent(String(Ut[j]))),y.push(ct)}}return this.i=y.join("&")};function jr(y,b){return b=String(b),y.j&&(b=b.toLowerCase()),b}function Ai(y,b){b&&!y.j&&(vr(y),y.i=null,y.g.forEach(function(N,j){var ct=j.toLowerCase();j!=ct&&(Ei(this,j),Dn(this,ct,N))},y)),y.j=b}function Kt(y,b){const N=new Vr;if(C.Image){const j=new Image;j.onload=H(ee,N,"TestLoadImage: loaded",!0,b,j),j.onerror=H(ee,N,"TestLoadImage: error",!1,b,j),j.onabort=H(ee,N,"TestLoadImage: abort",!1,b,j),j.ontimeout=H(ee,N,"TestLoadImage: timeout",!1,b,j),C.setTimeout(function(){j.ontimeout&&j.ontimeout()},1e4),j.src=y}else b(!1)}function wi(y,b){const N=new Vr,j=new AbortController,ct=setTimeout(()=>{j.abort(),ee(N,"TestPingServer: timeout",!1,b)},1e4);fetch(y,{signal:j.signal}).then(wt=>{clearTimeout(ct),wt.ok?ee(N,"TestPingServer: ok",!0,b):ee(N,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(ct),ee(N,"TestPingServer: error",!1,b)})}function ee(y,b,N,j,ct){try{ct&&(ct.onload=null,ct.onerror=null,ct.onabort=null,ct.ontimeout=null),j(N)}catch{}}function Cn(){this.g=new Ke}function Hi(y,b,N){const j=N||"";try{un(y,function(ct,wt){let Ut=ct;x(ct)&&(Ut=Ye(ct)),b.push(j+wt+"="+encodeURIComponent(Ut))})}catch(ct){throw b.push(j+"type="+encodeURIComponent("_badmap")),ct}}function Gi(y){this.l=y.Ub||null,this.j=y.eb||!1}X(Gi,ss),Gi.prototype.g=function(){return new qi(this.l,this.j)},Gi.prototype.i=function(y){return function(){return y}}({});function qi(y,b){Le.call(this),this.D=y,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}X(qi,Le),i=qi.prototype,i.open=function(y,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=y,this.A=b,this.readyState=1,zr(this)},i.send=function(y){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const b={headers:this.u,method:this.B,credentials:this.m,cache:void 0};y&&(b.body=y),(this.D||C).fetch(new Request(this.A,b)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Yi(this)),this.readyState=0},i.Sa=function(y){if(this.g&&(this.l=y,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=y.headers,this.readyState=2,zr(this)),this.g&&(this.readyState=3,zr(this),this.g)))if(this.responseType==="arraybuffer")y.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof C.ReadableStream<"u"&&"body"in y){if(this.j=y.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;_i(this)}else y.text().then(this.Ra.bind(this),this.ga.bind(this))};function _i(y){y.j.read().then(y.Pa.bind(y)).catch(y.ga.bind(y))}i.Pa=function(y){if(this.g){if(this.o&&y.value)this.response.push(y.value);else if(!this.o){var b=y.value?y.value:new Uint8Array(0);(b=this.v.decode(b,{stream:!y.done}))&&(this.response=this.responseText+=b)}y.done?Yi(this):zr(this),this.readyState==3&&_i(this)}},i.Ra=function(y){this.g&&(this.response=this.responseText=y,Yi(this))},i.Qa=function(y){this.g&&(this.response=y,Yi(this))},i.ga=function(){this.g&&Yi(this)};function Yi(y){y.readyState=4,y.l=null,y.j=null,y.v=null,zr(y)}i.setRequestHeader=function(y,b){this.u.append(y,b)},i.getResponseHeader=function(y){return this.h&&this.h.get(y.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const y=[],b=this.h.entries();for(var N=b.next();!N.done;)N=N.value,y.push(N[0]+": "+N[1]),N=b.next();return y.join(`\r
`)};function zr(y){y.onreadystatechange&&y.onreadystatechange.call(y)}Object.defineProperty(qi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(y){this.m=y?"include":"same-origin"}});function ls(y){let b="";return Tt(y,function(N,j){b+=j,b+=":",b+=N,b+=`\r
`}),b}function Mn(y,b,N){t:{for(j in N){var j=!1;break t}j=!0}j||(N=ls(N),typeof y=="string"?N!=null&&encodeURIComponent(String(N)):Ft(y,b,N))}function Ue(y){Le.call(this),this.headers=new Map,this.o=y||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}X(Ue,Le);var Xi=/^https?$/i,Ti=["POST","PUT"];i=Ue.prototype,i.Ha=function(y){this.J=y},i.ea=function(y,b,N,j){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+y);b=b?b.toUpperCase():"GET",this.D=y,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Sr.g(),this.v=this.o?Xs(this.o):Xs(Sr),this.g.onreadystatechange=O(this.Ea,this);try{this.B=!0,this.g.open(b,String(y),!0),this.B=!1}catch(wt){dr(this,wt);return}if(y=N||"",N=new Map(this.headers),j)if(Object.getPrototypeOf(j)===Object.prototype)for(var ct in j)N.set(ct,j[ct]);else if(typeof j.keys=="function"&&typeof j.get=="function")for(const wt of j.keys())N.set(wt,j.get(wt));else throw Error("Unknown input type for opt_headers: "+String(j));j=Array.from(N.keys()).find(wt=>wt.toLowerCase()=="content-type"),ct=C.FormData&&y instanceof C.FormData,!(0<=Array.prototype.indexOf.call(Ti,b,void 0))||j||ct||N.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[wt,Ut]of N)this.g.setRequestHeader(wt,Ut);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{$s(this),this.u=!0,this.g.send(y),this.u=!1}catch(wt){dr(this,wt)}};function dr(y,b){y.h=!1,y.g&&(y.j=!0,y.g.abort(),y.j=!1),y.l=b,y.m=5,Zs(y),Ci(y)}function Zs(y){y.A||(y.A=!0,Fe(y,"complete"),Fe(y,"error"))}i.abort=function(y){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=y||7,Fe(this,"complete"),Fe(this,"abort"),Ci(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ci(this,!0)),Ue.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?Js(this):this.bb())},i.bb=function(){Js(this)};function Js(y){if(y.h&&typeof A<"u"&&(!y.v[1]||si(y)!=4||y.Z()!=2)){if(y.u&&si(y)==4)je(y.Ea,0,y);else if(Fe(y,"readystatechange"),si(y)==4){y.h=!1;try{const Ut=y.Z();t:switch(Ut){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break t;default:b=!1}var N;if(!(N=b)){var j;if(j=Ut===0){var ct=String(y.D).match(Fr)[1]||null;!ct&&C.self&&C.self.location&&(ct=C.self.location.protocol.slice(0,-1)),j=!Xi.test(ct?ct.toLowerCase():"")}N=j}if(N)Fe(y,"complete"),Fe(y,"success");else{y.m=6;try{var wt=2<si(y)?y.g.statusText:""}catch{wt=""}y.l=wt+" ["+y.Z()+"]",Zs(y)}}finally{Ci(y)}}}}function Ci(y,b){if(y.g){$s(y);const N=y.g,j=y.v[0]?()=>{}:null;y.g=null,y.v=null,b||Fe(y,"ready");try{N.onreadystatechange=j}catch{}}}function $s(y){y.I&&(C.clearTimeout(y.I),y.I=null)}i.isActive=function(){return!!this.g};function si(y){return y.g?y.g.readyState:0}i.Z=function(){try{return 2<si(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(y){if(this.g){var b=this.g.responseText;return y&&b.indexOf(y)==0&&(b=b.substring(y.length)),Be(b)}};function tl(y){try{if(!y.g)return null;if("response"in y.g)return y.g.response;switch(y.H){case"":case"text":return y.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in y.g)return y.g.mozResponseArrayBuffer}return null}catch{return null}}function He(y){const b={};y=(y.g&&2<=si(y)&&y.g.getAllResponseHeaders()||"").split(`\r
`);for(let j=0;j<y.length;j++){if(ft(y[j]))continue;var N=tt(y[j]);const ct=N[0];if(N=N[1],typeof N!="string")continue;N=N.trim();const wt=b[ct]||[];b[ct]=wt,wt.push(N)}U(b,function(j){return j.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function _s(y,b,N){return N&&N.internalChannelParams&&N.internalChannelParams[y]||b}function cs(y){this.Aa=0,this.i=[],this.j=new Vr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=_s("failFast",!1,y),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=_s("baseRetryDelayMs",5e3,y),this.cb=_s("retryDelaySeedMs",1e4,y),this.Wa=_s("forwardChannelMaxRetries",2,y),this.wa=_s("forwardChannelRequestTimeoutMs",2e4,y),this.pa=y&&y.xmlHttpFactory||void 0,this.Xa=y&&y.Tb||void 0,this.Ca=y&&y.useFetchStreams||!1,this.L=void 0,this.J=y&&y.supportsCrossDomainXhr||!1,this.K="",this.h=new ye(y&&y.concurrentRequestLimit),this.Da=new Cn,this.P=y&&y.fastHandshake||!1,this.O=y&&y.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=y&&y.Rb||!1,y&&y.xa&&this.j.xa(),y&&y.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&y&&y.detectBufferingProxy||!1,this.ja=void 0,y&&y.longPollingTimeout&&0<y.longPollingTimeout&&(this.ja=y.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=cs.prototype,i.la=8,i.G=1,i.connect=function(y,b,N,j){Oe(0),this.W=y,this.H=b||{},N&&j!==void 0&&(this.H.OSID=N,this.H.OAID=j),this.F=this.X,this.I=Jt(this,null,this.W),ae(this)};function ai(y){if(Et(y),y.G==3){var b=y.U++,N=xe(y.I);if(Ft(N,"SID",y.K),Ft(N,"RID",b),Ft(N,"TYPE","terminate"),Cs(y,N),b=new sr(y,y.j,b),b.L=2,b.v=pn(xe(N)),N=!1,C.navigator&&C.navigator.sendBeacon)try{N=C.navigator.sendBeacon(b.v.toString(),"")}catch{}!N&&C.Image&&(new Image().src=b.v,N=!0),N||(b.g=rl(b.j,null),b.g.ea(b.v)),b.F=Date.now(),Ur(b)}Ge(y)}function Da(y){y.g&&(us(y),y.g.cancel(),y.g=null)}function Et(y){Da(y),y.u&&(C.clearTimeout(y.u),y.u=null),Ss(y),y.h.cancel(),y.s&&(typeof y.s=="number"&&C.clearTimeout(y.s),y.s=null)}function ae(y){if(!_e(y.h)&&!y.s){y.s=!0;var b=y.Ga;xt||Z(),jt||(xt(),jt=!0),$t.add(b,y),y.B=0}}function Jn(y,b){return de(y.h)>=y.h.j-(y.s?1:0)?!1:y.s?(y.i=b.D.concat(y.i),!0):y.G==1||y.G==2||y.B>=(y.Va?0:y.Wa)?!1:(y.s=an(O(y.Ga,y,b),vs(y,y.B)),y.B++,!0)}i.Ga=function(y){if(this.s)if(this.s=null,this.G==1){if(!y){this.U=Math.floor(1e5*Math.random()),y=this.U++;const ct=new sr(this,this.j,y);let wt=this.o;if(this.S&&(wt?(wt=F(wt),et(wt,this.S)):wt=this.S),this.m!==null||this.O||(ct.H=wt,wt=null),this.P)t:{for(var b=0,N=0;N<this.i.length;N++){e:{var j=this.i[N];if("__data__"in j.map&&(j=j.map.__data__,typeof j=="string")){j=j.length;break e}j=void 0}if(j===void 0)break;if(b+=j,4096<b){b=N;break t}if(b===4096||N===this.i.length-1){b=N+1;break t}}b=1e3}else b=1e3;b=el(this,ct,b),N=xe(this.I),Ft(N,"RID",y),Ft(N,"CVER",22),this.D&&Ft(N,"X-HTTP-Session-Id",this.D),Cs(this,N),wt&&(this.O?b="headers="+encodeURIComponent(String(ls(wt)))+"&"+b:this.m&&Mn(N,this.m,wt)),ws(this.h,ct),this.Ua&&Ft(N,"TYPE","init"),this.P?(Ft(N,"$req",b),Ft(N,"SID","null"),ct.T=!0,Hn(ct,N,null)):Hn(ct,N,b),this.G=2}}else this.G==3&&(y?Ts(this,y):this.i.length==0||_e(this.h)||Ts(this))};function Ts(y,b){var N;b?N=b.l:N=y.U++;const j=xe(y.I);Ft(j,"SID",y.K),Ft(j,"RID",N),Ft(j,"AID",y.T),Cs(y,j),y.m&&y.o&&Mn(j,y.m,y.o),N=new sr(y,y.j,N,y.B+1),y.m===null&&(N.H=y.o),b&&(y.i=b.D.concat(y.i)),b=el(y,N,1e3),N.I=Math.round(.5*y.wa)+Math.round(.5*y.wa*Math.random()),ws(y.h,N),Hn(N,j,b)}function Cs(y,b){y.H&&Tt(y.H,function(N,j){Ft(b,j,N)}),y.l&&un({},function(N,j){Ft(b,j,N)})}function el(y,b,N){N=Math.min(y.i.length,N);var j=y.l?O(y.l.Na,y.l,y):null;t:{var ct=y.i;let wt=-1;for(;;){const Ut=["count="+N];wt==-1?0<N?(wt=ct[0].g,Ut.push("ofs="+wt)):wt=0:Ut.push("ofs="+wt);let be=!0;for(let Sn=0;Sn<N;Sn++){let Ie=ct[Sn].g;const gn=ct[Sn].map;if(Ie-=wt,0>Ie)wt=Math.max(0,ct[Sn].g-100),be=!1;else try{Hi(gn,Ut,"req"+Ie+"_")}catch{j&&j(gn)}}if(be){j=Ut.join("&");break t}}}return y=y.i.splice(0,N),b.D=y,j}function nl(y){if(!y.g&&!y.u){y.Y=1;var b=y.Fa;xt||Z(),jt||(xt(),jt=!0),$t.add(b,y),y.v=0}}function To(y){return y.g||y.u||3<=y.v?!1:(y.Y++,y.u=an(O(y.Fa,y),vs(y,y.v)),y.v++,!0)}i.Fa=function(){if(this.u=null,On(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var y=2*this.R;this.j.info("BP detection timer enabled: "+y),this.A=an(O(this.ab,this),y)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Oe(10),Da(this),On(this))};function us(y){y.A!=null&&(C.clearTimeout(y.A),y.A=null)}function On(y){y.g=new sr(y,y.j,"rpc",y.Y),y.m===null&&(y.g.H=y.o),y.g.O=0;var b=xe(y.qa);Ft(b,"RID","rpc"),Ft(b,"SID",y.K),Ft(b,"AID",y.T),Ft(b,"CI",y.F?"0":"1"),!y.F&&y.ja&&Ft(b,"TO",y.ja),Ft(b,"TYPE","xmlhttp"),Cs(y,b),y.m&&y.o&&Mn(b,y.m,y.o),y.L&&(y.g.I=y.L);var N=y.g;y=y.ia,N.L=1,N.v=pn(xe(b)),N.m=null,N.P=!0,wn(N,y)}i.Za=function(){this.C!=null&&(this.C=null,Da(this),To(this),Oe(19))};function Ss(y){y.C!=null&&(C.clearTimeout(y.C),y.C=null)}function dn(y,b){var N=null;if(y.g==b){Ss(y),us(y),y.g=null;var j=2}else if(Ws(y.h,b))N=b.D,fr(y.h,b),j=1;else return;if(y.G!=0){if(b.o)if(j==1){N=b.m?b.m.length:0,b=Date.now()-b.F;var ct=y.B;j=Ui(),Fe(j,new Kn(j,N)),ae(y)}else nl(y);else if(ct=b.s,ct==3||ct==0&&0<b.X||!(j==1&&Jn(y,b)||j==2&&To(y)))switch(N&&0<N.length&&(b=y.h,b.i=b.i.concat(N)),ct){case 1:br(y,5);break;case 4:br(y,10);break;case 3:br(y,6);break;default:br(y,2)}}}function vs(y,b){let N=y.Ta+Math.floor(Math.random()*y.cb);return y.isActive()||(N*=2),N*b}function br(y,b){if(y.j.info("Error code "+b),b==2){var N=O(y.fb,y),j=y.Xa;const ct=!j;j=new hn(j||"//www.google.com/images/cleardot.gif"),C.location&&C.location.protocol=="http"||Nn(j,"https"),pn(j),ct?Kt(j.toString(),N):wi(j.toString(),N)}else Oe(2);y.G=0,y.l&&y.l.sa(b),Ge(y),Et(y)}i.fb=function(y){y?(this.j.info("Successfully pinged google.com"),Oe(2)):(this.j.info("Failed to ping google.com"),Oe(1))};function Ge(y){if(y.G=0,y.ka=[],y.l){const b=_n(y.h);(b.length!=0||y.i.length!=0)&&(q(y.ka,b),q(y.ka,y.i),y.h.i.length=0,J(y.i),y.i.length=0),y.l.ra()}}function Jt(y,b,N){var j=N instanceof hn?xe(N):new hn(N);if(j.g!="")b&&(j.g=b+"."+j.g),lt(j,j.s);else{var ct=C.location;j=ct.protocol,b=b?b+"."+ct.hostname:ct.hostname,ct=+ct.port;var wt=new hn(null);j&&Nn(wt,j),b&&(wt.g=b),ct&&lt(wt,ct),N&&(wt.l=N),j=wt}return N=y.D,b=y.ya,N&&b&&Ft(j,N,b),Ft(j,"VER",y.la),Cs(y,j),j}function rl(y,b,N){if(b&&!y.J)throw Error("Can't create secondary domain capable XhrIo object.");return b=y.Ca&&!y.pa?new Ue(new Gi({eb:N})):new Ue(y.pa),b.Ha(y.J),b}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ze(){}i=Ze.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function oi(){}oi.prototype.g=function(y,b){return new Gn(y,b)};function Gn(y,b){Le.call(this),this.g=new cs(b),this.l=y,this.h=b&&b.messageUrlParams||null,y=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(y?y["X-Client-Protocol"]="webchannel":y={"X-Client-Protocol":"webchannel"}),this.g.o=y,y=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(y?y["X-WebChannel-Content-Type"]=b.messageContentType:y={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.va&&(y?y["X-WebChannel-Client-Profile"]=b.va:y={"X-WebChannel-Client-Profile":b.va}),this.g.S=y,(y=b&&b.Sb)&&!ft(y)&&(this.g.m=y),this.v=b&&b.supportsCrossDomainXhr||!1,this.u=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!ft(b)&&(this.g.D=b,y=this.h,y!==null&&b in y&&(y=this.h,b in y&&delete y[b])),this.j=new li(this)}X(Gn,Le),Gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Gn.prototype.close=function(){ai(this.g)},Gn.prototype.o=function(y){var b=this.g;if(typeof y=="string"){var N={};N.__data__=y,y=N}else this.u&&(N={},N.__data__=Ye(y),y=N);b.i.push(new Jo(b.Ya++,y)),b.G==3&&ae(b)},Gn.prototype.N=function(){this.g.l=null,delete this.j,ai(this.g),delete this.g,Gn.aa.N.call(this)};function il(y){Tr.call(this),y.__headers__&&(this.headers=y.__headers__,this.statusCode=y.__status__,delete y.__headers__,delete y.__status__);var b=y.__sm__;if(b){t:{for(const N in b){y=N;break t}y=void 0}(this.i=y)&&(y=this.i,b=b!==null&&y in b?b[y]:void 0),this.data=b}else this.data=y}X(il,Tr);function $r(){Sa.call(this),this.status=1}X($r,Sa);function li(y){this.g=y}X(li,Ze),li.prototype.ua=function(){Fe(this.g,"a")},li.prototype.ta=function(y){Fe(this.g,new il(y))},li.prototype.sa=function(y){Fe(this.g,new $r)},li.prototype.ra=function(){Fe(this.g,"b")},oi.prototype.createWebChannel=oi.prototype.g,Gn.prototype.send=Gn.prototype.o,Gn.prototype.open=Gn.prototype.m,Gn.prototype.close=Gn.prototype.close,Ux=function(){return new oi},Vx=function(){return Ui()},kx=yi,F1={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Fi.NO_ERROR=0,Fi.TIMEOUT=8,Fi.HTTP_ERROR=6,Dh=Fi,Rn.COMPLETE="complete",Px=Rn,Ca.EventType=ge,ge.OPEN="a",ge.CLOSE="b",ge.ERROR="c",ge.MESSAGE="d",Le.prototype.listen=Le.prototype.K,qc=Ca,Ue.prototype.listenOnce=Ue.prototype.L,Ue.prototype.getLastError=Ue.prototype.Ka,Ue.prototype.getLastErrorCode=Ue.prototype.Ba,Ue.prototype.getStatus=Ue.prototype.Z,Ue.prototype.getResponseJson=Ue.prototype.Oa,Ue.prototype.getResponseText=Ue.prototype.oa,Ue.prototype.send=Ue.prototype.ea,Ue.prototype.setWithCredentials=Ue.prototype.Ha,Bx=Ue}).apply(typeof Th<"u"?Th:typeof self<"u"?self:typeof window<"u"?window:{});const R2="@firebase/firestore",N2="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Qr.UNAUTHENTICATED=new Qr(null),Qr.GOOGLE_CREDENTIALS=new Qr("google-credentials-uid"),Qr.FIRST_PARTY=new Qr("first-party-uid"),Qr.MOCK_USER=new Qr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jl="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ho=new Sx("@firebase/firestore");function Ol(){return Ho.logLevel}function Yt(i,...t){if(Ho.logLevel<=Ve.DEBUG){const n=t.map(E0);Ho.debug(`Firestore (${Jl}): ${i}`,...n)}}function Ea(i,...t){if(Ho.logLevel<=Ve.ERROR){const n=t.map(E0);Ho.error(`Firestore (${Jl}): ${i}`,...n)}}function Hl(i,...t){if(Ho.logLevel<=Ve.WARN){const n=t.map(E0);Ho.warn(`Firestore (${Jl}): ${i}`,...n)}}function E0(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ie(i,t,n){let o="Unexpected state";typeof t=="string"?o=t:n=t,Fx(i,o,n)}function Fx(i,t,n){let o=`FIRESTORE (${Jl}) INTERNAL ASSERTION FAILED: ${t} (ID: ${i.toString(16)})`;if(n!==void 0)try{o+=" CONTEXT: "+JSON.stringify(n)}catch{o+=" CONTEXT: "+n}throw Ea(o),new Error(o)}function Je(i,t,n,o){let u="Unexpected state";typeof n=="string"?u=n:o=n,i||Fx(t,u,o)}function he(i,t){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Gt extends Qo{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class g3{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(Qr.UNAUTHENTICATED))}shutdown(){}}class m3{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class p3{constructor(t){this.t=t,this.currentUser=Qr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){Je(this.o===void 0,42304);let o=this.i;const u=_=>this.i!==o?(o=this.i,n(_)):Promise.resolve();let d=new pa;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new pa,t.enqueueRetryable(()=>u(this.currentUser))};const A=()=>{const _=d;t.enqueueRetryable(async()=>{await _.promise,await u(this.currentUser)})},C=_=>{Yt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=_,this.o&&(this.auth.addAuthTokenListener(this.o),A())};this.t.onInit(_=>C(_)),setTimeout(()=>{if(!this.auth){const _=this.t.getImmediate({optional:!0});_?C(_):(Yt("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new pa)}},0),A()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(o=>this.i!==t?(Yt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(Je(typeof o.accessToken=="string",31837,{l:o}),new jx(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Je(t===null||typeof t=="string",2055,{h:t}),new Qr(t)}}class y3{constructor(t,n,o){this.P=t,this.T=n,this.I=o,this.type="FirstParty",this.user=Qr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class x3{constructor(t,n,o){this.P=t,this.T=n,this.I=o}getToken(){return Promise.resolve(new y3(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable(()=>n(Qr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class D2{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class E3{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Rx(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){Je(this.o===void 0,3512);const o=d=>{d.error!=null&&Yt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${d.error.message}`);const A=d.token!==this.m;return this.m=d.token,Yt("FirebaseAppCheckTokenProvider",`Received ${A?"new":"existing"} token.`),A?n(d.token):Promise.resolve()};this.o=d=>{t.enqueueRetryable(()=>o(d))};const u=d=>{Yt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=d,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(d=>u(d)),setTimeout(()=>{if(!this.appCheck){const d=this.V.getImmediate({optional:!0});d?u(d):Yt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new D2(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(Je(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new D2(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A3(i){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let o=0;o<i;o++)n[o]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let o="";for(;o.length<20;){const u=A3(40);for(let d=0;d<u.length;++d)o.length<20&&u[d]<n&&(o+=t.charAt(u[d]%62))}return o}}function De(i,t){return i<t?-1:i>t?1:0}function j1(i,t){const n=Math.min(i.length,t.length);for(let o=0;o<n;o++){const u=i.charAt(o),d=t.charAt(o);if(u!==d)return v1(u)===v1(d)?De(u,d):v1(u)?1:-1}return De(i.length,t.length)}const w3=55296,_3=57343;function v1(i){const t=i.charCodeAt(0);return t>=w3&&t<=_3}function Gl(i,t,n){return i.length===t.length&&i.every((o,u)=>n(o,t[u]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M2="__name__";class Bs{constructor(t,n,o){n===void 0?n=0:n>t.length&&ie(637,{offset:n,range:t.length}),o===void 0?o=t.length-n:o>t.length-n&&ie(1746,{length:o,range:t.length-n}),this.segments=t,this.offset=n,this.len=o}get length(){return this.len}isEqual(t){return Bs.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof Bs?t.forEach(o=>{n.push(o)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,o=this.limit();n<o;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const o=Math.min(t.length,n.length);for(let u=0;u<o;u++){const d=Bs.compareSegments(t.get(u),n.get(u));if(d!==0)return d}return De(t.length,n.length)}static compareSegments(t,n){const o=Bs.isNumericId(t),u=Bs.isNumericId(n);return o&&!u?-1:!o&&u?1:o&&u?Bs.extractNumericId(t).compare(Bs.extractNumericId(n)):j1(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return ao.fromString(t.substring(4,t.length-2))}}class En extends Bs{construct(t,n,o){return new En(t,n,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const o of t){if(o.indexOf("//")>=0)throw new Gt(bt.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);n.push(...o.split("/").filter(u=>u.length>0))}return new En(n)}static emptyPath(){return new En([])}}const T3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Lr extends Bs{construct(t,n,o){return new Lr(t,n,o)}static isValidIdentifier(t){return T3.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Lr.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===M2}static keyField(){return new Lr([M2])}static fromServerFormat(t){const n=[];let o="",u=0;const d=()=>{if(o.length===0)throw new Gt(bt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(o),o=""};let A=!1;for(;u<t.length;){const C=t[u];if(C==="\\"){if(u+1===t.length)throw new Gt(bt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const _=t[u+1];if(_!=="\\"&&_!=="."&&_!=="`")throw new Gt(bt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);o+=_,u+=2}else C==="`"?(A=!A,u++):C!=="."||A?(o+=C,u++):(d(),u++)}if(d(),A)throw new Gt(bt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Lr(n)}static emptyPath(){return new Lr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(t){this.path=t}static fromPath(t){return new te(En.fromString(t))}static fromName(t){return new te(En.fromString(t).popFirst(5))}static empty(){return new te(En.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&En.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return En.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new te(new En(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zx(i,t,n){if(!n)throw new Gt(bt.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${t}.`)}function C3(i,t,n,o){if(t===!0&&o===!0)throw new Gt(bt.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function O2(i){if(!te.isDocumentKey(i))throw new Gt(bt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function L2(i){if(te.isDocumentKey(i))throw new Gt(bt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Hx(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function ff(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const t=function(o){return o.constructor?o.constructor.name:null}(i);return t?`a custom ${t} object`:"an object"}}return typeof i=="function"?"a function":ie(12329,{type:typeof i})}function ns(i,t){if("_delegate"in i&&(i=i._delegate),!(i instanceof t)){if(t.name===i.constructor.name)throw new Gt(bt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ff(i);throw new Gt(bt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return i}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hr(i,t){const n={typeString:i};return t&&(n.value=t),n}function du(i,t){if(!Hx(i))throw new Gt(bt.INVALID_ARGUMENT,"JSON must be an object");let n;for(const o in t)if(t[o]){const u=t[o].typeString,d="value"in t[o]?{value:t[o].value}:void 0;if(!(o in i)){n=`JSON missing required field: '${o}'`;break}const A=i[o];if(u&&typeof A!==u){n=`JSON field '${o}' must be a ${u}.`;break}if(d!==void 0&&A!==d.value){n=`Expected '${o}' field to equal '${d.value}'`;break}}if(n)throw new Gt(bt.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B2=-62135596800,P2=1e6;class An{static now(){return An.fromMillis(Date.now())}static fromDate(t){return An.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),o=Math.floor((t-1e3*n)*P2);return new An(n,o)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new Gt(bt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Gt(bt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<B2)throw new Gt(bt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Gt(bt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/P2}_compareTo(t){return this.seconds===t.seconds?De(this.nanoseconds,t.nanoseconds):De(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:An._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(du(t,An._jsonSchema))return new An(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-B2;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}An._jsonSchemaVersion="firestore/timestamp/1.0",An._jsonSchema={type:hr("string",An._jsonSchemaVersion),seconds:hr("number"),nanoseconds:hr("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{static fromTimestamp(t){return new ce(t)}static min(){return new ce(new An(0,0))}static max(){return new ce(new An(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iu=-1;function S3(i,t){const n=i.toTimestamp().seconds,o=i.toTimestamp().nanoseconds+1,u=ce.fromTimestamp(o===1e9?new An(n+1,0):new An(n,o));return new lo(u,te.empty(),t)}function v3(i){return new lo(i.readTime,i.key,iu)}class lo{constructor(t,n,o){this.readTime=t,this.documentKey=n,this.largestBatchId=o}static min(){return new lo(ce.min(),te.empty(),iu)}static max(){return new lo(ce.max(),te.empty(),iu)}}function b3(i,t){let n=i.readTime.compareTo(t.readTime);return n!==0?n:(n=te.comparator(i.documentKey,t.documentKey),n!==0?n:De(i.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I3="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class R3{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $l(i){if(i.code!==bt.FAILED_PRECONDITION||i.message!==I3)throw i;Yt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&ie(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new Nt((o,u)=>{this.nextCallback=d=>{this.wrapSuccess(t,d).next(o,u)},this.catchCallback=d=>{this.wrapFailure(n,d).next(o,u)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof Nt?n:Nt.resolve(n)}catch(n){return Nt.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):Nt.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):Nt.reject(n)}static resolve(t){return new Nt((n,o)=>{n(t)})}static reject(t){return new Nt((n,o)=>{o(t)})}static waitFor(t){return new Nt((n,o)=>{let u=0,d=0,A=!1;t.forEach(C=>{++u,C.next(()=>{++d,A&&d===u&&n()},_=>o(_))}),A=!0,d===u&&n()})}static or(t){let n=Nt.resolve(!1);for(const o of t)n=n.next(u=>u?Nt.resolve(u):o());return n}static forEach(t,n){const o=[];return t.forEach((u,d)=>{o.push(n.call(this,u,d))}),this.waitFor(o)}static mapArray(t,n){return new Nt((o,u)=>{const d=t.length,A=new Array(d);let C=0;for(let _=0;_<d;_++){const x=_;n(t[x]).next(v=>{A[x]=v,++C,C===d&&o(A)},v=>u(v))}})}static doWhile(t,n){return new Nt((o,u)=>{const d=()=>{t()===!0?n().next(()=>{d()},u):o()};d()})}}function N3(i){const t=i.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function tc(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=o=>this.ae(o),this.ue=o=>n.writeSequenceNumber(o))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}df.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w0=-1;function gf(i){return i==null}function Gh(i){return i===0&&1/i==-1/0}function D3(i){return typeof i=="number"&&Number.isInteger(i)&&!Gh(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gx="";function M3(i){let t="";for(let n=0;n<i.length;n++)t.length>0&&(t=k2(t)),t=O3(i.get(n),t);return k2(t)}function O3(i,t){let n=t;const o=i.length;for(let u=0;u<o;u++){const d=i.charAt(u);switch(d){case"\0":n+="";break;case Gx:n+="";break;default:n+=d}}return n}function k2(i){return i+Gx+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V2(i){let t=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&t++;return t}function xo(i,t){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&t(n,i[n])}function qx(i){for(const t in i)if(Object.prototype.hasOwnProperty.call(i,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(t,n){this.comparator=t,this.root=n||Or.EMPTY}insert(t,n){return new Fn(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Or.BLACK,null,null))}remove(t){return new Fn(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Or.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const o=this.comparator(t,n.key);if(o===0)return n.value;o<0?n=n.left:o>0&&(n=n.right)}return null}indexOf(t){let n=0,o=this.root;for(;!o.isEmpty();){const u=this.comparator(t,o.key);if(u===0)return n+o.left.size;u<0?o=o.left:(n+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,o)=>(t(n,o),!1))}toString(){const t=[];return this.inorderTraversal((n,o)=>(t.push(`${n}:${o}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Ch(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Ch(this.root,t,this.comparator,!1)}getReverseIterator(){return new Ch(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Ch(this.root,t,this.comparator,!0)}}class Ch{constructor(t,n,o,u){this.isReverse=u,this.nodeStack=[];let d=1;for(;!t.isEmpty();)if(d=n?o(t.key,n):1,n&&u&&(d*=-1),d<0)t=this.isReverse?t.left:t.right;else{if(d===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Or{constructor(t,n,o,u,d){this.key=t,this.value=n,this.color=o??Or.RED,this.left=u??Or.EMPTY,this.right=d??Or.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,o,u,d){return new Or(t??this.key,n??this.value,o??this.color,u??this.left,d??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,o){let u=this;const d=o(t,u.key);return u=d<0?u.copy(null,null,null,u.left.insert(t,n,o),null):d===0?u.copy(null,n,null,null,null):u.copy(null,null,null,null,u.right.insert(t,n,o)),u.fixUp()}removeMin(){if(this.left.isEmpty())return Or.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let o,u=this;if(n(t,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(t,n),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),n(t,u.key)===0){if(u.right.isEmpty())return Or.EMPTY;o=u.right.min(),u=u.copy(o.key,o.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(t,n))}return u.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Or.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Or.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ie(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ie(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw ie(27949);return t+(this.isRed()?0:1)}}Or.EMPTY=null,Or.RED=!0,Or.BLACK=!1;Or.EMPTY=new class{constructor(){this.size=0}get key(){throw ie(57766)}get value(){throw ie(16141)}get color(){throw ie(16727)}get left(){throw ie(29726)}get right(){throw ie(36894)}copy(t,n,o,u,d){return this}insert(t,n,o){return new Or(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(t){this.comparator=t,this.data=new Fn(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,o)=>(t(n),!1))}forEachInRange(t,n){const o=this.data.getIteratorFrom(t[0]);for(;o.hasNext();){const u=o.getNext();if(this.comparator(u.key,t[1])>=0)return;n(u.key)}}forEachWhile(t,n){let o;for(o=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();o.hasNext();)if(!t(o.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new U2(this.data.getIterator())}getIteratorFrom(t){return new U2(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(o=>{n=n.add(o)}),n}isEqual(t){if(!(t instanceof yr)||this.size!==t.size)return!1;const n=this.data.getIterator(),o=t.data.getIterator();for(;n.hasNext();){const u=n.getNext().key,d=o.getNext().key;if(this.comparator(u,d)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new yr(this.comparator);return n.data=t,n}}class U2{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(t){this.fields=t,t.sort(Lr.comparator)}static empty(){return new ki([])}unionWith(t){let n=new yr(Lr.comparator);for(const o of this.fields)n=n.add(o);for(const o of t)n=n.add(o);return new ki(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Gl(this.fields,t.fields,(n,o)=>n.isEqual(o))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(u){try{return atob(u)}catch(d){throw typeof DOMException<"u"&&d instanceof DOMException?new Yx("Invalid base64 string: "+d):d}}(t);return new Br(n)}static fromUint8Array(t){const n=function(u){let d="";for(let A=0;A<u.length;++A)d+=String.fromCharCode(u[A]);return d}(t);return new Br(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const o=new Uint8Array(n.length);for(let u=0;u<n.length;u++)o[u]=n.charCodeAt(u);return o}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return De(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Br.EMPTY_BYTE_STRING=new Br("");const L3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function co(i){if(Je(!!i,39018),typeof i=="string"){let t=0;const n=L3.exec(i);if(Je(!!n,46558,{timestamp:i}),n[1]){let u=n[1];u=(u+"000000000").substr(0,9),t=Number(u)}const o=new Date(i);return{seconds:Math.floor(o.getTime()/1e3),nanos:t}}return{seconds:nr(i.seconds),nanos:nr(i.nanos)}}function nr(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function uo(i){return typeof i=="string"?Br.fromBase64String(i):Br.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xx="server_timestamp",Qx="__type__",Wx="__previous_value__",Kx="__local_write_time__";function _0(i){return(i?.mapValue?.fields||{})[Qx]?.stringValue===Xx}function mf(i){const t=i.mapValue.fields[Wx];return _0(t)?mf(t):t}function su(i){const t=co(i.mapValue.fields[Kx].timestampValue);return new An(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B3{constructor(t,n,o,u,d,A,C,_,x,v){this.databaseId=t,this.appId=n,this.persistenceKey=o,this.host=u,this.ssl=d,this.forceLongPolling=A,this.autoDetectLongPolling=C,this.longPollingOptions=_,this.useFetchStreams=x,this.isUsingEmulator=v}}const qh="(default)";class au{constructor(t,n){this.projectId=t,this.database=n||qh}static empty(){return new au("","")}get isDefaultDatabase(){return this.database===qh}isEqual(t){return t instanceof au&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zx="__type__",P3="__max__",Sh={mapValue:{}},Jx="__vector__",Yh="value";function ho(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?_0(i)?4:V3(i)?9007199254740991:k3(i)?10:11:ie(28295,{value:i})}function js(i,t){if(i===t)return!0;const n=ho(i);if(n!==ho(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===t.booleanValue;case 4:return su(i).isEqual(su(t));case 3:return function(u,d){if(typeof u.timestampValue=="string"&&typeof d.timestampValue=="string"&&u.timestampValue.length===d.timestampValue.length)return u.timestampValue===d.timestampValue;const A=co(u.timestampValue),C=co(d.timestampValue);return A.seconds===C.seconds&&A.nanos===C.nanos}(i,t);case 5:return i.stringValue===t.stringValue;case 6:return function(u,d){return uo(u.bytesValue).isEqual(uo(d.bytesValue))}(i,t);case 7:return i.referenceValue===t.referenceValue;case 8:return function(u,d){return nr(u.geoPointValue.latitude)===nr(d.geoPointValue.latitude)&&nr(u.geoPointValue.longitude)===nr(d.geoPointValue.longitude)}(i,t);case 2:return function(u,d){if("integerValue"in u&&"integerValue"in d)return nr(u.integerValue)===nr(d.integerValue);if("doubleValue"in u&&"doubleValue"in d){const A=nr(u.doubleValue),C=nr(d.doubleValue);return A===C?Gh(A)===Gh(C):isNaN(A)&&isNaN(C)}return!1}(i,t);case 9:return Gl(i.arrayValue.values||[],t.arrayValue.values||[],js);case 10:case 11:return function(u,d){const A=u.mapValue.fields||{},C=d.mapValue.fields||{};if(V2(A)!==V2(C))return!1;for(const _ in A)if(A.hasOwnProperty(_)&&(C[_]===void 0||!js(A[_],C[_])))return!1;return!0}(i,t);default:return ie(52216,{left:i})}}function ou(i,t){return(i.values||[]).find(n=>js(n,t))!==void 0}function ql(i,t){if(i===t)return 0;const n=ho(i),o=ho(t);if(n!==o)return De(n,o);switch(n){case 0:case 9007199254740991:return 0;case 1:return De(i.booleanValue,t.booleanValue);case 2:return function(d,A){const C=nr(d.integerValue||d.doubleValue),_=nr(A.integerValue||A.doubleValue);return C<_?-1:C>_?1:C===_?0:isNaN(C)?isNaN(_)?0:-1:1}(i,t);case 3:return F2(i.timestampValue,t.timestampValue);case 4:return F2(su(i),su(t));case 5:return j1(i.stringValue,t.stringValue);case 6:return function(d,A){const C=uo(d),_=uo(A);return C.compareTo(_)}(i.bytesValue,t.bytesValue);case 7:return function(d,A){const C=d.split("/"),_=A.split("/");for(let x=0;x<C.length&&x<_.length;x++){const v=De(C[x],_[x]);if(v!==0)return v}return De(C.length,_.length)}(i.referenceValue,t.referenceValue);case 8:return function(d,A){const C=De(nr(d.latitude),nr(A.latitude));return C!==0?C:De(nr(d.longitude),nr(A.longitude))}(i.geoPointValue,t.geoPointValue);case 9:return j2(i.arrayValue,t.arrayValue);case 10:return function(d,A){const C=d.fields||{},_=A.fields||{},x=C[Yh]?.arrayValue,v=_[Yh]?.arrayValue,I=De(x?.values?.length||0,v?.values?.length||0);return I!==0?I:j2(x,v)}(i.mapValue,t.mapValue);case 11:return function(d,A){if(d===Sh.mapValue&&A===Sh.mapValue)return 0;if(d===Sh.mapValue)return 1;if(A===Sh.mapValue)return-1;const C=d.fields||{},_=Object.keys(C),x=A.fields||{},v=Object.keys(x);_.sort(),v.sort();for(let I=0;I<_.length&&I<v.length;++I){const O=j1(_[I],v[I]);if(O!==0)return O;const H=ql(C[_[I]],x[v[I]]);if(H!==0)return H}return De(_.length,v.length)}(i.mapValue,t.mapValue);default:throw ie(23264,{he:n})}}function F2(i,t){if(typeof i=="string"&&typeof t=="string"&&i.length===t.length)return De(i,t);const n=co(i),o=co(t),u=De(n.seconds,o.seconds);return u!==0?u:De(n.nanos,o.nanos)}function j2(i,t){const n=i.values||[],o=t.values||[];for(let u=0;u<n.length&&u<o.length;++u){const d=ql(n[u],o[u]);if(d)return d}return De(n.length,o.length)}function Yl(i){return z1(i)}function z1(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(n){const o=co(n);return`time(${o.seconds},${o.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(n){return uo(n).toBase64()}(i.bytesValue):"referenceValue"in i?function(n){return te.fromName(n).toString()}(i.referenceValue):"geoPointValue"in i?function(n){return`geo(${n.latitude},${n.longitude})`}(i.geoPointValue):"arrayValue"in i?function(n){let o="[",u=!0;for(const d of n.values||[])u?u=!1:o+=",",o+=z1(d);return o+"]"}(i.arrayValue):"mapValue"in i?function(n){const o=Object.keys(n.fields||{}).sort();let u="{",d=!0;for(const A of o)d?d=!1:u+=",",u+=`${A}:${z1(n.fields[A])}`;return u+"}"}(i.mapValue):ie(61005,{value:i})}function Mh(i){switch(ho(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=mf(i);return t?16+Mh(t):16;case 5:return 2*i.stringValue.length;case 6:return uo(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return function(o){return(o.values||[]).reduce((u,d)=>u+Mh(d),0)}(i.arrayValue);case 10:case 11:return function(o){let u=0;return xo(o.fields,(d,A)=>{u+=d.length+Mh(A)}),u}(i.mapValue);default:throw ie(13486,{value:i})}}function z2(i,t){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${t.path.canonicalString()}`}}function H1(i){return!!i&&"integerValue"in i}function T0(i){return!!i&&"arrayValue"in i}function H2(i){return!!i&&"nullValue"in i}function G2(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Oh(i){return!!i&&"mapValue"in i}function k3(i){return(i?.mapValue?.fields||{})[Zx]?.stringValue===Jx}function Zc(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const t={mapValue:{fields:{}}};return xo(i.mapValue.fields,(n,o)=>t.mapValue.fields[n]=Zc(o)),t}if(i.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Zc(i.arrayValue.values[n]);return t}return{...i}}function V3(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===P3}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(t){this.value=t}static empty(){return new pi({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let o=0;o<t.length-1;++o)if(n=(n.mapValue.fields||{})[t.get(o)],!Oh(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Zc(n)}setAll(t){let n=Lr.emptyPath(),o={},u=[];t.forEach((A,C)=>{if(!n.isImmediateParentOf(C)){const _=this.getFieldsMap(n);this.applyChanges(_,o,u),o={},u=[],n=C.popLast()}A?o[C.lastSegment()]=Zc(A):u.push(C.lastSegment())});const d=this.getFieldsMap(n);this.applyChanges(d,o,u)}delete(t){const n=this.field(t.popLast());Oh(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return js(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let o=0;o<t.length;++o){let u=n.mapValue.fields[t.get(o)];Oh(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},n.mapValue.fields[t.get(o)]=u),n=u}return n.mapValue.fields}applyChanges(t,n,o){xo(n,(u,d)=>t[u]=d);for(const u of o)delete t[u]}clone(){return new pi(Zc(this.value))}}function $x(i){const t=[];return xo(i.fields,(n,o)=>{const u=new Lr([n]);if(Oh(o)){const d=$x(o.mapValue).fields;if(d.length===0)t.push(u);else for(const A of d)t.push(u.child(A))}else t.push(u)}),new ki(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(t,n,o,u,d,A,C){this.key=t,this.documentType=n,this.version=o,this.readTime=u,this.createTime=d,this.data=A,this.documentState=C}static newInvalidDocument(t){return new Wr(t,0,ce.min(),ce.min(),ce.min(),pi.empty(),0)}static newFoundDocument(t,n,o,u){return new Wr(t,1,n,ce.min(),o,u,0)}static newNoDocument(t,n){return new Wr(t,2,n,ce.min(),ce.min(),pi.empty(),0)}static newUnknownDocument(t,n){return new Wr(t,3,n,ce.min(),ce.min(),pi.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=pi.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=pi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ce.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Wr&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Wr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(t,n){this.position=t,this.inclusive=n}}function q2(i,t,n){let o=0;for(let u=0;u<i.position.length;u++){const d=t[u],A=i.position[u];if(d.field.isKeyField()?o=te.comparator(te.fromName(A.referenceValue),n.key):o=ql(A,n.data.field(d.field)),d.dir==="desc"&&(o*=-1),o!==0)break}return o}function Y2(i,t){if(i===null)return t===null;if(t===null||i.inclusive!==t.inclusive||i.position.length!==t.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!js(i.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(t,n="asc"){this.field=t,this.dir=n}}function U3(i,t){return i.dir===t.dir&&i.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tE{}class ur extends tE{constructor(t,n,o){super(),this.field=t,this.op=n,this.value=o}static create(t,n,o){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,o):new j3(t,n,o):n==="array-contains"?new G3(t,o):n==="in"?new q3(t,o):n==="not-in"?new Y3(t,o):n==="array-contains-any"?new X3(t,o):new ur(t,n,o)}static createKeyFieldInFilter(t,n,o){return n==="in"?new z3(t,o):new H3(t,o)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ql(n,this.value)):n!==null&&ho(this.value)===ho(n)&&this.matchesComparison(ql(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return ie(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class xs extends tE{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new xs(t,n)}matches(t){return eE(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function eE(i){return i.op==="and"}function nE(i){return F3(i)&&eE(i)}function F3(i){for(const t of i.filters)if(t instanceof xs)return!1;return!0}function G1(i){if(i instanceof ur)return i.field.canonicalString()+i.op.toString()+Yl(i.value);if(nE(i))return i.filters.map(t=>G1(t)).join(",");{const t=i.filters.map(n=>G1(n)).join(",");return`${i.op}(${t})`}}function rE(i,t){return i instanceof ur?function(o,u){return u instanceof ur&&o.op===u.op&&o.field.isEqual(u.field)&&js(o.value,u.value)}(i,t):i instanceof xs?function(o,u){return u instanceof xs&&o.op===u.op&&o.filters.length===u.filters.length?o.filters.reduce((d,A,C)=>d&&rE(A,u.filters[C]),!0):!1}(i,t):void ie(19439)}function iE(i){return i instanceof ur?function(n){return`${n.field.canonicalString()} ${n.op} ${Yl(n.value)}`}(i):i instanceof xs?function(n){return n.op.toString()+" {"+n.getFilters().map(iE).join(" ,")+"}"}(i):"Filter"}class j3 extends ur{constructor(t,n,o){super(t,n,o),this.key=te.fromName(o.referenceValue)}matches(t){const n=te.comparator(t.key,this.key);return this.matchesComparison(n)}}class z3 extends ur{constructor(t,n){super(t,"in",n),this.keys=sE("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class H3 extends ur{constructor(t,n){super(t,"not-in",n),this.keys=sE("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function sE(i,t){return(t.arrayValue?.values||[]).map(n=>te.fromName(n.referenceValue))}class G3 extends ur{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return T0(n)&&ou(n.arrayValue,this.value)}}class q3 extends ur{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&ou(this.value.arrayValue,n)}}class Y3 extends ur{constructor(t,n){super(t,"not-in",n)}matches(t){if(ou(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ou(this.value.arrayValue,n)}}class X3 extends ur{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!T0(n)||!n.arrayValue.values)&&n.arrayValue.values.some(o=>ou(this.value.arrayValue,o))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q3{constructor(t,n=null,o=[],u=[],d=null,A=null,C=null){this.path=t,this.collectionGroup=n,this.orderBy=o,this.filters=u,this.limit=d,this.startAt=A,this.endAt=C,this.Te=null}}function X2(i,t=null,n=[],o=[],u=null,d=null,A=null){return new Q3(i,t,n,o,u,d,A)}function C0(i){const t=he(i);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(o=>G1(o)).join(","),n+="|ob:",n+=t.orderBy.map(o=>function(d){return d.field.canonicalString()+d.dir}(o)).join(","),gf(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(o=>Yl(o)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(o=>Yl(o)).join(",")),t.Te=n}return t.Te}function S0(i,t){if(i.limit!==t.limit||i.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!U3(i.orderBy[n],t.orderBy[n]))return!1;if(i.filters.length!==t.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!rE(i.filters[n],t.filters[n]))return!1;return i.collectionGroup===t.collectionGroup&&!!i.path.isEqual(t.path)&&!!Y2(i.startAt,t.startAt)&&Y2(i.endAt,t.endAt)}function q1(i){return te.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(t,n=null,o=[],u=[],d=null,A="F",C=null,_=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=o,this.filters=u,this.limit=d,this.limitType=A,this.startAt=C,this.endAt=_,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function W3(i,t,n,o,u,d,A,C){return new gu(i,t,n,o,u,d,A,C)}function pf(i){return new gu(i)}function Q2(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function aE(i){return i.collectionGroup!==null}function Jc(i){const t=he(i);if(t.Ie===null){t.Ie=[];const n=new Set;for(const d of t.explicitOrderBy)t.Ie.push(d),n.add(d.field.canonicalString());const o=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(A){let C=new yr(Lr.comparator);return A.filters.forEach(_=>{_.getFlattenedFilters().forEach(x=>{x.isInequality()&&(C=C.add(x.field))})}),C})(t).forEach(d=>{n.has(d.canonicalString())||d.isKeyField()||t.Ie.push(new Qh(d,o))}),n.has(Lr.keyField().canonicalString())||t.Ie.push(new Qh(Lr.keyField(),o))}return t.Ie}function ks(i){const t=he(i);return t.Ee||(t.Ee=K3(t,Jc(i))),t.Ee}function K3(i,t){if(i.limitType==="F")return X2(i.path,i.collectionGroup,t,i.filters,i.limit,i.startAt,i.endAt);{t=t.map(u=>{const d=u.dir==="desc"?"asc":"desc";return new Qh(u.field,d)});const n=i.endAt?new Xh(i.endAt.position,i.endAt.inclusive):null,o=i.startAt?new Xh(i.startAt.position,i.startAt.inclusive):null;return X2(i.path,i.collectionGroup,t,i.filters,i.limit,n,o)}}function Y1(i,t){const n=i.filters.concat([t]);return new gu(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function X1(i,t,n){return new gu(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),t,n,i.startAt,i.endAt)}function yf(i,t){return S0(ks(i),ks(t))&&i.limitType===t.limitType}function oE(i){return`${C0(ks(i))}|lt:${i.limitType}`}function Ll(i){return`Query(target=${function(n){let o=n.path.canonicalString();return n.collectionGroup!==null&&(o+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(o+=`, filters: [${n.filters.map(u=>iE(u)).join(", ")}]`),gf(n.limit)||(o+=", limit: "+n.limit),n.orderBy.length>0&&(o+=`, orderBy: [${n.orderBy.map(u=>function(A){return`${A.field.canonicalString()} (${A.dir})`}(u)).join(", ")}]`),n.startAt&&(o+=", startAt: ",o+=n.startAt.inclusive?"b:":"a:",o+=n.startAt.position.map(u=>Yl(u)).join(",")),n.endAt&&(o+=", endAt: ",o+=n.endAt.inclusive?"a:":"b:",o+=n.endAt.position.map(u=>Yl(u)).join(",")),`Target(${o})`}(ks(i))}; limitType=${i.limitType})`}function xf(i,t){return t.isFoundDocument()&&function(o,u){const d=u.key.path;return o.collectionGroup!==null?u.key.hasCollectionId(o.collectionGroup)&&o.path.isPrefixOf(d):te.isDocumentKey(o.path)?o.path.isEqual(d):o.path.isImmediateParentOf(d)}(i,t)&&function(o,u){for(const d of Jc(o))if(!d.field.isKeyField()&&u.data.field(d.field)===null)return!1;return!0}(i,t)&&function(o,u){for(const d of o.filters)if(!d.matches(u))return!1;return!0}(i,t)&&function(o,u){return!(o.startAt&&!function(A,C,_){const x=q2(A,C,_);return A.inclusive?x<=0:x<0}(o.startAt,Jc(o),u)||o.endAt&&!function(A,C,_){const x=q2(A,C,_);return A.inclusive?x>=0:x>0}(o.endAt,Jc(o),u))}(i,t)}function Z3(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function lE(i){return(t,n)=>{let o=!1;for(const u of Jc(i)){const d=J3(u,t,n);if(d!==0)return d;o=o||u.field.isKeyField()}return 0}}function J3(i,t,n){const o=i.field.isKeyField()?te.comparator(t.key,n.key):function(d,A,C){const _=A.data.field(d),x=C.data.field(d);return _!==null&&x!==null?ql(_,x):ie(42886)}(i.field,t,n);switch(i.dir){case"asc":return o;case"desc":return-1*o;default:return ie(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),o=this.inner[n];if(o!==void 0){for(const[u,d]of o)if(this.equalsFn(u,t))return d}}has(t){return this.get(t)!==void 0}set(t,n){const o=this.mapKeyFn(t),u=this.inner[o];if(u===void 0)return this.inner[o]=[[t,n]],void this.innerSize++;for(let d=0;d<u.length;d++)if(this.equalsFn(u[d][0],t))return void(u[d]=[t,n]);u.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),o=this.inner[n];if(o===void 0)return!1;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],t))return o.length===1?delete this.inner[n]:o.splice(u,1),this.innerSize--,!0;return!1}forEach(t){xo(this.inner,(n,o)=>{for(const[u,d]of o)t(u,d)})}isEmpty(){return qx(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $3=new Fn(te.comparator);function Aa(){return $3}const cE=new Fn(te.comparator);function Yc(...i){let t=cE;for(const n of i)t=t.insert(n.key,n);return t}function uE(i){let t=cE;return i.forEach((n,o)=>t=t.insert(n,o.overlayedDocument)),t}function Uo(){return $c()}function hE(){return $c()}function $c(){return new Wo(i=>i.toString(),(i,t)=>i.isEqual(t))}const tS=new Fn(te.comparator),eS=new yr(te.comparator);function Me(...i){let t=eS;for(const n of i)t=t.add(n);return t}const nS=new yr(De);function rS(){return nS}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v0(i,t){if(i.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Gh(t)?"-0":t}}function fE(i){return{integerValue:""+i}}function iS(i,t){return D3(t)?fE(t):v0(i,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(){this._=void 0}}function sS(i,t,n){return i instanceof lu?function(u,d){const A={fields:{[Qx]:{stringValue:Xx},[Kx]:{timestampValue:{seconds:u.seconds,nanos:u.nanoseconds}}}};return d&&_0(d)&&(d=mf(d)),d&&(A.fields[Wx]=d),{mapValue:A}}(n,t):i instanceof cu?gE(i,t):i instanceof uu?mE(i,t):function(u,d){const A=dE(u,d),C=W2(A)+W2(u.Ae);return H1(A)&&H1(u.Ae)?fE(C):v0(u.serializer,C)}(i,t)}function aS(i,t,n){return i instanceof cu?gE(i,t):i instanceof uu?mE(i,t):n}function dE(i,t){return i instanceof Wh?function(o){return H1(o)||function(d){return!!d&&"doubleValue"in d}(o)}(t)?t:{integerValue:0}:null}class lu extends Ef{}class cu extends Ef{constructor(t){super(),this.elements=t}}function gE(i,t){const n=pE(t);for(const o of i.elements)n.some(u=>js(u,o))||n.push(o);return{arrayValue:{values:n}}}class uu extends Ef{constructor(t){super(),this.elements=t}}function mE(i,t){let n=pE(t);for(const o of i.elements)n=n.filter(u=>!js(u,o));return{arrayValue:{values:n}}}class Wh extends Ef{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function W2(i){return nr(i.integerValue||i.doubleValue)}function pE(i){return T0(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(t,n){this.field=t,this.transform=n}}function lS(i,t){return i.field.isEqual(t.field)&&function(o,u){return o instanceof cu&&u instanceof cu||o instanceof uu&&u instanceof uu?Gl(o.elements,u.elements,js):o instanceof Wh&&u instanceof Wh?js(o.Ae,u.Ae):o instanceof lu&&u instanceof lu}(i.transform,t.transform)}class cS{constructor(t,n){this.version=t,this.transformResults=n}}class ps{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new ps}static exists(t){return new ps(void 0,t)}static updateTime(t){return new ps(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Lh(i,t){return i.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(i.updateTime):i.exists===void 0||i.exists===t.isFoundDocument()}class Af{}function yE(i,t){if(!i.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return i.isNoDocument()?new b0(i.key,ps.none()):new mu(i.key,i.data,ps.none());{const n=i.data,o=pi.empty();let u=new yr(Lr.comparator);for(let d of t.fields)if(!u.has(d)){let A=n.field(d);A===null&&d.length>1&&(d=d.popLast(),A=n.field(d)),A===null?o.delete(d):o.set(d,A),u=u.add(d)}return new Eo(i.key,o,new ki(u.toArray()),ps.none())}}function uS(i,t,n){i instanceof mu?function(u,d,A){const C=u.value.clone(),_=Z2(u.fieldTransforms,d,A.transformResults);C.setAll(_),d.convertToFoundDocument(A.version,C).setHasCommittedMutations()}(i,t,n):i instanceof Eo?function(u,d,A){if(!Lh(u.precondition,d))return void d.convertToUnknownDocument(A.version);const C=Z2(u.fieldTransforms,d,A.transformResults),_=d.data;_.setAll(xE(u)),_.setAll(C),d.convertToFoundDocument(A.version,_).setHasCommittedMutations()}(i,t,n):function(u,d,A){d.convertToNoDocument(A.version).setHasCommittedMutations()}(0,t,n)}function tu(i,t,n,o){return i instanceof mu?function(d,A,C,_){if(!Lh(d.precondition,A))return C;const x=d.value.clone(),v=J2(d.fieldTransforms,_,A);return x.setAll(v),A.convertToFoundDocument(A.version,x).setHasLocalMutations(),null}(i,t,n,o):i instanceof Eo?function(d,A,C,_){if(!Lh(d.precondition,A))return C;const x=J2(d.fieldTransforms,_,A),v=A.data;return v.setAll(xE(d)),v.setAll(x),A.convertToFoundDocument(A.version,v).setHasLocalMutations(),C===null?null:C.unionWith(d.fieldMask.fields).unionWith(d.fieldTransforms.map(I=>I.field))}(i,t,n,o):function(d,A,C){return Lh(d.precondition,A)?(A.convertToNoDocument(A.version).setHasLocalMutations(),null):C}(i,t,n)}function hS(i,t){let n=null;for(const o of i.fieldTransforms){const u=t.data.field(o.field),d=dE(o.transform,u||null);d!=null&&(n===null&&(n=pi.empty()),n.set(o.field,d))}return n||null}function K2(i,t){return i.type===t.type&&!!i.key.isEqual(t.key)&&!!i.precondition.isEqual(t.precondition)&&!!function(o,u){return o===void 0&&u===void 0||!(!o||!u)&&Gl(o,u,(d,A)=>lS(d,A))}(i.fieldTransforms,t.fieldTransforms)&&(i.type===0?i.value.isEqual(t.value):i.type!==1||i.data.isEqual(t.data)&&i.fieldMask.isEqual(t.fieldMask))}class mu extends Af{constructor(t,n,o,u=[]){super(),this.key=t,this.value=n,this.precondition=o,this.fieldTransforms=u,this.type=0}getFieldMask(){return null}}class Eo extends Af{constructor(t,n,o,u,d=[]){super(),this.key=t,this.data=n,this.fieldMask=o,this.precondition=u,this.fieldTransforms=d,this.type=1}getFieldMask(){return this.fieldMask}}function xE(i){const t=new Map;return i.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const o=i.data.field(n);t.set(n,o)}}),t}function Z2(i,t,n){const o=new Map;Je(i.length===n.length,32656,{Re:n.length,Ve:i.length});for(let u=0;u<n.length;u++){const d=i[u],A=d.transform,C=t.data.field(d.field);o.set(d.field,aS(A,C,n[u]))}return o}function J2(i,t,n){const o=new Map;for(const u of i){const d=u.transform,A=n.data.field(u.field);o.set(u.field,sS(d,A,t))}return o}class b0 extends Af{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class fS extends Af{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dS{constructor(t,n,o,u){this.batchId=t,this.localWriteTime=n,this.baseMutations=o,this.mutations=u}applyToRemoteDocument(t,n){const o=n.mutationResults;for(let u=0;u<this.mutations.length;u++){const d=this.mutations[u];d.key.isEqual(t.key)&&uS(d,t,o[u])}}applyToLocalView(t,n){for(const o of this.baseMutations)o.key.isEqual(t.key)&&(n=tu(o,t,n,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(t.key)&&(n=tu(o,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const o=hE();return this.mutations.forEach(u=>{const d=t.get(u.key),A=d.overlayedDocument;let C=this.applyToLocalView(A,d.mutatedFields);C=n.has(u.key)?null:C;const _=yE(A,C);_!==null&&o.set(u.key,_),A.isValidDocument()||A.convertToNoDocument(ce.min())}),o}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),Me())}isEqual(t){return this.batchId===t.batchId&&Gl(this.mutations,t.mutations,(n,o)=>K2(n,o))&&Gl(this.baseMutations,t.baseMutations,(n,o)=>K2(n,o))}}class I0{constructor(t,n,o,u){this.batch=t,this.commitVersion=n,this.mutationResults=o,this.docVersions=u}static from(t,n,o){Je(t.mutations.length===o.length,58842,{me:t.mutations.length,fe:o.length});let u=function(){return tS}();const d=t.mutations;for(let A=0;A<d.length;A++)u=u.insert(d[A].key,o[A].version);return new I0(t,n,o,u)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cr,ke;function pS(i){switch(i){case bt.OK:return ie(64938);case bt.CANCELLED:case bt.UNKNOWN:case bt.DEADLINE_EXCEEDED:case bt.RESOURCE_EXHAUSTED:case bt.INTERNAL:case bt.UNAVAILABLE:case bt.UNAUTHENTICATED:return!1;case bt.INVALID_ARGUMENT:case bt.NOT_FOUND:case bt.ALREADY_EXISTS:case bt.PERMISSION_DENIED:case bt.FAILED_PRECONDITION:case bt.ABORTED:case bt.OUT_OF_RANGE:case bt.UNIMPLEMENTED:case bt.DATA_LOSS:return!0;default:return ie(15467,{code:i})}}function EE(i){if(i===void 0)return Ea("GRPC error has no .code"),bt.UNKNOWN;switch(i){case cr.OK:return bt.OK;case cr.CANCELLED:return bt.CANCELLED;case cr.UNKNOWN:return bt.UNKNOWN;case cr.DEADLINE_EXCEEDED:return bt.DEADLINE_EXCEEDED;case cr.RESOURCE_EXHAUSTED:return bt.RESOURCE_EXHAUSTED;case cr.INTERNAL:return bt.INTERNAL;case cr.UNAVAILABLE:return bt.UNAVAILABLE;case cr.UNAUTHENTICATED:return bt.UNAUTHENTICATED;case cr.INVALID_ARGUMENT:return bt.INVALID_ARGUMENT;case cr.NOT_FOUND:return bt.NOT_FOUND;case cr.ALREADY_EXISTS:return bt.ALREADY_EXISTS;case cr.PERMISSION_DENIED:return bt.PERMISSION_DENIED;case cr.FAILED_PRECONDITION:return bt.FAILED_PRECONDITION;case cr.ABORTED:return bt.ABORTED;case cr.OUT_OF_RANGE:return bt.OUT_OF_RANGE;case cr.UNIMPLEMENTED:return bt.UNIMPLEMENTED;case cr.DATA_LOSS:return bt.DATA_LOSS;default:return ie(39323,{code:i})}}(ke=cr||(cr={}))[ke.OK=0]="OK",ke[ke.CANCELLED=1]="CANCELLED",ke[ke.UNKNOWN=2]="UNKNOWN",ke[ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ke[ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ke[ke.NOT_FOUND=5]="NOT_FOUND",ke[ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",ke[ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",ke[ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",ke[ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ke[ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ke[ke.ABORTED=10]="ABORTED",ke[ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",ke[ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",ke[ke.INTERNAL=13]="INTERNAL",ke[ke.UNAVAILABLE=14]="UNAVAILABLE",ke[ke.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yS(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS=new ao([4294967295,4294967295],0);function $2(i){const t=yS().encode(i),n=new Lx;return n.update(t),new Uint8Array(n.digest())}function ty(i){const t=new DataView(i.buffer),n=t.getUint32(0,!0),o=t.getUint32(4,!0),u=t.getUint32(8,!0),d=t.getUint32(12,!0);return[new ao([n,o],0),new ao([u,d],0)]}class R0{constructor(t,n,o){if(this.bitmap=t,this.padding=n,this.hashCount=o,n<0||n>=8)throw new Xc(`Invalid padding: ${n}`);if(o<0)throw new Xc(`Invalid hash count: ${o}`);if(t.length>0&&this.hashCount===0)throw new Xc(`Invalid hash count: ${o}`);if(t.length===0&&n!==0)throw new Xc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=ao.fromNumber(this.ge)}ye(t,n,o){let u=t.add(n.multiply(ao.fromNumber(o)));return u.compare(xS)===1&&(u=new ao([u.getBits(0),u.getBits(1)],0)),u.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=$2(t),[o,u]=ty(n);for(let d=0;d<this.hashCount;d++){const A=this.ye(o,u,d);if(!this.we(A))return!1}return!0}static create(t,n,o){const u=t%8==0?0:8-t%8,d=new Uint8Array(Math.ceil(t/8)),A=new R0(d,u,n);return o.forEach(C=>A.insert(C)),A}insert(t){if(this.ge===0)return;const n=$2(t),[o,u]=ty(n);for(let d=0;d<this.hashCount;d++){const A=this.ye(o,u,d);this.Se(A)}}Se(t){const n=Math.floor(t/8),o=t%8;this.bitmap[n]|=1<<o}}class Xc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(t,n,o,u,d){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=o,this.documentUpdates=u,this.resolvedLimboDocuments=d}static createSynthesizedRemoteEventForCurrentChange(t,n,o){const u=new Map;return u.set(t,pu.createSynthesizedTargetChangeForCurrentChange(t,n,o)),new wf(ce.min(),u,new Fn(De),Aa(),Me())}}class pu{constructor(t,n,o,u,d){this.resumeToken=t,this.current=n,this.addedDocuments=o,this.modifiedDocuments=u,this.removedDocuments=d}static createSynthesizedTargetChangeForCurrentChange(t,n,o){return new pu(o,n,Me(),Me(),Me())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(t,n,o,u){this.be=t,this.removedTargetIds=n,this.key=o,this.De=u}}class AE{constructor(t,n){this.targetId=t,this.Ce=n}}class wE{constructor(t,n,o=Br.EMPTY_BYTE_STRING,u=null){this.state=t,this.targetIds=n,this.resumeToken=o,this.cause=u}}class ey{constructor(){this.ve=0,this.Fe=ny(),this.Me=Br.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Me(),n=Me(),o=Me();return this.Fe.forEach((u,d)=>{switch(d){case 0:t=t.add(u);break;case 2:n=n.add(u);break;case 1:o=o.add(u);break;default:ie(38017,{changeType:d})}}),new pu(this.Me,this.xe,t,n,o)}qe(){this.Oe=!1,this.Fe=ny()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,Je(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class ES{constructor(t){this.Ge=t,this.ze=new Map,this.je=Aa(),this.Je=vh(),this.He=vh(),this.Ye=new Fn(De)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,n=>{const o=this.nt(n);switch(t.state){case 0:this.rt(n)&&o.Le(t.resumeToken);break;case 1:o.Ke(),o.Ne||o.qe(),o.Le(t.resumeToken);break;case 2:o.Ke(),o.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(o.We(),o.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),o.Le(t.resumeToken));break;default:ie(56790,{state:t.state})}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach((o,u)=>{this.rt(u)&&n(u)})}st(t){const n=t.targetId,o=t.Ce.count,u=this.ot(n);if(u){const d=u.target;if(q1(d))if(o===0){const A=new te(d.path);this.et(n,A,Wr.newNoDocument(A,ce.min()))}else Je(o===1,20013,{expectedCount:o});else{const A=this._t(n);if(A!==o){const C=this.ut(t),_=C?this.ct(C,t,A):1;if(_!==0){this.it(n);const x=_===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,x)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:o="",padding:u=0},hashCount:d=0}=n;let A,C;try{A=uo(o).toUint8Array()}catch(_){if(_ instanceof Yx)return Hl("Decoding the base64 bloom filter in existence filter failed ("+_.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw _}try{C=new R0(A,u,d)}catch(_){return Hl(_ instanceof Xc?"BloomFilter error: ":"Applying bloom filter failed: ",_),null}return C.ge===0?null:C}ct(t,n,o){return n.Ce.count===o-this.Pt(t,n.targetId)?0:2}Pt(t,n){const o=this.Ge.getRemoteKeysForTarget(n);let u=0;return o.forEach(d=>{const A=this.Ge.ht(),C=`projects/${A.projectId}/databases/${A.database}/documents/${d.path.canonicalString()}`;t.mightContain(C)||(this.et(n,d,null),u++)}),u}Tt(t){const n=new Map;this.ze.forEach((d,A)=>{const C=this.ot(A);if(C){if(d.current&&q1(C.target)){const _=new te(C.target.path);this.It(_).has(A)||this.Et(A,_)||this.et(A,_,Wr.newNoDocument(_,t))}d.Be&&(n.set(A,d.ke()),d.qe())}});let o=Me();this.He.forEach((d,A)=>{let C=!0;A.forEachWhile(_=>{const x=this.ot(_);return!x||x.purpose==="TargetPurposeLimboResolution"||(C=!1,!1)}),C&&(o=o.add(d))}),this.je.forEach((d,A)=>A.setReadTime(t));const u=new wf(t,n,this.Ye,this.je,o);return this.je=Aa(),this.Je=vh(),this.He=vh(),this.Ye=new Fn(De),u}Xe(t,n){if(!this.rt(t))return;const o=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,o),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,o){if(!this.rt(t))return;const u=this.nt(t);this.Et(t,n)?u.Qe(n,1):u.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),o&&(this.je=this.je.insert(n,o))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new ey,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new yr(De),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new yr(De),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||Yt("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new ey),this.Ge.getRemoteKeysForTarget(t).forEach(n=>{this.et(t,n,null)})}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function vh(){return new Fn(te.comparator)}function ny(){return new Fn(te.comparator)}const AS={asc:"ASCENDING",desc:"DESCENDING"},wS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_S={and:"AND",or:"OR"};class TS{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function Q1(i,t){return i.useProto3Json||gf(t)?t:{value:t}}function Kh(i,t){return i.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function _E(i,t){return i.useProto3Json?t.toBase64():t.toUint8Array()}function CS(i,t){return Kh(i,t.toTimestamp())}function Vs(i){return Je(!!i,49232),ce.fromTimestamp(function(n){const o=co(n);return new An(o.seconds,o.nanos)}(i))}function N0(i,t){return W1(i,t).canonicalString()}function W1(i,t){const n=function(u){return new En(["projects",u.projectId,"databases",u.database])}(i).child("documents");return t===void 0?n:n.child(t)}function TE(i){const t=En.fromString(i);return Je(IE(t),10190,{key:t.toString()}),t}function K1(i,t){return N0(i.databaseId,t.path)}function b1(i,t){const n=TE(t);if(n.get(1)!==i.databaseId.projectId)throw new Gt(bt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new Gt(bt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new te(SE(n))}function CE(i,t){return N0(i.databaseId,t)}function SS(i){const t=TE(i);return t.length===4?En.emptyPath():SE(t)}function Z1(i){return new En(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function SE(i){return Je(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function ry(i,t,n){return{name:K1(i,t),fields:n.value.mapValue.fields}}function vS(i,t){let n;if("targetChange"in t){t.targetChange;const o=function(x){return x==="NO_CHANGE"?0:x==="ADD"?1:x==="REMOVE"?2:x==="CURRENT"?3:x==="RESET"?4:ie(39313,{state:x})}(t.targetChange.targetChangeType||"NO_CHANGE"),u=t.targetChange.targetIds||[],d=function(x,v){return x.useProto3Json?(Je(v===void 0||typeof v=="string",58123),Br.fromBase64String(v||"")):(Je(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),Br.fromUint8Array(v||new Uint8Array))}(i,t.targetChange.resumeToken),A=t.targetChange.cause,C=A&&function(x){const v=x.code===void 0?bt.UNKNOWN:EE(x.code);return new Gt(v,x.message||"")}(A);n=new wE(o,u,d,C||null)}else if("documentChange"in t){t.documentChange;const o=t.documentChange;o.document,o.document.name,o.document.updateTime;const u=b1(i,o.document.name),d=Vs(o.document.updateTime),A=o.document.createTime?Vs(o.document.createTime):ce.min(),C=new pi({mapValue:{fields:o.document.fields}}),_=Wr.newFoundDocument(u,d,A,C),x=o.targetIds||[],v=o.removedTargetIds||[];n=new Bh(x,v,_.key,_)}else if("documentDelete"in t){t.documentDelete;const o=t.documentDelete;o.document;const u=b1(i,o.document),d=o.readTime?Vs(o.readTime):ce.min(),A=Wr.newNoDocument(u,d),C=o.removedTargetIds||[];n=new Bh([],C,A.key,A)}else if("documentRemove"in t){t.documentRemove;const o=t.documentRemove;o.document;const u=b1(i,o.document),d=o.removedTargetIds||[];n=new Bh([],d,u,null)}else{if(!("filter"in t))return ie(11601,{Rt:t});{t.filter;const o=t.filter;o.targetId;const{count:u=0,unchangedNames:d}=o,A=new mS(u,d),C=o.targetId;n=new AE(C,A)}}return n}function bS(i,t){let n;if(t instanceof mu)n={update:ry(i,t.key,t.value)};else if(t instanceof b0)n={delete:K1(i,t.key)};else if(t instanceof Eo)n={update:ry(i,t.key,t.data),updateMask:PS(t.fieldMask)};else{if(!(t instanceof fS))return ie(16599,{Vt:t.type});n={verify:K1(i,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(o=>function(d,A){const C=A.transform;if(C instanceof lu)return{fieldPath:A.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(C instanceof cu)return{fieldPath:A.field.canonicalString(),appendMissingElements:{values:C.elements}};if(C instanceof uu)return{fieldPath:A.field.canonicalString(),removeAllFromArray:{values:C.elements}};if(C instanceof Wh)return{fieldPath:A.field.canonicalString(),increment:C.Ae};throw ie(20930,{transform:A.transform})}(0,o))),t.precondition.isNone||(n.currentDocument=function(u,d){return d.updateTime!==void 0?{updateTime:CS(u,d.updateTime)}:d.exists!==void 0?{exists:d.exists}:ie(27497)}(i,t.precondition)),n}function IS(i,t){return i&&i.length>0?(Je(t!==void 0,14353),i.map(n=>function(u,d){let A=u.updateTime?Vs(u.updateTime):Vs(d);return A.isEqual(ce.min())&&(A=Vs(d)),new cS(A,u.transformResults||[])}(n,t))):[]}function RS(i,t){return{documents:[CE(i,t.path)]}}function NS(i,t){const n={structuredQuery:{}},o=t.path;let u;t.collectionGroup!==null?(u=o,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(u=o.popLast(),n.structuredQuery.from=[{collectionId:o.lastSegment()}]),n.parent=CE(i,u);const d=function(x){if(x.length!==0)return bE(xs.create(x,"and"))}(t.filters);d&&(n.structuredQuery.where=d);const A=function(x){if(x.length!==0)return x.map(v=>function(O){return{field:Bl(O.field),direction:OS(O.dir)}}(v))}(t.orderBy);A&&(n.structuredQuery.orderBy=A);const C=Q1(i,t.limit);return C!==null&&(n.structuredQuery.limit=C),t.startAt&&(n.structuredQuery.startAt=function(x){return{before:x.inclusive,values:x.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(x){return{before:!x.inclusive,values:x.position}}(t.endAt)),{ft:n,parent:u}}function DS(i){let t=SS(i.parent);const n=i.structuredQuery,o=n.from?n.from.length:0;let u=null;if(o>0){Je(o===1,65062);const v=n.from[0];v.allDescendants?u=v.collectionId:t=t.child(v.collectionId)}let d=[];n.where&&(d=function(I){const O=vE(I);return O instanceof xs&&nE(O)?O.getFilters():[O]}(n.where));let A=[];n.orderBy&&(A=function(I){return I.map(O=>function(X){return new Qh(Pl(X.field),function(q){switch(q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(X.direction))}(O))}(n.orderBy));let C=null;n.limit&&(C=function(I){let O;return O=typeof I=="object"?I.value:I,gf(O)?null:O}(n.limit));let _=null;n.startAt&&(_=function(I){const O=!!I.before,H=I.values||[];return new Xh(H,O)}(n.startAt));let x=null;return n.endAt&&(x=function(I){const O=!I.before,H=I.values||[];return new Xh(H,O)}(n.endAt)),W3(t,u,A,d,C,"F",_,x)}function MS(i,t){const n=function(u){switch(u){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ie(28987,{purpose:u})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function vE(i){return i.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const o=Pl(n.unaryFilter.field);return ur.create(o,"==",{doubleValue:NaN});case"IS_NULL":const u=Pl(n.unaryFilter.field);return ur.create(u,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const d=Pl(n.unaryFilter.field);return ur.create(d,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const A=Pl(n.unaryFilter.field);return ur.create(A,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ie(61313);default:return ie(60726)}}(i):i.fieldFilter!==void 0?function(n){return ur.create(Pl(n.fieldFilter.field),function(u){switch(u){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ie(58110);default:return ie(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(n){return xs.create(n.compositeFilter.filters.map(o=>vE(o)),function(u){switch(u){case"AND":return"and";case"OR":return"or";default:return ie(1026)}}(n.compositeFilter.op))}(i):ie(30097,{filter:i})}function OS(i){return AS[i]}function LS(i){return wS[i]}function BS(i){return _S[i]}function Bl(i){return{fieldPath:i.canonicalString()}}function Pl(i){return Lr.fromServerFormat(i.fieldPath)}function bE(i){return i instanceof ur?function(n){if(n.op==="=="){if(G2(n.value))return{unaryFilter:{field:Bl(n.field),op:"IS_NAN"}};if(H2(n.value))return{unaryFilter:{field:Bl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(G2(n.value))return{unaryFilter:{field:Bl(n.field),op:"IS_NOT_NAN"}};if(H2(n.value))return{unaryFilter:{field:Bl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bl(n.field),op:LS(n.op),value:n.value}}}(i):i instanceof xs?function(n){const o=n.getFilters().map(u=>bE(u));return o.length===1?o[0]:{compositeFilter:{op:BS(n.op),filters:o}}}(i):ie(54877,{filter:i})}function PS(i){const t=[];return i.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function IE(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(t,n,o,u,d=ce.min(),A=ce.min(),C=Br.EMPTY_BYTE_STRING,_=null){this.target=t,this.targetId=n,this.purpose=o,this.sequenceNumber=u,this.snapshotVersion=d,this.lastLimboFreeSnapshotVersion=A,this.resumeToken=C,this.expectedCount=_}withSequenceNumber(t){return new no(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new no(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new no(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new no(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{constructor(t){this.yt=t}}function VS(i){const t=DS({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?X1(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(){this.Cn=new FS}addToCollectionParentIndex(t,n){return this.Cn.add(n),Nt.resolve()}getCollectionParents(t,n){return Nt.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return Nt.resolve()}deleteFieldIndex(t,n){return Nt.resolve()}deleteAllFieldIndexes(t){return Nt.resolve()}createTargetIndexes(t,n){return Nt.resolve()}getDocumentsMatchingTarget(t,n){return Nt.resolve(null)}getIndexType(t,n){return Nt.resolve(0)}getFieldIndexes(t,n){return Nt.resolve([])}getNextCollectionGroupToUpdate(t){return Nt.resolve(null)}getMinOffset(t,n){return Nt.resolve(lo.min())}getMinOffsetFromCollectionGroup(t,n){return Nt.resolve(lo.min())}updateCollectionGroup(t,n,o){return Nt.resolve()}updateIndexEntries(t,n){return Nt.resolve()}}class FS{constructor(){this.index={}}add(t){const n=t.lastSegment(),o=t.popLast(),u=this.index[n]||new yr(En.comparator),d=!u.has(o);return this.index[n]=u.add(o),d}has(t){const n=t.lastSegment(),o=t.popLast(),u=this.index[n];return u&&u.has(o)}getEntries(t){return(this.index[t]||new yr(En.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},RE=41943040;class mi{static withCacheSize(t){return new mi(t,mi.DEFAULT_COLLECTION_PERCENTILE,mi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,o){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */mi.DEFAULT_COLLECTION_PERCENTILE=10,mi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,mi.DEFAULT=new mi(RE,mi.DEFAULT_COLLECTION_PERCENTILE,mi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),mi.DISABLED=new mi(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new Xl(0)}static cr(){return new Xl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sy="LruGarbageCollector",jS=1048576;function ay([i,t],[n,o]){const u=De(i,n);return u===0?De(t,o):u}class zS{constructor(t){this.Ir=t,this.buffer=new yr(ay),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const o=this.buffer.last();ay(n,o)<0&&(this.buffer=this.buffer.delete(o).add(n))}}get maxValue(){return this.buffer.last()[0]}}class HS{constructor(t,n,o){this.garbageCollector=t,this.asyncQueue=n,this.localStore=o,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){Yt(sy,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){tc(n)?Yt(sy,"Ignoring IndexedDB error during garbage collection: ",n):await $l(n)}await this.Vr(3e5)})}}class GS{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next(o=>Math.floor(n/100*o))}nthSequenceNumber(t,n){if(n===0)return Nt.resolve(df.ce);const o=new zS(n);return this.mr.forEachTarget(t,u=>o.Ar(u.sequenceNumber)).next(()=>this.mr.pr(t,u=>o.Ar(u))).next(()=>o.maxValue)}removeTargets(t,n,o){return this.mr.removeTargets(t,n,o)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(Yt("LruGarbageCollector","Garbage collection skipped; disabled"),Nt.resolve(iy)):this.getCacheSize(t).next(o=>o<this.params.cacheSizeCollectionThreshold?(Yt("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),iy):this.yr(t,n))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let o,u,d,A,C,_,x;const v=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(I=>(I>this.params.maximumSequenceNumbersToCollect?(Yt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${I}`),u=this.params.maximumSequenceNumbersToCollect):u=I,A=Date.now(),this.nthSequenceNumber(t,u))).next(I=>(o=I,C=Date.now(),this.removeTargets(t,o,n))).next(I=>(d=I,_=Date.now(),this.removeOrphanedDocuments(t,o))).next(I=>(x=Date.now(),Ol()<=Ve.DEBUG&&Yt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${A-v}ms
	Determined least recently used ${u} in `+(C-A)+`ms
	Removed ${d} targets in `+(_-C)+`ms
	Removed ${I} documents in `+(x-_)+`ms
Total Duration: ${x-v}ms`),Nt.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:d,documentsRemoved:I})))}}function qS(i,t){return new GS(i,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(){this.changes=new Wo(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Wr.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const o=this.changes.get(n);return o!==void 0?Nt.resolve(o):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(t,n,o,u){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=o,this.indexManager=u}getDocument(t,n){let o=null;return this.documentOverlayCache.getOverlay(t,n).next(u=>(o=u,this.remoteDocumentCache.getEntry(t,n))).next(u=>(o!==null&&tu(o.mutation,u,ki.empty(),An.now()),u))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(o=>this.getLocalViewOfDocuments(t,o,Me()).next(()=>o))}getLocalViewOfDocuments(t,n,o=Me()){const u=Uo();return this.populateOverlays(t,u,n).next(()=>this.computeViews(t,n,u,o).next(d=>{let A=Yc();return d.forEach((C,_)=>{A=A.insert(C,_.overlayedDocument)}),A}))}getOverlayedDocuments(t,n){const o=Uo();return this.populateOverlays(t,o,n).next(()=>this.computeViews(t,n,o,Me()))}populateOverlays(t,n,o){const u=[];return o.forEach(d=>{n.has(d)||u.push(d)}),this.documentOverlayCache.getOverlays(t,u).next(d=>{d.forEach((A,C)=>{n.set(A,C)})})}computeViews(t,n,o,u){let d=Aa();const A=$c(),C=function(){return $c()}();return n.forEach((_,x)=>{const v=o.get(x.key);u.has(x.key)&&(v===void 0||v.mutation instanceof Eo)?d=d.insert(x.key,x):v!==void 0?(A.set(x.key,v.mutation.getFieldMask()),tu(v.mutation,x,v.mutation.getFieldMask(),An.now())):A.set(x.key,ki.empty())}),this.recalculateAndSaveOverlays(t,d).next(_=>(_.forEach((x,v)=>A.set(x,v)),n.forEach((x,v)=>C.set(x,new XS(v,A.get(x)??null))),C))}recalculateAndSaveOverlays(t,n){const o=$c();let u=new Fn((A,C)=>A-C),d=Me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(A=>{for(const C of A)C.keys().forEach(_=>{const x=n.get(_);if(x===null)return;let v=o.get(_)||ki.empty();v=C.applyToLocalView(x,v),o.set(_,v);const I=(u.get(C.batchId)||Me()).add(_);u=u.insert(C.batchId,I)})}).next(()=>{const A=[],C=u.getReverseIterator();for(;C.hasNext();){const _=C.getNext(),x=_.key,v=_.value,I=hE();v.forEach(O=>{if(!d.has(O)){const H=yE(n.get(O),o.get(O));H!==null&&I.set(O,H),d=d.add(O)}}),A.push(this.documentOverlayCache.saveOverlays(t,x,I))}return Nt.waitFor(A)}).next(()=>o)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(o=>this.recalculateAndSaveOverlays(t,o))}getDocumentsMatchingQuery(t,n,o,u){return function(A){return te.isDocumentKey(A.path)&&A.collectionGroup===null&&A.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):aE(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,o,u):this.getDocumentsMatchingCollectionQuery(t,n,o,u)}getNextDocuments(t,n,o,u){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,o,u).next(d=>{const A=u-d.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,o.largestBatchId,u-d.size):Nt.resolve(Uo());let C=iu,_=d;return A.next(x=>Nt.forEach(x,(v,I)=>(C<I.largestBatchId&&(C=I.largestBatchId),d.get(v)?Nt.resolve():this.remoteDocumentCache.getEntry(t,v).next(O=>{_=_.insert(v,O)}))).next(()=>this.populateOverlays(t,x,d)).next(()=>this.computeViews(t,_,x,Me())).next(v=>({batchId:C,changes:uE(v)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new te(n)).next(o=>{let u=Yc();return o.isFoundDocument()&&(u=u.insert(o.key,o)),u})}getDocumentsMatchingCollectionGroupQuery(t,n,o,u){const d=n.collectionGroup;let A=Yc();return this.indexManager.getCollectionParents(t,d).next(C=>Nt.forEach(C,_=>{const x=function(I,O){return new gu(O,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt)}(n,_.child(d));return this.getDocumentsMatchingCollectionQuery(t,x,o,u).next(v=>{v.forEach((I,O)=>{A=A.insert(I,O)})})}).next(()=>A))}getDocumentsMatchingCollectionQuery(t,n,o,u){let d;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,o.largestBatchId).next(A=>(d=A,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,o,d,u))).next(A=>{d.forEach((_,x)=>{const v=x.getKey();A.get(v)===null&&(A=A.insert(v,Wr.newInvalidDocument(v)))});let C=Yc();return A.forEach((_,x)=>{const v=d.get(_);v!==void 0&&tu(v.mutation,x,ki.empty(),An.now()),xf(n,x)&&(C=C.insert(_,x))}),C})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return Nt.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,function(u){return{id:u.id,version:u.version,createTime:Vs(u.createTime)}}(n)),Nt.resolve()}getNamedQuery(t,n){return Nt.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,function(u){return{name:u.name,query:VS(u.bundledQuery),readTime:Vs(u.readTime)}}(n)),Nt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(){this.overlays=new Fn(te.comparator),this.qr=new Map}getOverlay(t,n){return Nt.resolve(this.overlays.get(n))}getOverlays(t,n){const o=Uo();return Nt.forEach(n,u=>this.getOverlay(t,u).next(d=>{d!==null&&o.set(u,d)})).next(()=>o)}saveOverlays(t,n,o){return o.forEach((u,d)=>{this.St(t,n,d)}),Nt.resolve()}removeOverlaysForBatchId(t,n,o){const u=this.qr.get(o);return u!==void 0&&(u.forEach(d=>this.overlays=this.overlays.remove(d)),this.qr.delete(o)),Nt.resolve()}getOverlaysForCollection(t,n,o){const u=Uo(),d=n.length+1,A=new te(n.child("")),C=this.overlays.getIteratorFrom(A);for(;C.hasNext();){const _=C.getNext().value,x=_.getKey();if(!n.isPrefixOf(x.path))break;x.path.length===d&&_.largestBatchId>o&&u.set(_.getKey(),_)}return Nt.resolve(u)}getOverlaysForCollectionGroup(t,n,o,u){let d=new Fn((x,v)=>x-v);const A=this.overlays.getIterator();for(;A.hasNext();){const x=A.getNext().value;if(x.getKey().getCollectionGroup()===n&&x.largestBatchId>o){let v=d.get(x.largestBatchId);v===null&&(v=Uo(),d=d.insert(x.largestBatchId,v)),v.set(x.getKey(),x)}}const C=Uo(),_=d.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((x,v)=>C.set(x,v)),!(C.size()>=u)););return Nt.resolve(C)}St(t,n,o){const u=this.overlays.get(o.key);if(u!==null){const A=this.qr.get(u.largestBatchId).delete(o.key);this.qr.set(u.largestBatchId,A)}this.overlays=this.overlays.insert(o.key,new gS(n,o));let d=this.qr.get(n);d===void 0&&(d=Me(),this.qr.set(n,d)),this.qr.set(n,d.add(o.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(){this.sessionToken=Br.EMPTY_BYTE_STRING}getSessionToken(t){return Nt.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,Nt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0{constructor(){this.Qr=new yr(_r.$r),this.Ur=new yr(_r.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const o=new _r(t,n);this.Qr=this.Qr.add(o),this.Ur=this.Ur.add(o)}Wr(t,n){t.forEach(o=>this.addReference(o,n))}removeReference(t,n){this.Gr(new _r(t,n))}zr(t,n){t.forEach(o=>this.removeReference(o,n))}jr(t){const n=new te(new En([])),o=new _r(n,t),u=new _r(n,t+1),d=[];return this.Ur.forEachInRange([o,u],A=>{this.Gr(A),d.push(A.key)}),d}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new te(new En([])),o=new _r(n,t),u=new _r(n,t+1);let d=Me();return this.Ur.forEachInRange([o,u],A=>{d=d.add(A.key)}),d}containsKey(t){const n=new _r(t,0),o=this.Qr.firstAfterOrEqual(n);return o!==null&&t.isEqual(o.key)}}class _r{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return te.comparator(t.key,n.key)||De(t.Yr,n.Yr)}static Kr(t,n){return De(t.Yr,n.Yr)||te.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new yr(_r.$r)}checkEmpty(t){return Nt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,o,u){const d=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const A=new dS(d,n,o,u);this.mutationQueue.push(A);for(const C of u)this.Zr=this.Zr.add(new _r(C.key,d)),this.indexManager.addToCollectionParentIndex(t,C.key.path.popLast());return Nt.resolve(A)}lookupMutationBatch(t,n){return Nt.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const o=n+1,u=this.ei(o),d=u<0?0:u;return Nt.resolve(this.mutationQueue.length>d?this.mutationQueue[d]:null)}getHighestUnacknowledgedBatchId(){return Nt.resolve(this.mutationQueue.length===0?w0:this.tr-1)}getAllMutationBatches(t){return Nt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const o=new _r(n,0),u=new _r(n,Number.POSITIVE_INFINITY),d=[];return this.Zr.forEachInRange([o,u],A=>{const C=this.Xr(A.Yr);d.push(C)}),Nt.resolve(d)}getAllMutationBatchesAffectingDocumentKeys(t,n){let o=new yr(De);return n.forEach(u=>{const d=new _r(u,0),A=new _r(u,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([d,A],C=>{o=o.add(C.Yr)})}),Nt.resolve(this.ti(o))}getAllMutationBatchesAffectingQuery(t,n){const o=n.path,u=o.length+1;let d=o;te.isDocumentKey(d)||(d=d.child(""));const A=new _r(new te(d),0);let C=new yr(De);return this.Zr.forEachWhile(_=>{const x=_.key.path;return!!o.isPrefixOf(x)&&(x.length===u&&(C=C.add(_.Yr)),!0)},A),Nt.resolve(this.ti(C))}ti(t){const n=[];return t.forEach(o=>{const u=this.Xr(o);u!==null&&n.push(u)}),n}removeMutationBatch(t,n){Je(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let o=this.Zr;return Nt.forEach(n.mutations,u=>{const d=new _r(u.key,n.batchId);return o=o.delete(d),this.referenceDelegate.markPotentiallyOrphaned(t,u.key)}).next(()=>{this.Zr=o})}ir(t){}containsKey(t,n){const o=new _r(n,0),u=this.Zr.firstAfterOrEqual(o);return Nt.resolve(n.isEqual(u&&u.key))}performConsistencyCheck(t){return this.mutationQueue.length,Nt.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(t){this.ri=t,this.docs=function(){return new Fn(te.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const o=n.key,u=this.docs.get(o),d=u?u.size:0,A=this.ri(n);return this.docs=this.docs.insert(o,{document:n.mutableCopy(),size:A}),this.size+=A-d,this.indexManager.addToCollectionParentIndex(t,o.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const o=this.docs.get(n);return Nt.resolve(o?o.document.mutableCopy():Wr.newInvalidDocument(n))}getEntries(t,n){let o=Aa();return n.forEach(u=>{const d=this.docs.get(u);o=o.insert(u,d?d.document.mutableCopy():Wr.newInvalidDocument(u))}),Nt.resolve(o)}getDocumentsMatchingQuery(t,n,o,u){let d=Aa();const A=n.path,C=new te(A.child("__id-9223372036854775808__")),_=this.docs.getIteratorFrom(C);for(;_.hasNext();){const{key:x,value:{document:v}}=_.getNext();if(!A.isPrefixOf(x.path))break;x.path.length>A.length+1||b3(v3(v),o)<=0||(u.has(v.key)||xf(n,v))&&(d=d.insert(v.key,v.mutableCopy()))}return Nt.resolve(d)}getAllFromCollectionGroup(t,n,o,u){ie(9500)}ii(t,n){return Nt.forEach(this.docs,o=>n(o))}newChangeBuffer(t){return new tv(this)}getSize(t){return Nt.resolve(this.size)}}class tv extends YS{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach((o,u)=>{u.isValidDocument()?n.push(this.Nr.addEntry(t,u)):this.Nr.removeEntry(o)}),Nt.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(t){this.persistence=t,this.si=new Wo(n=>C0(n),S0),this.lastRemoteSnapshotVersion=ce.min(),this.highestTargetId=0,this.oi=0,this._i=new D0,this.targetCount=0,this.ai=Xl.ur()}forEachTarget(t,n){return this.si.forEach((o,u)=>n(u)),Nt.resolve()}getLastRemoteSnapshotVersion(t){return Nt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Nt.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),Nt.resolve(this.highestTargetId)}setTargetsMetadata(t,n,o){return o&&(this.lastRemoteSnapshotVersion=o),n>this.oi&&(this.oi=n),Nt.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new Xl(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,Nt.resolve()}updateTargetData(t,n){return this.Pr(n),Nt.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,Nt.resolve()}removeTargets(t,n,o){let u=0;const d=[];return this.si.forEach((A,C)=>{C.sequenceNumber<=n&&o.get(C.targetId)===null&&(this.si.delete(A),d.push(this.removeMatchingKeysForTargetId(t,C.targetId)),u++)}),Nt.waitFor(d).next(()=>u)}getTargetCount(t){return Nt.resolve(this.targetCount)}getTargetData(t,n){const o=this.si.get(n)||null;return Nt.resolve(o)}addMatchingKeys(t,n,o){return this._i.Wr(n,o),Nt.resolve()}removeMatchingKeys(t,n,o){this._i.zr(n,o);const u=this.persistence.referenceDelegate,d=[];return u&&n.forEach(A=>{d.push(u.markPotentiallyOrphaned(t,A))}),Nt.waitFor(d)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),Nt.resolve()}getMatchingKeysForTargetId(t,n){const o=this._i.Hr(n);return Nt.resolve(o)}containsKey(t,n){return Nt.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(t,n){this.ui={},this.overlays={},this.ci=new df(0),this.li=!1,this.li=!0,this.hi=new ZS,this.referenceDelegate=t(this),this.Pi=new ev(this),this.indexManager=new US,this.remoteDocumentCache=function(u){return new $S(u)}(o=>this.referenceDelegate.Ti(o)),this.serializer=new kS(n),this.Ii=new WS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new KS,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let o=this.ui[t.toKey()];return o||(o=new JS(n,this.referenceDelegate),this.ui[t.toKey()]=o),o}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,o){Yt("MemoryPersistence","Starting transaction:",t);const u=new nv(this.ci.next());return this.referenceDelegate.Ei(),o(u).next(d=>this.referenceDelegate.di(u).next(()=>d)).toPromise().then(d=>(u.raiseOnCommittedEvent(),d))}Ai(t,n){return Nt.or(Object.values(this.ui).map(o=>()=>o.containsKey(t,n)))}}class nv extends R3{constructor(t){super(),this.currentSequenceNumber=t}}class M0{constructor(t){this.persistence=t,this.Ri=new D0,this.Vi=null}static mi(t){return new M0(t)}get fi(){if(this.Vi)return this.Vi;throw ie(60996)}addReference(t,n,o){return this.Ri.addReference(o,n),this.fi.delete(o.toString()),Nt.resolve()}removeReference(t,n,o){return this.Ri.removeReference(o,n),this.fi.add(o.toString()),Nt.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),Nt.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach(u=>this.fi.add(u.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(t,n.targetId).next(u=>{u.forEach(d=>this.fi.add(d.toString()))}).next(()=>o.removeTargetData(t,n))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Nt.forEach(this.fi,o=>{const u=te.fromPath(o);return this.gi(t,u).next(d=>{d||n.removeEntry(u,ce.min())})}).next(()=>(this.Vi=null,n.apply(t)))}updateLimboDocument(t,n){return this.gi(t,n).next(o=>{o?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(t){return 0}gi(t,n){return Nt.or([()=>Nt.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class Zh{constructor(t,n){this.persistence=t,this.pi=new Wo(o=>M3(o.path),(o,u)=>o.isEqual(u)),this.garbageCollector=qS(this,n)}static mi(t,n){return new Zh(t,n)}Ei(){}di(t){return Nt.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(o=>n.next(u=>o+u))}wr(t){let n=0;return this.pr(t,o=>{n++}).next(()=>n)}pr(t,n){return Nt.forEach(this.pi,(o,u)=>this.br(t,o,u).next(d=>d?Nt.resolve():n(u)))}removeTargets(t,n,o){return this.persistence.getTargetCache().removeTargets(t,n,o)}removeOrphanedDocuments(t,n){let o=0;const u=this.persistence.getRemoteDocumentCache(),d=u.newChangeBuffer();return u.ii(t,A=>this.br(t,A,n).next(C=>{C||(o++,d.removeEntry(A,ce.min()))})).next(()=>d.apply(t)).next(()=>o)}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),Nt.resolve()}removeTarget(t,n){const o=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,o)}addReference(t,n,o){return this.pi.set(o,t.currentSequenceNumber),Nt.resolve()}removeReference(t,n,o){return this.pi.set(o,t.currentSequenceNumber),Nt.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),Nt.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=Mh(t.data.value)),n}br(t,n,o){return Nt.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const u=this.pi.get(n);return Nt.resolve(u!==void 0&&u>o)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0{constructor(t,n,o,u){this.targetId=t,this.fromCache=n,this.Es=o,this.ds=u}static As(t,n){let o=Me(),u=Me();for(const d of n.docChanges)switch(d.type){case 0:o=o.add(d.doc.key);break;case 1:u=u.add(d.doc.key)}return new O0(t,n.fromCache,o,u)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rv{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return JT()?8:N3(KT())>0?6:4}()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,o,u){const d={result:null};return this.ys(t,n).next(A=>{d.result=A}).next(()=>{if(!d.result)return this.ws(t,n,u,o).next(A=>{d.result=A})}).next(()=>{if(d.result)return;const A=new rv;return this.Ss(t,n,A).next(C=>{if(d.result=C,this.Vs)return this.bs(t,n,A,C.size)})}).next(()=>d.result)}bs(t,n,o,u){return o.documentReadCount<this.fs?(Ol()<=Ve.DEBUG&&Yt("QueryEngine","SDK will not create cache indexes for query:",Ll(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Nt.resolve()):(Ol()<=Ve.DEBUG&&Yt("QueryEngine","Query:",Ll(n),"scans",o.documentReadCount,"local documents and returns",u,"documents as results."),o.documentReadCount>this.gs*u?(Ol()<=Ve.DEBUG&&Yt("QueryEngine","The SDK decides to create cache indexes for query:",Ll(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,ks(n))):Nt.resolve())}ys(t,n){if(Q2(n))return Nt.resolve(null);let o=ks(n);return this.indexManager.getIndexType(t,o).next(u=>u===0?null:(n.limit!==null&&u===1&&(n=X1(n,null,"F"),o=ks(n)),this.indexManager.getDocumentsMatchingTarget(t,o).next(d=>{const A=Me(...d);return this.ps.getDocuments(t,A).next(C=>this.indexManager.getMinOffset(t,o).next(_=>{const x=this.Ds(n,C);return this.Cs(n,x,A,_.readTime)?this.ys(t,X1(n,null,"F")):this.vs(t,x,n,_)}))})))}ws(t,n,o,u){return Q2(n)||u.isEqual(ce.min())?Nt.resolve(null):this.ps.getDocuments(t,o).next(d=>{const A=this.Ds(n,d);return this.Cs(n,A,o,u)?Nt.resolve(null):(Ol()<=Ve.DEBUG&&Yt("QueryEngine","Re-using previous result from %s to execute query: %s",u.toString(),Ll(n)),this.vs(t,A,n,S3(u,iu)).next(C=>C))})}Ds(t,n){let o=new yr(lE(t));return n.forEach((u,d)=>{xf(t,d)&&(o=o.add(d))}),o}Cs(t,n,o,u){if(t.limit===null)return!1;if(o.size!==n.size)return!0;const d=t.limitType==="F"?n.last():n.first();return!!d&&(d.hasPendingWrites||d.version.compareTo(u)>0)}Ss(t,n,o){return Ol()<=Ve.DEBUG&&Yt("QueryEngine","Using full collection scan to execute query:",Ll(n)),this.ps.getDocumentsMatchingQuery(t,n,lo.min(),o)}vs(t,n,o,u){return this.ps.getDocumentsMatchingQuery(t,o,u).next(d=>(n.forEach(A=>{d=d.insert(A.key,A)}),d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L0="LocalStore",sv=3e8;class av{constructor(t,n,o,u){this.persistence=t,this.Fs=n,this.serializer=u,this.Ms=new Fn(De),this.xs=new Wo(d=>C0(d),S0),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(o)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new QS(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.Ms))}}function ov(i,t,n,o){return new av(i,t,n,o)}async function DE(i,t){const n=he(i);return await n.persistence.runTransaction("Handle user change","readonly",o=>{let u;return n.mutationQueue.getAllMutationBatches(o).next(d=>(u=d,n.Bs(t),n.mutationQueue.getAllMutationBatches(o))).next(d=>{const A=[],C=[];let _=Me();for(const x of u){A.push(x.batchId);for(const v of x.mutations)_=_.add(v.key)}for(const x of d){C.push(x.batchId);for(const v of x.mutations)_=_.add(v.key)}return n.localDocuments.getDocuments(o,_).next(x=>({Ls:x,removedBatchIds:A,addedBatchIds:C}))})})}function lv(i,t){const n=he(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const u=t.batch.keys(),d=n.Ns.newChangeBuffer({trackRemovals:!0});return function(C,_,x,v){const I=x.batch,O=I.keys();let H=Nt.resolve();return O.forEach(X=>{H=H.next(()=>v.getEntry(_,X)).next(J=>{const q=x.docVersions.get(X);Je(q!==null,48541),J.version.compareTo(q)<0&&(I.applyToRemoteDocument(J,x),J.isValidDocument()&&(J.setReadTime(x.commitVersion),v.addEntry(J)))})}),H.next(()=>C.mutationQueue.removeMutationBatch(_,I))}(n,o,t,d).next(()=>d.apply(o)).next(()=>n.mutationQueue.performConsistencyCheck(o)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(o,u,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,function(C){let _=Me();for(let x=0;x<C.mutationResults.length;++x)C.mutationResults[x].transformResults.length>0&&(_=_.add(C.batch.mutations[x].key));return _}(t))).next(()=>n.localDocuments.getDocuments(o,u))})}function ME(i){const t=he(i);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Pi.getLastRemoteSnapshotVersion(n))}function cv(i,t){const n=he(i),o=t.snapshotVersion;let u=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",d=>{const A=n.Ns.newChangeBuffer({trackRemovals:!0});u=n.Ms;const C=[];t.targetChanges.forEach((v,I)=>{const O=u.get(I);if(!O)return;C.push(n.Pi.removeMatchingKeys(d,v.removedDocuments,I).next(()=>n.Pi.addMatchingKeys(d,v.addedDocuments,I)));let H=O.withSequenceNumber(d.currentSequenceNumber);t.targetMismatches.get(I)!==null?H=H.withResumeToken(Br.EMPTY_BYTE_STRING,ce.min()).withLastLimboFreeSnapshotVersion(ce.min()):v.resumeToken.approximateByteSize()>0&&(H=H.withResumeToken(v.resumeToken,o)),u=u.insert(I,H),function(J,q,Q){return J.resumeToken.approximateByteSize()===0||q.snapshotVersion.toMicroseconds()-J.snapshotVersion.toMicroseconds()>=sv?!0:Q.addedDocuments.size+Q.modifiedDocuments.size+Q.removedDocuments.size>0}(O,H,v)&&C.push(n.Pi.updateTargetData(d,H))});let _=Aa(),x=Me();if(t.documentUpdates.forEach(v=>{t.resolvedLimboDocuments.has(v)&&C.push(n.persistence.referenceDelegate.updateLimboDocument(d,v))}),C.push(uv(d,A,t.documentUpdates).next(v=>{_=v.ks,x=v.qs})),!o.isEqual(ce.min())){const v=n.Pi.getLastRemoteSnapshotVersion(d).next(I=>n.Pi.setTargetsMetadata(d,d.currentSequenceNumber,o));C.push(v)}return Nt.waitFor(C).next(()=>A.apply(d)).next(()=>n.localDocuments.getLocalViewOfDocuments(d,_,x)).next(()=>_)}).then(d=>(n.Ms=u,d))}function uv(i,t,n){let o=Me(),u=Me();return n.forEach(d=>o=o.add(d)),t.getEntries(i,o).next(d=>{let A=Aa();return n.forEach((C,_)=>{const x=d.get(C);_.isFoundDocument()!==x.isFoundDocument()&&(u=u.add(C)),_.isNoDocument()&&_.version.isEqual(ce.min())?(t.removeEntry(C,_.readTime),A=A.insert(C,_)):!x.isValidDocument()||_.version.compareTo(x.version)>0||_.version.compareTo(x.version)===0&&x.hasPendingWrites?(t.addEntry(_),A=A.insert(C,_)):Yt(L0,"Ignoring outdated watch update for ",C,". Current version:",x.version," Watch version:",_.version)}),{ks:A,qs:u}})}function hv(i,t){const n=he(i);return n.persistence.runTransaction("Get next mutation batch","readonly",o=>(t===void 0&&(t=w0),n.mutationQueue.getNextMutationBatchAfterBatchId(o,t)))}function fv(i,t){const n=he(i);return n.persistence.runTransaction("Allocate target","readwrite",o=>{let u;return n.Pi.getTargetData(o,t).next(d=>d?(u=d,Nt.resolve(u)):n.Pi.allocateTargetId(o).next(A=>(u=new no(t,A,"TargetPurposeListen",o.currentSequenceNumber),n.Pi.addTargetData(o,u).next(()=>u))))}).then(o=>{const u=n.Ms.get(o.targetId);return(u===null||o.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(o.targetId,o),n.xs.set(t,o.targetId)),o})}async function J1(i,t,n){const o=he(i),u=o.Ms.get(t),d=n?"readwrite":"readwrite-primary";try{n||await o.persistence.runTransaction("Release target",d,A=>o.persistence.referenceDelegate.removeTarget(A,u))}catch(A){if(!tc(A))throw A;Yt(L0,`Failed to update sequence numbers for target ${t}: ${A}`)}o.Ms=o.Ms.remove(t),o.xs.delete(u.target)}function oy(i,t,n){const o=he(i);let u=ce.min(),d=Me();return o.persistence.runTransaction("Execute query","readwrite",A=>function(_,x,v){const I=he(_),O=I.xs.get(v);return O!==void 0?Nt.resolve(I.Ms.get(O)):I.Pi.getTargetData(x,v)}(o,A,ks(t)).next(C=>{if(C)return u=C.lastLimboFreeSnapshotVersion,o.Pi.getMatchingKeysForTargetId(A,C.targetId).next(_=>{d=_})}).next(()=>o.Fs.getDocumentsMatchingQuery(A,t,n?u:ce.min(),n?d:Me())).next(C=>(dv(o,Z3(t),C),{documents:C,Qs:d})))}function dv(i,t,n){let o=i.Os.get(t)||ce.min();n.forEach((u,d)=>{d.readTime.compareTo(o)>0&&(o=d.readTime)}),i.Os.set(t,o)}class ly{constructor(){this.activeTargetIds=rS()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class gv{constructor(){this.Mo=new ly,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,o){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,o){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new ly,Promise.resolve()}handleUserChange(t,n,o){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mv{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cy="ConnectivityMonitor";class uy{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Yt(cy,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){Yt(cy,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bh=null;function $1(){return bh===null?bh=function(){return 268435456+Math.round(2147483648*Math.random())}():bh++,"0x"+bh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I1="RestConnection",pv={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class yv{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),u=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${o}/databases/${u}`,this.Wo=this.databaseId.database===qh?`project_id=${o}`:`project_id=${o}&database_id=${u}`}Go(t,n,o,u,d){const A=$1(),C=this.zo(t,n.toUriEncodedString());Yt(I1,`Sending RPC '${t}' ${A}:`,C,o);const _={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(_,u,d);const{host:x}=new URL(C),v=uf(x);return this.Jo(t,C,_,o,v).then(I=>(Yt(I1,`Received RPC '${t}' ${A}: `,I),I),I=>{throw Hl(I1,`RPC '${t}' ${A} failed with error: `,I,"url: ",C,"request:",o),I})}Ho(t,n,o,u,d,A){return this.Go(t,n,o,u,d)}jo(t,n,o){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Jl}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((u,d)=>t[d]=u),o&&o.headers.forEach((u,d)=>t[d]=u)}zo(t,n){const o=pv[t];return`${this.Uo}/v1/${n}:${o}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xv{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xr="WebChannelConnection";class Ev extends yv{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,o,u,d){const A=$1();return new Promise((C,_)=>{const x=new Bx;x.setWithCredentials(!0),x.listenOnce(Px.COMPLETE,()=>{try{switch(x.getLastErrorCode()){case Dh.NO_ERROR:const I=x.getResponseJson();Yt(Xr,`XHR for RPC '${t}' ${A} received:`,JSON.stringify(I)),C(I);break;case Dh.TIMEOUT:Yt(Xr,`RPC '${t}' ${A} timed out`),_(new Gt(bt.DEADLINE_EXCEEDED,"Request time out"));break;case Dh.HTTP_ERROR:const O=x.getStatus();if(Yt(Xr,`RPC '${t}' ${A} failed with status:`,O,"response text:",x.getResponseText()),O>0){let H=x.getResponseJson();Array.isArray(H)&&(H=H[0]);const X=H?.error;if(X&&X.status&&X.message){const J=function(Q){const ft=Q.toLowerCase().replace(/_/g,"-");return Object.values(bt).indexOf(ft)>=0?ft:bt.UNKNOWN}(X.status);_(new Gt(J,X.message))}else _(new Gt(bt.UNKNOWN,"Server responded with status "+x.getStatus()))}else _(new Gt(bt.UNAVAILABLE,"Connection failed."));break;default:ie(9055,{l_:t,streamId:A,h_:x.getLastErrorCode(),P_:x.getLastError()})}}finally{Yt(Xr,`RPC '${t}' ${A} completed.`)}});const v=JSON.stringify(u);Yt(Xr,`RPC '${t}' ${A} sending request:`,u),x.send(n,"POST",v,o,15)})}T_(t,n,o){const u=$1(),d=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],A=Ux(),C=Vx(),_={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},x=this.longPollingOptions.timeoutSeconds;x!==void 0&&(_.longPollingTimeout=Math.round(1e3*x)),this.useFetchStreams&&(_.useFetchStreams=!0),this.jo(_.initMessageHeaders,n,o),_.encodeInitMessageHeaders=!0;const v=d.join("");Yt(Xr,`Creating RPC '${t}' stream ${u}: ${v}`,_);const I=A.createWebChannel(v,_);this.I_(I);let O=!1,H=!1;const X=new xv({Yo:q=>{H?Yt(Xr,`Not sending because RPC '${t}' stream ${u} is closed:`,q):(O||(Yt(Xr,`Opening RPC '${t}' stream ${u} transport.`),I.open(),O=!0),Yt(Xr,`RPC '${t}' stream ${u} sending:`,q),I.send(q))},Zo:()=>I.close()}),J=(q,Q,ft)=>{q.listen(Q,nt=>{try{ft(nt)}catch(_t){setTimeout(()=>{throw _t},0)}})};return J(I,qc.EventType.OPEN,()=>{H||(Yt(Xr,`RPC '${t}' stream ${u} transport opened.`),X.o_())}),J(I,qc.EventType.CLOSE,()=>{H||(H=!0,Yt(Xr,`RPC '${t}' stream ${u} transport closed`),X.a_(),this.E_(I))}),J(I,qc.EventType.ERROR,q=>{H||(H=!0,Hl(Xr,`RPC '${t}' stream ${u} transport errored. Name:`,q.name,"Message:",q.message),X.a_(new Gt(bt.UNAVAILABLE,"The operation could not be completed")))}),J(I,qc.EventType.MESSAGE,q=>{if(!H){const Q=q.data[0];Je(!!Q,16349);const ft=Q,nt=ft?.error||ft[0]?.error;if(nt){Yt(Xr,`RPC '${t}' stream ${u} received error:`,nt);const _t=nt.status;let mt=function(F){const k=cr[F];if(k!==void 0)return EE(k)}(_t),Tt=nt.message;mt===void 0&&(mt=bt.INTERNAL,Tt="Unknown error status: "+_t+" with message "+nt.message),H=!0,X.a_(new Gt(mt,Tt)),I.close()}else Yt(Xr,`RPC '${t}' stream ${u} received:`,Q),X.u_(Q)}}),J(C,kx.STAT_EVENT,q=>{q.stat===F1.PROXY?Yt(Xr,`RPC '${t}' stream ${u} detected buffering proxy`):q.stat===F1.NOPROXY&&Yt(Xr,`RPC '${t}' stream ${u} detected no buffering proxy`)}),setTimeout(()=>{X.__()},0),X}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(n=>n===t)}}function R1(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _f(i){return new TS(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE{constructor(t,n,o=1e3,u=1.5,d=6e4){this.Mi=t,this.timerId=n,this.d_=o,this.A_=u,this.R_=d,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),o=Math.max(0,Date.now()-this.f_),u=Math.max(0,n-o);u>0&&Yt("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${o} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,u,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hy="PersistentStream";class LE{constructor(t,n,o,u,d,A,C,_){this.Mi=t,this.S_=o,this.b_=u,this.connection=d,this.authCredentialsProvider=A,this.appCheckCredentialsProvider=C,this.listener=_,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new OE(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===bt.RESOURCE_EXHAUSTED?(Ea(n.toString()),Ea("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===bt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,u])=>{this.D_===n&&this.G_(o,u)},o=>{t(()=>{const u=new Gt(bt.UNKNOWN,"Fetching auth token failed: "+o.message);return this.z_(u)})})}G_(t,n){const o=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo(()=>{o(()=>this.listener.Xo())}),this.stream.t_(()=>{o(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(u=>{o(()=>this.z_(u))}),this.stream.onMessage(u=>{o(()=>++this.F_==1?this.J_(u):this.onNext(u))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return Yt(hy,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget(()=>this.D_===t?n():(Yt(hy,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Av extends LE{constructor(t,n,o,u,d,A){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,o,u,A),this.serializer=d}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=vS(this.serializer,t),o=function(d){if(!("targetChange"in d))return ce.min();const A=d.targetChange;return A.targetIds&&A.targetIds.length?ce.min():A.readTime?Vs(A.readTime):ce.min()}(t);return this.listener.H_(n,o)}Y_(t){const n={};n.database=Z1(this.serializer),n.addTarget=function(d,A){let C;const _=A.target;if(C=q1(_)?{documents:RS(d,_)}:{query:NS(d,_).ft},C.targetId=A.targetId,A.resumeToken.approximateByteSize()>0){C.resumeToken=_E(d,A.resumeToken);const x=Q1(d,A.expectedCount);x!==null&&(C.expectedCount=x)}else if(A.snapshotVersion.compareTo(ce.min())>0){C.readTime=Kh(d,A.snapshotVersion.toTimestamp());const x=Q1(d,A.expectedCount);x!==null&&(C.expectedCount=x)}return C}(this.serializer,t);const o=MS(this.serializer,t);o&&(n.labels=o),this.q_(n)}Z_(t){const n={};n.database=Z1(this.serializer),n.removeTarget=t,this.q_(n)}}class wv extends LE{constructor(t,n,o,u,d,A){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,o,u,A),this.serializer=d}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return Je(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Je(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){Je(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=IS(t.writeResults,t.commitTime),o=Vs(t.commitTime);return this.listener.na(o,n)}ra(){const t={};t.database=Z1(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map(o=>bS(this.serializer,o))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v{}class Tv extends _v{constructor(t,n,o,u){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=o,this.serializer=u,this.ia=!1}sa(){if(this.ia)throw new Gt(bt.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,A])=>this.connection.Go(t,W1(n,o),u,d,A)).catch(d=>{throw d.name==="FirebaseError"?(d.code===bt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new Gt(bt.UNKNOWN,d.toString())})}Ho(t,n,o,u,d){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([A,C])=>this.connection.Ho(t,W1(n,o),u,A,C,d)).catch(A=>{throw A.name==="FirebaseError"?(A.code===bt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),A):new Gt(bt.UNKNOWN,A.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class Cv{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ea(n),this.aa=!1):Yt("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Go="RemoteStore";class Sv{constructor(t,n,o,u,d){this.localStore=t,this.datastore=n,this.asyncQueue=o,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=d,this.Aa.Oo(A=>{o.enqueueAndForget(async()=>{Ko(this)&&(Yt(Go,"Restarting streams for network reachability change."),await async function(_){const x=he(_);x.Ea.add(4),await yu(x),x.Ra.set("Unknown"),x.Ea.delete(4),await Tf(x)}(this))})}),this.Ra=new Cv(o,u)}}async function Tf(i){if(Ko(i))for(const t of i.da)await t(!0)}async function yu(i){for(const t of i.da)await t(!1)}function BE(i,t){const n=he(i);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),V0(n)?k0(n):ec(n).O_()&&P0(n,t))}function B0(i,t){const n=he(i),o=ec(n);n.Ia.delete(t),o.O_()&&PE(n,t),n.Ia.size===0&&(o.O_()?o.L_():Ko(n)&&n.Ra.set("Unknown"))}function P0(i,t){if(i.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ce.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}ec(i).Y_(t)}function PE(i,t){i.Va.Ue(t),ec(i).Z_(t)}function k0(i){i.Va=new ES({getRemoteKeysForTarget:t=>i.remoteSyncer.getRemoteKeysForTarget(t),At:t=>i.Ia.get(t)||null,ht:()=>i.datastore.serializer.databaseId}),ec(i).start(),i.Ra.ua()}function V0(i){return Ko(i)&&!ec(i).x_()&&i.Ia.size>0}function Ko(i){return he(i).Ea.size===0}function kE(i){i.Va=void 0}async function vv(i){i.Ra.set("Online")}async function bv(i){i.Ia.forEach((t,n)=>{P0(i,t)})}async function Iv(i,t){kE(i),V0(i)?(i.Ra.ha(t),k0(i)):i.Ra.set("Unknown")}async function Rv(i,t,n){if(i.Ra.set("Online"),t instanceof wE&&t.state===2&&t.cause)try{await async function(u,d){const A=d.cause;for(const C of d.targetIds)u.Ia.has(C)&&(await u.remoteSyncer.rejectListen(C,A),u.Ia.delete(C),u.Va.removeTarget(C))}(i,t)}catch(o){Yt(Go,"Failed to remove targets %s: %s ",t.targetIds.join(","),o),await Jh(i,o)}else if(t instanceof Bh?i.Va.Ze(t):t instanceof AE?i.Va.st(t):i.Va.tt(t),!n.isEqual(ce.min()))try{const o=await ME(i.localStore);n.compareTo(o)>=0&&await function(d,A){const C=d.Va.Tt(A);return C.targetChanges.forEach((_,x)=>{if(_.resumeToken.approximateByteSize()>0){const v=d.Ia.get(x);v&&d.Ia.set(x,v.withResumeToken(_.resumeToken,A))}}),C.targetMismatches.forEach((_,x)=>{const v=d.Ia.get(_);if(!v)return;d.Ia.set(_,v.withResumeToken(Br.EMPTY_BYTE_STRING,v.snapshotVersion)),PE(d,_);const I=new no(v.target,_,x,v.sequenceNumber);P0(d,I)}),d.remoteSyncer.applyRemoteEvent(C)}(i,n)}catch(o){Yt(Go,"Failed to raise snapshot:",o),await Jh(i,o)}}async function Jh(i,t,n){if(!tc(t))throw t;i.Ea.add(1),await yu(i),i.Ra.set("Offline"),n||(n=()=>ME(i.localStore)),i.asyncQueue.enqueueRetryable(async()=>{Yt(Go,"Retrying IndexedDB access"),await n(),i.Ea.delete(1),await Tf(i)})}function VE(i,t){return t().catch(n=>Jh(i,n,t))}async function Cf(i){const t=he(i),n=fo(t);let o=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:w0;for(;Nv(t);)try{const u=await hv(t.localStore,o);if(u===null){t.Ta.length===0&&n.L_();break}o=u.batchId,Dv(t,u)}catch(u){await Jh(t,u)}UE(t)&&FE(t)}function Nv(i){return Ko(i)&&i.Ta.length<10}function Dv(i,t){i.Ta.push(t);const n=fo(i);n.O_()&&n.X_&&n.ea(t.mutations)}function UE(i){return Ko(i)&&!fo(i).x_()&&i.Ta.length>0}function FE(i){fo(i).start()}async function Mv(i){fo(i).ra()}async function Ov(i){const t=fo(i);for(const n of i.Ta)t.ea(n.mutations)}async function Lv(i,t,n){const o=i.Ta.shift(),u=I0.from(o,t,n);await VE(i,()=>i.remoteSyncer.applySuccessfulWrite(u)),await Cf(i)}async function Bv(i,t){t&&fo(i).X_&&await async function(o,u){if(function(A){return pS(A)&&A!==bt.ABORTED}(u.code)){const d=o.Ta.shift();fo(o).B_(),await VE(o,()=>o.remoteSyncer.rejectFailedWrite(d.batchId,u)),await Cf(o)}}(i,t),UE(i)&&FE(i)}async function fy(i,t){const n=he(i);n.asyncQueue.verifyOperationInProgress(),Yt(Go,"RemoteStore received new credentials");const o=Ko(n);n.Ea.add(3),await yu(n),o&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await Tf(n)}async function Pv(i,t){const n=he(i);t?(n.Ea.delete(2),await Tf(n)):t||(n.Ea.add(2),await yu(n),n.Ra.set("Unknown"))}function ec(i){return i.ma||(i.ma=function(n,o,u){const d=he(n);return d.sa(),new Av(o,d.connection,d.authCredentials,d.appCheckCredentials,d.serializer,u)}(i.datastore,i.asyncQueue,{Xo:vv.bind(null,i),t_:bv.bind(null,i),r_:Iv.bind(null,i),H_:Rv.bind(null,i)}),i.da.push(async t=>{t?(i.ma.B_(),V0(i)?k0(i):i.Ra.set("Unknown")):(await i.ma.stop(),kE(i))})),i.ma}function fo(i){return i.fa||(i.fa=function(n,o,u){const d=he(n);return d.sa(),new wv(o,d.connection,d.authCredentials,d.appCheckCredentials,d.serializer,u)}(i.datastore,i.asyncQueue,{Xo:()=>Promise.resolve(),t_:Mv.bind(null,i),r_:Bv.bind(null,i),ta:Ov.bind(null,i),na:Lv.bind(null,i)}),i.da.push(async t=>{t?(i.fa.B_(),await Cf(i)):(await i.fa.stop(),i.Ta.length>0&&(Yt(Go,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))})),i.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U0{constructor(t,n,o,u,d){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=o,this.op=u,this.removalCallback=d,this.deferred=new pa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(A=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,o,u,d){const A=Date.now()+o,C=new U0(t,n,A,u,d);return C.start(o),C}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Gt(bt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function F0(i,t){if(Ea("AsyncQueue",`${t}: ${i}`),tc(i))return new Gt(bt.UNAVAILABLE,`${t}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{static emptySet(t){return new Ul(t.comparator)}constructor(t){this.comparator=t?(n,o)=>t(n,o)||te.comparator(n.key,o.key):(n,o)=>te.comparator(n.key,o.key),this.keyedMap=Yc(),this.sortedSet=new Fn(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,o)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Ul)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),o=t.sortedSet.getIterator();for(;n.hasNext();){const u=n.getNext().key,d=o.getNext().key;if(!u.isEqual(d))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const o=new Ul;return o.comparator=this.comparator,o.keyedMap=t,o.sortedSet=n,o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{constructor(){this.ga=new Fn(te.comparator)}track(t){const n=t.doc.key,o=this.ga.get(n);o?t.type!==0&&o.type===3?this.ga=this.ga.insert(n,t):t.type===3&&o.type!==1?this.ga=this.ga.insert(n,{type:o.type,doc:t.doc}):t.type===2&&o.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&o.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&o.type===0?this.ga=this.ga.remove(n):t.type===1&&o.type===2?this.ga=this.ga.insert(n,{type:1,doc:o.doc}):t.type===0&&o.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):ie(63341,{Rt:t,pa:o}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal((n,o)=>{t.push(o)}),t}}class Ql{constructor(t,n,o,u,d,A,C,_,x){this.query=t,this.docs=n,this.oldDocs=o,this.docChanges=u,this.mutatedKeys=d,this.fromCache=A,this.syncStateChanged=C,this.excludesMetadataChanges=_,this.hasCachedResults=x}static fromInitialDocuments(t,n,o,u,d){const A=[];return n.forEach(C=>{A.push({type:0,doc:C})}),new Ql(t,n,Ul.emptySet(n),A,o,u,!0,!1,d)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&yf(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,o=t.docChanges;if(n.length!==o.length)return!1;for(let u=0;u<n.length;u++)if(n[u].type!==o[u].type||!n[u].doc.isEqual(o[u].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class Vv{constructor(){this.queries=gy(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,o){const u=he(n),d=u.queries;u.queries=gy(),d.forEach((A,C)=>{for(const _ of C.Sa)_.onError(o)})})(this,new Gt(bt.ABORTED,"Firestore shutting down"))}}function gy(){return new Wo(i=>oE(i),yf)}async function j0(i,t){const n=he(i);let o=3;const u=t.query;let d=n.queries.get(u);d?!d.ba()&&t.Da()&&(o=2):(d=new kv,o=t.Da()?0:1);try{switch(o){case 0:d.wa=await n.onListen(u,!0);break;case 1:d.wa=await n.onListen(u,!1);break;case 2:await n.onFirstRemoteStoreListen(u)}}catch(A){const C=F0(A,`Initialization of query '${Ll(t.query)}' failed`);return void t.onError(C)}n.queries.set(u,d),d.Sa.push(t),t.va(n.onlineState),d.wa&&t.Fa(d.wa)&&H0(n)}async function z0(i,t){const n=he(i),o=t.query;let u=3;const d=n.queries.get(o);if(d){const A=d.Sa.indexOf(t);A>=0&&(d.Sa.splice(A,1),d.Sa.length===0?u=t.Da()?0:1:!d.ba()&&t.Da()&&(u=2))}switch(u){case 0:return n.queries.delete(o),n.onUnlisten(o,!0);case 1:return n.queries.delete(o),n.onUnlisten(o,!1);case 2:return n.onLastRemoteStoreUnlisten(o);default:return}}function Uv(i,t){const n=he(i);let o=!1;for(const u of t){const d=u.query,A=n.queries.get(d);if(A){for(const C of A.Sa)C.Fa(u)&&(o=!0);A.wa=u}}o&&H0(n)}function Fv(i,t,n){const o=he(i),u=o.queries.get(t);if(u)for(const d of u.Sa)d.onError(n);o.queries.delete(t)}function H0(i){i.Ca.forEach(t=>{t.next()})}var t0,my;(my=t0||(t0={})).Ma="default",my.Cache="cache";class G0{constructor(t,n,o){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=o||{}}Fa(t){if(!this.options.includeMetadataChanges){const o=[];for(const u of t.docChanges)u.type!==3&&o.push(u);t=new Ql(t.query,t.docs,t.oldDocs,o,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const o=n!=="Offline";return(!this.options.qa||!o)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=Ql.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==t0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(t){this.key=t}}class zE{constructor(t){this.key=t}}class jv{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Me(),this.mutatedKeys=Me(),this.eu=lE(t),this.tu=new Ul(this.eu)}get nu(){return this.Ya}ru(t,n){const o=n?n.iu:new dy,u=n?n.tu:this.tu;let d=n?n.mutatedKeys:this.mutatedKeys,A=u,C=!1;const _=this.query.limitType==="F"&&u.size===this.query.limit?u.last():null,x=this.query.limitType==="L"&&u.size===this.query.limit?u.first():null;if(t.inorderTraversal((v,I)=>{const O=u.get(v),H=xf(this.query,I)?I:null,X=!!O&&this.mutatedKeys.has(O.key),J=!!H&&(H.hasLocalMutations||this.mutatedKeys.has(H.key)&&H.hasCommittedMutations);let q=!1;O&&H?O.data.isEqual(H.data)?X!==J&&(o.track({type:3,doc:H}),q=!0):this.su(O,H)||(o.track({type:2,doc:H}),q=!0,(_&&this.eu(H,_)>0||x&&this.eu(H,x)<0)&&(C=!0)):!O&&H?(o.track({type:0,doc:H}),q=!0):O&&!H&&(o.track({type:1,doc:O}),q=!0,(_||x)&&(C=!0)),q&&(H?(A=A.add(H),d=J?d.add(v):d.delete(v)):(A=A.delete(v),d=d.delete(v)))}),this.query.limit!==null)for(;A.size>this.query.limit;){const v=this.query.limitType==="F"?A.last():A.first();A=A.delete(v.key),d=d.delete(v.key),o.track({type:1,doc:v})}return{tu:A,iu:o,Cs:C,mutatedKeys:d}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,o,u){const d=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const A=t.iu.ya();A.sort((v,I)=>function(H,X){const J=q=>{switch(q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ie(20277,{Rt:q})}};return J(H)-J(X)}(v.type,I.type)||this.eu(v.doc,I.doc)),this.ou(o),u=u??!1;const C=n&&!u?this._u():[],_=this.Xa.size===0&&this.current&&!u?1:0,x=_!==this.Za;return this.Za=_,A.length!==0||x?{snapshot:new Ql(this.query,t.tu,d,A,t.mutatedKeys,_===0,x,!1,!!o&&o.resumeToken.approximateByteSize()>0),au:C}:{au:C}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new dy,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Me(),this.tu.forEach(o=>{this.uu(o.key)&&(this.Xa=this.Xa.add(o.key))});const n=[];return t.forEach(o=>{this.Xa.has(o)||n.push(new zE(o))}),this.Xa.forEach(o=>{t.has(o)||n.push(new jE(o))}),n}cu(t){this.Ya=t.Qs,this.Xa=Me();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return Ql.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const q0="SyncEngine";class zv{constructor(t,n,o){this.query=t,this.targetId=n,this.view=o}}class Hv{constructor(t){this.key=t,this.hu=!1}}class Gv{constructor(t,n,o,u,d,A){this.localStore=t,this.remoteStore=n,this.eventManager=o,this.sharedClientState=u,this.currentUser=d,this.maxConcurrentLimboResolutions=A,this.Pu={},this.Tu=new Wo(C=>oE(C),yf),this.Iu=new Map,this.Eu=new Set,this.du=new Fn(te.comparator),this.Au=new Map,this.Ru=new D0,this.Vu={},this.mu=new Map,this.fu=Xl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function qv(i,t,n=!0){const o=QE(i);let u;const d=o.Tu.get(t);return d?(o.sharedClientState.addLocalQueryTarget(d.targetId),u=d.view.lu()):u=await HE(o,t,n,!0),u}async function Yv(i,t){const n=QE(i);await HE(n,t,!0,!1)}async function HE(i,t,n,o){const u=await fv(i.localStore,ks(t)),d=u.targetId,A=i.sharedClientState.addLocalQueryTarget(d,n);let C;return o&&(C=await Xv(i,t,d,A==="current",u.resumeToken)),i.isPrimaryClient&&n&&BE(i.remoteStore,u),C}async function Xv(i,t,n,o,u){i.pu=(I,O,H)=>async function(J,q,Q,ft){let nt=q.view.ru(Q);nt.Cs&&(nt=await oy(J.localStore,q.query,!1).then(({documents:U})=>q.view.ru(U,nt)));const _t=ft&&ft.targetChanges.get(q.targetId),mt=ft&&ft.targetMismatches.get(q.targetId)!=null,Tt=q.view.applyChanges(nt,J.isPrimaryClient,_t,mt);return yy(J,q.targetId,Tt.au),Tt.snapshot}(i,I,O,H);const d=await oy(i.localStore,t,!0),A=new jv(t,d.Qs),C=A.ru(d.documents),_=pu.createSynthesizedTargetChangeForCurrentChange(n,o&&i.onlineState!=="Offline",u),x=A.applyChanges(C,i.isPrimaryClient,_);yy(i,n,x.au);const v=new zv(t,n,A);return i.Tu.set(t,v),i.Iu.has(n)?i.Iu.get(n).push(t):i.Iu.set(n,[t]),x.snapshot}async function Qv(i,t,n){const o=he(i),u=o.Tu.get(t),d=o.Iu.get(u.targetId);if(d.length>1)return o.Iu.set(u.targetId,d.filter(A=>!yf(A,t))),void o.Tu.delete(t);o.isPrimaryClient?(o.sharedClientState.removeLocalQueryTarget(u.targetId),o.sharedClientState.isActiveQueryTarget(u.targetId)||await J1(o.localStore,u.targetId,!1).then(()=>{o.sharedClientState.clearQueryState(u.targetId),n&&B0(o.remoteStore,u.targetId),e0(o,u.targetId)}).catch($l)):(e0(o,u.targetId),await J1(o.localStore,u.targetId,!0))}async function Wv(i,t){const n=he(i),o=n.Tu.get(t),u=n.Iu.get(o.targetId);n.isPrimaryClient&&u.length===1&&(n.sharedClientState.removeLocalQueryTarget(o.targetId),B0(n.remoteStore,o.targetId))}async function Kv(i,t,n){const o=rb(i);try{const u=await function(A,C){const _=he(A),x=An.now(),v=C.reduce((H,X)=>H.add(X.key),Me());let I,O;return _.persistence.runTransaction("Locally write mutations","readwrite",H=>{let X=Aa(),J=Me();return _.Ns.getEntries(H,v).next(q=>{X=q,X.forEach((Q,ft)=>{ft.isValidDocument()||(J=J.add(Q))})}).next(()=>_.localDocuments.getOverlayedDocuments(H,X)).next(q=>{I=q;const Q=[];for(const ft of C){const nt=hS(ft,I.get(ft.key).overlayedDocument);nt!=null&&Q.push(new Eo(ft.key,nt,$x(nt.value.mapValue),ps.exists(!0)))}return _.mutationQueue.addMutationBatch(H,x,Q,C)}).next(q=>{O=q;const Q=q.applyToLocalDocumentSet(I,J);return _.documentOverlayCache.saveOverlays(H,q.batchId,Q)})}).then(()=>({batchId:O.batchId,changes:uE(I)}))}(o.localStore,t);o.sharedClientState.addPendingMutation(u.batchId),function(A,C,_){let x=A.Vu[A.currentUser.toKey()];x||(x=new Fn(De)),x=x.insert(C,_),A.Vu[A.currentUser.toKey()]=x}(o,u.batchId,n),await xu(o,u.changes),await Cf(o.remoteStore)}catch(u){const d=F0(u,"Failed to persist write");n.reject(d)}}async function GE(i,t){const n=he(i);try{const o=await cv(n.localStore,t);t.targetChanges.forEach((u,d)=>{const A=n.Au.get(d);A&&(Je(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1,22616),u.addedDocuments.size>0?A.hu=!0:u.modifiedDocuments.size>0?Je(A.hu,14607):u.removedDocuments.size>0&&(Je(A.hu,42227),A.hu=!1))}),await xu(n,o,t)}catch(o){await $l(o)}}function py(i,t,n){const o=he(i);if(o.isPrimaryClient&&n===0||!o.isPrimaryClient&&n===1){const u=[];o.Tu.forEach((d,A)=>{const C=A.view.va(t);C.snapshot&&u.push(C.snapshot)}),function(A,C){const _=he(A);_.onlineState=C;let x=!1;_.queries.forEach((v,I)=>{for(const O of I.Sa)O.va(C)&&(x=!0)}),x&&H0(_)}(o.eventManager,t),u.length&&o.Pu.H_(u),o.onlineState=t,o.isPrimaryClient&&o.sharedClientState.setOnlineState(t)}}async function Zv(i,t,n){const o=he(i);o.sharedClientState.updateQueryState(t,"rejected",n);const u=o.Au.get(t),d=u&&u.key;if(d){let A=new Fn(te.comparator);A=A.insert(d,Wr.newNoDocument(d,ce.min()));const C=Me().add(d),_=new wf(ce.min(),new Map,new Fn(De),A,C);await GE(o,_),o.du=o.du.remove(d),o.Au.delete(t),Y0(o)}else await J1(o.localStore,t,!1).then(()=>e0(o,t,n)).catch($l)}async function Jv(i,t){const n=he(i),o=t.batch.batchId;try{const u=await lv(n.localStore,t);YE(n,o,null),qE(n,o),n.sharedClientState.updateMutationState(o,"acknowledged"),await xu(n,u)}catch(u){await $l(u)}}async function $v(i,t,n){const o=he(i);try{const u=await function(A,C){const _=he(A);return _.persistence.runTransaction("Reject batch","readwrite-primary",x=>{let v;return _.mutationQueue.lookupMutationBatch(x,C).next(I=>(Je(I!==null,37113),v=I.keys(),_.mutationQueue.removeMutationBatch(x,I))).next(()=>_.mutationQueue.performConsistencyCheck(x)).next(()=>_.documentOverlayCache.removeOverlaysForBatchId(x,v,C)).next(()=>_.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(x,v)).next(()=>_.localDocuments.getDocuments(x,v))})}(o.localStore,t);YE(o,t,n),qE(o,t),o.sharedClientState.updateMutationState(t,"rejected",n),await xu(o,u)}catch(u){await $l(u)}}function qE(i,t){(i.mu.get(t)||[]).forEach(n=>{n.resolve()}),i.mu.delete(t)}function YE(i,t,n){const o=he(i);let u=o.Vu[o.currentUser.toKey()];if(u){const d=u.get(t);d&&(n?d.reject(n):d.resolve(),u=u.remove(t)),o.Vu[o.currentUser.toKey()]=u}}function e0(i,t,n=null){i.sharedClientState.removeLocalQueryTarget(t);for(const o of i.Iu.get(t))i.Tu.delete(o),n&&i.Pu.yu(o,n);i.Iu.delete(t),i.isPrimaryClient&&i.Ru.jr(t).forEach(o=>{i.Ru.containsKey(o)||XE(i,o)})}function XE(i,t){i.Eu.delete(t.path.canonicalString());const n=i.du.get(t);n!==null&&(B0(i.remoteStore,n),i.du=i.du.remove(t),i.Au.delete(n),Y0(i))}function yy(i,t,n){for(const o of n)o instanceof jE?(i.Ru.addReference(o.key,t),tb(i,o)):o instanceof zE?(Yt(q0,"Document no longer in limbo: "+o.key),i.Ru.removeReference(o.key,t),i.Ru.containsKey(o.key)||XE(i,o.key)):ie(19791,{wu:o})}function tb(i,t){const n=t.key,o=n.path.canonicalString();i.du.get(n)||i.Eu.has(o)||(Yt(q0,"New document in limbo: "+n),i.Eu.add(o),Y0(i))}function Y0(i){for(;i.Eu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const t=i.Eu.values().next().value;i.Eu.delete(t);const n=new te(En.fromString(t)),o=i.fu.next();i.Au.set(o,new Hv(n)),i.du=i.du.insert(n,o),BE(i.remoteStore,new no(ks(pf(n.path)),o,"TargetPurposeLimboResolution",df.ce))}}async function xu(i,t,n){const o=he(i),u=[],d=[],A=[];o.Tu.isEmpty()||(o.Tu.forEach((C,_)=>{A.push(o.pu(_,t,n).then(x=>{if((x||n)&&o.isPrimaryClient){const v=x?!x.fromCache:n?.targetChanges.get(_.targetId)?.current;o.sharedClientState.updateQueryState(_.targetId,v?"current":"not-current")}if(x){u.push(x);const v=O0.As(_.targetId,x);d.push(v)}}))}),await Promise.all(A),o.Pu.H_(u),await async function(_,x){const v=he(_);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",I=>Nt.forEach(x,O=>Nt.forEach(O.Es,H=>v.persistence.referenceDelegate.addReference(I,O.targetId,H)).next(()=>Nt.forEach(O.ds,H=>v.persistence.referenceDelegate.removeReference(I,O.targetId,H)))))}catch(I){if(!tc(I))throw I;Yt(L0,"Failed to update sequence numbers: "+I)}for(const I of x){const O=I.targetId;if(!I.fromCache){const H=v.Ms.get(O),X=H.snapshotVersion,J=H.withLastLimboFreeSnapshotVersion(X);v.Ms=v.Ms.insert(O,J)}}}(o.localStore,d))}async function eb(i,t){const n=he(i);if(!n.currentUser.isEqual(t)){Yt(q0,"User change. New user:",t.toKey());const o=await DE(n.localStore,t);n.currentUser=t,function(d,A){d.mu.forEach(C=>{C.forEach(_=>{_.reject(new Gt(bt.CANCELLED,A))})}),d.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,o.removedBatchIds,o.addedBatchIds),await xu(n,o.Ls)}}function nb(i,t){const n=he(i),o=n.Au.get(t);if(o&&o.hu)return Me().add(o.key);{let u=Me();const d=n.Iu.get(t);if(!d)return u;for(const A of d){const C=n.Tu.get(A);u=u.unionWith(C.view.nu)}return u}}function QE(i){const t=he(i);return t.remoteStore.remoteSyncer.applyRemoteEvent=GE.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=nb.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Zv.bind(null,t),t.Pu.H_=Uv.bind(null,t.eventManager),t.Pu.yu=Fv.bind(null,t.eventManager),t}function rb(i){const t=he(i);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Jv.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=$v.bind(null,t),t}class $h{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=_f(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return ov(this.persistence,new iv,t.initialUser,this.serializer)}Cu(t){return new NE(M0.mi,this.serializer)}Du(t){return new gv}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}$h.provider={build:()=>new $h};class ib extends $h{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){Je(this.persistence.referenceDelegate instanceof Zh,46915);const o=this.persistence.referenceDelegate.garbageCollector;return new HS(o,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?mi.withCacheSize(this.cacheSizeBytes):mi.DEFAULT;return new NE(o=>Zh.mi(o,n),this.serializer)}}class n0{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=o=>py(this.syncEngine,o,1),this.remoteStore.remoteSyncer.handleCredentialChange=eb.bind(null,this.syncEngine),await Pv(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new Vv}()}createDatastore(t){const n=_f(t.databaseInfo.databaseId),o=function(d){return new Ev(d)}(t.databaseInfo);return function(d,A,C,_){return new Tv(d,A,C,_)}(t.authCredentials,t.appCheckCredentials,o,n)}createRemoteStore(t){return function(o,u,d,A,C){return new Sv(o,u,d,A,C)}(this.localStore,this.datastore,t.asyncQueue,n=>py(this.syncEngine,n,0),function(){return uy.v()?new uy:new mv}())}createSyncEngine(t,n){return function(u,d,A,C,_,x,v){const I=new Gv(u,d,A,C,_,x);return v&&(I.gu=!0),I}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){await async function(n){const o=he(n);Yt(Go,"RemoteStore shutting down."),o.Ea.add(5),await yu(o),o.Aa.shutdown(),o.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}n0.provider={build:()=>new n0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Ea("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const go="FirestoreClient";class sb{constructor(t,n,o,u,d){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=o,this.databaseInfo=u,this.user=Qr.UNAUTHENTICATED,this.clientId=A0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=d,this.authCredentials.start(o,async A=>{Yt(go,"Received user=",A.uid),await this.authCredentialListener(A),this.user=A}),this.appCheckCredentials.start(o,A=>(Yt(go,"Received new app check token=",A),this.appCheckCredentialListener(A,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new pa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const o=F0(n,"Failed to shutdown persistence");t.reject(o)}}),t.promise}}async function N1(i,t){i.asyncQueue.verifyOperationInProgress(),Yt(go,"Initializing OfflineComponentProvider");const n=i.configuration;await t.initialize(n);let o=n.initialUser;i.setCredentialChangeListener(async u=>{o.isEqual(u)||(await DE(t.localStore,u),o=u)}),t.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=t}async function xy(i,t){i.asyncQueue.verifyOperationInProgress();const n=await ab(i);Yt(go,"Initializing OnlineComponentProvider"),await t.initialize(n,i.configuration),i.setCredentialChangeListener(o=>fy(t.remoteStore,o)),i.setAppCheckTokenChangeListener((o,u)=>fy(t.remoteStore,u)),i._onlineComponents=t}async function ab(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){Yt(go,"Using user provided OfflineComponentProvider");try{await N1(i,i._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(u){return u.name==="FirebaseError"?u.code===bt.FAILED_PRECONDITION||u.code===bt.UNIMPLEMENTED:!(typeof DOMException<"u"&&u instanceof DOMException)||u.code===22||u.code===20||u.code===11}(n))throw n;Hl("Error using user provided cache. Falling back to memory cache: "+n),await N1(i,new $h)}}else Yt(go,"Using default OfflineComponentProvider"),await N1(i,new ib(void 0));return i._offlineComponents}async function WE(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(Yt(go,"Using user provided OnlineComponentProvider"),await xy(i,i._uninitializedComponentsProvider._online)):(Yt(go,"Using default OnlineComponentProvider"),await xy(i,new n0))),i._onlineComponents}function ob(i){return WE(i).then(t=>t.syncEngine)}async function tf(i){const t=await WE(i),n=t.eventManager;return n.onListen=qv.bind(null,t.syncEngine),n.onUnlisten=Qv.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Yv.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Wv.bind(null,t.syncEngine),n}function lb(i,t,n={}){const o=new pa;return i.asyncQueue.enqueueAndForget(async()=>function(d,A,C,_,x){const v=new X0({next:O=>{v.Nu(),A.enqueueAndForget(()=>z0(d,I));const H=O.docs.has(C);!H&&O.fromCache?x.reject(new Gt(bt.UNAVAILABLE,"Failed to get document because the client is offline.")):H&&O.fromCache&&_&&_.source==="server"?x.reject(new Gt(bt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):x.resolve(O)},error:O=>x.reject(O)}),I=new G0(pf(C.path),v,{includeMetadataChanges:!0,qa:!0});return j0(d,I)}(await tf(i),i.asyncQueue,t,n,o)),o.promise}function cb(i,t,n={}){const o=new pa;return i.asyncQueue.enqueueAndForget(async()=>function(d,A,C,_,x){const v=new X0({next:O=>{v.Nu(),A.enqueueAndForget(()=>z0(d,I)),O.fromCache&&_.source==="server"?x.reject(new Gt(bt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):x.resolve(O)},error:O=>x.reject(O)}),I=new G0(C,v,{includeMetadataChanges:!0,qa:!0});return j0(d,I)}(await tf(i),i.asyncQueue,t,n,o)),o.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KE(i){const t={};return i.timeoutSeconds!==void 0&&(t.timeoutSeconds=i.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ey=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZE="firestore.googleapis.com",Ay=!0;class wy{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new Gt(bt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ZE,this.ssl=Ay}else this.host=t.host,this.ssl=t.ssl??Ay;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=RE;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<jS)throw new Gt(bt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}C3("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=KE(t.experimentalLongPollingOptions??{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new Gt(bt.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new Gt(bt.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new Gt(bt.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(o,u){return o.timeoutSeconds===u.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Sf{constructor(t,n,o,u){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=o,this._app=u,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new wy({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Gt(bt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Gt(bt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new wy(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(o){if(!o)return new g3;switch(o.type){case"firstParty":return new x3(o.sessionIndex||"0",o.iamToken||null,o.authTokenFactory||null);case"provider":return o.client;default:throw new Gt(bt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const o=Ey.get(n);o&&(Yt("ComponentProvider","Removing Datastore"),Ey.delete(n),o.terminate())}(this),Promise.resolve()}}function ub(i,t,n,o={}){i=ns(i,Sf);const u=uf(t),d=i._getSettings(),A={...d,emulatorOptions:i._getEmulatorOptions()},C=`${t}:${n}`;u&&(wx(`https://${C}`),Tx("Firestore",!0)),d.host!==ZE&&d.host!==C&&Hl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const _={...d,host:C,ssl:u,emulatorOptions:o};if(!zh(_,A)&&(i._setSettings(_),o.mockUserToken)){let x,v;if(typeof o.mockUserToken=="string")x=o.mockUserToken,v=Qr.MOCK_USER;else{x=_x(o.mockUserToken,i._app?.options.projectId);const I=o.mockUserToken.sub||o.mockUserToken.user_id;if(!I)throw new Gt(bt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new Qr(I)}i._authCredentials=new m3(new jx(x,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(t,n,o){this.converter=n,this._query=o,this.type="query",this.firestore=t}withConverter(t){return new Zo(this.firestore,t,this._query)}}class rr{constructor(t,n,o){this.converter=n,this._key=o,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new oo(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new rr(this.firestore,t,this._key)}toJSON(){return{type:rr._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,o){if(du(n,rr._jsonSchema))return new rr(t,o||null,new te(En.fromString(n.referencePath)))}}rr._jsonSchemaVersion="firestore/documentReference/1.0",rr._jsonSchema={type:hr("string",rr._jsonSchemaVersion),referencePath:hr("string")};class oo extends Zo{constructor(t,n,o){super(t,n,pf(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new rr(this.firestore,null,new te(t))}withConverter(t){return new oo(this.firestore,t,this._path)}}function bn(i,t,...n){if(i=ys(i),zx("collection","path",t),i instanceof Sf){const o=En.fromString(t,...n);return L2(o),new oo(i,null,o)}{if(!(i instanceof rr||i instanceof oo))throw new Gt(bt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(En.fromString(t,...n));return L2(o),new oo(i.firestore,null,o)}}function Pn(i,t,...n){if(i=ys(i),arguments.length===1&&(t=A0.newId()),zx("doc","path",t),i instanceof Sf){const o=En.fromString(t,...n);return O2(o),new rr(i,null,new te(o))}{if(!(i instanceof rr||i instanceof oo))throw new Gt(bt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(En.fromString(t,...n));return O2(o),new rr(i.firestore,i instanceof oo?i.converter:null,new te(o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _y="AsyncQueue";class Ty{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new OE(this,"async_queue_retry"),this._c=()=>{const o=R1();o&&Yt(_y,"Visibility state changed to "+o.visibilityState),this.M_.w_()},this.ac=t;const n=R1();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=R1();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const n=new pa;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!tc(t))throw t;Yt(_y,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const n=this.ac.then(()=>(this.rc=!0,t().catch(o=>{throw this.nc=o,this.rc=!1,Ea("INTERNAL UNHANDLED ERROR: ",Cy(o)),o}).then(o=>(this.rc=!1,o))));return this.ac=n,n}enqueueAfterDelay(t,n,o){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const u=U0.createAndSchedule(this,t,n,o,d=>this.hc(d));return this.tc.push(u),u}uc(){this.nc&&ie(47125,{Pc:Cy(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((n,o)=>n.targetTimeMs-o.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function Cy(i){let t=i.message||"";return i.stack&&(t=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sy(i){return function(n,o){if(typeof n!="object"||n===null)return!1;const u=n;for(const d of o)if(d in u&&typeof u[d]=="function")return!0;return!1}(i,["next","error","complete"])}class mo extends Sf{constructor(t,n,o,u){super(t,n,o,u),this.type="firestore",this._queue=new Ty,this._persistenceKey=u?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new Ty(t),this._firestoreClient=void 0,await t}}}function Q0(i,t){const n=typeof i=="object"?i:Dx(),o=typeof i=="string"?i:qh,u=Ix(n,"firestore").getImmediate({identifier:o});if(!u._initialized){const d=Ex("firestore");d&&ub(u,...d)}return u}function vf(i){if(i._terminated)throw new Gt(bt.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||hb(i),i._firestoreClient}function hb(i){const t=i._freezeSettings(),n=function(u,d,A,C){return new B3(u,d,A,C.host,C.ssl,C.experimentalForceLongPolling,C.experimentalAutoDetectLongPolling,KE(C.experimentalLongPollingOptions),C.useFetchStreams,C.isUsingEmulator)}(i._databaseId,i._app?.options.appId||"",i._persistenceKey,t);i._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(i._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),i._firestoreClient=new sb(i._authCredentials,i._appCheckCredentials,i._queue,n,i._componentsProvider&&function(u){const d=u?._online.build();return{_offline:u?._offline.build(d),_online:d}}(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(t){this._byteString=t}static fromBase64String(t){try{return new es(Br.fromBase64String(t))}catch(n){throw new Gt(bt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new es(Br.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:es._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(du(t,es._jsonSchema))return es.fromBase64String(t.bytes)}}es._jsonSchemaVersion="firestore/bytes/1.0",es._jsonSchema={type:hr("string",es._jsonSchemaVersion),bytes:hr("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new Gt(bt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Lr(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new Gt(bt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Gt(bt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return De(this._lat,t._lat)||De(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Us._jsonSchemaVersion}}static fromJSON(t){if(du(t,Us._jsonSchema))return new Us(t.latitude,t.longitude)}}Us._jsonSchemaVersion="firestore/geoPoint/1.0",Us._jsonSchema={type:hr("string",Us._jsonSchemaVersion),latitude:hr("number"),longitude:hr("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(o,u){if(o.length!==u.length)return!1;for(let d=0;d<o.length;++d)if(o[d]!==u[d])return!1;return!0}(this._values,t._values)}toJSON(){return{type:Fs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(du(t,Fs._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(n=>typeof n=="number"))return new Fs(t.vectorValues);throw new Gt(bt.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Fs._jsonSchemaVersion="firestore/vectorValue/1.0",Fs._jsonSchema={type:hr("string",Fs._jsonSchemaVersion),vectorValues:hr("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fb=/^__.*__$/;class db{constructor(t,n,o){this.data=t,this.fieldMask=n,this.fieldTransforms=o}toMutation(t,n){return this.fieldMask!==null?new Eo(t,this.data,this.fieldMask,n,this.fieldTransforms):new mu(t,this.data,n,this.fieldTransforms)}}class JE{constructor(t,n,o){this.data=t,this.fieldMask=n,this.fieldTransforms=o}toMutation(t,n){return new Eo(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function $E(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ie(40011,{Ac:i})}}class W0{constructor(t,n,o,u,d,A){this.settings=t,this.databaseId=n,this.serializer=o,this.ignoreUndefinedProperties=u,d===void 0&&this.Rc(),this.fieldTransforms=d||[],this.fieldMask=A||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new W0({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const n=this.path?.child(t),o=this.Vc({path:n,fc:!1});return o.gc(t),o}yc(t){const n=this.path?.child(t),o=this.Vc({path:n,fc:!1});return o.Rc(),o}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return ef(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if($E(this.Ac)&&fb.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class gb{constructor(t,n,o){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=o||_f(t)}Cc(t,n,o,u=!1){return new W0({Ac:t,methodName:n,Dc:o,path:Lr.emptyPath(),fc:!1,bc:u},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function K0(i){const t=i._freezeSettings(),n=_f(i._databaseId);return new gb(i._databaseId,!!t.ignoreUndefinedProperties,n)}function mb(i,t,n,o,u,d={}){const A=i.Cc(d.merge||d.mergeFields?2:0,t,n,u);J0("Data must be an object, but it was:",A,o);const C=tA(o,A);let _,x;if(d.merge)_=new ki(A.fieldMask),x=A.fieldTransforms;else if(d.mergeFields){const v=[];for(const I of d.mergeFields){const O=r0(t,I,n);if(!A.contains(O))throw new Gt(bt.INVALID_ARGUMENT,`Field '${O}' is specified in your field mask but missing from your input data.`);nA(v,O)||v.push(O)}_=new ki(v),x=A.fieldTransforms.filter(I=>_.covers(I.field))}else _=null,x=A.fieldTransforms;return new db(new pi(C),_,x)}class Rf extends If{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Rf}}class Z0 extends If{_toFieldTransform(t){return new oS(t.path,new lu)}isEqual(t){return t instanceof Z0}}function pb(i,t,n,o){const u=i.Cc(1,t,n);J0("Data must be an object, but it was:",u,o);const d=[],A=pi.empty();xo(o,(_,x)=>{const v=$0(t,_,n);x=ys(x);const I=u.yc(v);if(x instanceof Rf)d.push(v);else{const O=Eu(x,I);O!=null&&(d.push(v),A.set(v,O))}});const C=new ki(d);return new JE(A,C,u.fieldTransforms)}function yb(i,t,n,o,u,d){const A=i.Cc(1,t,n),C=[r0(t,o,n)],_=[u];if(d.length%2!=0)throw new Gt(bt.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let O=0;O<d.length;O+=2)C.push(r0(t,d[O])),_.push(d[O+1]);const x=[],v=pi.empty();for(let O=C.length-1;O>=0;--O)if(!nA(x,C[O])){const H=C[O];let X=_[O];X=ys(X);const J=A.yc(H);if(X instanceof Rf)x.push(H);else{const q=Eu(X,J);q!=null&&(x.push(H),v.set(H,q))}}const I=new ki(x);return new JE(v,I,A.fieldTransforms)}function xb(i,t,n,o=!1){return Eu(n,i.Cc(o?4:3,t))}function Eu(i,t){if(eA(i=ys(i)))return J0("Unsupported field value:",t,i),tA(i,t);if(i instanceof If)return function(o,u){if(!$E(u.Ac))throw u.Sc(`${o._methodName}() can only be used with update() and set()`);if(!u.path)throw u.Sc(`${o._methodName}() is not currently supported inside arrays`);const d=o._toFieldTransform(u);d&&u.fieldTransforms.push(d)}(i,t),null;if(i===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),i instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return function(o,u){const d=[];let A=0;for(const C of o){let _=Eu(C,u.wc(A));_==null&&(_={nullValue:"NULL_VALUE"}),d.push(_),A++}return{arrayValue:{values:d}}}(i,t)}return function(o,u){if((o=ys(o))===null)return{nullValue:"NULL_VALUE"};if(typeof o=="number")return iS(u.serializer,o);if(typeof o=="boolean")return{booleanValue:o};if(typeof o=="string")return{stringValue:o};if(o instanceof Date){const d=An.fromDate(o);return{timestampValue:Kh(u.serializer,d)}}if(o instanceof An){const d=new An(o.seconds,1e3*Math.floor(o.nanoseconds/1e3));return{timestampValue:Kh(u.serializer,d)}}if(o instanceof Us)return{geoPointValue:{latitude:o.latitude,longitude:o.longitude}};if(o instanceof es)return{bytesValue:_E(u.serializer,o._byteString)};if(o instanceof rr){const d=u.databaseId,A=o.firestore._databaseId;if(!A.isEqual(d))throw u.Sc(`Document reference is for database ${A.projectId}/${A.database} but should be for database ${d.projectId}/${d.database}`);return{referenceValue:N0(o.firestore._databaseId||u.databaseId,o._key.path)}}if(o instanceof Fs)return function(A,C){return{mapValue:{fields:{[Zx]:{stringValue:Jx},[Yh]:{arrayValue:{values:A.toArray().map(x=>{if(typeof x!="number")throw C.Sc("VectorValues must only contain numeric values.");return v0(C.serializer,x)})}}}}}}(o,u);throw u.Sc(`Unsupported field value: ${ff(o)}`)}(i,t)}function tA(i,t){const n={};return qx(i)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):xo(i,(o,u)=>{const d=Eu(u,t.mc(o));d!=null&&(n[o]=d)}),{mapValue:{fields:n}}}function eA(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof An||i instanceof Us||i instanceof es||i instanceof rr||i instanceof If||i instanceof Fs)}function J0(i,t,n){if(!eA(n)||!Hx(n)){const o=ff(n);throw o==="an object"?t.Sc(i+" a custom object"):t.Sc(i+" "+o)}}function r0(i,t,n){if((t=ys(t))instanceof bf)return t._internalPath;if(typeof t=="string")return $0(i,t);throw ef("Field path arguments must be of type string or ",i,!1,void 0,n)}const Eb=new RegExp("[~\\*/\\[\\]]");function $0(i,t,n){if(t.search(Eb)>=0)throw ef(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new bf(...t.split("."))._internalPath}catch{throw ef(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function ef(i,t,n,o,u){const d=o&&!o.isEmpty(),A=u!==void 0;let C=`Function ${t}() called with invalid data`;n&&(C+=" (via `toFirestore()`)"),C+=". ";let _="";return(d||A)&&(_+=" (found",d&&(_+=` in field ${o}`),A&&(_+=` in document ${u}`),_+=")"),new Gt(bt.INVALID_ARGUMENT,C+i+_)}function nA(i,t){return i.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(t,n,o,u,d){this._firestore=t,this._userDataWriter=n,this._key=o,this._document=u,this._converter=d}get id(){return this._key.path.lastSegment()}get ref(){return new rr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new Ab(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(tg("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Ab extends rA{data(){return super.data()}}function tg(i,t){return typeof t=="string"?$0(i,t):t instanceof bf?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iA(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new Gt(bt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class eg{}class wb extends eg{}function Fl(i,t,...n){let o=[];t instanceof eg&&o.push(t),o=o.concat(n),function(d){const A=d.filter(_=>_ instanceof ng).length,C=d.filter(_=>_ instanceof Nf).length;if(A>1||A>0&&C>0)throw new Gt(bt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(o);for(const u of o)i=u._apply(i);return i}class Nf extends wb{constructor(t,n,o){super(),this._field=t,this._op=n,this._value=o,this.type="where"}static _create(t,n,o){return new Nf(t,n,o)}_apply(t){const n=this._parse(t);return sA(t._query,n),new Zo(t.firestore,t.converter,Y1(t._query,n))}_parse(t){const n=K0(t.firestore);return function(d,A,C,_,x,v,I){let O;if(x.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new Gt(bt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){by(I,v);const X=[];for(const J of I)X.push(vy(_,d,J));O={arrayValue:{values:X}}}else O=vy(_,d,I)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||by(I,v),O=xb(C,A,I,v==="in"||v==="not-in");return ur.create(x,v,O)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function jl(i,t,n){const o=t,u=tg("where",i);return Nf._create(u,o,n)}class ng extends eg{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new ng(t,n)}_parse(t){const n=this._queryConstraints.map(o=>o._parse(t)).filter(o=>o.getFilters().length>0);return n.length===1?n[0]:xs.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(u,d){let A=u;const C=d.getFlattenedFilters();for(const _ of C)sA(A,_),A=Y1(A,_)}(t._query,n),new Zo(t.firestore,t.converter,Y1(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function vy(i,t,n){if(typeof(n=ys(n))=="string"){if(n==="")throw new Gt(bt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!aE(t)&&n.indexOf("/")!==-1)throw new Gt(bt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const o=t.path.child(En.fromString(n));if(!te.isDocumentKey(o))throw new Gt(bt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return z2(i,new te(o))}if(n instanceof rr)return z2(i,n._key);throw new Gt(bt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ff(n)}.`)}function by(i,t){if(!Array.isArray(i)||i.length===0)throw new Gt(bt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function sA(i,t){const n=function(u,d){for(const A of u)for(const C of A.getFlattenedFilters())if(d.indexOf(C.op)>=0)return C.op;return null}(i.filters,function(u){switch(u){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new Gt(bt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Gt(bt.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class _b{convertValue(t,n="none"){switch(ho(t)){case 0:return null;case 1:return t.booleanValue;case 2:return nr(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(uo(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw ie(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const o={};return xo(t,(u,d)=>{o[u]=this.convertValue(d,n)}),o}convertVectorValue(t){const n=t.fields?.[Yh].arrayValue?.values?.map(o=>nr(o.doubleValue));return new Fs(n)}convertGeoPoint(t){return new Us(nr(t.latitude),nr(t.longitude))}convertArray(t,n){return(t.values||[]).map(o=>this.convertValue(o,n))}convertServerTimestamp(t,n){switch(n){case"previous":const o=mf(t);return o==null?null:this.convertValue(o,n);case"estimate":return this.convertTimestamp(su(t));default:return null}}convertTimestamp(t){const n=co(t);return new An(n.seconds,n.nanos)}convertDocumentKey(t,n){const o=En.fromString(t);Je(IE(o),9688,{name:t});const u=new au(o.get(1),o.get(3)),d=new te(o.popFirst(5));return u.isEqual(n)||Ea(`Document ${d} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tb(i,t,n){let o;return o=i?i.toFirestore(t):t,o}class Qc{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class jo extends rA{constructor(t,n,o,u,d,A){super(t,n,o,u,A),this._firestore=t,this._firestoreImpl=t,this.metadata=d}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new Ph(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const o=this._document.data.field(tg("DocumentSnapshot.get",t));if(o!==null)return this._userDataWriter.convertValue(o,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Gt(bt.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=jo._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}jo._jsonSchemaVersion="firestore/documentSnapshot/1.0",jo._jsonSchema={type:hr("string",jo._jsonSchemaVersion),bundleSource:hr("string","DocumentSnapshot"),bundleName:hr("string"),bundle:hr("string")};class Ph extends jo{data(t={}){return super.data(t)}}class zo{constructor(t,n,o,u){this._firestore=t,this._userDataWriter=n,this._snapshot=u,this.metadata=new Qc(u.hasPendingWrites,u.fromCache),this.query=o}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(o=>{t.call(n,new Ph(this._firestore,this._userDataWriter,o.key,o,new Qc(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Gt(bt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(u,d){if(u._snapshot.oldDocs.isEmpty()){let A=0;return u._snapshot.docChanges.map(C=>{const _=new Ph(u._firestore,u._userDataWriter,C.doc.key,C.doc,new Qc(u._snapshot.mutatedKeys.has(C.doc.key),u._snapshot.fromCache),u.query.converter);return C.doc,{type:"added",doc:_,oldIndex:-1,newIndex:A++}})}{let A=u._snapshot.oldDocs;return u._snapshot.docChanges.filter(C=>d||C.type!==3).map(C=>{const _=new Ph(u._firestore,u._userDataWriter,C.doc.key,C.doc,new Qc(u._snapshot.mutatedKeys.has(C.doc.key),u._snapshot.fromCache),u.query.converter);let x=-1,v=-1;return C.type!==0&&(x=A.indexOf(C.doc.key),A=A.delete(C.doc.key)),C.type!==1&&(A=A.add(C.doc),v=A.indexOf(C.doc.key)),{type:Cb(C.type),doc:_,oldIndex:x,newIndex:v}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Gt(bt.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=zo._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=A0.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],o=[],u=[];return this.docs.forEach(d=>{d._document!==null&&(n.push(d._document),o.push(this._userDataWriter.convertObjectMap(d._document.data.value.mapValue.fields,"previous")),u.push(d.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function Cb(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ie(61501,{type:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wl(i){i=ns(i,rr);const t=ns(i.firestore,mo);return lb(vf(t),i._key).then(n=>oA(t,i,n))}zo._jsonSchemaVersion="firestore/querySnapshot/1.0",zo._jsonSchema={type:hr("string",zo._jsonSchemaVersion),bundleSource:hr("string","QuerySnapshot"),bundleName:hr("string"),bundle:hr("string")};class rg extends _b{constructor(t){super(),this.firestore=t}convertBytes(t){return new es(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new rr(this.firestore,null,n)}}function Bi(i){i=ns(i,Zo);const t=ns(i.firestore,mo),n=vf(t),o=new rg(t);return iA(i._query),cb(n,i._query).then(u=>new zo(t,o,i,u))}function gs(i,t,n,...o){i=ns(i,rr);const u=ns(i.firestore,mo),d=K0(u);let A;return A=typeof(t=ys(t))=="string"||t instanceof bf?yb(d,"updateDoc",i._key,t,n,o):pb(d,"updateDoc",i._key,t),ig(u,[A.toMutation(i._key,ps.exists(!0))])}function Fo(i){return ig(ns(i.firestore,mo),[new b0(i._key,ps.none())])}function Ps(i,t){const n=ns(i.firestore,mo),o=Pn(i),u=Tb(i.converter,t);return ig(n,[mb(K0(i.firestore),"addDoc",o._key,u,i.converter!==null,{}).toMutation(o._key,ps.exists(!1))]).then(()=>o)}function aA(i,...t){i=ys(i);let n={includeMetadataChanges:!1,source:"default"},o=0;typeof t[o]!="object"||Sy(t[o])||(n=t[o++]);const u={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Sy(t[o])){const _=t[o];t[o]=_.next?.bind(_),t[o+1]=_.error?.bind(_),t[o+2]=_.complete?.bind(_)}let d,A,C;if(i instanceof rr)A=ns(i.firestore,mo),C=pf(i._key.path),d={next:_=>{t[o]&&t[o](oA(A,i,_))},error:t[o+1],complete:t[o+2]};else{const _=ns(i,Zo);A=ns(_.firestore,mo),C=_._query;const x=new rg(A);d={next:v=>{t[o]&&t[o](new zo(A,x,_,v))},error:t[o+1],complete:t[o+2]},iA(i._query)}return function(x,v,I,O){const H=new X0(O),X=new G0(v,H,I);return x.asyncQueue.enqueueAndForget(async()=>j0(await tf(x),X)),()=>{H.Nu(),x.asyncQueue.enqueueAndForget(async()=>z0(await tf(x),X))}}(vf(A),C,u,d)}function ig(i,t){return function(o,u){const d=new pa;return o.asyncQueue.enqueueAndForget(async()=>Kv(await ob(o),u,d)),d.promise}(vf(i),t)}function oA(i,t,n){const o=n.docs.get(t._key),u=new rg(i);return new jo(i,u,t._key,o,new Qc(n.hasPendingWrites,n.fromCache),t.converter)}function kh(){return new Z0("serverTimestamp")}(function(t,n=!0){(function(u){Jl=u})(Nx),nu(new zl("firestore",(o,{instanceIdentifier:u,options:d})=>{const A=o.getProvider("app").getImmediate(),C=new mo(new p3(o.getProvider("auth-internal")),new E3(A,o.getProvider("app-check-internal")),function(x,v){if(!Object.prototype.hasOwnProperty.apply(x.options,["projectId"]))throw new Gt(bt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new au(x.options.projectId,v)}(A,u),A);return d={useFetchStreams:n,...d},C._setSettings(d),C},"PUBLIC").setMultipleInstances(!0)),so(R2,N2,t),so(R2,N2,"esm2020")})();const Sb={apiKey:"AIzaSyDxosd6yCZCVd2NGLlIiAthRoCfxAEUrdA",authDomain:"systemproject-de072.firebaseapp.com",projectId:"systemproject-de072",storageBucket:"systemproject-de072.appspot.com",messagingSenderId:"427445110062",appId:"1:427445110062:web:3a870fac07be2b369326bf"},vb=hf(Sb),lA=Q0(vb),bb=async()=>{const i=Pn(lA,"AdminUser","Admin"),t=await Wl(i);return t.exists()?t.data().PIN:(console.log("No such document!"),null)},Ib=async()=>{const i=Pn(lA,"AdminUser","Staff"),t=await Wl(i);return t.exists()?t.data().PIN:(console.log("No such document!"),null)};function Rb(){const[i,t]=at.useState(!1),[n,o]=at.useState(""),[u,d]=at.useState(""),[A,C]=at.useState(""),[_,x]=at.useState(""),v=f0();at.useEffect(()=>{(async()=>{const H=await bb(),X=await Ib();C(H),x(X)})()},[]);const I=()=>{if(!n.trim()){d(" Please enter your PIN.");return}n===A?(t(!0),v("/Dashboard",{replace:!0}),d("")):n===_?(t(!0),v("/take-order",{replace:!0}),d("")):d(" Incorrect password. Please try again.")};return D.jsx("div",{className:"owner-container",children:i?D.jsxs("div",{className:"owner-welcome",children:[D.jsx("h1",{className:"welcome-title",children:" Welcome, Owner!"}),D.jsx(gi,{to:"/Intro",className:"back-link",children:" Back to Intro"})]}):D.jsxs("div",{className:"login-card",children:[D.jsx("h2",{className:"login-title",children:"Please enter pin"}),D.jsx("input",{type:"password",placeholder:"Enter PIN",value:n,onChange:O=>o(O.target.value),className:"login-input"}),D.jsx("button",{onClick:I,className:"login-button",children:"Login"}),u&&D.jsx("p",{className:"error-message",children:u}),D.jsx(gi,{to:"/Intro",className:"back-link",children:" Back"})]})})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cA="firebasestorage.googleapis.com",Nb="storageBucket",Db=120*1e3,Mb=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs extends Qo{constructor(t,n,o=0){super(D1(t),`Firebase Storage: ${n} (${D1(t)})`),this.status_=o,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Gs.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return D1(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var zs;(function(i){i.UNKNOWN="unknown",i.OBJECT_NOT_FOUND="object-not-found",i.BUCKET_NOT_FOUND="bucket-not-found",i.PROJECT_NOT_FOUND="project-not-found",i.QUOTA_EXCEEDED="quota-exceeded",i.UNAUTHENTICATED="unauthenticated",i.UNAUTHORIZED="unauthorized",i.UNAUTHORIZED_APP="unauthorized-app",i.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",i.INVALID_CHECKSUM="invalid-checksum",i.CANCELED="canceled",i.INVALID_EVENT_NAME="invalid-event-name",i.INVALID_URL="invalid-url",i.INVALID_DEFAULT_BUCKET="invalid-default-bucket",i.NO_DEFAULT_BUCKET="no-default-bucket",i.CANNOT_SLICE_BLOB="cannot-slice-blob",i.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",i.NO_DOWNLOAD_URL="no-download-url",i.INVALID_ARGUMENT="invalid-argument",i.INVALID_ARGUMENT_COUNT="invalid-argument-count",i.APP_DELETED="app-deleted",i.INVALID_ROOT_OPERATION="invalid-root-operation",i.INVALID_FORMAT="invalid-format",i.INTERNAL_ERROR="internal-error",i.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(zs||(zs={}));function D1(i){return"storage/"+i}function Ob(){const i="An unknown error occurred, please check the error payload for server response.";return new Gs(zs.UNKNOWN,i)}function Lb(){return new Gs(zs.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Bb(){return new Gs(zs.CANCELED,"User canceled the upload/download.")}function Pb(i){return new Gs(zs.INVALID_URL,"Invalid URL '"+i+"'.")}function kb(i){return new Gs(zs.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.")}function Iy(i){return new Gs(zs.INVALID_ARGUMENT,i)}function uA(){return new Gs(zs.APP_DELETED,"The Firebase app was deleted.")}function Vb(i){return new Gs(zs.INVALID_ROOT_OPERATION,"The operation '"+i+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let o;try{o=ms.makeFromUrl(t,n)}catch{return new ms(t,"")}if(o.path==="")return o;throw kb(t)}static makeFromUrl(t,n){let o=null;const u="([A-Za-z0-9.\\-_]+)";function d(_t){_t.path.charAt(_t.path.length-1)==="/"&&(_t.path_=_t.path_.slice(0,-1))}const A="(/(.*))?$",C=new RegExp("^gs://"+u+A,"i"),_={bucket:1,path:3};function x(_t){_t.path_=decodeURIComponent(_t.path)}const v="v[A-Za-z0-9_]+",I=n.replace(/[.]/g,"\\."),O="(/([^?#]*).*)?$",H=new RegExp(`^https?://${I}/${v}/b/${u}/o${O}`,"i"),X={bucket:1,path:3},J=n===cA?"(?:storage.googleapis.com|storage.cloud.google.com)":n,q="([^?#]*)",Q=new RegExp(`^https?://${J}/${u}/${q}`,"i"),nt=[{regex:C,indices:_,postModify:d},{regex:H,indices:X,postModify:x},{regex:Q,indices:{bucket:1,path:2},postModify:x}];for(let _t=0;_t<nt.length;_t++){const mt=nt[_t],Tt=mt.regex.exec(t);if(Tt){const U=Tt[mt.indices.bucket];let F=Tt[mt.indices.path];F||(F=""),o=new ms(U,F),mt.postModify(o);break}}if(o==null)throw Pb(t);return o}}class Ub{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fb(i,t,n){let o=1,u=null,d=null,A=!1,C=0;function _(){return C===2}let x=!1;function v(...q){x||(x=!0,t.apply(null,q))}function I(q){u=setTimeout(()=>{u=null,i(H,_())},q)}function O(){d&&clearTimeout(d)}function H(q,...Q){if(x){O();return}if(q){O(),v.call(null,q,...Q);return}if(_()||A){O(),v.call(null,q,...Q);return}o<64&&(o*=2);let nt;C===1?(C=2,nt=0):nt=(o+Math.random())*1e3,I(nt)}let X=!1;function J(q){X||(X=!0,O(),!x&&(u!==null?(q||(C=2),clearTimeout(u),I(0)):q||(C=1)))}return I(0),d=setTimeout(()=>{A=!0,J(!0)},n),J}function jb(i){i(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zb(i){return i!==void 0}function Ry(i,t,n,o){if(o<t)throw Iy(`Invalid value for '${i}'. Expected ${t} or greater.`);if(o>n)throw Iy(`Invalid value for '${i}'. Expected ${n} or less.`)}function Hb(i){const t=encodeURIComponent;let n="?";for(const o in i)if(i.hasOwnProperty(o)){const u=t(o)+"="+t(i[o]);n=n+u+"&"}return n=n.slice(0,-1),n}var nf;(function(i){i[i.NO_ERROR=0]="NO_ERROR",i[i.NETWORK_ERROR=1]="NETWORK_ERROR",i[i.ABORT=2]="ABORT"})(nf||(nf={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gb(i,t){const n=i>=500&&i<600,u=[408,429].indexOf(i)!==-1,d=t.indexOf(i)!==-1;return n||u||d}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb{constructor(t,n,o,u,d,A,C,_,x,v,I,O=!0,H=!1){this.url_=t,this.method_=n,this.headers_=o,this.body_=u,this.successCodes_=d,this.additionalRetryCodes_=A,this.callback_=C,this.errorCallback_=_,this.timeout_=x,this.progressCallback_=v,this.connectionFactory_=I,this.retry=O,this.isUsingEmulator=H,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((X,J)=>{this.resolve_=X,this.reject_=J,this.start_()})}start_(){const t=(o,u)=>{if(u){o(!1,new Ih(!1,null,!0));return}const d=this.connectionFactory_();this.pendingConnection_=d;const A=C=>{const _=C.loaded,x=C.lengthComputable?C.total:-1;this.progressCallback_!==null&&this.progressCallback_(_,x)};this.progressCallback_!==null&&d.addUploadProgressListener(A),d.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&d.removeUploadProgressListener(A),this.pendingConnection_=null;const C=d.getErrorCode()===nf.NO_ERROR,_=d.getStatus();if(!C||Gb(_,this.additionalRetryCodes_)&&this.retry){const v=d.getErrorCode()===nf.ABORT;o(!1,new Ih(!1,null,v));return}const x=this.successCodes_.indexOf(_)!==-1;o(!0,new Ih(x,d))})},n=(o,u)=>{const d=this.resolve_,A=this.reject_,C=u.connection;if(u.wasSuccessCode)try{const _=this.callback_(C,C.getResponse());zb(_)?d(_):d()}catch(_){A(_)}else if(C!==null){const _=Ob();_.serverResponse=C.getErrorText(),this.errorCallback_?A(this.errorCallback_(C,_)):A(_)}else if(u.canceled){const _=this.appDelete_?uA():Bb();A(_)}else{const _=Lb();A(_)}};this.canceled_?n(!1,new Ih(!1,null,!0)):this.backoffId_=Fb(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&jb(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Ih{constructor(t,n,o){this.wasSuccessCode=t,this.connection=n,this.canceled=!!o}}function Yb(i,t){t!==null&&t.length>0&&(i.Authorization="Firebase "+t)}function Xb(i,t){i["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function Qb(i,t){t&&(i["X-Firebase-GMPID"]=t)}function Wb(i,t){t!==null&&(i["X-Firebase-AppCheck"]=t)}function Kb(i,t,n,o,u,d,A=!0,C=!1){const _=Hb(i.urlParams),x=i.url+_,v=Object.assign({},i.headers);return Qb(v,t),Yb(v,n),Xb(v,d),Wb(v,o),new qb(x,i.method,v,i.body,i.successCodes,i.additionalRetryCodes,i.handler,i.errorHandler,i.timeout,i.progressCallback,u,A,C)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zb(i){if(i.length===0)return null;const t=i.lastIndexOf("/");return t===-1?"":i.slice(0,t)}function Jb(i){const t=i.lastIndexOf("/",i.length-2);return t===-1?i:i.slice(t+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf{constructor(t,n){this._service=t,n instanceof ms?this._location=n:this._location=ms.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new rf(t,n)}get root(){const t=new ms(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Jb(this._location.path)}get storage(){return this._service}get parent(){const t=Zb(this._location.path);if(t===null)return null;const n=new ms(this._location.bucket,t);return new rf(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw Vb(t)}}function Ny(i,t){const n=t?.[Nb];return n==null?null:ms.makeFromBucketSpec(n,i)}function $b(i,t,n,o={}){i.host=`${t}:${n}`;const u=uf(t);u&&(wx(`https://${i.host}/b`),Tx("Storage",!0)),i._isUsingEmulator=!0,i._protocol=u?"https":"http";const{mockUserToken:d}=o;d&&(i._overrideAuthToken=typeof d=="string"?d:_x(d,i.app.options.projectId))}class t4{constructor(t,n,o,u,d,A=!1){this.app=t,this._authProvider=n,this._appCheckProvider=o,this._url=u,this._firebaseVersion=d,this._isUsingEmulator=A,this._bucket=null,this._host=cA,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Db,this._maxUploadRetryTime=Mb,this._requests=new Set,u!=null?this._bucket=ms.makeFromBucketSpec(u,this._host):this._bucket=Ny(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=ms.makeFromBucketSpec(this._url,t):this._bucket=Ny(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){Ry("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){Ry("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Rx(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new rf(this,t)}_makeRequest(t,n,o,u,d=!0){if(this._deleted)return new Ub(uA());{const A=Kb(t,this._appId,o,u,n,this._firebaseVersion,d,this._isUsingEmulator);return this._requests.add(A),A.getPromise().then(()=>this._requests.delete(A),()=>this._requests.delete(A)),A}}async makeRequestWithTokens(t,n){const[o,u]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,o,u).getPromise()}}const Dy="@firebase/storage",My="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hA="storage";function e4(i=Dx(),t){i=ys(i);const o=Ix(i,hA).getImmediate({identifier:t}),u=Ex("storage");return u&&n4(o,...u),o}function n4(i,t,n,o={}){$b(i,t,n,o)}function r4(i,{instanceIdentifier:t}){const n=i.getProvider("app").getImmediate(),o=i.getProvider("auth-internal"),u=i.getProvider("app-check-internal");return new t4(n,o,u,t,Nx)}function i4(){nu(new zl(hA,r4,"PUBLIC").setMultipleInstances(!0)),so(Dy,My,""),so(Dy,My,"esm2020")}i4();const s4={apiKey:"AIzaSyDxosd6yCZCVd2NGLlIiAthRoCfxAEUrdA",authDomain:"systemproject-de072.firebaseapp.com",projectId:"systemproject-de072",storageBucket:"systemproject-de072.appspot.com",messagingSenderId:"427445110062",appId:"1:427445110062:web:3a870fac07be2b369326bf"},fA=hf(s4),Ne=Q0(fA);e4(fA);const a4=async(i=7)=>{const t=new Date,n=new Date(t);n.setDate(t.getDate()-i);const o=bn(Ne,"customers"),u=await Bi(o),d=[];return u.forEach(A=>{const C=A.data(),_=C.lastTransaction;let x=null;_&&typeof _.toDate=="function"?x=_.toDate():_ instanceof Date?x=_:_&&(x=new Date(_),isNaN(x.getTime())&&(x=null)),x&&x>=n&&d.push({id:A.id,name:C.name||C.displayName||null,email:C.email||null,lastTransaction:x,totalTransactions:Number(C.totalTransactions||C.txCount||0)})}),d.sort((A,C)=>C.lastTransaction.getTime()-A.lastTransaction.getTime()),d},o4=(i,t)=>{const n=new Date,o=new Date(n.toDateString()),u=new Date(i.toDateString());if(t==="today")return u.getTime()===o.getTime();if(t==="week"){const d=new Date(o);return d.setDate(o.getDate()-o.getDay()),u>=d&&u<=n}else if(t==="month")return u.getMonth()===o.getMonth()&&u.getFullYear()===o.getFullYear();return!1},l4=async i=>{const t=bn(Ne,"transactions"),n=await Bi(t);let o=0;const u=new Set;let d=0;const A={};n.forEach(_=>{const x=_.data(),v=x.date?.toDate?.()||new Date(x.date||Date.now()),I=x.status||"Pending",O=x.type||"",H=x.paymentMethod||"",X=x.items||[],J=Number(x.amount)||0;I==="Completed"&&o4(v,i)&&O!=="points-used"&&(o+=J),I==="Completed"&&x.orderId&&x.customerId&&u.add(x.customerId),(O==="wallet-topup"||H==="Wallet Top-up")&&(d+=J),I==="Completed"&&Array.isArray(X)&&X.forEach(q=>{const Q=q.name||"Unknown",ft=Number(q.qty)||1;A[Q]=(A[Q]||0)+ft})});const C=Object.entries(A).sort((_,x)=>x[1]-_[1]).slice(0,3).map(([_])=>_);return{totalSales:o,activeCustomers:u.size,walletTopups:d,topItems:C}};function c4(){const[i,t]=at.useState(0),[n,o]=at.useState(0),[u,d]=at.useState([]),[A,C]=at.useState(0),[_,x]=at.useState([]),[v,I]=at.useState(!1),[O,H]=at.useState(7),[X,J]=at.useState("today");return at.useEffect(()=>{(async()=>{try{const{totalSales:Q,activeCustomers:ft,walletTopups:nt,topItems:_t}=await l4(X);t(Q),o(nt),d(_t)}catch(Q){console.error("Error fetching dashboard data:",Q)}})()},[X]),at.useEffect(()=>{(async()=>{try{const Q=await a4(O);C(Q.length),x(Q)}catch(Q){console.error("Error loading active customers:",Q)}})()},[O]),D.jsxs(D.Fragment,{children:[D.jsx(Xo,{}),D.jsxs("div",{className:"dashboard-container",children:[D.jsx("h1",{className:"dashboard-title",children:"Dashboard Overview"}),D.jsxs("div",{style:{display:"flex",gap:12,alignItems:"center",marginBottom:16},children:[D.jsx("div",{children:D.jsxs("label",{children:["Sales filter:"," ",D.jsxs("select",{id:"sales-filter",value:X,onChange:q=>J(q.target.value),children:[D.jsx("option",{value:"today",children:"Today"}),D.jsx("option",{value:"week",children:"This Week"}),D.jsx("option",{value:"month",children:"This Month"})]})]})}),D.jsx("div",{children:D.jsxs("label",{children:["Active window:"," ",D.jsxs("select",{value:O,onChange:q=>H(Number(q.target.value)),children:[D.jsx("option",{value:1,children:"Last 1 day"}),D.jsx("option",{value:3,children:"Last 3 days"}),D.jsx("option",{value:7,children:"Last 7 days"}),D.jsx("option",{value:30,children:"Last 30 days"})]})]})})]}),D.jsxs("div",{className:"stats-grid",children:[D.jsxs("div",{className:"stat-card",children:[D.jsxs("h3",{children:[" Total Sales"," ",X==="today"?"Today":X==="week"?"This Week":"This Month"]}),D.jsxs("p",{children:["",i.toLocaleString()]})]}),D.jsxs("div",{className:"stat-card",children:[D.jsxs("h3",{children:[" Active Customers (Last ",O," days)"]}),D.jsx("p",{style:{fontSize:22,fontWeight:700},children:A}),D.jsx("button",{onClick:()=>I(q=>!q),children:v?"Hide details":"Show details"})]}),D.jsxs("div",{className:"stat-card",children:[D.jsx("h3",{children:" Wallet Top-ups"}),D.jsxs("p",{children:["",n.toLocaleString()]})]}),D.jsxs("div",{className:"stat-card",children:[D.jsx("h3",{children:" Top 3 Selling Items"}),D.jsx("ul",{children:u.length>0?u.map((q,Q)=>D.jsx("li",{children:q},Q)):D.jsx("li",{children:"No data"})})]})]}),D.jsxs("div",{className:"graphs-section",children:[D.jsxs("div",{className:"graph-card",children:[D.jsx("h3",{children:" Sales Trend"}),D.jsx("div",{className:"graph-placeholder",children:"[Graph Placeholder]"})]}),D.jsxs("div",{className:"graph-card",children:[D.jsx("h3",{children:" New vs Returning Customers"}),D.jsx("div",{className:"graph-placeholder",children:"[Graph Placeholder]"})]})]}),v&&D.jsxs("div",{className:"active-table",style:{marginTop:20},children:[D.jsxs("h3",{children:["Active Customers (Last ",O," days)"]}),_.length===0?D.jsx("p",{children:"No active customers in this period."}):D.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[D.jsx("thead",{children:D.jsxs("tr",{children:[D.jsx("th",{style:{textAlign:"left",padding:8},children:"Name / Email"}),D.jsx("th",{style:{textAlign:"left",padding:8},children:"Last Transaction"}),D.jsx("th",{style:{textAlign:"left",padding:8},children:"Total Transactions"})]})}),D.jsx("tbody",{children:_.map(q=>D.jsxs("tr",{children:[D.jsx("td",{style:{padding:8},children:q.name||q.email||q.id}),D.jsx("td",{style:{padding:8},children:q.lastTransaction instanceof Date?q.lastTransaction.toLocaleString():String(q.lastTransaction)}),D.jsx("td",{style:{padding:8},children:q.totalTransactions})]},q.id))})]})]})]})]})}var u4=Object.defineProperty,sf=Object.getOwnPropertySymbols,dA=Object.prototype.hasOwnProperty,gA=Object.prototype.propertyIsEnumerable,Oy=(i,t,n)=>t in i?u4(i,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[t]=n,i0=(i,t)=>{for(var n in t||(t={}))dA.call(t,n)&&Oy(i,n,t[n]);if(sf)for(var n of sf(t))gA.call(t,n)&&Oy(i,n,t[n]);return i},s0=(i,t)=>{var n={};for(var o in i)dA.call(i,o)&&t.indexOf(o)<0&&(n[o]=i[o]);if(i!=null&&sf)for(var o of sf(i))t.indexOf(o)<0&&gA.call(i,o)&&(n[o]=i[o]);return n};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var qo;(i=>{const t=class ve{constructor(_,x,v,I){if(this.version=_,this.errorCorrectionLevel=x,this.modules=[],this.isFunction=[],_<ve.MIN_VERSION||_>ve.MAX_VERSION)throw new RangeError("Version value out of range");if(I<-1||I>7)throw new RangeError("Mask value out of range");this.size=_*4+17;let O=[];for(let X=0;X<this.size;X++)O.push(!1);for(let X=0;X<this.size;X++)this.modules.push(O.slice()),this.isFunction.push(O.slice());this.drawFunctionPatterns();const H=this.addEccAndInterleave(v);if(this.drawCodewords(H),I==-1){let X=1e9;for(let J=0;J<8;J++){this.applyMask(J),this.drawFormatBits(J);const q=this.getPenaltyScore();q<X&&(I=J,X=q),this.applyMask(J)}}u(0<=I&&I<=7),this.mask=I,this.applyMask(I),this.drawFormatBits(I),this.isFunction=[]}static encodeText(_,x){const v=i.QrSegment.makeSegments(_);return ve.encodeSegments(v,x)}static encodeBinary(_,x){const v=i.QrSegment.makeBytes(_);return ve.encodeSegments([v],x)}static encodeSegments(_,x,v=1,I=40,O=-1,H=!0){if(!(ve.MIN_VERSION<=v&&v<=I&&I<=ve.MAX_VERSION)||O<-1||O>7)throw new RangeError("Invalid value");let X,J;for(X=v;;X++){const nt=ve.getNumDataCodewords(X,x)*8,_t=A.getTotalBits(_,X);if(_t<=nt){J=_t;break}if(X>=I)throw new RangeError("Data too long")}for(const nt of[ve.Ecc.MEDIUM,ve.Ecc.QUARTILE,ve.Ecc.HIGH])H&&J<=ve.getNumDataCodewords(X,nt)*8&&(x=nt);let q=[];for(const nt of _){n(nt.mode.modeBits,4,q),n(nt.numChars,nt.mode.numCharCountBits(X),q);for(const _t of nt.getData())q.push(_t)}u(q.length==J);const Q=ve.getNumDataCodewords(X,x)*8;u(q.length<=Q),n(0,Math.min(4,Q-q.length),q),n(0,(8-q.length%8)%8,q),u(q.length%8==0);for(let nt=236;q.length<Q;nt^=253)n(nt,8,q);let ft=[];for(;ft.length*8<q.length;)ft.push(0);return q.forEach((nt,_t)=>ft[_t>>>3]|=nt<<7-(_t&7)),new ve(X,x,ft,O)}getModule(_,x){return 0<=_&&_<this.size&&0<=x&&x<this.size&&this.modules[x][_]}getModules(){return this.modules}drawFunctionPatterns(){for(let v=0;v<this.size;v++)this.setFunctionModule(6,v,v%2==0),this.setFunctionModule(v,6,v%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const _=this.getAlignmentPatternPositions(),x=_.length;for(let v=0;v<x;v++)for(let I=0;I<x;I++)v==0&&I==0||v==0&&I==x-1||v==x-1&&I==0||this.drawAlignmentPattern(_[v],_[I]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(_){const x=this.errorCorrectionLevel.formatBits<<3|_;let v=x;for(let O=0;O<10;O++)v=v<<1^(v>>>9)*1335;const I=(x<<10|v)^21522;u(I>>>15==0);for(let O=0;O<=5;O++)this.setFunctionModule(8,O,o(I,O));this.setFunctionModule(8,7,o(I,6)),this.setFunctionModule(8,8,o(I,7)),this.setFunctionModule(7,8,o(I,8));for(let O=9;O<15;O++)this.setFunctionModule(14-O,8,o(I,O));for(let O=0;O<8;O++)this.setFunctionModule(this.size-1-O,8,o(I,O));for(let O=8;O<15;O++)this.setFunctionModule(8,this.size-15+O,o(I,O));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let _=this.version;for(let v=0;v<12;v++)_=_<<1^(_>>>11)*7973;const x=this.version<<12|_;u(x>>>18==0);for(let v=0;v<18;v++){const I=o(x,v),O=this.size-11+v%3,H=Math.floor(v/3);this.setFunctionModule(O,H,I),this.setFunctionModule(H,O,I)}}drawFinderPattern(_,x){for(let v=-4;v<=4;v++)for(let I=-4;I<=4;I++){const O=Math.max(Math.abs(I),Math.abs(v)),H=_+I,X=x+v;0<=H&&H<this.size&&0<=X&&X<this.size&&this.setFunctionModule(H,X,O!=2&&O!=4)}}drawAlignmentPattern(_,x){for(let v=-2;v<=2;v++)for(let I=-2;I<=2;I++)this.setFunctionModule(_+I,x+v,Math.max(Math.abs(I),Math.abs(v))!=1)}setFunctionModule(_,x,v){this.modules[x][_]=v,this.isFunction[x][_]=!0}addEccAndInterleave(_){const x=this.version,v=this.errorCorrectionLevel;if(_.length!=ve.getNumDataCodewords(x,v))throw new RangeError("Invalid argument");const I=ve.NUM_ERROR_CORRECTION_BLOCKS[v.ordinal][x],O=ve.ECC_CODEWORDS_PER_BLOCK[v.ordinal][x],H=Math.floor(ve.getNumRawDataModules(x)/8),X=I-H%I,J=Math.floor(H/I);let q=[];const Q=ve.reedSolomonComputeDivisor(O);for(let nt=0,_t=0;nt<I;nt++){let mt=_.slice(_t,_t+J-O+(nt<X?0:1));_t+=mt.length;const Tt=ve.reedSolomonComputeRemainder(mt,Q);nt<X&&mt.push(0),q.push(mt.concat(Tt))}let ft=[];for(let nt=0;nt<q[0].length;nt++)q.forEach((_t,mt)=>{(nt!=J-O||mt>=X)&&ft.push(_t[nt])});return u(ft.length==H),ft}drawCodewords(_){if(_.length!=Math.floor(ve.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let x=0;for(let v=this.size-1;v>=1;v-=2){v==6&&(v=5);for(let I=0;I<this.size;I++)for(let O=0;O<2;O++){const H=v-O,J=(v+1&2)==0?this.size-1-I:I;!this.isFunction[J][H]&&x<_.length*8&&(this.modules[J][H]=o(_[x>>>3],7-(x&7)),x++)}}u(x==_.length*8)}applyMask(_){if(_<0||_>7)throw new RangeError("Mask value out of range");for(let x=0;x<this.size;x++)for(let v=0;v<this.size;v++){let I;switch(_){case 0:I=(v+x)%2==0;break;case 1:I=x%2==0;break;case 2:I=v%3==0;break;case 3:I=(v+x)%3==0;break;case 4:I=(Math.floor(v/3)+Math.floor(x/2))%2==0;break;case 5:I=v*x%2+v*x%3==0;break;case 6:I=(v*x%2+v*x%3)%2==0;break;case 7:I=((v+x)%2+v*x%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[x][v]&&I&&(this.modules[x][v]=!this.modules[x][v])}}getPenaltyScore(){let _=0;for(let O=0;O<this.size;O++){let H=!1,X=0,J=[0,0,0,0,0,0,0];for(let q=0;q<this.size;q++)this.modules[O][q]==H?(X++,X==5?_+=ve.PENALTY_N1:X>5&&_++):(this.finderPenaltyAddHistory(X,J),H||(_+=this.finderPenaltyCountPatterns(J)*ve.PENALTY_N3),H=this.modules[O][q],X=1);_+=this.finderPenaltyTerminateAndCount(H,X,J)*ve.PENALTY_N3}for(let O=0;O<this.size;O++){let H=!1,X=0,J=[0,0,0,0,0,0,0];for(let q=0;q<this.size;q++)this.modules[q][O]==H?(X++,X==5?_+=ve.PENALTY_N1:X>5&&_++):(this.finderPenaltyAddHistory(X,J),H||(_+=this.finderPenaltyCountPatterns(J)*ve.PENALTY_N3),H=this.modules[q][O],X=1);_+=this.finderPenaltyTerminateAndCount(H,X,J)*ve.PENALTY_N3}for(let O=0;O<this.size-1;O++)for(let H=0;H<this.size-1;H++){const X=this.modules[O][H];X==this.modules[O][H+1]&&X==this.modules[O+1][H]&&X==this.modules[O+1][H+1]&&(_+=ve.PENALTY_N2)}let x=0;for(const O of this.modules)x=O.reduce((H,X)=>H+(X?1:0),x);const v=this.size*this.size,I=Math.ceil(Math.abs(x*20-v*10)/v)-1;return u(0<=I&&I<=9),_+=I*ve.PENALTY_N4,u(0<=_&&_<=2568888),_}getAlignmentPatternPositions(){if(this.version==1)return[];{const _=Math.floor(this.version/7)+2,x=this.version==32?26:Math.ceil((this.version*4+4)/(_*2-2))*2;let v=[6];for(let I=this.size-7;v.length<_;I-=x)v.splice(1,0,I);return v}}static getNumRawDataModules(_){if(_<ve.MIN_VERSION||_>ve.MAX_VERSION)throw new RangeError("Version number out of range");let x=(16*_+128)*_+64;if(_>=2){const v=Math.floor(_/7)+2;x-=(25*v-10)*v-55,_>=7&&(x-=36)}return u(208<=x&&x<=29648),x}static getNumDataCodewords(_,x){return Math.floor(ve.getNumRawDataModules(_)/8)-ve.ECC_CODEWORDS_PER_BLOCK[x.ordinal][_]*ve.NUM_ERROR_CORRECTION_BLOCKS[x.ordinal][_]}static reedSolomonComputeDivisor(_){if(_<1||_>255)throw new RangeError("Degree out of range");let x=[];for(let I=0;I<_-1;I++)x.push(0);x.push(1);let v=1;for(let I=0;I<_;I++){for(let O=0;O<x.length;O++)x[O]=ve.reedSolomonMultiply(x[O],v),O+1<x.length&&(x[O]^=x[O+1]);v=ve.reedSolomonMultiply(v,2)}return x}static reedSolomonComputeRemainder(_,x){let v=x.map(I=>0);for(const I of _){const O=I^v.shift();v.push(0),x.forEach((H,X)=>v[X]^=ve.reedSolomonMultiply(H,O))}return v}static reedSolomonMultiply(_,x){if(_>>>8||x>>>8)throw new RangeError("Byte out of range");let v=0;for(let I=7;I>=0;I--)v=v<<1^(v>>>7)*285,v^=(x>>>I&1)*_;return u(v>>>8==0),v}finderPenaltyCountPatterns(_){const x=_[1];u(x<=this.size*3);const v=x>0&&_[2]==x&&_[3]==x*3&&_[4]==x&&_[5]==x;return(v&&_[0]>=x*4&&_[6]>=x?1:0)+(v&&_[6]>=x*4&&_[0]>=x?1:0)}finderPenaltyTerminateAndCount(_,x,v){return _&&(this.finderPenaltyAddHistory(x,v),x=0),x+=this.size,this.finderPenaltyAddHistory(x,v),this.finderPenaltyCountPatterns(v)}finderPenaltyAddHistory(_,x){x[0]==0&&(_+=this.size),x.pop(),x.unshift(_)}};t.MIN_VERSION=1,t.MAX_VERSION=40,t.PENALTY_N1=3,t.PENALTY_N2=3,t.PENALTY_N3=40,t.PENALTY_N4=10,t.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],t.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],i.QrCode=t;function n(C,_,x){if(_<0||_>31||C>>>_)throw new RangeError("Value out of range");for(let v=_-1;v>=0;v--)x.push(C>>>v&1)}function o(C,_){return(C>>>_&1)!=0}function u(C){if(!C)throw new Error("Assertion error")}const d=class Qn{constructor(_,x,v){if(this.mode=_,this.numChars=x,this.bitData=v,x<0)throw new RangeError("Invalid argument");this.bitData=v.slice()}static makeBytes(_){let x=[];for(const v of _)n(v,8,x);return new Qn(Qn.Mode.BYTE,_.length,x)}static makeNumeric(_){if(!Qn.isNumeric(_))throw new RangeError("String contains non-numeric characters");let x=[];for(let v=0;v<_.length;){const I=Math.min(_.length-v,3);n(parseInt(_.substring(v,v+I),10),I*3+1,x),v+=I}return new Qn(Qn.Mode.NUMERIC,_.length,x)}static makeAlphanumeric(_){if(!Qn.isAlphanumeric(_))throw new RangeError("String contains unencodable characters in alphanumeric mode");let x=[],v;for(v=0;v+2<=_.length;v+=2){let I=Qn.ALPHANUMERIC_CHARSET.indexOf(_.charAt(v))*45;I+=Qn.ALPHANUMERIC_CHARSET.indexOf(_.charAt(v+1)),n(I,11,x)}return v<_.length&&n(Qn.ALPHANUMERIC_CHARSET.indexOf(_.charAt(v)),6,x),new Qn(Qn.Mode.ALPHANUMERIC,_.length,x)}static makeSegments(_){return _==""?[]:Qn.isNumeric(_)?[Qn.makeNumeric(_)]:Qn.isAlphanumeric(_)?[Qn.makeAlphanumeric(_)]:[Qn.makeBytes(Qn.toUtf8ByteArray(_))]}static makeEci(_){let x=[];if(_<0)throw new RangeError("ECI assignment value out of range");if(_<128)n(_,8,x);else if(_<16384)n(2,2,x),n(_,14,x);else if(_<1e6)n(6,3,x),n(_,21,x);else throw new RangeError("ECI assignment value out of range");return new Qn(Qn.Mode.ECI,0,x)}static isNumeric(_){return Qn.NUMERIC_REGEX.test(_)}static isAlphanumeric(_){return Qn.ALPHANUMERIC_REGEX.test(_)}getData(){return this.bitData.slice()}static getTotalBits(_,x){let v=0;for(const I of _){const O=I.mode.numCharCountBits(x);if(I.numChars>=1<<O)return 1/0;v+=4+O+I.bitData.length}return v}static toUtf8ByteArray(_){_=encodeURI(_);let x=[];for(let v=0;v<_.length;v++)_.charAt(v)!="%"?x.push(_.charCodeAt(v)):(x.push(parseInt(_.substring(v+1,v+3),16)),v+=2);return x}};d.NUMERIC_REGEX=/^[0-9]*$/,d.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,d.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let A=d;i.QrSegment=d})(qo||(qo={}));(i=>{(t=>{const n=class{constructor(u,d){this.ordinal=u,this.formatBits=d}};n.LOW=new n(0,1),n.MEDIUM=new n(1,0),n.QUARTILE=new n(2,3),n.HIGH=new n(3,2),t.Ecc=n})(i.QrCode||(i.QrCode={}))})(qo||(qo={}));(i=>{(t=>{const n=class{constructor(u,d){this.modeBits=u,this.numBitsCharCount=d}numCharCountBits(u){return this.numBitsCharCount[Math.floor((u+7)/17)]}};n.NUMERIC=new n(1,[10,12,14]),n.ALPHANUMERIC=new n(2,[9,11,13]),n.BYTE=new n(4,[8,16,16]),n.KANJI=new n(8,[8,10,12]),n.ECI=new n(7,[0,0,0]),t.Mode=n})(i.QrSegment||(i.QrSegment={}))})(qo||(qo={}));var kl=qo;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var h4={L:kl.QrCode.Ecc.LOW,M:kl.QrCode.Ecc.MEDIUM,Q:kl.QrCode.Ecc.QUARTILE,H:kl.QrCode.Ecc.HIGH},mA=128,pA="L",yA="#FFFFFF",xA="#000000",EA=!1,AA=1,f4=4,d4=0,g4=.1;function wA(i,t=0){const n=[];return i.forEach(function(o,u){let d=null;o.forEach(function(A,C){if(!A&&d!==null){n.push(`M${d+t} ${u+t}h${C-d}v1H${d+t}z`),d=null;return}if(C===o.length-1){if(!A)return;d===null?n.push(`M${C+t},${u+t} h1v1H${C+t}z`):n.push(`M${d+t},${u+t} h${C+1-d}v1H${d+t}z`);return}A&&d===null&&(d=C)})}),n.join("")}function _A(i,t){return i.slice().map((n,o)=>o<t.y||o>=t.y+t.h?n:n.map((u,d)=>d<t.x||d>=t.x+t.w?u:!1))}function m4(i,t,n,o){if(o==null)return null;const u=i.length+n*2,d=Math.floor(t*g4),A=u/t,C=(o.width||d)*A,_=(o.height||d)*A,x=o.x==null?i.length/2-C/2:o.x*A,v=o.y==null?i.length/2-_/2:o.y*A,I=o.opacity==null?1:o.opacity;let O=null;if(o.excavate){let X=Math.floor(x),J=Math.floor(v),q=Math.ceil(C+x-X),Q=Math.ceil(_+v-J);O={x:X,y:J,w:q,h:Q}}const H=o.crossOrigin;return{x,y:v,h:_,w:C,excavation:O,opacity:I,crossOrigin:H}}function p4(i,t){return t!=null?Math.max(Math.floor(t),0):i?f4:d4}function TA({value:i,level:t,minVersion:n,includeMargin:o,marginSize:u,imageSettings:d,size:A,boostLevel:C}){let _=xn.useMemo(()=>{const X=(Array.isArray(i)?i:[i]).reduce((J,q)=>(J.push(...kl.QrSegment.makeSegments(q)),J),[]);return kl.QrCode.encodeSegments(X,h4[t],n,void 0,void 0,C)},[i,t,n,C]);const{cells:x,margin:v,numCells:I,calculatedImageSettings:O}=xn.useMemo(()=>{let H=_.getModules();const X=p4(o,u),J=H.length+X*2,q=m4(H,A,X,d);return{cells:H,margin:X,numCells:J,calculatedImageSettings:q}},[_,A,d,o,u]);return{qrcode:_,margin:v,cells:x,numCells:I,calculatedImageSettings:O}}var y4=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),x4=xn.forwardRef(function(t,n){const o=t,{value:u,size:d=mA,level:A=pA,bgColor:C=yA,fgColor:_=xA,includeMargin:x=EA,minVersion:v=AA,boostLevel:I,marginSize:O,imageSettings:H}=o,J=s0(o,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:q}=J,Q=s0(J,["style"]),ft=H?.src,nt=xn.useRef(null),_t=xn.useRef(null),mt=xn.useCallback(Pt=>{nt.current=Pt,typeof n=="function"?n(Pt):n&&(n.current=Pt)},[n]),[Tt,U]=xn.useState(!1),{margin:F,cells:k,numCells:et,calculatedImageSettings:tt}=TA({value:u,level:A,minVersion:v,boostLevel:I,includeMargin:x,marginSize:O,imageSettings:H,size:d});xn.useEffect(()=>{if(nt.current!=null){const Pt=nt.current,st=Pt.getContext("2d");if(!st)return;let ut=k;const xt=_t.current,jt=tt!=null&&xt!==null&&xt.complete&&xt.naturalHeight!==0&&xt.naturalWidth!==0;jt&&tt.excavation!=null&&(ut=_A(k,tt.excavation));const $t=window.devicePixelRatio||1;Pt.height=Pt.width=d*$t;const Z=d/et*$t;st.scale(Z,Z),st.fillStyle=C,st.fillRect(0,0,et,et),st.fillStyle=_,y4?st.fill(new Path2D(wA(ut,F))):k.forEach(function(It,Ot){It.forEach(function(Mt,Ht){Mt&&st.fillRect(Ht+F,Ot+F,1,1)})}),tt&&(st.globalAlpha=tt.opacity),jt&&st.drawImage(xt,tt.x+F,tt.y+F,tt.w,tt.h)}}),xn.useEffect(()=>{U(!1)},[ft]);const K=i0({height:d,width:d},q);let Y=null;return ft!=null&&(Y=xn.createElement("img",{src:ft,key:ft,style:{display:"none"},onLoad:()=>{U(!0)},ref:_t,crossOrigin:tt?.crossOrigin})),xn.createElement(xn.Fragment,null,xn.createElement("canvas",i0({style:K,height:d,width:d,ref:mt,role:"img"},Q)),Y)});x4.displayName="QRCodeCanvas";var CA=xn.forwardRef(function(t,n){const o=t,{value:u,size:d=mA,level:A=pA,bgColor:C=yA,fgColor:_=xA,includeMargin:x=EA,minVersion:v=AA,boostLevel:I,title:O,marginSize:H,imageSettings:X}=o,J=s0(o,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:q,cells:Q,numCells:ft,calculatedImageSettings:nt}=TA({value:u,level:A,minVersion:v,boostLevel:I,includeMargin:x,marginSize:H,imageSettings:X,size:d});let _t=Q,mt=null;X!=null&&nt!=null&&(nt.excavation!=null&&(_t=_A(Q,nt.excavation)),mt=xn.createElement("image",{href:X.src,height:nt.h,width:nt.w,x:nt.x+q,y:nt.y+q,preserveAspectRatio:"none",opacity:nt.opacity,crossOrigin:nt.crossOrigin}));const Tt=wA(_t,q);return xn.createElement("svg",i0({height:d,width:d,viewBox:`0 0 ${ft} ${ft}`,ref:n,role:"img"},J),!!O&&xn.createElement("title",null,O),xn.createElement("path",{fill:C,d:`M0,0 h${ft}v${ft}H0z`,shapeRendering:"crispEdges"}),xn.createElement("path",{fill:_,d:Tt,shapeRendering:"crispEdges"}),mt)});CA.displayName="QRCodeSVG";const E4=async(i,t,n,o)=>{try{const A=((await Bi(bn(Ne,"customers"))).size+1).toString().padStart(4,"0"),C=await Ps(bn(Ne,"customers"),{customerNumber:A,name:i,email:t,mobile:n,wallet:o,tier:"Bronze",status:"Active",points:0,qrCode:"",dateJoined:new Date().toISOString()}),_=C.id;return await gs(Pn(Ne,"customers",C.id),{qrCode:_}),{success:!0,id:C.id,customerNumber:A,qrValue:_}}catch(u){return console.error(" Error adding customer:",u),{success:!1,error:u}}};function A4(){const[i,t]=at.useState([]),[n,o]=at.useState("All"),[u,d]=at.useState("All"),[A,C]=at.useState(""),[_,x]=at.useState(null),[v,I]=at.useState(!1),[O,H]=at.useState({name:"",email:"",mobile:"",wallet:0});at.useEffect(()=>{const Q=aA(bn(Ne,"customers"),ft=>{const nt=ft.docs.map(_t=>{const mt=_t.data(),Tt=mt.createdAt?mt.createdAt.toDate().toLocaleDateString("en-PH",{year:"numeric",month:"long",day:"numeric"}):"N/A";return{id:_t.id,...mt,dateJoined:Tt}});t(nt)});return()=>Q()},[]);const X=async()=>{const Q=await E4(O.name,O.email,O.mobile,O.wallet);Q.success?alert("Customer added successfully with QR code!"):alert("Error adding customer: "+Q.error),I(!1),H({name:"",email:"",mobile:"",wallet:0})},J=async Q=>{window.confirm("Are you sure you want to delete this customer?")&&(await Fo(Pn(Ne,"customers",Q)),t(ft=>ft.filter(nt=>nt.id!==Q)))},q=i.filter(Q=>{const ft=n==="All"||Q.tier===n,nt=u==="All"||Q.status===u,_t=Q.mobile.toLowerCase().includes(A.toLowerCase());return ft&&nt&&_t});return D.jsxs(D.Fragment,{children:[D.jsx(Xo,{}),D.jsxs("div",{className:"customer-container",children:[D.jsx("h2",{className:"title",children:"Customer Management"}),D.jsxs("div",{className:"filters",children:[D.jsxs("select",{value:n,onChange:Q=>o(Q.target.value),children:[D.jsx("option",{value:"All",children:"All Tiers"}),D.jsx("option",{value:"Bronze",children:"Bronze"}),D.jsx("option",{value:"Silver",children:"Silver"}),D.jsx("option",{value:"Gold",children:"Gold"})]}),D.jsxs("select",{value:u,onChange:Q=>d(Q.target.value),children:[D.jsx("option",{value:"All",children:"All Status"}),D.jsx("option",{value:"Active",children:"Active"}),D.jsx("option",{value:"Inactive",children:"Inactive"})]}),D.jsx("input",{type:"text",placeholder:"Search by Mobile Number",value:A,onChange:Q=>C(Q.target.value)}),D.jsx("button",{className:"btn add",onClick:()=>I(!0),children:"+ Add Customer"})]}),D.jsxs("table",{className:"customer-table",children:[D.jsx("thead",{children:D.jsxs("tr",{children:[D.jsx("th",{children:"ID"}),D.jsx("th",{children:"Name"}),D.jsx("th",{children:"Mobile"}),D.jsx("th",{children:"Tier"}),D.jsx("th",{children:"Status"}),D.jsx("th",{children:"Wallet"}),D.jsx("th",{children:"Points"}),D.jsx("th",{children:"Actions"})]})}),D.jsx("tbody",{children:q.map(Q=>D.jsxs("tr",{children:[D.jsx("td",{children:Q.customerNumber}),D.jsx("td",{children:Q.fullName}),D.jsx("td",{children:Q.mobile}),D.jsx("td",{children:Q.tier}),D.jsx("td",{children:Q.status}),D.jsxs("td",{children:["",Q.wallet]}),D.jsx("td",{children:Q.points}),D.jsxs("td",{children:[D.jsx("button",{className:"btn",onClick:()=>x(Q),children:"View"}),D.jsx("button",{className:"btn danger",onClick:()=>J(Q.id),children:"Delete"})]})]},Q.id))})]}),_&&D.jsx("div",{className:"modal",children:D.jsxs("div",{className:"modal-content",children:[D.jsx("h3",{children:"Customer Details"}),D.jsxs("p",{children:[D.jsx("strong",{children:"ID:"})," ",_.customerNumber]}),D.jsxs("p",{children:[D.jsx("strong",{children:"Name:"})," ",_.fullName]}),D.jsxs("p",{children:[D.jsx("strong",{children:"Mobile:"})," ",_.mobile]}),D.jsxs("p",{children:[D.jsx("strong",{children:"Email:"})," ",_.email]}),D.jsxs("p",{children:[D.jsx("strong",{children:"Tier:"})," ",_.tier]}),D.jsxs("p",{children:[D.jsx("strong",{children:"Status:"})," ",_.status]}),D.jsxs("p",{children:[D.jsx("strong",{children:"Wallet:"})," ",_.wallet]}),D.jsxs("p",{children:[D.jsx("strong",{children:"Date Joined:"})," ",_.dateJoined||"N/A"]}),_.qrCode&&D.jsx(CA,{value:_.qrCode,size:128}),D.jsx("br",{}),D.jsx("button",{className:"btn",onClick:()=>x(null),children:"Close"})]})}),v&&D.jsx("div",{className:"modal",children:D.jsxs("div",{className:"modal-content",children:[D.jsx("h3",{children:"Add Customer"}),D.jsx("input",{type:"text",placeholder:"Name",value:O.name,onChange:Q=>H({...O,name:Q.target.value})}),D.jsx("input",{type:"text",placeholder:"Mobile Number",value:O.mobile,onChange:Q=>H({...O,mobile:Q.target.value})}),D.jsx("input",{type:"email",placeholder:"Email",value:O.email,onChange:Q=>H({...O,email:Q.target.value})}),D.jsxs("div",{className:"modal-actions",children:[D.jsx("button",{className:"btn",onClick:X,children:"Save"}),D.jsx("button",{className:"btn danger",onClick:()=>I(!1),children:"Cancel"})]})]})})]})]})}var Xt;(function(i){i[i.QR_CODE=0]="QR_CODE",i[i.AZTEC=1]="AZTEC",i[i.CODABAR=2]="CODABAR",i[i.CODE_39=3]="CODE_39",i[i.CODE_93=4]="CODE_93",i[i.CODE_128=5]="CODE_128",i[i.DATA_MATRIX=6]="DATA_MATRIX",i[i.MAXICODE=7]="MAXICODE",i[i.ITF=8]="ITF",i[i.EAN_13=9]="EAN_13",i[i.EAN_8=10]="EAN_8",i[i.PDF_417=11]="PDF_417",i[i.RSS_14=12]="RSS_14",i[i.RSS_EXPANDED=13]="RSS_EXPANDED",i[i.UPC_A=14]="UPC_A",i[i.UPC_E=15]="UPC_E",i[i.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Xt||(Xt={}));var Ly=new Map([[Xt.QR_CODE,"QR_CODE"],[Xt.AZTEC,"AZTEC"],[Xt.CODABAR,"CODABAR"],[Xt.CODE_39,"CODE_39"],[Xt.CODE_93,"CODE_93"],[Xt.CODE_128,"CODE_128"],[Xt.DATA_MATRIX,"DATA_MATRIX"],[Xt.MAXICODE,"MAXICODE"],[Xt.ITF,"ITF"],[Xt.EAN_13,"EAN_13"],[Xt.EAN_8,"EAN_8"],[Xt.PDF_417,"PDF_417"],[Xt.RSS_14,"RSS_14"],[Xt.RSS_EXPANDED,"RSS_EXPANDED"],[Xt.UPC_A,"UPC_A"],[Xt.UPC_E,"UPC_E"],[Xt.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),By;(function(i){i[i.UNKNOWN=0]="UNKNOWN",i[i.URL=1]="URL"})(By||(By={}));function w4(i){return Object.values(Xt).includes(i)}var po;(function(i){i[i.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",i[i.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(po||(po={}));var ds=function(){function i(){}return i.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",i.SCAN_DEFAULT_FPS=2,i.DEFAULT_DISABLE_FLIP=!1,i.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,i.DEFAULT_SUPPORTED_SCAN_TYPE=[po.SCAN_TYPE_CAMERA,po.SCAN_TYPE_FILE],i}(),SA=function(){function i(t,n){this.format=t,this.formatName=n}return i.prototype.toString=function(){return this.formatName},i.create=function(t){if(!Ly.has(t))throw"".concat(t," not in html5QrcodeSupportedFormatsTextMap");return new i(t,Ly.get(t))},i}(),Py=function(){function i(){}return i.createFromText=function(t){var n={text:t};return{decodedText:t,result:n}},i.createFromQrcodeResult=function(t){return{decodedText:t.text,result:t}},i}(),a0;(function(i){i[i.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",i[i.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",i[i.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(a0||(a0={}));var vA=function(){function i(){}return i.createFrom=function(t){return{errorMessage:t,type:a0.UNKWOWN_ERROR}},i}(),bA=function(){function i(t){this.verbose=t}return i.prototype.log=function(t){this.verbose&&console.log(t)},i.prototype.warn=function(t){this.verbose&&console.warn(t)},i.prototype.logError=function(t,n){(this.verbose||n===!0)&&console.error(t)},i.prototype.logErrors=function(t){if(t.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(t)},i}();function Ls(i){return typeof i>"u"||i===null}function _4(i,t,n){return i>n?n:i<t?t:i}var Vl=function(){function i(){}return i.codeParseError=function(t){return"QR code parse error, error = ".concat(t)},i.errorGettingUserMedia=function(t){return"Error getting userMedia, error = ".concat(t)},i.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},i.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},i.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},i.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},i.scannerPaused=function(){return"Scanner paused"},i}(),rn=function(){function i(){}return i.scanningStatus=function(){return"Scanning"},i.idleStatus=function(){return"Idle"},i.errorStatus=function(){return"Error"},i.permissionStatus=function(){return"Permission"},i.noCameraFoundErrorStatus=function(){return"No Cameras"},i.lastMatch=function(t){return"Last Match: ".concat(t)},i.codeScannerTitle=function(){return"Code Scanner"},i.cameraPermissionTitle=function(){return"Request Camera Permissions"},i.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},i.noCameraFound=function(){return"No camera found"},i.scanButtonStopScanningText=function(){return"Stop Scanning"},i.scanButtonStartScanningText=function(){return"Start Scanning"},i.torchOnButton=function(){return"Switch On Torch"},i.torchOffButton=function(){return"Switch Off Torch"},i.torchOnFailedMessage=function(){return"Failed to turn on torch"},i.torchOffFailedMessage=function(){return"Failed to turn off torch"},i.scanButtonScanningStarting=function(){return"Launching Camera..."},i.textIfCameraScanSelected=function(){return"Scan an Image File"},i.textIfFileScanSelected=function(){return"Scan using camera directly"},i.selectCamera=function(){return"Select Camera"},i.fileSelectionChooseImage=function(){return"Choose Image"},i.fileSelectionChooseAnother=function(){return"Choose Another"},i.fileSelectionNoImageSelected=function(){return"No image choosen"},i.anonymousCameraPrefix=function(){return"Anonymous Camera"},i.dragAndDropMessage=function(){return"Or drop an image to scan"},i.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},i.zoom=function(){return"zoom"},i.loadingImage=function(){return"Loading image..."},i.cameraScanAltText=function(){return"Camera based scan"},i.fileScanAltText=function(){return"Fule based scan"},i}(),ky=function(){function i(){}return i.poweredBy=function(){return"Powered by "},i.reportIssues=function(){return"Report issues"},i}(),IA=function(){function i(){}return i.isMediaStreamConstraintsValid=function(t,n){if(typeof t!="object"){var o=typeof t;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(o,"."),!0),!1}for(var u=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],d=new Set(u),A=Object.keys(t),C=0,_=A;C<_.length;C++){var x=_[C];if(d.has(x))return n.logError("".concat(x," is not supported videoConstaints."),!0),!1}return!0},i}(),Wc={exports:{}},T4=Wc.exports,Vy;function C4(){return Vy||(Vy=1,function(i,t){(function(n,o){o(t)})(T4,function(n){function o(L){return L==null}var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,r){L.__proto__=r}||function(L,r){for(var a in r)r.hasOwnProperty(a)&&(L[a]=r[a])};function d(L,r){u(L,r);function a(){this.constructor=L}L.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)}function A(L,r){var a=Object.setPrototypeOf;a?a(L,r):L.__proto__=r}function C(L,r){r===void 0&&(r=L.constructor);var a=Error.captureStackTrace;a&&a(L,r)}var _=function(L){d(r,L);function r(a){var l=this.constructor,h=L.call(this,a)||this;return Object.defineProperty(h,"name",{value:l.name,enumerable:!1}),A(h,l.prototype),C(h),h}return r}(Error);class x extends _{constructor(r=void 0){super(r),this.message=r}getKind(){return this.constructor.kind}}x.kind="Exception";class v extends x{}v.kind="ArgumentException";class I extends x{}I.kind="IllegalArgumentException";class O{constructor(r){if(this.binarizer=r,r===null)throw new I("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(r,a){return this.binarizer.getBlackRow(r,a)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(r,a,l,h){const f=this.binarizer.getLuminanceSource().crop(r,a,l,h);return new O(this.binarizer.createBinarizer(f))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const r=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new O(this.binarizer.createBinarizer(r))}rotateCounterClockwise45(){const r=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new O(this.binarizer.createBinarizer(r))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class H extends x{static getChecksumInstance(){return new H}}H.kind="ChecksumException";class X{constructor(r){this.source=r}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class J{static arraycopy(r,a,l,h,f){for(;f--;)l[h++]=r[a++]}static currentTimeMillis(){return Date.now()}}class q extends x{}q.kind="IndexOutOfBoundsException";class Q extends q{constructor(r=void 0,a=void 0){super(a),this.index=r,this.message=a}}Q.kind="ArrayIndexOutOfBoundsException";class ft{static fill(r,a){for(let l=0,h=r.length;l<h;l++)r[l]=a}static fillWithin(r,a,l,h){ft.rangeCheck(r.length,a,l);for(let f=a;f<l;f++)r[f]=h}static rangeCheck(r,a,l){if(a>l)throw new I("fromIndex("+a+") > toIndex("+l+")");if(a<0)throw new Q(a);if(l>r)throw new Q(l)}static asList(...r){return r}static create(r,a,l){return Array.from({length:r}).map(f=>Array.from({length:a}).fill(l))}static createInt32Array(r,a,l){return Array.from({length:r}).map(f=>Int32Array.from({length:a}).fill(l))}static equals(r,a){if(!r||!a||!r.length||!a.length||r.length!==a.length)return!1;for(let l=0,h=r.length;l<h;l++)if(r[l]!==a[l])return!1;return!0}static hashCode(r){if(r===null)return 0;let a=1;for(const l of r)a=31*a+l;return a}static fillUint8Array(r,a){for(let l=0;l!==r.length;l++)r[l]=a}static copyOf(r,a){return r.slice(0,a)}static copyOfUint8Array(r,a){if(r.length<=a){const l=new Uint8Array(a);return l.set(r),l}return r.slice(0,a)}static copyOfRange(r,a,l){const h=l-a,f=new Int32Array(h);return J.arraycopy(r,a,f,0,h),f}static binarySearch(r,a,l){l===void 0&&(l=ft.numberComparator);let h=0,f=r.length-1;for(;h<=f;){const m=f+h>>1,p=l(a,r[m]);if(p>0)h=m+1;else if(p<0)f=m-1;else return m}return-h-1}static numberComparator(r,a){return r-a}}class nt{static numberOfTrailingZeros(r){let a;if(r===0)return 32;let l=31;return a=r<<16,a!==0&&(l-=16,r=a),a=r<<8,a!==0&&(l-=8,r=a),a=r<<4,a!==0&&(l-=4,r=a),a=r<<2,a!==0&&(l-=2,r=a),l-(r<<1>>>31)}static numberOfLeadingZeros(r){if(r===0)return 32;let a=1;return r>>>16||(a+=16,r<<=16),r>>>24||(a+=8,r<<=8),r>>>28||(a+=4,r<<=4),r>>>30||(a+=2,r<<=2),a-=r>>>31,a}static toHexString(r){return r.toString(16)}static toBinaryString(r){return String(parseInt(String(r),2))}static bitCount(r){return r=r-(r>>>1&1431655765),r=(r&858993459)+(r>>>2&858993459),r=r+(r>>>4)&252645135,r=r+(r>>>8),r=r+(r>>>16),r&63}static truncDivision(r,a){return Math.trunc(r/a)}static parseInt(r,a=void 0){return parseInt(r,a)}}nt.MIN_VALUE_32_BITS=-2147483648,nt.MAX_VALUE=Number.MAX_SAFE_INTEGER;class _t{constructor(r,a){r===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=r,a==null?this.bits=_t.makeArray(r):this.bits=a)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(r){if(r>this.bits.length*32){const a=_t.makeArray(r);J.arraycopy(this.bits,0,a,0,this.bits.length),this.bits=a}}get(r){return(this.bits[Math.floor(r/32)]&1<<(r&31))!==0}set(r){this.bits[Math.floor(r/32)]|=1<<(r&31)}flip(r){this.bits[Math.floor(r/32)]^=1<<(r&31)}getNextSet(r){const a=this.size;if(r>=a)return a;const l=this.bits;let h=Math.floor(r/32),f=l[h];f&=~((1<<(r&31))-1);const m=l.length;for(;f===0;){if(++h===m)return a;f=l[h]}const p=h*32+nt.numberOfTrailingZeros(f);return p>a?a:p}getNextUnset(r){const a=this.size;if(r>=a)return a;const l=this.bits;let h=Math.floor(r/32),f=~l[h];f&=~((1<<(r&31))-1);const m=l.length;for(;f===0;){if(++h===m)return a;f=~l[h]}const p=h*32+nt.numberOfTrailingZeros(f);return p>a?a:p}setBulk(r,a){this.bits[Math.floor(r/32)]=a}setRange(r,a){if(a<r||r<0||a>this.size)throw new I;if(a===r)return;a--;const l=Math.floor(r/32),h=Math.floor(a/32),f=this.bits;for(let m=l;m<=h;m++){const p=m>l?0:r&31,S=(2<<(m<h?31:a&31))-(1<<p);f[m]|=S}}clear(){const r=this.bits.length,a=this.bits;for(let l=0;l<r;l++)a[l]=0}isRange(r,a,l){if(a<r||r<0||a>this.size)throw new I;if(a===r)return!0;a--;const h=Math.floor(r/32),f=Math.floor(a/32),m=this.bits;for(let p=h;p<=f;p++){const w=p>h?0:r&31,R=(2<<(p<f?31:a&31))-(1<<w)&4294967295;if((m[p]&R)!==(l?R:0))return!1}return!0}appendBit(r){this.ensureCapacity(this.size+1),r&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(r,a){if(a<0||a>32)throw new I("Num bits must be between 0 and 32");this.ensureCapacity(this.size+a);for(let l=a;l>0;l--)this.appendBit((r>>l-1&1)===1)}appendBitArray(r){const a=r.size;this.ensureCapacity(this.size+a);for(let l=0;l<a;l++)this.appendBit(r.get(l))}xor(r){if(this.size!==r.size)throw new I("Sizes don't match");const a=this.bits;for(let l=0,h=a.length;l<h;l++)a[l]^=r.bits[l]}toBytes(r,a,l,h){for(let f=0;f<h;f++){let m=0;for(let p=0;p<8;p++)this.get(r)&&(m|=1<<7-p),r++;a[l+f]=m}}getBitArray(){return this.bits}reverse(){const r=new Int32Array(this.bits.length),a=Math.floor((this.size-1)/32),l=a+1,h=this.bits;for(let f=0;f<l;f++){let m=h[f];m=m>>1&1431655765|(m&1431655765)<<1,m=m>>2&858993459|(m&858993459)<<2,m=m>>4&252645135|(m&252645135)<<4,m=m>>8&16711935|(m&16711935)<<8,m=m>>16&65535|(m&65535)<<16,r[a-f]=m}if(this.size!==l*32){const f=l*32-this.size;let m=r[0]>>>f;for(let p=1;p<l;p++){const w=r[p];m|=w<<32-f,r[p-1]=m,m=w>>>f}r[l-1]=m}this.bits=r}static makeArray(r){return new Int32Array(Math.floor((r+31)/32))}equals(r){if(!(r instanceof _t))return!1;const a=r;return this.size===a.size&&ft.equals(this.bits,a.bits)}hashCode(){return 31*this.size+ft.hashCode(this.bits)}toString(){let r="";for(let a=0,l=this.size;a<l;a++)(a&7)===0&&(r+=" "),r+=this.get(a)?"X":".";return r}clone(){return new _t(this.size,this.bits.slice())}}var mt;(function(L){L[L.OTHER=0]="OTHER",L[L.PURE_BARCODE=1]="PURE_BARCODE",L[L.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",L[L.TRY_HARDER=3]="TRY_HARDER",L[L.CHARACTER_SET=4]="CHARACTER_SET",L[L.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",L[L.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",L[L.ASSUME_GS1=7]="ASSUME_GS1",L[L.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",L[L.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",L[L.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(mt||(mt={}));var Tt=mt;class U extends x{static getFormatInstance(){return new U}}U.kind="FormatException";var F;(function(L){L[L.Cp437=0]="Cp437",L[L.ISO8859_1=1]="ISO8859_1",L[L.ISO8859_2=2]="ISO8859_2",L[L.ISO8859_3=3]="ISO8859_3",L[L.ISO8859_4=4]="ISO8859_4",L[L.ISO8859_5=5]="ISO8859_5",L[L.ISO8859_6=6]="ISO8859_6",L[L.ISO8859_7=7]="ISO8859_7",L[L.ISO8859_8=8]="ISO8859_8",L[L.ISO8859_9=9]="ISO8859_9",L[L.ISO8859_10=10]="ISO8859_10",L[L.ISO8859_11=11]="ISO8859_11",L[L.ISO8859_13=12]="ISO8859_13",L[L.ISO8859_14=13]="ISO8859_14",L[L.ISO8859_15=14]="ISO8859_15",L[L.ISO8859_16=15]="ISO8859_16",L[L.SJIS=16]="SJIS",L[L.Cp1250=17]="Cp1250",L[L.Cp1251=18]="Cp1251",L[L.Cp1252=19]="Cp1252",L[L.Cp1256=20]="Cp1256",L[L.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",L[L.UTF8=22]="UTF8",L[L.ASCII=23]="ASCII",L[L.Big5=24]="Big5",L[L.GB18030=25]="GB18030",L[L.EUC_KR=26]="EUC_KR"})(F||(F={}));class k{constructor(r,a,l,...h){this.valueIdentifier=r,this.name=l,typeof a=="number"?this.values=Int32Array.from([a]):this.values=a,this.otherEncodingNames=h,k.VALUE_IDENTIFIER_TO_ECI.set(r,this),k.NAME_TO_ECI.set(l,this);const f=this.values;for(let m=0,p=f.length;m!==p;m++){const w=f[m];k.VALUES_TO_ECI.set(w,this)}for(const m of h)k.NAME_TO_ECI.set(m,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(r){if(r<0||r>=900)throw new U("incorect value");const a=k.VALUES_TO_ECI.get(r);if(a===void 0)throw new U("incorect value");return a}static getCharacterSetECIByName(r){const a=k.NAME_TO_ECI.get(r);if(a===void 0)throw new U("incorect value");return a}equals(r){if(!(r instanceof k))return!1;const a=r;return this.getName()===a.getName()}}k.VALUE_IDENTIFIER_TO_ECI=new Map,k.VALUES_TO_ECI=new Map,k.NAME_TO_ECI=new Map,k.Cp437=new k(F.Cp437,Int32Array.from([0,2]),"Cp437"),k.ISO8859_1=new k(F.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),k.ISO8859_2=new k(F.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),k.ISO8859_3=new k(F.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),k.ISO8859_4=new k(F.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),k.ISO8859_5=new k(F.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),k.ISO8859_6=new k(F.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),k.ISO8859_7=new k(F.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),k.ISO8859_8=new k(F.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),k.ISO8859_9=new k(F.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),k.ISO8859_10=new k(F.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),k.ISO8859_11=new k(F.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),k.ISO8859_13=new k(F.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),k.ISO8859_14=new k(F.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),k.ISO8859_15=new k(F.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),k.ISO8859_16=new k(F.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),k.SJIS=new k(F.SJIS,20,"SJIS","Shift_JIS"),k.Cp1250=new k(F.Cp1250,21,"Cp1250","windows-1250"),k.Cp1251=new k(F.Cp1251,22,"Cp1251","windows-1251"),k.Cp1252=new k(F.Cp1252,23,"Cp1252","windows-1252"),k.Cp1256=new k(F.Cp1256,24,"Cp1256","windows-1256"),k.UnicodeBigUnmarked=new k(F.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),k.UTF8=new k(F.UTF8,26,"UTF8","UTF-8"),k.ASCII=new k(F.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),k.Big5=new k(F.Big5,28,"Big5"),k.GB18030=new k(F.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),k.EUC_KR=new k(F.EUC_KR,30,"EUC_KR","EUC-KR");class et extends x{}et.kind="UnsupportedOperationException";class tt{static decode(r,a){const l=this.encodingName(a);return this.customDecoder?this.customDecoder(r,l):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(l)?this.decodeFallback(r,l):new TextDecoder(l).decode(r)}static shouldDecodeOnFallback(r){return!tt.isBrowser()&&r==="ISO-8859-1"}static encode(r,a){const l=this.encodingName(a);return this.customEncoder?this.customEncoder(r,l):typeof TextEncoder>"u"?this.encodeFallback(r):new TextEncoder().encode(r)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(r){return typeof r=="string"?r:r.getName()}static encodingCharacterSet(r){return r instanceof k?r:k.getCharacterSetECIByName(r)}static decodeFallback(r,a){const l=this.encodingCharacterSet(a);if(tt.isDecodeFallbackSupported(l)){let h="";for(let f=0,m=r.length;f<m;f++){let p=r[f].toString(16);p.length<2&&(p="0"+p),h+="%"+p}return decodeURIComponent(h)}if(l.equals(k.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(r.buffer));throw new et(`Encoding ${this.encodingName(a)} not supported by fallback.`)}static isDecodeFallbackSupported(r){return r.equals(k.UTF8)||r.equals(k.ISO8859_1)||r.equals(k.ASCII)}static encodeFallback(r){const l=btoa(unescape(encodeURIComponent(r))).split(""),h=[];for(let f=0;f<l.length;f++)h.push(l[f].charCodeAt(0));return new Uint8Array(h)}}class K{static castAsNonUtf8Char(r,a=null){const l=a?a.getName():this.ISO88591;return tt.decode(new Uint8Array([r]),l)}static guessEncoding(r,a){if(a!=null&&a.get(Tt.CHARACTER_SET)!==void 0)return a.get(Tt.CHARACTER_SET).toString();const l=r.length;let h=!0,f=!0,m=!0,p=0,w=0,S=0,R=0,B=0,P=0,G=0,$=0,rt=0,ht=0,yt=0;const Lt=r.length>3&&r[0]===239&&r[1]===187&&r[2]===191;for(let kt=0;kt<l&&(h||f||m);kt++){const Dt=r[kt]&255;m&&(p>0?(Dt&128)===0?m=!1:p--:(Dt&128)!==0&&((Dt&64)===0?m=!1:(p++,(Dt&32)===0?w++:(p++,(Dt&16)===0?S++:(p++,(Dt&8)===0?R++:m=!1))))),h&&(Dt>127&&Dt<160?h=!1:Dt>159&&(Dt<192||Dt===215||Dt===247)&&yt++),f&&(B>0?Dt<64||Dt===127||Dt>252?f=!1:B--:Dt===128||Dt===160||Dt>239?f=!1:Dt>160&&Dt<224?(P++,$=0,G++,G>rt&&(rt=G)):Dt>127?(B++,G=0,$++,$>ht&&(ht=$)):(G=0,$=0))}return m&&p>0&&(m=!1),f&&B>0&&(f=!1),m&&(Lt||w+S+R>0)?K.UTF8:f&&(K.ASSUME_SHIFT_JIS||rt>=3||ht>=3)?K.SHIFT_JIS:h&&f?rt===2&&P===2||yt*10>=l?K.SHIFT_JIS:K.ISO88591:h?K.ISO88591:f?K.SHIFT_JIS:m?K.UTF8:K.PLATFORM_DEFAULT_ENCODING}static format(r,...a){let l=-1;function h(m,p,w,S,R,B){if(m==="%%")return"%";if(a[++l]===void 0)return;m=S?parseInt(S.substr(1)):void 0;let P=R?parseInt(R.substr(1)):void 0,G;switch(B){case"s":G=a[l];break;case"c":G=a[l][0];break;case"f":G=parseFloat(a[l]).toFixed(m);break;case"p":G=parseFloat(a[l]).toPrecision(m);break;case"e":G=parseFloat(a[l]).toExponential(m);break;case"x":G=parseInt(a[l]).toString(P||16);break;case"d":G=parseFloat(parseInt(a[l],P||10).toPrecision(m)).toFixed(0);break}G=typeof G=="object"?JSON.stringify(G):(+G).toString(P);let $=parseInt(w),rt=w&&w[0]+""=="0"?"0":" ";for(;G.length<$;)G=p!==void 0?G+rt:rt+G;return G}let f=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(f,h)}static getBytes(r,a){return tt.encode(r,a)}static getCharCode(r,a=0){return r.charCodeAt(a)}static getCharAt(r){return String.fromCharCode(r)}}K.SHIFT_JIS=k.SJIS.getName(),K.GB2312="GB2312",K.ISO88591=k.ISO8859_1.getName(),K.EUC_JP="EUC_JP",K.UTF8=k.UTF8.getName(),K.PLATFORM_DEFAULT_ENCODING=K.UTF8,K.ASSUME_SHIFT_JIS=!1;class Y{constructor(r=""){this.value=r}enableDecoding(r){return this.encoding=r,this}append(r){return typeof r=="string"?this.value+=r.toString():this.encoding?this.value+=K.castAsNonUtf8Char(r,this.encoding):this.value+=String.fromCharCode(r),this}appendChars(r,a,l){for(let h=a;a<a+l;h++)this.append(r[h]);return this}length(){return this.value.length}charAt(r){return this.value.charAt(r)}deleteCharAt(r){this.value=this.value.substr(0,r)+this.value.substring(r+1)}setCharAt(r,a){this.value=this.value.substr(0,r)+a+this.value.substr(r+1)}substring(r,a){return this.value.substring(r,a)}setLengthToZero(){this.value=""}toString(){return this.value}insert(r,a){this.value=this.value.substr(0,r)+a+this.value.substr(r+a.length)}}class Pt{constructor(r,a,l,h){if(this.width=r,this.height=a,this.rowSize=l,this.bits=h,a==null&&(a=r),this.height=a,r<1||a<1)throw new I("Both dimensions must be greater than 0");l==null&&(l=Math.floor((r+31)/32)),this.rowSize=l,h==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(r){const a=r.length,l=r[0].length,h=new Pt(l,a);for(let f=0;f<a;f++){const m=r[f];for(let p=0;p<l;p++)m[p]&&h.set(p,f)}return h}static parseFromString(r,a,l){if(r===null)throw new I("stringRepresentation cannot be null");const h=new Array(r.length);let f=0,m=0,p=-1,w=0,S=0;for(;S<r.length;)if(r.charAt(S)===`
`||r.charAt(S)==="\r"){if(f>m){if(p===-1)p=f-m;else if(f-m!==p)throw new I("row lengths do not match");m=f,w++}S++}else if(r.substring(S,S+a.length)===a)S+=a.length,h[f]=!0,f++;else if(r.substring(S,S+l.length)===l)S+=l.length,h[f]=!1,f++;else throw new I("illegal character encountered: "+r.substring(S));if(f>m){if(p===-1)p=f-m;else if(f-m!==p)throw new I("row lengths do not match");w++}const R=new Pt(p,w);for(let B=0;B<f;B++)h[B]&&R.set(Math.floor(B%p),Math.floor(B/p));return R}get(r,a){const l=a*this.rowSize+Math.floor(r/32);return(this.bits[l]>>>(r&31)&1)!==0}set(r,a){const l=a*this.rowSize+Math.floor(r/32);this.bits[l]|=1<<(r&31)&4294967295}unset(r,a){const l=a*this.rowSize+Math.floor(r/32);this.bits[l]&=~(1<<(r&31)&4294967295)}flip(r,a){const l=a*this.rowSize+Math.floor(r/32);this.bits[l]^=1<<(r&31)&4294967295}xor(r){if(this.width!==r.getWidth()||this.height!==r.getHeight()||this.rowSize!==r.getRowSize())throw new I("input matrix dimensions do not match");const a=new _t(Math.floor(this.width/32)+1),l=this.rowSize,h=this.bits;for(let f=0,m=this.height;f<m;f++){const p=f*l,w=r.getRow(f,a).getBitArray();for(let S=0;S<l;S++)h[p+S]^=w[S]}}clear(){const r=this.bits,a=r.length;for(let l=0;l<a;l++)r[l]=0}setRegion(r,a,l,h){if(a<0||r<0)throw new I("Left and top must be nonnegative");if(h<1||l<1)throw new I("Height and width must be at least 1");const f=r+l,m=a+h;if(m>this.height||f>this.width)throw new I("The region must fit inside the matrix");const p=this.rowSize,w=this.bits;for(let S=a;S<m;S++){const R=S*p;for(let B=r;B<f;B++)w[R+Math.floor(B/32)]|=1<<(B&31)&4294967295}}getRow(r,a){a==null||a.getSize()<this.width?a=new _t(this.width):a.clear();const l=this.rowSize,h=this.bits,f=r*l;for(let m=0;m<l;m++)a.setBulk(m*32,h[f+m]);return a}setRow(r,a){J.arraycopy(a.getBitArray(),0,this.bits,r*this.rowSize,this.rowSize)}rotate180(){const r=this.getWidth(),a=this.getHeight();let l=new _t(r),h=new _t(r);for(let f=0,m=Math.floor((a+1)/2);f<m;f++)l=this.getRow(f,l),h=this.getRow(a-1-f,h),l.reverse(),h.reverse(),this.setRow(f,h),this.setRow(a-1-f,l)}getEnclosingRectangle(){const r=this.width,a=this.height,l=this.rowSize,h=this.bits;let f=r,m=a,p=-1,w=-1;for(let S=0;S<a;S++)for(let R=0;R<l;R++){const B=h[S*l+R];if(B!==0){if(S<m&&(m=S),S>w&&(w=S),R*32<f){let P=0;for(;(B<<31-P&4294967295)===0;)P++;R*32+P<f&&(f=R*32+P)}if(R*32+31>p){let P=31;for(;!(B>>>P);)P--;R*32+P>p&&(p=R*32+P)}}}return p<f||w<m?null:Int32Array.from([f,m,p-f+1,w-m+1])}getTopLeftOnBit(){const r=this.rowSize,a=this.bits;let l=0;for(;l<a.length&&a[l]===0;)l++;if(l===a.length)return null;const h=l/r;let f=l%r*32;const m=a[l];let p=0;for(;(m<<31-p&4294967295)===0;)p++;return f+=p,Int32Array.from([f,h])}getBottomRightOnBit(){const r=this.rowSize,a=this.bits;let l=a.length-1;for(;l>=0&&a[l]===0;)l--;if(l<0)return null;const h=Math.floor(l/r);let f=Math.floor(l%r)*32;const m=a[l];let p=31;for(;!(m>>>p);)p--;return f+=p,Int32Array.from([f,h])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(r){if(!(r instanceof Pt))return!1;const a=r;return this.width===a.width&&this.height===a.height&&this.rowSize===a.rowSize&&ft.equals(this.bits,a.bits)}hashCode(){let r=this.width;return r=31*r+this.width,r=31*r+this.height,r=31*r+this.rowSize,r=31*r+ft.hashCode(this.bits),r}toString(r="X ",a="  ",l=`
`){return this.buildToString(r,a,l)}buildToString(r,a,l){let h=new Y;for(let f=0,m=this.height;f<m;f++){for(let p=0,w=this.width;p<w;p++)h.append(this.get(p,f)?r:a);h.append(l)}return h.toString()}clone(){return new Pt(this.width,this.height,this.rowSize,this.bits.slice())}}class st extends x{static getNotFoundInstance(){return new st}}st.kind="NotFoundException";class ut extends X{constructor(r){super(r),this.luminances=ut.EMPTY,this.buckets=new Int32Array(ut.LUMINANCE_BUCKETS)}getBlackRow(r,a){const l=this.getLuminanceSource(),h=l.getWidth();a==null||a.getSize()<h?a=new _t(h):a.clear(),this.initArrays(h);const f=l.getRow(r,this.luminances),m=this.buckets;for(let w=0;w<h;w++)m[(f[w]&255)>>ut.LUMINANCE_SHIFT]++;const p=ut.estimateBlackPoint(m);if(h<3)for(let w=0;w<h;w++)(f[w]&255)<p&&a.set(w);else{let w=f[0]&255,S=f[1]&255;for(let R=1;R<h-1;R++){const B=f[R+1]&255;(S*4-w-B)/2<p&&a.set(R),w=S,S=B}}return a}getBlackMatrix(){const r=this.getLuminanceSource(),a=r.getWidth(),l=r.getHeight(),h=new Pt(a,l);this.initArrays(a);const f=this.buckets;for(let w=1;w<5;w++){const S=Math.floor(l*w/5),R=r.getRow(S,this.luminances),B=Math.floor(a*4/5);for(let P=Math.floor(a/5);P<B;P++){const G=R[P]&255;f[G>>ut.LUMINANCE_SHIFT]++}}const m=ut.estimateBlackPoint(f),p=r.getMatrix();for(let w=0;w<l;w++){const S=w*a;for(let R=0;R<a;R++)(p[S+R]&255)<m&&h.set(R,w)}return h}createBinarizer(r){return new ut(r)}initArrays(r){this.luminances.length<r&&(this.luminances=new Uint8ClampedArray(r));const a=this.buckets;for(let l=0;l<ut.LUMINANCE_BUCKETS;l++)a[l]=0}static estimateBlackPoint(r){const a=r.length;let l=0,h=0,f=0;for(let R=0;R<a;R++)r[R]>f&&(h=R,f=r[R]),r[R]>l&&(l=r[R]);let m=0,p=0;for(let R=0;R<a;R++){const B=R-h,P=r[R]*B*B;P>p&&(m=R,p=P)}if(h>m){const R=h;h=m,m=R}if(m-h<=a/16)throw new st;let w=m-1,S=-1;for(let R=m-1;R>h;R--){const B=R-h,P=B*B*(m-R)*(l-r[R]);P>S&&(w=R,S=P)}return w<<ut.LUMINANCE_SHIFT}}ut.LUMINANCE_BITS=5,ut.LUMINANCE_SHIFT=8-ut.LUMINANCE_BITS,ut.LUMINANCE_BUCKETS=1<<ut.LUMINANCE_BITS,ut.EMPTY=Uint8ClampedArray.from([0]);class xt extends ut{constructor(r){super(r),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const r=this.getLuminanceSource(),a=r.getWidth(),l=r.getHeight();if(a>=xt.MINIMUM_DIMENSION&&l>=xt.MINIMUM_DIMENSION){const h=r.getMatrix();let f=a>>xt.BLOCK_SIZE_POWER;(a&xt.BLOCK_SIZE_MASK)!==0&&f++;let m=l>>xt.BLOCK_SIZE_POWER;(l&xt.BLOCK_SIZE_MASK)!==0&&m++;const p=xt.calculateBlackPoints(h,f,m,a,l),w=new Pt(a,l);xt.calculateThresholdForBlock(h,f,m,a,l,p,w),this.matrix=w}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(r){return new xt(r)}static calculateThresholdForBlock(r,a,l,h,f,m,p){const w=f-xt.BLOCK_SIZE,S=h-xt.BLOCK_SIZE;for(let R=0;R<l;R++){let B=R<<xt.BLOCK_SIZE_POWER;B>w&&(B=w);const P=xt.cap(R,2,l-3);for(let G=0;G<a;G++){let $=G<<xt.BLOCK_SIZE_POWER;$>S&&($=S);const rt=xt.cap(G,2,a-3);let ht=0;for(let Lt=-2;Lt<=2;Lt++){const kt=m[P+Lt];ht+=kt[rt-2]+kt[rt-1]+kt[rt]+kt[rt+1]+kt[rt+2]}const yt=ht/25;xt.thresholdBlock(r,$,B,yt,h,p)}}}static cap(r,a,l){return r<a?a:r>l?l:r}static thresholdBlock(r,a,l,h,f,m){for(let p=0,w=l*f+a;p<xt.BLOCK_SIZE;p++,w+=f)for(let S=0;S<xt.BLOCK_SIZE;S++)(r[w+S]&255)<=h&&m.set(a+S,l+p)}static calculateBlackPoints(r,a,l,h,f){const m=f-xt.BLOCK_SIZE,p=h-xt.BLOCK_SIZE,w=new Array(l);for(let S=0;S<l;S++){w[S]=new Int32Array(a);let R=S<<xt.BLOCK_SIZE_POWER;R>m&&(R=m);for(let B=0;B<a;B++){let P=B<<xt.BLOCK_SIZE_POWER;P>p&&(P=p);let G=0,$=255,rt=0;for(let yt=0,Lt=R*h+P;yt<xt.BLOCK_SIZE;yt++,Lt+=h){for(let kt=0;kt<xt.BLOCK_SIZE;kt++){const Dt=r[Lt+kt]&255;G+=Dt,Dt<$&&($=Dt),Dt>rt&&(rt=Dt)}if(rt-$>xt.MIN_DYNAMIC_RANGE)for(yt++,Lt+=h;yt<xt.BLOCK_SIZE;yt++,Lt+=h)for(let kt=0;kt<xt.BLOCK_SIZE;kt++)G+=r[Lt+kt]&255}let ht=G>>xt.BLOCK_SIZE_POWER*2;if(rt-$<=xt.MIN_DYNAMIC_RANGE&&(ht=$/2,S>0&&B>0)){const yt=(w[S-1][B]+2*w[S][B-1]+w[S-1][B-1])/4;$<yt&&(ht=yt)}w[S][B]=ht}}return w}}xt.BLOCK_SIZE_POWER=3,xt.BLOCK_SIZE=1<<xt.BLOCK_SIZE_POWER,xt.BLOCK_SIZE_MASK=xt.BLOCK_SIZE-1,xt.MINIMUM_DIMENSION=xt.BLOCK_SIZE*5,xt.MIN_DYNAMIC_RANGE=24;class jt{constructor(r,a){this.width=r,this.height=a}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(r,a,l,h){throw new et("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new et("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new et("This luminance source does not support rotation by 45 degrees.")}toString(){const r=new Uint8ClampedArray(this.width);let a=new Y;for(let l=0;l<this.height;l++){const h=this.getRow(l,r);for(let f=0;f<this.width;f++){const m=h[f]&255;let p;m<64?p="#":m<128?p="+":m<192?p=".":p=" ",a.append(p)}a.append(`
`)}return a.toString()}}class $t extends jt{constructor(r){super(r.getWidth(),r.getHeight()),this.delegate=r}getRow(r,a){const l=this.delegate.getRow(r,a),h=this.getWidth();for(let f=0;f<h;f++)l[f]=255-(l[f]&255);return l}getMatrix(){const r=this.delegate.getMatrix(),a=this.getWidth()*this.getHeight(),l=new Uint8ClampedArray(a);for(let h=0;h<a;h++)l[h]=255-(r[h]&255);return l}isCropSupported(){return this.delegate.isCropSupported()}crop(r,a,l,h){return new $t(this.delegate.crop(r,a,l,h))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new $t(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new $t(this.delegate.rotateCounterClockwise45())}}class Z extends jt{constructor(r){super(r.width,r.height),this.canvas=r,this.tempCanvasElement=null,this.buffer=Z.makeBufferFromCanvasImageData(r)}static makeBufferFromCanvasImageData(r){const a=r.getContext("2d").getImageData(0,0,r.width,r.height);return Z.toGrayscaleBuffer(a.data,r.width,r.height)}static toGrayscaleBuffer(r,a,l){const h=new Uint8ClampedArray(a*l);for(let f=0,m=0,p=r.length;f<p;f+=4,m++){let w;if(r[f+3]===0)w=255;else{const R=r[f],B=r[f+1],P=r[f+2];w=306*R+601*B+117*P+512>>10}h[m]=w}return h}getRow(r,a){if(r<0||r>=this.getHeight())throw new I("Requested row is outside the image: "+r);const l=this.getWidth(),h=r*l;return a===null?a=this.buffer.slice(h,h+l):(a.length<l&&(a=new Uint8ClampedArray(l)),a.set(this.buffer.slice(h,h+l))),a}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(r,a,l,h){return super.crop(r,a,l,h),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement}rotate(r){const a=this.getTempCanvasElement(),l=a.getContext("2d"),h=r*Z.DEGREE_TO_RADIANS,f=this.canvas.width,m=this.canvas.height,p=Math.ceil(Math.abs(Math.cos(h))*f+Math.abs(Math.sin(h))*m),w=Math.ceil(Math.abs(Math.sin(h))*f+Math.abs(Math.cos(h))*m);return a.width=p,a.height=w,l.translate(p/2,w/2),l.rotate(h),l.drawImage(this.canvas,f/-2,m/-2),this.buffer=Z.makeBufferFromCanvasImageData(a),this}invert(){return new $t(this)}}Z.DEGREE_TO_RADIANS=Math.PI/180;class It{constructor(r,a,l){this.deviceId=r,this.label=a,this.kind="videoinput",this.groupId=l||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var Ot=(globalThis||wh||self||window||void 0)&&(globalThis||wh||self||window||void 0).__awaiter||function(L,r,a,l){function h(f){return f instanceof a?f:new a(function(m){m(f)})}return new(a||(a=Promise))(function(f,m){function p(R){try{S(l.next(R))}catch(B){m(B)}}function w(R){try{S(l.throw(R))}catch(B){m(B)}}function S(R){R.done?f(R.value):h(R.value).then(p,w)}S((l=l.apply(L,r||[])).next())})};class Mt{constructor(r,a=500,l){this.reader=r,this.timeBetweenScansMillis=a,this._hints=l,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(r){this._timeBetweenDecodingAttempts=r<0?0:r}set hints(r){this._hints=r||null}get hints(){return this._hints}listVideoInputDevices(){return Ot(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const r=yield navigator.mediaDevices.enumerateDevices(),a=[];for(const l of r){const h=l.kind==="video"?"videoinput":l.kind;if(h!=="videoinput")continue;const f=l.deviceId||l.id,m=l.label||`Video device ${a.length+1}`,p=l.groupId,w={deviceId:f,label:m,kind:h,groupId:p};a.push(w)}return a})}getVideoInputDevices(){return Ot(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(a=>new It(a.deviceId,a.label))})}findDeviceById(r){return Ot(this,void 0,void 0,function*(){const a=yield this.listVideoInputDevices();return a?a.find(l=>l.deviceId===r):null})}decodeFromInputVideoDevice(r,a){return Ot(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(r,a)})}decodeOnceFromVideoDevice(r,a){return Ot(this,void 0,void 0,function*(){this.reset();let l;r?l={deviceId:{exact:r}}:l={facingMode:"environment"};const h={video:l};return yield this.decodeOnceFromConstraints(h,a)})}decodeOnceFromConstraints(r,a){return Ot(this,void 0,void 0,function*(){const l=yield navigator.mediaDevices.getUserMedia(r);return yield this.decodeOnceFromStream(l,a)})}decodeOnceFromStream(r,a){return Ot(this,void 0,void 0,function*(){this.reset();const l=yield this.attachStreamToVideo(r,a);return yield this.decodeOnce(l)})}decodeFromInputVideoDeviceContinuously(r,a,l){return Ot(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(r,a,l)})}decodeFromVideoDevice(r,a,l){return Ot(this,void 0,void 0,function*(){let h;r?h={deviceId:{exact:r}}:h={facingMode:"environment"};const f={video:h};return yield this.decodeFromConstraints(f,a,l)})}decodeFromConstraints(r,a,l){return Ot(this,void 0,void 0,function*(){const h=yield navigator.mediaDevices.getUserMedia(r);return yield this.decodeFromStream(h,a,l)})}decodeFromStream(r,a,l){return Ot(this,void 0,void 0,function*(){this.reset();const h=yield this.attachStreamToVideo(r,a);return yield this.decodeContinuously(h,l)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(r,a){return Ot(this,void 0,void 0,function*(){const l=this.prepareVideoElement(a);return this.addVideoSource(l,r),this.videoElement=l,this.stream=r,yield this.playVideoOnLoadAsync(l),l})}playVideoOnLoadAsync(r){return new Promise((a,l)=>this.playVideoOnLoad(r,()=>a()))}playVideoOnLoad(r,a){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(r),r.addEventListener("ended",this.videoEndedListener),r.addEventListener("canplay",this.videoCanPlayListener),r.addEventListener("playing",a),this.tryPlayVideo(r)}isVideoPlaying(r){return r.currentTime>0&&!r.paused&&!r.ended&&r.readyState>2}tryPlayVideo(r){return Ot(this,void 0,void 0,function*(){if(this.isVideoPlaying(r)){console.warn("Trying to play video that is already playing.");return}try{yield r.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(r,a){const l=document.getElementById(r);if(!l)throw new v(`element with id '${r}' not found`);if(l.nodeName.toLowerCase()!==a.toLowerCase())throw new v(`element with id '${r}' must be an ${a} element`);return l}decodeFromImage(r,a){if(!r&&!a)throw new v("either imageElement with a src set or an url must be provided");return a&&!r?this.decodeFromImageUrl(a):this.decodeFromImageElement(r)}decodeFromVideo(r,a){if(!r&&!a)throw new v("Either an element with a src set or an URL must be provided");return a&&!r?this.decodeFromVideoUrl(a):this.decodeFromVideoElement(r)}decodeFromVideoContinuously(r,a,l){if(r===void 0&&a===void 0)throw new v("Either an element with a src set or an URL must be provided");return a&&!r?this.decodeFromVideoUrlContinuously(a,l):this.decodeFromVideoElementContinuously(r,l)}decodeFromImageElement(r){if(!r)throw new v("An image element must be provided.");this.reset();const a=this.prepareImageElement(r);this.imageElement=a;let l;return this.isImageLoaded(a)?l=this.decodeOnce(a,!1,!0):l=this._decodeOnLoadImage(a),l}decodeFromVideoElement(r){const a=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideo(a)}decodeFromVideoElementContinuously(r,a){const l=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideoContinuously(l,a)}_decodeFromVideoElementSetup(r){if(!r)throw new v("A video element must be provided.");this.reset();const a=this.prepareVideoElement(r);return this.videoElement=a,a}decodeFromImageUrl(r){if(!r)throw new v("An URL must be provided.");this.reset();const a=this.prepareImageElement();this.imageElement=a;const l=this._decodeOnLoadImage(a);return a.src=r,l}decodeFromVideoUrl(r){if(!r)throw new v("An URL must be provided.");this.reset();const a=this.prepareVideoElement(),l=this.decodeFromVideoElement(a);return a.src=r,l}decodeFromVideoUrlContinuously(r,a){if(!r)throw new v("An URL must be provided.");this.reset();const l=this.prepareVideoElement(),h=this.decodeFromVideoElementContinuously(l,a);return l.src=r,h}_decodeOnLoadImage(r){return new Promise((a,l)=>{this.imageLoadedListener=()=>this.decodeOnce(r,!1,!0).then(a,l),r.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(r){return Ot(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(r),yield this.decodeOnce(r)})}_decodeOnLoadVideoContinuously(r,a){return Ot(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(r),this.decodeContinuously(r,a)})}isImageLoaded(r){return!(!r.complete||r.naturalWidth===0)}prepareImageElement(r){let a;return typeof r>"u"&&(a=document.createElement("img"),a.width=200,a.height=200),typeof r=="string"&&(a=this.getMediaElement(r,"img")),r instanceof HTMLImageElement&&(a=r),a}prepareVideoElement(r){let a;return!r&&typeof document<"u"&&(a=document.createElement("video"),a.width=200,a.height=200),typeof r=="string"&&(a=this.getMediaElement(r,"video")),r instanceof HTMLVideoElement&&(a=r),a.setAttribute("autoplay","true"),a.setAttribute("muted","true"),a.setAttribute("playsinline","true"),a}decodeOnce(r,a=!0,l=!0){this._stopAsyncDecode=!1;const h=(f,m)=>{if(this._stopAsyncDecode){m(new st("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const p=this.decode(r);f(p)}catch(p){const w=a&&p instanceof st,R=(p instanceof H||p instanceof U)&&l;if(w||R)return setTimeout(h,this._timeBetweenDecodingAttempts,f,m);m(p)}};return new Promise((f,m)=>h(f,m))}decodeContinuously(r,a){this._stopContinuousDecode=!1;const l=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const h=this.decode(r);a(h,null),setTimeout(l,this.timeBetweenScansMillis)}catch(h){a(null,h);const f=h instanceof H||h instanceof U,m=h instanceof st;(f||m)&&setTimeout(l,this._timeBetweenDecodingAttempts)}};l()}decode(r){const a=this.createBinaryBitmap(r);return this.decodeBitmap(a)}_isHTMLVideoElement(r){return r.videoWidth!==0}drawFrameOnCanvas(r,a,l){a||(a={sx:0,sy:0,sWidth:r.videoWidth,sHeight:r.videoHeight,dx:0,dy:0,dWidth:r.videoWidth,dHeight:r.videoHeight}),l||(l=this.captureCanvasContext),l.drawImage(r,a.sx,a.sy,a.sWidth,a.sHeight,a.dx,a.dy,a.dWidth,a.dHeight)}drawImageOnCanvas(r,a,l=this.captureCanvasContext){a||(a={sx:0,sy:0,sWidth:r.naturalWidth,sHeight:r.naturalHeight,dx:0,dy:0,dWidth:r.naturalWidth,dHeight:r.naturalHeight}),l||(l=this.captureCanvasContext),l.drawImage(r,a.sx,a.sy,a.sWidth,a.sHeight,a.dx,a.dy,a.dWidth,a.dHeight)}createBinaryBitmap(r){this.getCaptureCanvasContext(r),this._isHTMLVideoElement(r)?this.drawFrameOnCanvas(r):this.drawImageOnCanvas(r);const a=this.getCaptureCanvas(r),l=new Z(a),h=new xt(l);return new O(h)}getCaptureCanvasContext(r){if(!this.captureCanvasContext){const l=this.getCaptureCanvas(r).getContext("2d");this.captureCanvasContext=l}return this.captureCanvasContext}getCaptureCanvas(r){if(!this.captureCanvas){const a=this.createCaptureCanvas(r);this.captureCanvas=a}return this.captureCanvas}decodeBitmap(r){return this.reader.decode(r,this._hints)}createCaptureCanvas(r){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const a=document.createElement("canvas");let l,h;return typeof r<"u"&&(r instanceof HTMLVideoElement?(l=r.videoWidth,h=r.videoHeight):r instanceof HTMLImageElement&&(l=r.naturalWidth||r.width,h=r.naturalHeight||r.height)),a.style.width=l+"px",a.style.height=h+"px",a.width=l,a.height=h,a}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(r=>r.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(r,a){try{r.srcObject=a}catch{r.src=URL.createObjectURL(a)}}cleanVideoSource(r){try{r.srcObject=null}catch{r.src=""}this.videoElement.removeAttribute("src")}}class Ht{constructor(r,a,l=a==null?0:8*a.length,h,f,m=J.currentTimeMillis()){this.text=r,this.rawBytes=a,this.numBits=l,this.resultPoints=h,this.format=f,this.timestamp=m,this.text=r,this.rawBytes=a,l==null?this.numBits=a==null?0:8*a.length:this.numBits=l,this.resultPoints=h,this.format=f,this.resultMetadata=null,m==null?this.timestamp=J.currentTimeMillis():this.timestamp=m}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(r,a){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(r,a)}putAllMetadata(r){r!==null&&(this.resultMetadata===null?this.resultMetadata=r:this.resultMetadata=new Map(r))}addResultPoints(r){const a=this.resultPoints;if(a===null)this.resultPoints=r;else if(r!==null&&r.length>0){const l=new Array(a.length+r.length);J.arraycopy(a,0,l,0,a.length),J.arraycopy(r,0,l,a.length,r.length),this.resultPoints=l}}getTimestamp(){return this.timestamp}toString(){return this.text}}var fe;(function(L){L[L.AZTEC=0]="AZTEC",L[L.CODABAR=1]="CODABAR",L[L.CODE_39=2]="CODE_39",L[L.CODE_93=3]="CODE_93",L[L.CODE_128=4]="CODE_128",L[L.DATA_MATRIX=5]="DATA_MATRIX",L[L.EAN_8=6]="EAN_8",L[L.EAN_13=7]="EAN_13",L[L.ITF=8]="ITF",L[L.MAXICODE=9]="MAXICODE",L[L.PDF_417=10]="PDF_417",L[L.QR_CODE=11]="QR_CODE",L[L.RSS_14=12]="RSS_14",L[L.RSS_EXPANDED=13]="RSS_EXPANDED",L[L.UPC_A=14]="UPC_A",L[L.UPC_E=15]="UPC_E",L[L.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(fe||(fe={}));var Bt=fe,jn;(function(L){L[L.OTHER=0]="OTHER",L[L.ORIENTATION=1]="ORIENTATION",L[L.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",L[L.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",L[L.ISSUE_NUMBER=4]="ISSUE_NUMBER",L[L.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",L[L.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",L[L.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",L[L.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",L[L.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",L[L.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(jn||(jn={}));var oe=jn;class Pr{constructor(r,a,l,h,f=-1,m=-1){this.rawBytes=r,this.text=a,this.byteSegments=l,this.ecLevel=h,this.structuredAppendSequenceNumber=f,this.structuredAppendParity=m,this.numBits=r==null?0:8*r.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(r){this.numBits=r}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(r){this.errorsCorrected=r}getErasures(){return this.erasures}setErasures(r){this.erasures=r}getOther(){return this.other}setOther(r){this.other=r}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class ei{exp(r){return this.expTable[r]}log(r){if(r===0)throw new I;return this.logTable[r]}static addOrSubtract(r,a){return r^a}}class In{constructor(r,a){if(a.length===0)throw new I;this.field=r;const l=a.length;if(l>1&&a[0]===0){let h=1;for(;h<l&&a[h]===0;)h++;h===l?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(l-h),J.arraycopy(a,h,this.coefficients,0,this.coefficients.length))}else this.coefficients=a}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(r){return this.coefficients[this.coefficients.length-1-r]}evaluateAt(r){if(r===0)return this.getCoefficient(0);const a=this.coefficients;let l;if(r===1){l=0;for(let m=0,p=a.length;m!==p;m++){const w=a[m];l=ei.addOrSubtract(l,w)}return l}l=a[0];const h=a.length,f=this.field;for(let m=1;m<h;m++)l=ei.addOrSubtract(f.multiply(r,l),a[m]);return l}addOrSubtract(r){if(!this.field.equals(r.field))throw new I("GenericGFPolys do not have same GenericGF field");if(this.isZero())return r;if(r.isZero())return this;let a=this.coefficients,l=r.coefficients;if(a.length>l.length){const m=a;a=l,l=m}let h=new Int32Array(l.length);const f=l.length-a.length;J.arraycopy(l,0,h,0,f);for(let m=f;m<l.length;m++)h[m]=ei.addOrSubtract(a[m-f],l[m]);return new In(this.field,h)}multiply(r){if(!this.field.equals(r.field))throw new I("GenericGFPolys do not have same GenericGF field");if(this.isZero()||r.isZero())return this.field.getZero();const a=this.coefficients,l=a.length,h=r.coefficients,f=h.length,m=new Int32Array(l+f-1),p=this.field;for(let w=0;w<l;w++){const S=a[w];for(let R=0;R<f;R++)m[w+R]=ei.addOrSubtract(m[w+R],p.multiply(S,h[R]))}return new In(p,m)}multiplyScalar(r){if(r===0)return this.field.getZero();if(r===1)return this;const a=this.coefficients.length,l=this.field,h=new Int32Array(a),f=this.coefficients;for(let m=0;m<a;m++)h[m]=l.multiply(f[m],r);return new In(l,h)}multiplyByMonomial(r,a){if(r<0)throw new I;if(a===0)return this.field.getZero();const l=this.coefficients,h=l.length,f=new Int32Array(h+r),m=this.field;for(let p=0;p<h;p++)f[p]=m.multiply(l[p],a);return new In(m,f)}divide(r){if(!this.field.equals(r.field))throw new I("GenericGFPolys do not have same GenericGF field");if(r.isZero())throw new I("Divide by 0");const a=this.field;let l=a.getZero(),h=this;const f=r.getCoefficient(r.getDegree()),m=a.inverse(f);for(;h.getDegree()>=r.getDegree()&&!h.isZero();){const p=h.getDegree()-r.getDegree(),w=a.multiply(h.getCoefficient(h.getDegree()),m),S=r.multiplyByMonomial(p,w),R=a.buildMonomial(p,w);l=l.addOrSubtract(R),h=h.addOrSubtract(S)}return[l,h]}toString(){let r="";for(let a=this.getDegree();a>=0;a--){let l=this.getCoefficient(a);if(l!==0){if(l<0?(r+=" - ",l=-l):r.length>0&&(r+=" + "),a===0||l!==1){const h=this.field.log(l);h===0?r+="1":h===1?r+="a":(r+="a^",r+=h)}a!==0&&(a===1?r+="x":(r+="x^",r+=a))}}return r}}class Vi extends x{}Vi.kind="ArithmeticException";class Ee extends ei{constructor(r,a,l){super(),this.primitive=r,this.size=a,this.generatorBase=l;const h=new Int32Array(a);let f=1;for(let p=0;p<a;p++)h[p]=f,f*=2,f>=a&&(f^=r,f&=a-1);this.expTable=h;const m=new Int32Array(a);for(let p=0;p<a-1;p++)m[h[p]]=p;this.logTable=m,this.zero=new In(this,Int32Array.from([0])),this.one=new In(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(r,a){if(r<0)throw new I;if(a===0)return this.zero;const l=new Int32Array(r+1);return l[0]=a,new In(this,l)}inverse(r){if(r===0)throw new Vi;return this.expTable[this.size-this.logTable[r]-1]}multiply(r,a){return r===0||a===0?0:this.expTable[(this.logTable[r]+this.logTable[a])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+nt.toHexString(this.primitive)+","+this.size+")"}equals(r){return r===this}}Ee.AZTEC_DATA_12=new Ee(4201,4096,1),Ee.AZTEC_DATA_10=new Ee(1033,1024,1),Ee.AZTEC_DATA_6=new Ee(67,64,1),Ee.AZTEC_PARAM=new Ee(19,16,1),Ee.QR_CODE_FIELD_256=new Ee(285,256,0),Ee.DATA_MATRIX_FIELD_256=new Ee(301,256,1),Ee.AZTEC_DATA_8=Ee.DATA_MATRIX_FIELD_256,Ee.MAXICODE_FIELD_64=Ee.AZTEC_DATA_6;class ni extends x{}ni.kind="ReedSolomonException";class kr extends x{}kr.kind="IllegalStateException";class As{constructor(r){this.field=r}decode(r,a){const l=this.field,h=new In(l,r),f=new Int32Array(a);let m=!0;for(let G=0;G<a;G++){const $=h.evaluateAt(l.exp(G+l.getGeneratorBase()));f[f.length-1-G]=$,$!==0&&(m=!1)}if(m)return;const p=new In(l,f),w=this.runEuclideanAlgorithm(l.buildMonomial(a,1),p,a),S=w[0],R=w[1],B=this.findErrorLocations(S),P=this.findErrorMagnitudes(R,B);for(let G=0;G<B.length;G++){const $=r.length-1-l.log(B[G]);if($<0)throw new ni("Bad error location");r[$]=Ee.addOrSubtract(r[$],P[G])}}runEuclideanAlgorithm(r,a,l){if(r.getDegree()<a.getDegree()){const G=r;r=a,a=G}const h=this.field;let f=r,m=a,p=h.getZero(),w=h.getOne();for(;m.getDegree()>=(l/2|0);){let G=f,$=p;if(f=m,p=w,f.isZero())throw new ni("r_{i-1} was zero");m=G;let rt=h.getZero();const ht=f.getCoefficient(f.getDegree()),yt=h.inverse(ht);for(;m.getDegree()>=f.getDegree()&&!m.isZero();){const Lt=m.getDegree()-f.getDegree(),kt=h.multiply(m.getCoefficient(m.getDegree()),yt);rt=rt.addOrSubtract(h.buildMonomial(Lt,kt)),m=m.addOrSubtract(f.multiplyByMonomial(Lt,kt))}if(w=rt.multiply(p).addOrSubtract($),m.getDegree()>=f.getDegree())throw new kr("Division algorithm failed to reduce polynomial?")}const S=w.getCoefficient(0);if(S===0)throw new ni("sigmaTilde(0) was zero");const R=h.inverse(S),B=w.multiplyScalar(R),P=m.multiplyScalar(R);return[B,P]}findErrorLocations(r){const a=r.getDegree();if(a===1)return Int32Array.from([r.getCoefficient(1)]);const l=new Int32Array(a);let h=0;const f=this.field;for(let m=1;m<f.getSize()&&h<a;m++)r.evaluateAt(m)===0&&(l[h]=f.inverse(m),h++);if(h!==a)throw new ni("Error locator degree does not match number of roots");return l}findErrorMagnitudes(r,a){const l=a.length,h=new Int32Array(l),f=this.field;for(let m=0;m<l;m++){const p=f.inverse(a[m]);let w=1;for(let S=0;S<l;S++)if(m!==S){const R=f.multiply(a[S],p),B=(R&1)===0?R|1:R&-2;w=f.multiply(w,B)}h[m]=f.multiply(r.evaluateAt(p),f.inverse(w)),f.getGeneratorBase()!==0&&(h[m]=f.multiply(h[m],p))}return h}}var Qe;(function(L){L[L.UPPER=0]="UPPER",L[L.LOWER=1]="LOWER",L[L.MIXED=2]="MIXED",L[L.DIGIT=3]="DIGIT",L[L.PUNCT=4]="PUNCT",L[L.BINARY=5]="BINARY"})(Qe||(Qe={}));class We{decode(r){this.ddata=r;let a=r.getBits(),l=this.extractBits(a),h=this.correctBits(l),f=We.convertBoolArrayToByteArray(h),m=We.getEncodedData(h),p=new Pr(f,m,null,null);return p.setNumBits(h.length),p}static highLevelDecode(r){return this.getEncodedData(r)}static getEncodedData(r){let a=r.length,l=Qe.UPPER,h=Qe.UPPER,f="",m=0;for(;m<a;)if(h===Qe.BINARY){if(a-m<5)break;let p=We.readCode(r,m,5);if(m+=5,p===0){if(a-m<11)break;p=We.readCode(r,m,11)+31,m+=11}for(let w=0;w<p;w++){if(a-m<8){m=a;break}const S=We.readCode(r,m,8);f+=K.castAsNonUtf8Char(S),m+=8}h=l}else{let p=h===Qe.DIGIT?4:5;if(a-m<p)break;let w=We.readCode(r,m,p);m+=p;let S=We.getCharacter(h,w);S.startsWith("CTRL_")?(l=h,h=We.getTable(S.charAt(5)),S.charAt(6)==="L"&&(l=h)):(f+=S,h=l)}return f}static getTable(r){switch(r){case"L":return Qe.LOWER;case"P":return Qe.PUNCT;case"M":return Qe.MIXED;case"D":return Qe.DIGIT;case"B":return Qe.BINARY;case"U":default:return Qe.UPPER}}static getCharacter(r,a){switch(r){case Qe.UPPER:return We.UPPER_TABLE[a];case Qe.LOWER:return We.LOWER_TABLE[a];case Qe.MIXED:return We.MIXED_TABLE[a];case Qe.PUNCT:return We.PUNCT_TABLE[a];case Qe.DIGIT:return We.DIGIT_TABLE[a];default:throw new kr("Bad table")}}correctBits(r){let a,l;this.ddata.getNbLayers()<=2?(l=6,a=Ee.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(l=8,a=Ee.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(l=10,a=Ee.AZTEC_DATA_10):(l=12,a=Ee.AZTEC_DATA_12);let h=this.ddata.getNbDatablocks(),f=r.length/l;if(f<h)throw new U;let m=r.length%l,p=new Int32Array(f);for(let P=0;P<f;P++,m+=l)p[P]=We.readCode(r,m,l);try{new As(a).decode(p,f-h)}catch(P){throw new U(P)}let w=(1<<l)-1,S=0;for(let P=0;P<h;P++){let G=p[P];if(G===0||G===w)throw new U;(G===1||G===w-1)&&S++}let R=new Array(h*l-S),B=0;for(let P=0;P<h;P++){let G=p[P];if(G===1||G===w-1)R.fill(G>1,B,B+l-1),B+=l-1;else for(let $=l-1;$>=0;--$)R[B++]=(G&1<<$)!==0}return R}extractBits(r){let a=this.ddata.isCompact(),l=this.ddata.getNbLayers(),h=(a?11:14)+l*4,f=new Int32Array(h),m=new Array(this.totalBitsInLayer(l,a));if(a)for(let p=0;p<f.length;p++)f[p]=p;else{let p=h+1+2*nt.truncDivision(nt.truncDivision(h,2)-1,15),w=h/2,S=nt.truncDivision(p,2);for(let R=0;R<w;R++){let B=R+nt.truncDivision(R,15);f[w-R-1]=S-B-1,f[w+R]=S+B+1}}for(let p=0,w=0;p<l;p++){let S=(l-p)*4+(a?9:12),R=p*2,B=h-1-R;for(let P=0;P<S;P++){let G=P*2;for(let $=0;$<2;$++)m[w+G+$]=r.get(f[R+$],f[R+P]),m[w+2*S+G+$]=r.get(f[R+P],f[B-$]),m[w+4*S+G+$]=r.get(f[B-$],f[B-P]),m[w+6*S+G+$]=r.get(f[B-P],f[R+$])}w+=S*8}return m}static readCode(r,a,l){let h=0;for(let f=a;f<a+l;f++)h<<=1,r[f]&&(h|=1);return h}static readByte(r,a){let l=r.length-a;return l>=8?We.readCode(r,a,8):We.readCode(r,a,l)<<8-l}static convertBoolArrayToByteArray(r){let a=new Uint8Array((r.length+7)/8);for(let l=0;l<a.length;l++)a[l]=We.readByte(r,8*l);return a}totalBitsInLayer(r,a){return((a?88:112)+16*r)*r}}We.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],We.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],We.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],We.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],We.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class Ae{constructor(){}static round(r){return r===NaN?0:r<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:r>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:r+(r<0?-.5:.5)|0}static distance(r,a,l,h){const f=r-l,m=a-h;return Math.sqrt(f*f+m*m)}static sum(r){let a=0;for(let l=0,h=r.length;l!==h;l++){const f=r[l];a+=f}return a}}class is{static floatToIntBits(r){return r}}is.MAX_VALUE=Number.MAX_SAFE_INTEGER;class qt{constructor(r,a){this.x=r,this.y=a}getX(){return this.x}getY(){return this.y}equals(r){if(r instanceof qt){const a=r;return this.x===a.x&&this.y===a.y}return!1}hashCode(){return 31*is.floatToIntBits(this.x)+is.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(r){const a=this.distance(r[0],r[1]),l=this.distance(r[1],r[2]),h=this.distance(r[0],r[2]);let f,m,p;if(l>=a&&l>=h?(m=r[0],f=r[1],p=r[2]):h>=l&&h>=a?(m=r[1],f=r[0],p=r[2]):(m=r[2],f=r[0],p=r[1]),this.crossProductZ(f,m,p)<0){const w=f;f=p,p=w}r[0]=f,r[1]=m,r[2]=p}static distance(r,a){return Ae.distance(r.x,r.y,a.x,a.y)}static crossProductZ(r,a,l){const h=a.x,f=a.y;return(l.x-h)*(r.y-f)-(l.y-f)*(r.x-h)}}class wa{constructor(r,a){this.bits=r,this.points=a}getBits(){return this.bits}getPoints(){return this.points}}class qs extends wa{constructor(r,a,l,h,f){super(r,a),this.compact=l,this.nbDatablocks=h,this.nbLayers=f}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Kr{constructor(r,a,l,h){this.image=r,this.height=r.getHeight(),this.width=r.getWidth(),a==null&&(a=Kr.INIT_SIZE),l==null&&(l=r.getWidth()/2|0),h==null&&(h=r.getHeight()/2|0);const f=a/2|0;if(this.leftInit=l-f,this.rightInit=l+f,this.upInit=h-f,this.downInit=h+f,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new st}detect(){let r=this.leftInit,a=this.rightInit,l=this.upInit,h=this.downInit,f=!1,m=!0,p=!1,w=!1,S=!1,R=!1,B=!1;const P=this.width,G=this.height;for(;m;){m=!1;let $=!0;for(;($||!w)&&a<P;)$=this.containsBlackPoint(l,h,a,!1),$?(a++,m=!0,w=!0):w||a++;if(a>=P){f=!0;break}let rt=!0;for(;(rt||!S)&&h<G;)rt=this.containsBlackPoint(r,a,h,!0),rt?(h++,m=!0,S=!0):S||h++;if(h>=G){f=!0;break}let ht=!0;for(;(ht||!R)&&r>=0;)ht=this.containsBlackPoint(l,h,r,!1),ht?(r--,m=!0,R=!0):R||r--;if(r<0){f=!0;break}let yt=!0;for(;(yt||!B)&&l>=0;)yt=this.containsBlackPoint(r,a,l,!0),yt?(l--,m=!0,B=!0):B||l--;if(l<0){f=!0;break}m&&(p=!0)}if(!f&&p){const $=a-r;let rt=null;for(let kt=1;rt===null&&kt<$;kt++)rt=this.getBlackPointOnSegment(r,h-kt,r+kt,h);if(rt==null)throw new st;let ht=null;for(let kt=1;ht===null&&kt<$;kt++)ht=this.getBlackPointOnSegment(r,l+kt,r+kt,l);if(ht==null)throw new st;let yt=null;for(let kt=1;yt===null&&kt<$;kt++)yt=this.getBlackPointOnSegment(a,l+kt,a-kt,l);if(yt==null)throw new st;let Lt=null;for(let kt=1;Lt===null&&kt<$;kt++)Lt=this.getBlackPointOnSegment(a,h-kt,a-kt,h);if(Lt==null)throw new st;return this.centerEdges(Lt,rt,yt,ht)}else throw new st}getBlackPointOnSegment(r,a,l,h){const f=Ae.round(Ae.distance(r,a,l,h)),m=(l-r)/f,p=(h-a)/f,w=this.image;for(let S=0;S<f;S++){const R=Ae.round(r+S*m),B=Ae.round(a+S*p);if(w.get(R,B))return new qt(R,B)}return null}centerEdges(r,a,l,h){const f=r.getX(),m=r.getY(),p=a.getX(),w=a.getY(),S=l.getX(),R=l.getY(),B=h.getX(),P=h.getY(),G=Kr.CORR;return f<this.width/2?[new qt(B-G,P+G),new qt(p+G,w+G),new qt(S-G,R-G),new qt(f+G,m-G)]:[new qt(B+G,P+G),new qt(p+G,w-G),new qt(S-G,R+G),new qt(f-G,m-G)]}containsBlackPoint(r,a,l,h){const f=this.image;if(h){for(let m=r;m<=a;m++)if(f.get(m,l))return!0}else for(let m=r;m<=a;m++)if(f.get(l,m))return!0;return!1}}Kr.INIT_SIZE=10,Kr.CORR=1;class _a{static checkAndNudgePoints(r,a){const l=r.getWidth(),h=r.getHeight();let f=!0;for(let m=0;m<a.length&&f;m+=2){const p=Math.floor(a[m]),w=Math.floor(a[m+1]);if(p<-1||p>l||w<-1||w>h)throw new st;f=!1,p===-1?(a[m]=0,f=!0):p===l&&(a[m]=l-1,f=!0),w===-1?(a[m+1]=0,f=!0):w===h&&(a[m+1]=h-1,f=!0)}f=!0;for(let m=a.length-2;m>=0&&f;m-=2){const p=Math.floor(a[m]),w=Math.floor(a[m+1]);if(p<-1||p>l||w<-1||w>h)throw new st;f=!1,p===-1?(a[m]=0,f=!0):p===l&&(a[m]=l-1,f=!0),w===-1?(a[m+1]=0,f=!0):w===h&&(a[m+1]=h-1,f=!0)}}}class Le{constructor(r,a,l,h,f,m,p,w,S){this.a11=r,this.a21=a,this.a31=l,this.a12=h,this.a22=f,this.a32=m,this.a13=p,this.a23=w,this.a33=S}static quadrilateralToQuadrilateral(r,a,l,h,f,m,p,w,S,R,B,P,G,$,rt,ht){const yt=Le.quadrilateralToSquare(r,a,l,h,f,m,p,w);return Le.squareToQuadrilateral(S,R,B,P,G,$,rt,ht).times(yt)}transformPoints(r){const a=r.length,l=this.a11,h=this.a12,f=this.a13,m=this.a21,p=this.a22,w=this.a23,S=this.a31,R=this.a32,B=this.a33;for(let P=0;P<a;P+=2){const G=r[P],$=r[P+1],rt=f*G+w*$+B;r[P]=(l*G+m*$+S)/rt,r[P+1]=(h*G+p*$+R)/rt}}transformPointsWithValues(r,a){const l=this.a11,h=this.a12,f=this.a13,m=this.a21,p=this.a22,w=this.a23,S=this.a31,R=this.a32,B=this.a33,P=r.length;for(let G=0;G<P;G++){const $=r[G],rt=a[G],ht=f*$+w*rt+B;r[G]=(l*$+m*rt+S)/ht,a[G]=(h*$+p*rt+R)/ht}}static squareToQuadrilateral(r,a,l,h,f,m,p,w){const S=r-l+f-p,R=a-h+m-w;if(S===0&&R===0)return new Le(l-r,f-l,r,h-a,m-h,a,0,0,1);{const B=l-f,P=p-f,G=h-m,$=w-m,rt=B*$-P*G,ht=(S*$-P*R)/rt,yt=(B*R-S*G)/rt;return new Le(l-r+ht*l,p-r+yt*p,r,h-a+ht*h,w-a+yt*w,a,ht,yt,1)}}static quadrilateralToSquare(r,a,l,h,f,m,p,w){return Le.squareToQuadrilateral(r,a,l,h,f,m,p,w).buildAdjoint()}buildAdjoint(){return new Le(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(r){return new Le(this.a11*r.a11+this.a21*r.a12+this.a31*r.a13,this.a11*r.a21+this.a21*r.a22+this.a31*r.a23,this.a11*r.a31+this.a21*r.a32+this.a31*r.a33,this.a12*r.a11+this.a22*r.a12+this.a32*r.a13,this.a12*r.a21+this.a22*r.a22+this.a32*r.a23,this.a12*r.a31+this.a22*r.a32+this.a32*r.a33,this.a13*r.a11+this.a23*r.a12+this.a33*r.a13,this.a13*r.a21+this.a23*r.a22+this.a33*r.a23,this.a13*r.a31+this.a23*r.a32+this.a33*r.a33)}}class Fe extends _a{sampleGrid(r,a,l,h,f,m,p,w,S,R,B,P,G,$,rt,ht,yt,Lt,kt){const Dt=Le.quadrilateralToQuadrilateral(h,f,m,p,w,S,R,B,P,G,$,rt,ht,yt,Lt,kt);return this.sampleGridWithTransform(r,a,l,Dt)}sampleGridWithTransform(r,a,l,h){if(a<=0||l<=0)throw new st;const f=new Pt(a,l),m=new Float32Array(2*a);for(let p=0;p<l;p++){const w=m.length,S=p+.5;for(let R=0;R<w;R+=2)m[R]=R/2+.5,m[R+1]=S;h.transformPoints(m),_a.checkAndNudgePoints(r,m);try{for(let R=0;R<w;R+=2)r.get(Math.floor(m[R]),Math.floor(m[R+1]))&&f.set(R/2,p)}catch{throw new st}}return f}}class zn{static setGridSampler(r){zn.gridSampler=r}static getInstance(){return zn.gridSampler}}zn.gridSampler=new Fe;class je{constructor(r,a){this.x=r,this.y=a}toResultPoint(){return new qt(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Ao{constructor(r){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=r}detect(){return this.detectMirror(!1)}detectMirror(r){let a=this.getMatrixCenter(),l=this.getBullsEyeCorners(a);if(r){let m=l[0];l[0]=l[2],l[2]=m}this.extractParameters(l);let h=this.sampleGrid(this.image,l[this.shift%4],l[(this.shift+1)%4],l[(this.shift+2)%4],l[(this.shift+3)%4]),f=this.getMatrixCornerPoints(l);return new qs(h,f,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(r){if(!this.isValidPoint(r[0])||!this.isValidPoint(r[1])||!this.isValidPoint(r[2])||!this.isValidPoint(r[3]))throw new st;let a=2*this.nbCenterLayers,l=new Int32Array([this.sampleLine(r[0],r[1],a),this.sampleLine(r[1],r[2],a),this.sampleLine(r[2],r[3],a),this.sampleLine(r[3],r[0],a)]);this.shift=this.getRotation(l,a);let h=0;for(let m=0;m<4;m++){let p=l[(this.shift+m)%4];this.compact?(h<<=7,h+=p>>1&127):(h<<=10,h+=(p>>2&992)+(p>>1&31))}let f=this.getCorrectedParameterData(h,this.compact);this.compact?(this.nbLayers=(f>>6)+1,this.nbDataBlocks=(f&63)+1):(this.nbLayers=(f>>11)+1,this.nbDataBlocks=(f&2047)+1)}getRotation(r,a){let l=0;r.forEach((h,f,m)=>{let p=(h>>a-2<<1)+(h&1);l=(l<<3)+p}),l=((l&1)<<11)+(l>>1);for(let h=0;h<4;h++)if(nt.bitCount(l^this.EXPECTED_CORNER_BITS[h])<=2)return h;throw new st}getCorrectedParameterData(r,a){let l,h;a?(l=7,h=2):(l=10,h=4);let f=l-h,m=new Int32Array(l);for(let w=l-1;w>=0;--w)m[w]=r&15,r>>=4;try{new As(Ee.AZTEC_PARAM).decode(m,f)}catch{throw new st}let p=0;for(let w=0;w<h;w++)p=(p<<4)+m[w];return p}getBullsEyeCorners(r){let a=r,l=r,h=r,f=r,m=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let B=this.getFirstDifferent(a,m,1,-1),P=this.getFirstDifferent(l,m,1,1),G=this.getFirstDifferent(h,m,-1,1),$=this.getFirstDifferent(f,m,-1,-1);if(this.nbCenterLayers>2){let rt=this.distancePoint($,B)*this.nbCenterLayers/(this.distancePoint(f,a)*(this.nbCenterLayers+2));if(rt<.75||rt>1.25||!this.isWhiteOrBlackRectangle(B,P,G,$))break}a=B,l=P,h=G,f=$,m=!m}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new st;this.compact=this.nbCenterLayers===5;let p=new qt(a.getX()+.5,a.getY()-.5),w=new qt(l.getX()+.5,l.getY()+.5),S=new qt(h.getX()-.5,h.getY()+.5),R=new qt(f.getX()-.5,f.getY()-.5);return this.expandSquare([p,w,S,R],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let r,a,l,h;try{let p=new Kr(this.image).detect();r=p[0],a=p[1],l=p[2],h=p[3]}catch{let w=this.image.getWidth()/2,S=this.image.getHeight()/2;r=this.getFirstDifferent(new je(w+7,S-7),!1,1,-1).toResultPoint(),a=this.getFirstDifferent(new je(w+7,S+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new je(w-7,S+7),!1,-1,1).toResultPoint(),h=this.getFirstDifferent(new je(w-7,S-7),!1,-1,-1).toResultPoint()}let f=Ae.round((r.getX()+h.getX()+a.getX()+l.getX())/4),m=Ae.round((r.getY()+h.getY()+a.getY()+l.getY())/4);try{let p=new Kr(this.image,15,f,m).detect();r=p[0],a=p[1],l=p[2],h=p[3]}catch{r=this.getFirstDifferent(new je(f+7,m-7),!1,1,-1).toResultPoint(),a=this.getFirstDifferent(new je(f+7,m+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new je(f-7,m+7),!1,-1,1).toResultPoint(),h=this.getFirstDifferent(new je(f-7,m-7),!1,-1,-1).toResultPoint()}return f=Ae.round((r.getX()+h.getX()+a.getX()+l.getX())/4),m=Ae.round((r.getY()+h.getY()+a.getY()+l.getY())/4),new je(f,m)}getMatrixCornerPoints(r){return this.expandSquare(r,2*this.nbCenterLayers,this.getDimension())}sampleGrid(r,a,l,h,f){let m=zn.getInstance(),p=this.getDimension(),w=p/2-this.nbCenterLayers,S=p/2+this.nbCenterLayers;return m.sampleGrid(r,p,p,w,w,S,w,S,S,w,S,a.getX(),a.getY(),l.getX(),l.getY(),h.getX(),h.getY(),f.getX(),f.getY())}sampleLine(r,a,l){let h=0,f=this.distanceResultPoint(r,a),m=f/l,p=r.getX(),w=r.getY(),S=m*(a.getX()-r.getX())/f,R=m*(a.getY()-r.getY())/f;for(let B=0;B<l;B++)this.image.get(Ae.round(p+B*S),Ae.round(w+B*R))&&(h|=1<<l-B-1);return h}isWhiteOrBlackRectangle(r,a,l,h){let f=3;r=new je(r.getX()-f,r.getY()+f),a=new je(a.getX()-f,a.getY()-f),l=new je(l.getX()+f,l.getY()-f),h=new je(h.getX()+f,h.getY()+f);let m=this.getColor(h,r);if(m===0)return!1;let p=this.getColor(r,a);return p!==m||(p=this.getColor(a,l),p!==m)?!1:(p=this.getColor(l,h),p===m)}getColor(r,a){let l=this.distancePoint(r,a),h=(a.getX()-r.getX())/l,f=(a.getY()-r.getY())/l,m=0,p=r.getX(),w=r.getY(),S=this.image.get(r.getX(),r.getY()),R=Math.ceil(l);for(let P=0;P<R;P++)p+=h,w+=f,this.image.get(Ae.round(p),Ae.round(w))!==S&&m++;let B=m/l;return B>.1&&B<.9?0:B<=.1===S?1:-1}getFirstDifferent(r,a,l,h){let f=r.getX()+l,m=r.getY()+h;for(;this.isValid(f,m)&&this.image.get(f,m)===a;)f+=l,m+=h;for(f-=l,m-=h;this.isValid(f,m)&&this.image.get(f,m)===a;)f+=l;for(f-=l;this.isValid(f,m)&&this.image.get(f,m)===a;)m+=h;return m-=h,new je(f,m)}expandSquare(r,a,l){let h=l/(2*a),f=r[0].getX()-r[2].getX(),m=r[0].getY()-r[2].getY(),p=(r[0].getX()+r[2].getX())/2,w=(r[0].getY()+r[2].getY())/2,S=new qt(p+h*f,w+h*m),R=new qt(p-h*f,w-h*m);f=r[1].getX()-r[3].getX(),m=r[1].getY()-r[3].getY(),p=(r[1].getX()+r[3].getX())/2,w=(r[1].getY()+r[3].getY())/2;let B=new qt(p+h*f,w+h*m),P=new qt(p-h*f,w-h*m);return[S,B,R,P]}isValid(r,a){return r>=0&&r<this.image.getWidth()&&a>0&&a<this.image.getHeight()}isValidPoint(r){let a=Ae.round(r.getX()),l=Ae.round(r.getY());return this.isValid(a,l)}distancePoint(r,a){return Ae.distance(r.getX(),r.getY(),a.getX(),a.getY())}distanceResultPoint(r,a){return Ae.distance(r.getX(),r.getY(),a.getX(),a.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(nt.truncDivision(this.nbLayers-4,8)+1)+15}}class Ta{decode(r,a=null){let l=null,h=new Ao(r.getBlackMatrix()),f=null,m=null;try{let R=h.detectMirror(!1);f=R.getPoints(),this.reportFoundResultPoints(a,f),m=new We().decode(R)}catch(R){l=R}if(m==null)try{let R=h.detectMirror(!0);f=R.getPoints(),this.reportFoundResultPoints(a,f),m=new We().decode(R)}catch(R){throw l??R}let p=new Ht(m.getText(),m.getRawBytes(),m.getNumBits(),f,Bt.AZTEC,J.currentTimeMillis()),w=m.getByteSegments();w!=null&&p.putMetadata(oe.BYTE_SEGMENTS,w);let S=m.getECLevel();return S!=null&&p.putMetadata(oe.ERROR_CORRECTION_LEVEL,S),p}reportFoundResultPoints(r,a){if(r!=null){let l=r.get(Tt.NEED_RESULT_POINT_CALLBACK);l!=null&&a.forEach((h,f,m)=>{l.foundPossibleResultPoint(h)})}}reset(){}}class Ys extends Mt{constructor(r=500){super(new Ta,r)}}class sn{decode(r,a){try{return this.doDecode(r,a)}catch{if(a&&a.get(Tt.TRY_HARDER)===!0&&r.isRotateSupported()){const f=r.rotateCounterClockwise(),m=this.doDecode(f,a),p=m.getResultMetadata();let w=270;p!==null&&p.get(oe.ORIENTATION)===!0&&(w=w+p.get(oe.ORIENTATION)%360),m.putMetadata(oe.ORIENTATION,w);const S=m.getResultPoints();if(S!==null){const R=f.getHeight();for(let B=0;B<S.length;B++)S[B]=new qt(R-S[B].getY()-1,S[B].getX())}return m}else throw new st}}reset(){}doDecode(r,a){const l=r.getWidth(),h=r.getHeight();let f=new _t(l);const m=a&&a.get(Tt.TRY_HARDER)===!0,p=Math.max(1,h>>(m?8:5));let w;m?w=h:w=15;const S=Math.trunc(h/2);for(let R=0;R<w;R++){const B=Math.trunc((R+1)/2),P=(R&1)===0,G=S+p*(P?B:-B);if(G<0||G>=h)break;try{f=r.getBlackRow(G,f)}catch{continue}for(let $=0;$<2;$++){if($===1&&(f.reverse(),a&&a.get(Tt.NEED_RESULT_POINT_CALLBACK)===!0)){const rt=new Map;a.forEach((ht,yt)=>rt.set(yt,ht)),rt.delete(Tt.NEED_RESULT_POINT_CALLBACK),a=rt}try{const rt=this.decodeRow(G,f,a);if($===1){rt.putMetadata(oe.ORIENTATION,180);const ht=rt.getResultPoints();ht!==null&&(ht[0]=new qt(l-ht[0].getX()-1,ht[0].getY()),ht[1]=new qt(l-ht[1].getX()-1,ht[1].getY()))}return rt}catch{}}}throw new st}static recordPattern(r,a,l){const h=l.length;for(let S=0;S<h;S++)l[S]=0;const f=r.getSize();if(a>=f)throw new st;let m=!r.get(a),p=0,w=a;for(;w<f;){if(r.get(w)!==m)l[p]++;else{if(++p===h)break;l[p]=1,m=!m}w++}if(!(p===h||p===h-1&&w===f))throw new st}static recordPatternInReverse(r,a,l){let h=l.length,f=r.get(a);for(;a>0&&h>=0;)r.get(--a)!==f&&(h--,f=!f);if(h>=0)throw new st;sn.recordPattern(r,a+1,l)}static patternMatchVariance(r,a,l){const h=r.length;let f=0,m=0;for(let S=0;S<h;S++)f+=r[S],m+=a[S];if(f<m)return Number.POSITIVE_INFINITY;const p=f/m;l*=p;let w=0;for(let S=0;S<h;S++){const R=r[S],B=a[S]*p,P=R>B?R-B:B-R;if(P>l)return Number.POSITIVE_INFINITY;w+=P}return w/f}}class Vt extends sn{static findStartPattern(r){const a=r.getSize(),l=r.getNextSet(0);let h=0,f=Int32Array.from([0,0,0,0,0,0]),m=l,p=!1;const w=6;for(let S=l;S<a;S++)if(r.get(S)!==p)f[h]++;else{if(h===w-1){let R=Vt.MAX_AVG_VARIANCE,B=-1;for(let P=Vt.CODE_START_A;P<=Vt.CODE_START_C;P++){const G=sn.patternMatchVariance(f,Vt.CODE_PATTERNS[P],Vt.MAX_INDIVIDUAL_VARIANCE);G<R&&(R=G,B=P)}if(B>=0&&r.isRange(Math.max(0,m-(S-m)/2),m,!1))return Int32Array.from([m,S,B]);m+=f[0]+f[1],f=f.slice(2,f.length-1),f[h-1]=0,f[h]=0,h--}else h++;f[h]=1,p=!p}throw new st}static decodeCode(r,a,l){sn.recordPattern(r,l,a);let h=Vt.MAX_AVG_VARIANCE,f=-1;for(let m=0;m<Vt.CODE_PATTERNS.length;m++){const p=Vt.CODE_PATTERNS[m],w=this.patternMatchVariance(a,p,Vt.MAX_INDIVIDUAL_VARIANCE);w<h&&(h=w,f=m)}if(f>=0)return f;throw new st}decodeRow(r,a,l){const h=l&&l.get(Tt.ASSUME_GS1)===!0,f=Vt.findStartPattern(a),m=f[2];let p=0;const w=new Uint8Array(20);w[p++]=m;let S;switch(m){case Vt.CODE_START_A:S=Vt.CODE_CODE_A;break;case Vt.CODE_START_B:S=Vt.CODE_CODE_B;break;case Vt.CODE_START_C:S=Vt.CODE_CODE_C;break;default:throw new U}let R=!1,B=!1,P="",G=f[0],$=f[1];const rt=Int32Array.from([0,0,0,0,0,0]);let ht=0,yt=0,Lt=m,kt=0,Dt=!0,ue=!1,le=!1;for(;!R;){const bs=B;switch(B=!1,ht=yt,yt=Vt.decodeCode(a,rt,$),w[p++]=yt,yt!==Vt.CODE_STOP&&(Dt=!0),yt!==Vt.CODE_STOP&&(kt++,Lt+=kt*yt),G=$,$+=rt.reduce((Si,wu)=>Si+wu,0),yt){case Vt.CODE_START_A:case Vt.CODE_START_B:case Vt.CODE_START_C:throw new U}switch(S){case Vt.CODE_CODE_A:if(yt<64)le===ue?P+=String.fromCharCode(32+yt):P+=String.fromCharCode(32+yt+128),le=!1;else if(yt<96)le===ue?P+=String.fromCharCode(yt-64):P+=String.fromCharCode(yt+64),le=!1;else switch(yt!==Vt.CODE_STOP&&(Dt=!1),yt){case Vt.CODE_FNC_1:h&&(P.length===0?P+="]C1":P+="");break;case Vt.CODE_FNC_2:case Vt.CODE_FNC_3:break;case Vt.CODE_FNC_4_A:!ue&&le?(ue=!0,le=!1):ue&&le?(ue=!1,le=!1):le=!0;break;case Vt.CODE_SHIFT:B=!0,S=Vt.CODE_CODE_B;break;case Vt.CODE_CODE_B:S=Vt.CODE_CODE_B;break;case Vt.CODE_CODE_C:S=Vt.CODE_CODE_C;break;case Vt.CODE_STOP:R=!0;break}break;case Vt.CODE_CODE_B:if(yt<96)le===ue?P+=String.fromCharCode(32+yt):P+=String.fromCharCode(32+yt+128),le=!1;else switch(yt!==Vt.CODE_STOP&&(Dt=!1),yt){case Vt.CODE_FNC_1:h&&(P.length===0?P+="]C1":P+="");break;case Vt.CODE_FNC_2:case Vt.CODE_FNC_3:break;case Vt.CODE_FNC_4_B:!ue&&le?(ue=!0,le=!1):ue&&le?(ue=!1,le=!1):le=!0;break;case Vt.CODE_SHIFT:B=!0,S=Vt.CODE_CODE_A;break;case Vt.CODE_CODE_A:S=Vt.CODE_CODE_A;break;case Vt.CODE_CODE_C:S=Vt.CODE_CODE_C;break;case Vt.CODE_STOP:R=!0;break}break;case Vt.CODE_CODE_C:if(yt<100)yt<10&&(P+="0"),P+=yt;else switch(yt!==Vt.CODE_STOP&&(Dt=!1),yt){case Vt.CODE_FNC_1:h&&(P.length===0?P+="]C1":P+="");break;case Vt.CODE_CODE_A:S=Vt.CODE_CODE_A;break;case Vt.CODE_CODE_B:S=Vt.CODE_CODE_B;break;case Vt.CODE_STOP:R=!0;break}break}bs&&(S=S===Vt.CODE_CODE_A?Vt.CODE_CODE_B:Vt.CODE_CODE_A)}const Ir=$-G;if($=a.getNextUnset($),!a.isRange($,Math.min(a.getSize(),$+($-G)/2),!1))throw new st;if(Lt-=kt*ht,Lt%103!==ht)throw new H;const ui=P.length;if(ui===0)throw new st;ui>0&&Dt&&(S===Vt.CODE_CODE_C?P=P.substring(0,ui-2):P=P.substring(0,ui-1));const Hr=(f[1]+f[0])/2,tn=G+Ir/2,gr=w.length,Gr=new Uint8Array(gr);for(let bs=0;bs<gr;bs++)Gr[bs]=w[bs];const ta=[new qt(Hr,r),new qt(tn,r)];return new Ht(P,Gr,0,ta,Bt.CODE_128,new Date().getTime())}}Vt.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Vt.MAX_AVG_VARIANCE=.25,Vt.MAX_INDIVIDUAL_VARIANCE=.7,Vt.CODE_SHIFT=98,Vt.CODE_CODE_C=99,Vt.CODE_CODE_B=100,Vt.CODE_CODE_A=101,Vt.CODE_FNC_1=102,Vt.CODE_FNC_2=97,Vt.CODE_FNC_3=96,Vt.CODE_FNC_4_A=101,Vt.CODE_FNC_4_B=100,Vt.CODE_START_A=103,Vt.CODE_START_B=104,Vt.CODE_START_C=105,Vt.CODE_STOP=106;class Ye extends sn{constructor(r=!1,a=!1){super(),this.usingCheckDigit=r,this.extendedMode=a,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(r,a,l){let h=this.counters;h.fill(0),this.decodeRowResult="";let f=Ye.findAsteriskPattern(a,h),m=a.getNextSet(f[1]),p=a.getSize(),w,S;do{Ye.recordPattern(a,m,h);let rt=Ye.toNarrowWidePattern(h);if(rt<0)throw new st;w=Ye.patternToChar(rt),this.decodeRowResult+=w,S=m;for(let ht of h)m+=ht;m=a.getNextSet(m)}while(w!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let R=0;for(let rt of h)R+=rt;let B=m-S-R;if(m!==p&&B*2<R)throw new st;if(this.usingCheckDigit){let rt=this.decodeRowResult.length-1,ht=0;for(let yt=0;yt<rt;yt++)ht+=Ye.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(yt));if(this.decodeRowResult.charAt(rt)!==Ye.ALPHABET_STRING.charAt(ht%43))throw new H;this.decodeRowResult=this.decodeRowResult.substring(0,rt)}if(this.decodeRowResult.length===0)throw new st;let P;this.extendedMode?P=Ye.decodeExtended(this.decodeRowResult):P=this.decodeRowResult;let G=(f[1]+f[0])/2,$=S+R/2;return new Ht(P,null,0,[new qt(G,r),new qt($,r)],Bt.CODE_39,new Date().getTime())}static findAsteriskPattern(r,a){let l=r.getSize(),h=r.getNextSet(0),f=0,m=h,p=!1,w=a.length;for(let S=h;S<l;S++)if(r.get(S)!==p)a[f]++;else{if(f===w-1){if(this.toNarrowWidePattern(a)===Ye.ASTERISK_ENCODING&&r.isRange(Math.max(0,m-Math.floor((S-m)/2)),m,!1))return[m,S];m+=a[0]+a[1],a.copyWithin(0,2,2+f-1),a[f-1]=0,a[f]=0,f--}else f++;a[f]=1,p=!p}throw new st}static toNarrowWidePattern(r){let a=r.length,l=0,h;do{let f=2147483647;for(let w of r)w<f&&w>l&&(f=w);l=f,h=0;let m=0,p=0;for(let w=0;w<a;w++){let S=r[w];S>l&&(p|=1<<a-1-w,h++,m+=S)}if(h===3){for(let w=0;w<a&&h>0;w++){let S=r[w];if(S>l&&(h--,S*2>=m))return-1}return p}}while(h>3);return-1}static patternToChar(r){for(let a=0;a<Ye.CHARACTER_ENCODINGS.length;a++)if(Ye.CHARACTER_ENCODINGS[a]===r)return Ye.ALPHABET_STRING.charAt(a);if(r===Ye.ASTERISK_ENCODING)return"*";throw new st}static decodeExtended(r){let a=r.length,l="";for(let h=0;h<a;h++){let f=r.charAt(h);if(f==="+"||f==="$"||f==="%"||f==="/"){let m=r.charAt(h+1),p="\0";switch(f){case"+":if(m>="A"&&m<="Z")p=String.fromCharCode(m.charCodeAt(0)+32);else throw new U;break;case"$":if(m>="A"&&m<="Z")p=String.fromCharCode(m.charCodeAt(0)-64);else throw new U;break;case"%":if(m>="A"&&m<="E")p=String.fromCharCode(m.charCodeAt(0)-38);else if(m>="F"&&m<="J")p=String.fromCharCode(m.charCodeAt(0)-11);else if(m>="K"&&m<="O")p=String.fromCharCode(m.charCodeAt(0)+16);else if(m>="P"&&m<="T")p=String.fromCharCode(m.charCodeAt(0)+43);else if(m==="U")p="\0";else if(m==="V")p="@";else if(m==="W")p="`";else if(m==="X"||m==="Y"||m==="Z")p="";else throw new U;break;case"/":if(m>="A"&&m<="O")p=String.fromCharCode(m.charCodeAt(0)-32);else if(m==="Z")p=":";else throw new U;break}l+=p,h++}else l+=f}return l}}Ye.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Ye.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Ye.ASTERISK_ENCODING=148;class Be extends sn{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(r,a,l){let h=this.decodeStart(a),f=this.decodeEnd(a),m=new Y;Be.decodeMiddle(a,h[1],f[0],m);let p=m.toString(),w=null;l!=null&&(w=l.get(Tt.ALLOWED_LENGTHS)),w==null&&(w=Be.DEFAULT_ALLOWED_LENGTHS);let S=p.length,R=!1,B=0;for(let $ of w){if(S===$){R=!0;break}$>B&&(B=$)}if(!R&&S>B&&(R=!0),!R)throw new U;const P=[new qt(h[1],r),new qt(f[0],r)];return new Ht(p,null,0,P,Bt.ITF,new Date().getTime())}static decodeMiddle(r,a,l,h){let f=new Int32Array(10),m=new Int32Array(5),p=new Int32Array(5);for(f.fill(0),m.fill(0),p.fill(0);a<l;){sn.recordPattern(r,a,f);for(let S=0;S<5;S++){let R=2*S;m[S]=f[R],p[S]=f[R+1]}let w=Be.decodeDigit(m);h.append(w.toString()),w=this.decodeDigit(p),h.append(w.toString()),f.forEach(function(S){a+=S})}}decodeStart(r){let a=Be.skipWhiteSpace(r),l=Be.findGuardPattern(r,a,Be.START_PATTERN);return this.narrowLineWidth=(l[1]-l[0])/4,this.validateQuietZone(r,l[0]),l}validateQuietZone(r,a){let l=this.narrowLineWidth*10;l=l<a?l:a;for(let h=a-1;l>0&&h>=0&&!r.get(h);h--)l--;if(l!==0)throw new st}static skipWhiteSpace(r){const a=r.getSize(),l=r.getNextSet(0);if(l===a)throw new st;return l}decodeEnd(r){r.reverse();try{let a=Be.skipWhiteSpace(r),l;try{l=Be.findGuardPattern(r,a,Be.END_PATTERN_REVERSED[0])}catch(f){f instanceof st&&(l=Be.findGuardPattern(r,a,Be.END_PATTERN_REVERSED[1]))}this.validateQuietZone(r,l[0]);let h=l[0];return l[0]=r.getSize()-l[1],l[1]=r.getSize()-h,l}finally{r.reverse()}}static findGuardPattern(r,a,l){let h=l.length,f=new Int32Array(h),m=r.getSize(),p=!1,w=0,S=a;f.fill(0);for(let R=a;R<m;R++)if(r.get(R)!==p)f[w]++;else{if(w===h-1){if(sn.patternMatchVariance(f,l,Be.MAX_INDIVIDUAL_VARIANCE)<Be.MAX_AVG_VARIANCE)return[S,R];S+=f[0]+f[1],J.arraycopy(f,2,f,0,w-1),f[w-1]=0,f[w]=0,w--}else w++;f[w]=1,p=!p}throw new st}static decodeDigit(r){let a=Be.MAX_AVG_VARIANCE,l=-1,h=Be.PATTERNS.length;for(let f=0;f<h;f++){let m=Be.PATTERNS[f],p=sn.patternMatchVariance(r,m,Be.MAX_INDIVIDUAL_VARIANCE);p<a?(a=p,l=f):p===a&&(l=-1)}if(l>=0)return l%10;throw new st}}Be.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Be.MAX_AVG_VARIANCE=.38,Be.MAX_INDIVIDUAL_VARIANCE=.5,Be.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Be.START_PATTERN=Int32Array.from([1,1,1,1]),Be.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Ke extends sn{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(r){let a=!1,l,h=0,f=Int32Array.from([0,0,0]);for(;!a;){f=Int32Array.from([0,0,0]),l=Ke.findGuardPattern(r,h,!1,this.START_END_PATTERN,f);let m=l[0];h=l[1];let p=m-(h-m);p>=0&&(a=r.isRange(p,m,!1))}return l}static checkChecksum(r){return Ke.checkStandardUPCEANChecksum(r)}static checkStandardUPCEANChecksum(r){let a=r.length;if(a===0)return!1;let l=parseInt(r.charAt(a-1),10);return Ke.getStandardUPCEANChecksum(r.substring(0,a-1))===l}static getStandardUPCEANChecksum(r){let a=r.length,l=0;for(let h=a-1;h>=0;h-=2){let f=r.charAt(h).charCodeAt(0)-48;if(f<0||f>9)throw new U;l+=f}l*=3;for(let h=a-2;h>=0;h-=2){let f=r.charAt(h).charCodeAt(0)-48;if(f<0||f>9)throw new U;l+=f}return(1e3-l)%10}static decodeEnd(r,a){return Ke.findGuardPattern(r,a,!1,Ke.START_END_PATTERN,new Int32Array(Ke.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(r,a,l,h){return this.findGuardPattern(r,a,l,h,new Int32Array(h.length))}static findGuardPattern(r,a,l,h,f){let m=r.getSize();a=l?r.getNextUnset(a):r.getNextSet(a);let p=0,w=a,S=h.length,R=l;for(let B=a;B<m;B++)if(r.get(B)!==R)f[p]++;else{if(p===S-1){if(sn.patternMatchVariance(f,h,Ke.MAX_INDIVIDUAL_VARIANCE)<Ke.MAX_AVG_VARIANCE)return Int32Array.from([w,B]);w+=f[0]+f[1];let P=f.slice(2,f.length-1);for(let G=0;G<p-1;G++)f[G]=P[G];f[p-1]=0,f[p]=0,p--}else p++;f[p]=1,R=!R}throw new st}static decodeDigit(r,a,l,h){this.recordPattern(r,l,a);let f=this.MAX_AVG_VARIANCE,m=-1,p=h.length;for(let w=0;w<p;w++){let S=h[w],R=sn.patternMatchVariance(a,S,Ke.MAX_INDIVIDUAL_VARIANCE);R<f&&(f=R,m=w)}if(m>=0)return m;throw new st}}Ke.MAX_AVG_VARIANCE=.48,Ke.MAX_INDIVIDUAL_VARIANCE=.7,Ke.START_END_PATTERN=Int32Array.from([1,1,1]),Ke.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Ke.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Ke.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class ss{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(r,a,l){let h=this.decodeRowStringBuffer,f=this.decodeMiddle(a,l,h),m=h.toString(),p=ss.parseExtensionString(m),w=[new qt((l[0]+l[1])/2,r),new qt(f,r)],S=new Ht(m,null,0,w,Bt.UPC_EAN_EXTENSION,new Date().getTime());return p!=null&&S.putAllMetadata(p),S}decodeMiddle(r,a,l){let h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let f=r.getSize(),m=a[1],p=0;for(let S=0;S<5&&m<f;S++){let R=Ke.decodeDigit(r,h,m,Ke.L_AND_G_PATTERNS);l+=String.fromCharCode(48+R%10);for(let B of h)m+=B;R>=10&&(p|=1<<4-S),S!==4&&(m=r.getNextSet(m),m=r.getNextUnset(m))}if(l.length!==5)throw new st;let w=this.determineCheckDigit(p);if(ss.extensionChecksum(l.toString())!==w)throw new st;return m}static extensionChecksum(r){let a=r.length,l=0;for(let h=a-2;h>=0;h-=2)l+=r.charAt(h).charCodeAt(0)-48;l*=3;for(let h=a-1;h>=0;h-=2)l+=r.charAt(h).charCodeAt(0)-48;return l*=3,l%10}determineCheckDigit(r){for(let a=0;a<10;a++)if(r===this.CHECK_DIGIT_ENCODINGS[a])return a;throw new st}static parseExtensionString(r){if(r.length!==5)return null;let a=ss.parseExtension5String(r);return a==null?null:new Map([[oe.SUGGESTED_PRICE,a]])}static parseExtension5String(r){let a;switch(r.charAt(0)){case"0":a="";break;case"5":a="$";break;case"9":switch(r){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}a="";break;default:a="";break}let l=parseInt(r.substring(1)),h=(l/100).toString(),f=l%100,m=f<10?"0"+f:f.toString();return a+h+"."+m}}class Xs{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(r,a,l){let h=this.decodeRowStringBuffer,f=this.decodeMiddle(a,l,h),m=h.toString(),p=Xs.parseExtensionString(m),w=[new qt((l[0]+l[1])/2,r),new qt(f,r)],S=new Ht(m,null,0,w,Bt.UPC_EAN_EXTENSION,new Date().getTime());return p!=null&&S.putAllMetadata(p),S}decodeMiddle(r,a,l){let h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let f=r.getSize(),m=a[1],p=0;for(let w=0;w<2&&m<f;w++){let S=Ke.decodeDigit(r,h,m,Ke.L_AND_G_PATTERNS);l+=String.fromCharCode(48+S%10);for(let R of h)m+=R;S>=10&&(p|=1<<1-w),w!==1&&(m=r.getNextSet(m),m=r.getNextUnset(m))}if(l.length!==2)throw new st;if(parseInt(l.toString())%4!==p)throw new st;return m}static parseExtensionString(r){return r.length!==2?null:new Map([[oe.ISSUE_NUMBER,parseInt(r)]])}}class Ca{static decodeRow(r,a,l){let h=Ke.findGuardPattern(a,l,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new ss().decodeRow(r,a,h)}catch{return new Xs().decodeRow(r,a,h)}}}Ca.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class ge extends Ke{constructor(){super(),this.decodeRowStringBuffer="",ge.L_AND_G_PATTERNS=ge.L_PATTERNS.map(r=>Int32Array.from(r));for(let r=10;r<20;r++){let a=ge.L_PATTERNS[r-10],l=new Int32Array(a.length);for(let h=0;h<a.length;h++)l[h]=a[a.length-h-1];ge.L_AND_G_PATTERNS[r]=l}}decodeRow(r,a,l){let h=ge.findStartGuardPattern(a),f=l==null?null:l.get(Tt.NEED_RESULT_POINT_CALLBACK);if(f!=null){const Dt=new qt((h[0]+h[1])/2,r);f.foundPossibleResultPoint(Dt)}let m=this.decodeMiddle(a,h,this.decodeRowStringBuffer),p=m.rowOffset,w=m.resultString;if(f!=null){const Dt=new qt(p,r);f.foundPossibleResultPoint(Dt)}let S=this.decodeEnd(a,p);if(f!=null){const Dt=new qt((S[0]+S[1])/2,r);f.foundPossibleResultPoint(Dt)}let R=S[1],B=R+(R-S[0]);if(B>=a.getSize()||!a.isRange(R,B,!1))throw new st;let P=w.toString();if(P.length<8)throw new U;if(!ge.checkChecksum(P))throw new H;let G=(h[1]+h[0])/2,$=(S[1]+S[0])/2,rt=this.getBarcodeFormat(),ht=[new qt(G,r),new qt($,r)],yt=new Ht(P,null,0,ht,rt,new Date().getTime()),Lt=0;try{let Dt=Ca.decodeRow(r,a,S[1]);yt.putMetadata(oe.UPC_EAN_EXTENSION,Dt.getText()),yt.putAllMetadata(Dt.getResultMetadata()),yt.addResultPoints(Dt.getResultPoints()),Lt=Dt.getText().length}catch{}let kt=l==null?null:l.get(Tt.ALLOWED_EAN_EXTENSIONS);if(kt!=null){let Dt=!1;for(let ue in kt)if(Lt.toString()===ue){Dt=!0;break}if(!Dt)throw new st}return yt}decodeEnd(r,a){return ge.findGuardPattern(r,a,!1,ge.START_END_PATTERN,new Int32Array(ge.START_END_PATTERN.length).fill(0))}static checkChecksum(r){return ge.checkStandardUPCEANChecksum(r)}static checkStandardUPCEANChecksum(r){let a=r.length;if(a===0)return!1;let l=parseInt(r.charAt(a-1),10);return ge.getStandardUPCEANChecksum(r.substring(0,a-1))===l}static getStandardUPCEANChecksum(r){let a=r.length,l=0;for(let h=a-1;h>=0;h-=2){let f=r.charAt(h).charCodeAt(0)-48;if(f<0||f>9)throw new U;l+=f}l*=3;for(let h=a-2;h>=0;h-=2){let f=r.charAt(h).charCodeAt(0)-48;if(f<0||f>9)throw new U;l+=f}return(1e3-l)%10}}class Tr extends ge{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(r,a,l){let h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let f=r.getSize(),m=a[1],p=0;for(let S=0;S<6&&m<f;S++){let R=ge.decodeDigit(r,h,m,ge.L_AND_G_PATTERNS);l+=String.fromCharCode(48+R%10);for(let B of h)m+=B;R>=10&&(p|=1<<5-S)}l=Tr.determineFirstDigit(l,p),m=ge.findGuardPattern(r,m,!0,ge.MIDDLE_PATTERN,new Int32Array(ge.MIDDLE_PATTERN.length).fill(0))[1];for(let S=0;S<6&&m<f;S++){let R=ge.decodeDigit(r,h,m,ge.L_PATTERNS);l+=String.fromCharCode(48+R);for(let B of h)m+=B}return{rowOffset:m,resultString:l}}getBarcodeFormat(){return Bt.EAN_13}static determineFirstDigit(r,a){for(let l=0;l<10;l++)if(a===this.FIRST_DIGIT_ENCODINGS[l])return r=String.fromCharCode(48+l)+r,r;throw new st}}Tr.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Sa extends ge{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(r,a,l){const h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let f=r.getSize(),m=a[1];for(let w=0;w<4&&m<f;w++){let S=ge.decodeDigit(r,h,m,ge.L_PATTERNS);l+=String.fromCharCode(48+S);for(let R of h)m+=R}m=ge.findGuardPattern(r,m,!0,ge.MIDDLE_PATTERN,new Int32Array(ge.MIDDLE_PATTERN.length).fill(0))[1];for(let w=0;w<4&&m<f;w++){let S=ge.decodeDigit(r,h,m,ge.L_PATTERNS);l+=String.fromCharCode(48+S);for(let R of h)m+=R}return{rowOffset:m,resultString:l}}getBarcodeFormat(){return Bt.EAN_8}}class yi extends ge{constructor(){super(...arguments),this.ean13Reader=new Tr}getBarcodeFormat(){return Bt.UPC_A}decode(r,a){return this.maybeReturnResult(this.ean13Reader.decode(r))}decodeRow(r,a,l){return this.maybeReturnResult(this.ean13Reader.decodeRow(r,a,l))}decodeMiddle(r,a,l){return this.ean13Reader.decodeMiddle(r,a,l)}maybeReturnResult(r){let a=r.getText();if(a.charAt(0)==="0"){let l=new Ht(a.substring(1),null,null,r.getResultPoints(),Bt.UPC_A);return r.getResultMetadata()!=null&&l.putAllMetadata(r.getResultMetadata()),l}else throw new st}reset(){this.ean13Reader.reset()}}class Cr extends ge{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(r,a,l){const h=this.decodeMiddleCounters.map(S=>S);h[0]=0,h[1]=0,h[2]=0,h[3]=0;const f=r.getSize();let m=a[1],p=0;for(let S=0;S<6&&m<f;S++){const R=Cr.decodeDigit(r,h,m,Cr.L_AND_G_PATTERNS);l+=String.fromCharCode(48+R%10);for(let B of h)m+=B;R>=10&&(p|=1<<5-S)}let w=Cr.determineNumSysAndCheckDigit(l,p);return{rowOffset:m,resultString:w}}decodeEnd(r,a){return Cr.findGuardPatternWithoutCounters(r,a,!0,Cr.MIDDLE_END_PATTERN)}checkChecksum(r){return ge.checkChecksum(Cr.convertUPCEtoUPCA(r))}static determineNumSysAndCheckDigit(r,a){for(let l=0;l<=1;l++)for(let h=0;h<10;h++)if(a===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[l][h]){let f=String.fromCharCode(48+l),m=String.fromCharCode(48+h);return f+r+m}throw st.getNotFoundInstance()}getBarcodeFormat(){return Bt.UPC_E}static convertUPCEtoUPCA(r){const a=r.slice(1,7).split("").map(f=>f.charCodeAt(0)),l=new Y;l.append(r.charAt(0));let h=a[5];switch(h){case 0:case 1:case 2:l.appendChars(a,0,2),l.append(h),l.append("0000"),l.appendChars(a,2,3);break;case 3:l.appendChars(a,0,3),l.append("00000"),l.appendChars(a,3,2);break;case 4:l.appendChars(a,0,4),l.append("00000"),l.append(a[4]);break;default:l.appendChars(a,0,5),l.append("0000"),l.append(h);break}return r.length>=8&&l.append(r.charAt(7)),l.toString()}}Cr.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Cr.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Ui extends sn{constructor(r){super();let a=r==null?null:r.get(Tt.POSSIBLE_FORMATS),l=[];o(a)?(l.push(new Tr),l.push(new yi),l.push(new Sa),l.push(new Cr)):(a.indexOf(Bt.EAN_13)>-1&&l.push(new Tr),a.indexOf(Bt.UPC_A)>-1&&l.push(new yi),a.indexOf(Bt.EAN_8)>-1&&l.push(new Sa),a.indexOf(Bt.UPC_E)>-1&&l.push(new Cr)),this.readers=l}decodeRow(r,a,l){for(let h of this.readers)try{const f=h.decodeRow(r,a,l),m=f.getBarcodeFormat()===Bt.EAN_13&&f.getText().charAt(0)==="0",p=l==null?null:l.get(Tt.POSSIBLE_FORMATS),w=p==null||p.includes(Bt.UPC_A);if(m&&w){const S=f.getRawBytes(),R=new Ht(f.getText().substring(1),S,S?S.length:null,f.getResultPoints(),Bt.UPC_A);return R.putAllMetadata(f.getResultMetadata()),R}return f}catch{}throw new st}reset(){for(let r of this.readers)r.reset()}}class Vn extends sn{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(r,a){for(let l=0;l<a.length;l++)if(sn.patternMatchVariance(r,a[l],Vn.MAX_INDIVIDUAL_VARIANCE)<Vn.MAX_AVG_VARIANCE)return l;throw new st}static count(r){return Ae.sum(new Int32Array(r))}static increment(r,a){let l=0,h=a[0];for(let f=1;f<r.length;f++)a[f]>h&&(h=a[f],l=f);r[l]++}static decrement(r,a){let l=0,h=a[0];for(let f=1;f<r.length;f++)a[f]<h&&(h=a[f],l=f);r[l]--}static isFinderPattern(r){let a=r[0]+r[1],l=a+r[2]+r[3],h=a/l;if(h>=Vn.MIN_FINDER_PATTERN_RATIO&&h<=Vn.MAX_FINDER_PATTERN_RATIO){let f=Number.MAX_SAFE_INTEGER,m=Number.MIN_SAFE_INTEGER;for(let p of r)p>m&&(m=p),p<f&&(f=p);return m<10*f}return!1}}Vn.MAX_AVG_VARIANCE=.2,Vn.MAX_INDIVIDUAL_VARIANCE=.45,Vn.MIN_FINDER_PATTERN_RATIO=9.5/12,Vn.MAX_FINDER_PATTERN_RATIO=12.5/14;class Zr{constructor(r,a){this.value=r,this.checksumPortion=a}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(r){if(!(r instanceof Zr))return!1;const a=r;return this.value===a.value&&this.checksumPortion===a.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Qs{constructor(r,a,l,h,f){this.value=r,this.startEnd=a,this.value=r,this.startEnd=a,this.resultPoints=new Array,this.resultPoints.push(new qt(l,f)),this.resultPoints.push(new qt(h,f))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(r){if(!(r instanceof Qs))return!1;const a=r;return this.value===a.value}hashCode(){return this.value}}class Oe{constructor(){}static getRSSvalue(r,a,l){let h=0;for(let w of r)h+=w;let f=0,m=0,p=r.length;for(let w=0;w<p-1;w++){let S;for(S=1,m|=1<<w;S<r[w];S++,m&=~(1<<w)){let R=Oe.combins(h-S-1,p-w-2);if(l&&m===0&&h-S-(p-w-1)>=p-w-1&&(R-=Oe.combins(h-S-(p-w),p-w-2)),p-w-1>1){let B=0;for(let P=h-S-(p-w-2);P>a;P--)B+=Oe.combins(h-S-P-1,p-w-3);R-=B*(p-1-w)}else h-S>a&&R--;f+=R}h-=S}return f}static combins(r,a){let l,h;r-a>a?(h=a,l=r-a):(h=r-a,l=a);let f=1,m=1;for(let p=r;p>l;p--)f*=p,m<=h&&(f/=m,m++);for(;m<=h;)f/=m,m++;return f}}class Kn{static buildBitArray(r){let a=r.length*2-1;r[r.length-1].getRightChar()==null&&(a-=1);let l=12*a,h=new _t(l),f=0,p=r[0].getRightChar().getValue();for(let w=11;w>=0;--w)(p&1<<w)!=0&&h.set(f),f++;for(let w=1;w<r.length;++w){let S=r[w],R=S.getLeftChar().getValue();for(let B=11;B>=0;--B)(R&1<<B)!=0&&h.set(f),f++;if(S.getRightChar()!=null){let B=S.getRightChar().getValue();for(let P=11;P>=0;--P)(B&1<<P)!=0&&h.set(f),f++}}return h}}class an{constructor(r,a){a?this.decodedInformation=null:(this.finished=r,this.decodedInformation=a)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Vr{constructor(r){this.newPosition=r}getNewPosition(){return this.newPosition}}class ir extends Vr{constructor(r,a){super(r),this.value=a}getValue(){return this.value}isFNC1(){return this.value===ir.FNC1}}ir.FNC1="$";class as extends Vr{constructor(r,a,l){super(r),l?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=a}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Zn extends Vr{constructor(r,a,l){if(super(r),a<0||a>10||l<0||l>10)throw new U;this.firstDigit=a,this.secondDigit=l}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Zn.FNC1}isSecondDigitFNC1(){return this.secondDigit===Zn.FNC1}isAnyFNC1(){return this.firstDigit===Zn.FNC1||this.secondDigit===Zn.FNC1}}Zn.FNC1=10;class zt{constructor(){}static parseFieldsInGeneralPurpose(r){if(!r)return null;if(r.length<2)throw new st;let a=r.substring(0,2);for(let f of zt.TWO_DIGIT_DATA_LENGTH)if(f[0]===a)return f[1]===zt.VARIABLE_LENGTH?zt.processVariableAI(2,f[2],r):zt.processFixedAI(2,f[1],r);if(r.length<3)throw new st;let l=r.substring(0,3);for(let f of zt.THREE_DIGIT_DATA_LENGTH)if(f[0]===l)return f[1]===zt.VARIABLE_LENGTH?zt.processVariableAI(3,f[2],r):zt.processFixedAI(3,f[1],r);for(let f of zt.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(f[0]===l)return f[1]===zt.VARIABLE_LENGTH?zt.processVariableAI(4,f[2],r):zt.processFixedAI(4,f[1],r);if(r.length<4)throw new st;let h=r.substring(0,4);for(let f of zt.FOUR_DIGIT_DATA_LENGTH)if(f[0]===h)return f[1]===zt.VARIABLE_LENGTH?zt.processVariableAI(4,f[2],r):zt.processFixedAI(4,f[1],r);throw new st}static processFixedAI(r,a,l){if(l.length<r)throw new st;let h=l.substring(0,r);if(l.length<r+a)throw new st;let f=l.substring(r,r+a),m=l.substring(r+a),p="("+h+")"+f,w=zt.parseFieldsInGeneralPurpose(m);return w==null?p:p+w}static processVariableAI(r,a,l){let h=l.substring(0,r),f;l.length<r+a?f=l.length:f=r+a;let m=l.substring(r,f),p=l.substring(f),w="("+h+")"+m,S=zt.parseFieldsInGeneralPurpose(p);return S==null?w:w+S}}zt.VARIABLE_LENGTH=[],zt.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",zt.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",zt.VARIABLE_LENGTH,20],["22",zt.VARIABLE_LENGTH,29],["30",zt.VARIABLE_LENGTH,8],["37",zt.VARIABLE_LENGTH,8],["90",zt.VARIABLE_LENGTH,30],["91",zt.VARIABLE_LENGTH,30],["92",zt.VARIABLE_LENGTH,30],["93",zt.VARIABLE_LENGTH,30],["94",zt.VARIABLE_LENGTH,30],["95",zt.VARIABLE_LENGTH,30],["96",zt.VARIABLE_LENGTH,30],["97",zt.VARIABLE_LENGTH,3],["98",zt.VARIABLE_LENGTH,30],["99",zt.VARIABLE_LENGTH,30]],zt.THREE_DIGIT_DATA_LENGTH=[["240",zt.VARIABLE_LENGTH,30],["241",zt.VARIABLE_LENGTH,30],["242",zt.VARIABLE_LENGTH,6],["250",zt.VARIABLE_LENGTH,30],["251",zt.VARIABLE_LENGTH,30],["253",zt.VARIABLE_LENGTH,17],["254",zt.VARIABLE_LENGTH,20],["400",zt.VARIABLE_LENGTH,30],["401",zt.VARIABLE_LENGTH,30],["402",17],["403",zt.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",zt.VARIABLE_LENGTH,20],["421",zt.VARIABLE_LENGTH,15],["422",3],["423",zt.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],zt.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",zt.VARIABLE_LENGTH,15],["391",zt.VARIABLE_LENGTH,18],["392",zt.VARIABLE_LENGTH,15],["393",zt.VARIABLE_LENGTH,18],["703",zt.VARIABLE_LENGTH,30]],zt.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",zt.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",zt.VARIABLE_LENGTH,20],["8003",zt.VARIABLE_LENGTH,30],["8004",zt.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",zt.VARIABLE_LENGTH,30],["8008",zt.VARIABLE_LENGTH,12],["8018",18],["8020",zt.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",zt.VARIABLE_LENGTH,70],["8200",zt.VARIABLE_LENGTH,70]];class ri{constructor(r){this.buffer=new Y,this.information=r}decodeAllCodes(r,a){let l=a,h=null;do{let f=this.decodeGeneralPurposeField(l,h),m=zt.parseFieldsInGeneralPurpose(f.getNewString());if(m!=null&&r.append(m),f.isRemaining()?h=""+f.getRemainingValue():h=null,l===f.getNewPosition())break;l=f.getNewPosition()}while(!0);return r.toString()}isStillNumeric(r){if(r+7>this.information.getSize())return r+4<=this.information.getSize();for(let a=r;a<r+3;++a)if(this.information.get(a))return!0;return this.information.get(r+3)}decodeNumeric(r){if(r+7>this.information.getSize()){let f=this.extractNumericValueFromBitArray(r,4);return f===0?new Zn(this.information.getSize(),Zn.FNC1,Zn.FNC1):new Zn(this.information.getSize(),f-1,Zn.FNC1)}let a=this.extractNumericValueFromBitArray(r,7),l=(a-8)/11,h=(a-8)%11;return new Zn(r+7,l,h)}extractNumericValueFromBitArray(r,a){return ri.extractNumericValueFromBitArray(this.information,r,a)}static extractNumericValueFromBitArray(r,a,l){let h=0;for(let f=0;f<l;++f)r.get(a+f)&&(h|=1<<l-f-1);return h}decodeGeneralPurposeField(r,a){this.buffer.setLengthToZero(),a!=null&&this.buffer.append(a),this.current.setPosition(r);let l=this.parseBlocks();return l!=null&&l.isRemaining()?new as(this.current.getPosition(),this.buffer.toString(),l.getRemainingValue()):new as(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let r,a;do{let l=this.current.getPosition();if(this.current.isAlpha()?(a=this.parseAlphaBlock(),r=a.isFinished()):this.current.isIsoIec646()?(a=this.parseIsoIec646Block(),r=a.isFinished()):(a=this.parseNumericBlock(),r=a.isFinished()),!(l!==this.current.getPosition())&&!r)break}while(!r);return a.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let r=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFirstDigitFNC1()){let a;return r.isSecondDigitFNC1()?a=new as(this.current.getPosition(),this.buffer.toString()):a=new as(this.current.getPosition(),this.buffer.toString(),r.getSecondDigit()),new an(!0,a)}if(this.buffer.append(r.getFirstDigit()),r.isSecondDigitFNC1()){let a=new as(this.current.getPosition(),this.buffer.toString());return new an(!0,a)}this.buffer.append(r.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new an(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let r=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFNC1()){let a=new as(this.current.getPosition(),this.buffer.toString());return new an(!0,a)}this.buffer.append(r.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new an(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let r=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFNC1()){let a=new as(this.current.getPosition(),this.buffer.toString());return new an(!0,a)}this.buffer.append(r.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new an(!1)}isStillIsoIec646(r){if(r+5>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(r,5);if(a>=5&&a<16)return!0;if(r+7>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(r,7);if(l>=64&&l<116)return!0;if(r+8>this.information.getSize())return!1;let h=this.extractNumericValueFromBitArray(r,8);return h>=232&&h<253}decodeIsoIec646(r){let a=this.extractNumericValueFromBitArray(r,5);if(a===15)return new ir(r+5,ir.FNC1);if(a>=5&&a<15)return new ir(r+5,"0"+(a-5));let l=this.extractNumericValueFromBitArray(r,7);if(l>=64&&l<90)return new ir(r+7,""+(l+1));if(l>=90&&l<116)return new ir(r+7,""+(l+7));let h=this.extractNumericValueFromBitArray(r,8),f;switch(h){case 232:f="!";break;case 233:f='"';break;case 234:f="%";break;case 235:f="&";break;case 236:f="'";break;case 237:f="(";break;case 238:f=")";break;case 239:f="*";break;case 240:f="+";break;case 241:f=",";break;case 242:f="-";break;case 243:f=".";break;case 244:f="/";break;case 245:f=":";break;case 246:f=";";break;case 247:f="<";break;case 248:f="=";break;case 249:f=">";break;case 250:f="?";break;case 251:f="_";break;case 252:f=" ";break;default:throw new U}return new ir(r+8,f)}isStillAlpha(r){if(r+5>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(r,5);if(a>=5&&a<16)return!0;if(r+6>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(r,6);return l>=16&&l<63}decodeAlphanumeric(r){let a=this.extractNumericValueFromBitArray(r,5);if(a===15)return new ir(r+5,ir.FNC1);if(a>=5&&a<15)return new ir(r+5,"0"+(a-5));let l=this.extractNumericValueFromBitArray(r,6);if(l>=32&&l<58)return new ir(r+6,""+(l+33));let h;switch(l){case 58:h="*";break;case 59:h=",";break;case 60:h="-";break;case 61:h=".";break;case 62:h="/";break;default:throw new kr("Decoding invalid alphanumeric value: "+l)}return new ir(r+6,h)}isAlphaTo646ToAlphaLatch(r){if(r+1>this.information.getSize())return!1;for(let a=0;a<5&&a+r<this.information.getSize();++a)if(a===2){if(!this.information.get(r+2))return!1}else if(this.information.get(r+a))return!1;return!0}isAlphaOr646ToNumericLatch(r){if(r+3>this.information.getSize())return!1;for(let a=r;a<r+3;++a)if(this.information.get(a))return!1;return!0}isNumericToAlphaNumericLatch(r){if(r+1>this.information.getSize())return!1;for(let a=0;a<4&&a+r<this.information.getSize();++a)if(this.information.get(r+a))return!1;return!0}}class Fi{constructor(r){this.information=r,this.generalDecoder=new ri(r)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Rn extends Fi{constructor(r){super(r)}encodeCompressedGtin(r,a){r.append("(01)");let l=r.length();r.append("9"),this.encodeCompressedGtinWithoutAI(r,a,l)}encodeCompressedGtinWithoutAI(r,a,l){for(let h=0;h<4;++h){let f=this.getGeneralDecoder().extractNumericValueFromBitArray(a+10*h,10);f/100===0&&r.append("0"),f/10===0&&r.append("0"),r.append(f)}Rn.appendCheckDigit(r,l)}static appendCheckDigit(r,a){let l=0;for(let h=0;h<13;h++){let f=r.charAt(h+a).charCodeAt(0)-48;l+=(h&1)===0?3*f:f}l=10-l%10,l===10&&(l=0),r.append(l)}}Rn.GTIN_SIZE=40;class Sr extends Rn{constructor(r){super(r)}parseInformation(){let r=new Y;r.append("(01)");let a=r.length(),l=this.getGeneralDecoder().extractNumericValueFromBitArray(Sr.HEADER_SIZE,4);return r.append(l),this.encodeCompressedGtinWithoutAI(r,Sr.HEADER_SIZE+4,a),this.getGeneralDecoder().decodeAllCodes(r,Sr.HEADER_SIZE+44)}}Sr.HEADER_SIZE=4;class Jr extends Fi{constructor(r){super(r)}parseInformation(){let r=new Y;return this.getGeneralDecoder().decodeAllCodes(r,Jr.HEADER_SIZE)}}Jr.HEADER_SIZE=5;class sr extends Rn{constructor(r){super(r)}encodeCompressedWeight(r,a,l){let h=this.getGeneralDecoder().extractNumericValueFromBitArray(a,l);this.addWeightCode(r,h);let f=this.checkWeight(h),m=1e5;for(let p=0;p<5;++p)f/m===0&&r.append("0"),m/=10;r.append(f)}}class ze extends sr{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()!=ze.HEADER_SIZE+sr.GTIN_SIZE+ze.WEIGHT_SIZE)throw new st;let r=new Y;return this.encodeCompressedGtin(r,ze.HEADER_SIZE),this.encodeCompressedWeight(r,ze.HEADER_SIZE+sr.GTIN_SIZE,ze.WEIGHT_SIZE),r.toString()}}ze.HEADER_SIZE=5,ze.WEIGHT_SIZE=15;class wo extends ze{constructor(r){super(r)}addWeightCode(r,a){r.append("(3103)")}checkWeight(r){return r}}class va extends ze{constructor(r){super(r)}addWeightCode(r,a){a<1e4?r.append("(3202)"):r.append("(3203)")}checkWeight(r){return r<1e4?r:r-1e4}}class Hn extends Rn{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()<Hn.HEADER_SIZE+Rn.GTIN_SIZE)throw new st;let r=new Y;this.encodeCompressedGtin(r,Hn.HEADER_SIZE);let a=this.getGeneralDecoder().extractNumericValueFromBitArray(Hn.HEADER_SIZE+Rn.GTIN_SIZE,Hn.LAST_DIGIT_SIZE);r.append("(392"),r.append(a),r.append(")");let l=this.getGeneralDecoder().decodeGeneralPurposeField(Hn.HEADER_SIZE+Rn.GTIN_SIZE+Hn.LAST_DIGIT_SIZE,null);return r.append(l.getNewString()),r.toString()}}Hn.HEADER_SIZE=8,Hn.LAST_DIGIT_SIZE=2;class wn extends Rn{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()<wn.HEADER_SIZE+Rn.GTIN_SIZE)throw new st;let r=new Y;this.encodeCompressedGtin(r,wn.HEADER_SIZE);let a=this.getGeneralDecoder().extractNumericValueFromBitArray(wn.HEADER_SIZE+Rn.GTIN_SIZE,wn.LAST_DIGIT_SIZE);r.append("(393"),r.append(a),r.append(")");let l=this.getGeneralDecoder().extractNumericValueFromBitArray(wn.HEADER_SIZE+Rn.GTIN_SIZE+wn.LAST_DIGIT_SIZE,wn.FIRST_THREE_DIGITS_SIZE);l/100==0&&r.append("0"),l/10==0&&r.append("0"),r.append(l);let h=this.getGeneralDecoder().decodeGeneralPurposeField(wn.HEADER_SIZE+Rn.GTIN_SIZE+wn.LAST_DIGIT_SIZE+wn.FIRST_THREE_DIGITS_SIZE,null);return r.append(h.getNewString()),r.toString()}}wn.HEADER_SIZE=8,wn.LAST_DIGIT_SIZE=2,wn.FIRST_THREE_DIGITS_SIZE=10;class $e extends sr{constructor(r,a,l){super(r),this.dateCode=l,this.firstAIdigits=a}parseInformation(){if(this.getInformation().getSize()!=$e.HEADER_SIZE+$e.GTIN_SIZE+$e.WEIGHT_SIZE+$e.DATE_SIZE)throw new st;let r=new Y;return this.encodeCompressedGtin(r,$e.HEADER_SIZE),this.encodeCompressedWeight(r,$e.HEADER_SIZE+$e.GTIN_SIZE,$e.WEIGHT_SIZE),this.encodeCompressedDate(r,$e.HEADER_SIZE+$e.GTIN_SIZE+$e.WEIGHT_SIZE),r.toString()}encodeCompressedDate(r,a){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(a,$e.DATE_SIZE);if(l==38400)return;r.append("("),r.append(this.dateCode),r.append(")");let h=l%32;l/=32;let f=l%12+1;l/=12;let m=l;m/10==0&&r.append("0"),r.append(m),f/10==0&&r.append("0"),r.append(f),h/10==0&&r.append("0"),r.append(h)}addWeightCode(r,a){r.append("("),r.append(this.firstAIdigits),r.append(a/1e5),r.append(")")}checkWeight(r){return r%1e5}}$e.HEADER_SIZE=8,$e.WEIGHT_SIZE=20,$e.DATE_SIZE=16;function _o(L){try{if(L.get(1))return new Sr(L);if(!L.get(2))return new Jr(L);switch(ri.extractNumericValueFromBitArray(L,1,4)){case 4:return new wo(L);case 5:return new va(L)}switch(ri.extractNumericValueFromBitArray(L,1,5)){case 12:return new Hn(L);case 13:return new wn(L)}switch(ri.extractNumericValueFromBitArray(L,1,7)){case 56:return new $e(L,"310","11");case 57:return new $e(L,"320","11");case 58:return new $e(L,"310","13");case 59:return new $e(L,"320","13");case 60:return new $e(L,"310","15");case 61:return new $e(L,"320","15");case 62:return new $e(L,"310","17");case 63:return new $e(L,"320","17")}}catch(r){throw console.log(r),new kr("unknown decoder: "+L)}}class Ur{constructor(r,a,l,h){this.leftchar=r,this.rightchar=a,this.finderpattern=l,this.maybeLast=h}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(r,a){return r instanceof Ur?Ur.equalsOrNull(r.leftchar,a.leftchar)&&Ur.equalsOrNull(r.rightchar,a.rightchar)&&Ur.equalsOrNull(r.finderpattern,a.finderpattern):!1}static equalsOrNull(r,a){return r===null?a===null:Ur.equals(r,a)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class ba{constructor(r,a,l){this.pairs=r,this.rowNumber=a,this.wasReversed=l}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(r){return this.checkEqualitity(this,r)}toString(){return"{ "+this.pairs+" }"}equals(r,a){return r instanceof ba?this.checkEqualitity(r,a)&&r.wasReversed===a.wasReversed:!1}checkEqualitity(r,a){if(!r||!a)return;let l;return r.forEach((h,f)=>{a.forEach(m=>{h.getLeftChar().getValue()===m.getLeftChar().getValue()&&h.getRightChar().getValue()===m.getRightChar().getValue()&&h.getFinderPatter().getValue()===m.getFinderPatter().getValue()&&(l=!0)})}),l}}class vt extends Vn{constructor(r){super(...arguments),this.pairs=new Array(vt.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=r===!0}decodeRow(r,a,l){this.pairs.length=0,this.startFromEven=!1;try{return vt.constructResult(this.decodeRow2pairs(r,a))}catch(h){this.verbose&&console.log(h)}return this.pairs.length=0,this.startFromEven=!0,vt.constructResult(this.decodeRow2pairs(r,a))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(r,a){let l=!1;for(;!l;)try{this.pairs.push(this.retrieveNextPair(a,this.pairs,r))}catch(f){if(f instanceof st){if(!this.pairs.length)throw new st;l=!0}}if(this.checkChecksum())return this.pairs;let h;if(this.rows.length?h=!0:h=!1,this.storeRow(r,!1),h){let f=this.checkRowsBoolean(!1);if(f!=null||(f=this.checkRowsBoolean(!0),f!=null))return f}throw new st}checkRowsBoolean(r){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,r&&(this.rows=this.rows.reverse());let a=null;try{a=this.checkRows(new Array,0)}catch(l){this.verbose&&console.log(l)}return r&&(this.rows=this.rows.reverse()),a}checkRows(r,a){for(let l=a;l<this.rows.length;l++){let h=this.rows[l];this.pairs.length=0;for(let m of r)this.pairs.push(m.getPairs());if(this.pairs.push(h.getPairs()),!vt.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let f=new Array(r);f.push(h);try{return this.checkRows(f,l+1)}catch(m){this.verbose&&console.log(m)}}throw new st}static isValidSequence(r){for(let a of vt.FINDER_PATTERN_SEQUENCES){if(r.length>a.length)continue;let l=!0;for(let h=0;h<r.length;h++)if(r[h].getFinderPattern().getValue()!=a[h]){l=!1;break}if(l)return!0}return!1}storeRow(r,a){let l=0,h=!1,f=!1;for(;l<this.rows.length;){let m=this.rows[l];if(m.getRowNumber()>r){f=m.isEquivalent(this.pairs);break}h=m.isEquivalent(this.pairs),l++}f||h||vt.isPartialRow(this.pairs,this.rows)||(this.rows.push(l,new ba(this.pairs,r,a)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(r,a){for(let l of a)if(l.getPairs().length!==r.length){for(let h of l.getPairs())for(let f of r)if(Ur.equals(h,f))break}}static isPartialRow(r,a){for(let l of a){let h=!0;for(let f of r){let m=!1;for(let p of l.getPairs())if(f.equals(p)){m=!0;break}if(!m){h=!1;break}}if(h)return!0}return!1}getRows(){return this.rows}static constructResult(r){let a=Kn.buildBitArray(r),h=_o(a).parseInformation(),f=r[0].getFinderPattern().getResultPoints(),m=r[r.length-1].getFinderPattern().getResultPoints(),p=[f[0],f[1],m[0],m[1]];return new Ht(h,null,null,p,Bt.RSS_EXPANDED,null)}checkChecksum(){let r=this.pairs.get(0),a=r.getLeftChar(),l=r.getRightChar();if(l==null)return!1;let h=l.getChecksumPortion(),f=2;for(let p=1;p<this.pairs.size();++p){let w=this.pairs.get(p);h+=w.getLeftChar().getChecksumPortion(),f++;let S=w.getRightChar();S!=null&&(h+=S.getChecksumPortion(),f++)}return h%=211,211*(f-4)+h==a.getValue()}static getNextSecondBar(r,a){let l;return r.get(a)?(l=r.getNextUnset(a),l=r.getNextSet(l)):(l=r.getNextSet(a),l=r.getNextUnset(l)),l}retrieveNextPair(r,a,l){let h=a.length%2==0;this.startFromEven&&(h=!h);let f,m=!0,p=-1;do this.findNextPair(r,a,p),f=this.parseFoundFinderPattern(r,l,h),f==null?p=vt.getNextSecondBar(r,this.startEnd[0]):m=!1;while(m);let w=this.decodeDataCharacter(r,f,h,!0);if(!this.isEmptyPair(a)&&a[a.length-1].mustBeLast())throw new st;let S;try{S=this.decodeDataCharacter(r,f,h,!1)}catch(R){S=null,this.verbose&&console.log(R)}return new Ur(w,S,f,!0)}isEmptyPair(r){return r.length===0}findNextPair(r,a,l){let h=this.getDecodeFinderCounters();h[0]=0,h[1]=0,h[2]=0,h[3]=0;let f=r.getSize(),m;l>=0?m=l:this.isEmptyPair(a)?m=0:m=a[a.length-1].getFinderPattern().getStartEnd()[1];let p=a.length%2!=0;this.startFromEven&&(p=!p);let w=!1;for(;m<f&&(w=!r.get(m),!!w);)m++;let S=0,R=m;for(let B=m;B<f;B++)if(r.get(B)!=w)h[S]++;else{if(S==3){if(p&&vt.reverseCounters(h),vt.isFinderPattern(h)){this.startEnd[0]=R,this.startEnd[1]=B;return}p&&vt.reverseCounters(h),R+=h[0]+h[1],h[0]=h[2],h[1]=h[3],h[2]=0,h[3]=0,S--}else S++;h[S]=1,w=!w}throw new st}static reverseCounters(r){let a=r.length;for(let l=0;l<a/2;++l){let h=r[l];r[l]=r[a-l-1],r[a-l-1]=h}}parseFoundFinderPattern(r,a,l){let h,f,m;if(l){let S=this.startEnd[0]-1;for(;S>=0&&!r.get(S);)S--;S++,h=this.startEnd[0]-S,f=S,m=this.startEnd[1]}else f=this.startEnd[0],m=r.getNextUnset(this.startEnd[1]+1),h=m-this.startEnd[1];let p=this.getDecodeFinderCounters();J.arraycopy(p,0,p,1,p.length-1),p[0]=h;let w;try{w=this.parseFinderValue(p,vt.FINDER_PATTERNS)}catch{return null}return new Qs(w,[f,m],f,m,a)}decodeDataCharacter(r,a,l,h){let f=this.getDataCharacterCounters();for(let tn=0;tn<f.length;tn++)f[tn]=0;if(h)vt.recordPatternInReverse(r,a.getStartEnd()[0],f);else{vt.recordPattern(r,a.getStartEnd()[1],f);for(let tn=0,gr=f.length-1;tn<gr;tn++,gr--){let Gr=f[tn];f[tn]=f[gr],f[gr]=Gr}}let m=17,p=Ae.sum(new Int32Array(f))/m,w=(a.getStartEnd()[1]-a.getStartEnd()[0])/15;if(Math.abs(p-w)/w>.3)throw new st;let S=this.getOddCounts(),R=this.getEvenCounts(),B=this.getOddRoundingErrors(),P=this.getEvenRoundingErrors();for(let tn=0;tn<f.length;tn++){let gr=1*f[tn]/p,Gr=gr+.5;if(Gr<1){if(gr<.3)throw new st;Gr=1}else if(Gr>8){if(gr>8.7)throw new st;Gr=8}let ta=tn/2;(tn&1)==0?(S[ta]=Gr,B[ta]=gr-Gr):(R[ta]=Gr,P[ta]=gr-Gr)}this.adjustOddEvenCounts(m);let G=4*a.getValue()+(l?0:2)+(h?0:1)-1,$=0,rt=0;for(let tn=S.length-1;tn>=0;tn--){if(vt.isNotA1left(a,l,h)){let gr=vt.WEIGHTS[G][2*tn];rt+=S[tn]*gr}$+=S[tn]}let ht=0;for(let tn=R.length-1;tn>=0;tn--)if(vt.isNotA1left(a,l,h)){let gr=vt.WEIGHTS[G][2*tn+1];ht+=R[tn]*gr}let yt=rt+ht;if(($&1)!=0||$>13||$<4)throw new st;let Lt=(13-$)/2,kt=vt.SYMBOL_WIDEST[Lt],Dt=9-kt,ue=Oe.getRSSvalue(S,kt,!0),le=Oe.getRSSvalue(R,Dt,!1),Ir=vt.EVEN_TOTAL_SUBSET[Lt],ui=vt.GSUM[Lt],Hr=ue*Ir+le+ui;return new Zr(Hr,yt)}static isNotA1left(r,a,l){return!(r.getValue()==0&&a&&l)}adjustOddEvenCounts(r){let a=Ae.sum(new Int32Array(this.getOddCounts())),l=Ae.sum(new Int32Array(this.getEvenCounts())),h=!1,f=!1;a>13?f=!0:a<4&&(h=!0);let m=!1,p=!1;l>13?p=!0:l<4&&(m=!0);let w=a+l-r,S=(a&1)==1,R=(l&1)==0;if(w==1)if(S){if(R)throw new st;f=!0}else{if(!R)throw new st;p=!0}else if(w==-1)if(S){if(R)throw new st;h=!0}else{if(!R)throw new st;m=!0}else if(w==0){if(S){if(!R)throw new st;a<l?(h=!0,p=!0):(f=!0,m=!0)}else if(R)throw new st}else throw new st;if(h){if(f)throw new st;vt.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(f&&vt.decrement(this.getOddCounts(),this.getOddRoundingErrors()),m){if(p)throw new st;vt.increment(this.getEvenCounts(),this.getOddRoundingErrors())}p&&vt.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}vt.SYMBOL_WIDEST=[7,5,4,3,1],vt.EVEN_TOTAL_SUBSET=[4,20,52,104,204],vt.GSUM=[0,348,1388,2948,3988],vt.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],vt.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],vt.FINDER_PAT_A=0,vt.FINDER_PAT_B=1,vt.FINDER_PAT_C=2,vt.FINDER_PAT_D=3,vt.FINDER_PAT_E=4,vt.FINDER_PAT_F=5,vt.FINDER_PATTERN_SEQUENCES=[[vt.FINDER_PAT_A,vt.FINDER_PAT_A],[vt.FINDER_PAT_A,vt.FINDER_PAT_B,vt.FINDER_PAT_B],[vt.FINDER_PAT_A,vt.FINDER_PAT_C,vt.FINDER_PAT_B,vt.FINDER_PAT_D],[vt.FINDER_PAT_A,vt.FINDER_PAT_E,vt.FINDER_PAT_B,vt.FINDER_PAT_D,vt.FINDER_PAT_C],[vt.FINDER_PAT_A,vt.FINDER_PAT_E,vt.FINDER_PAT_B,vt.FINDER_PAT_D,vt.FINDER_PAT_D,vt.FINDER_PAT_F],[vt.FINDER_PAT_A,vt.FINDER_PAT_E,vt.FINDER_PAT_B,vt.FINDER_PAT_D,vt.FINDER_PAT_E,vt.FINDER_PAT_F,vt.FINDER_PAT_F],[vt.FINDER_PAT_A,vt.FINDER_PAT_A,vt.FINDER_PAT_B,vt.FINDER_PAT_B,vt.FINDER_PAT_C,vt.FINDER_PAT_C,vt.FINDER_PAT_D,vt.FINDER_PAT_D],[vt.FINDER_PAT_A,vt.FINDER_PAT_A,vt.FINDER_PAT_B,vt.FINDER_PAT_B,vt.FINDER_PAT_C,vt.FINDER_PAT_C,vt.FINDER_PAT_D,vt.FINDER_PAT_E,vt.FINDER_PAT_E],[vt.FINDER_PAT_A,vt.FINDER_PAT_A,vt.FINDER_PAT_B,vt.FINDER_PAT_B,vt.FINDER_PAT_C,vt.FINDER_PAT_C,vt.FINDER_PAT_D,vt.FINDER_PAT_E,vt.FINDER_PAT_F,vt.FINDER_PAT_F],[vt.FINDER_PAT_A,vt.FINDER_PAT_A,vt.FINDER_PAT_B,vt.FINDER_PAT_B,vt.FINDER_PAT_C,vt.FINDER_PAT_D,vt.FINDER_PAT_D,vt.FINDER_PAT_E,vt.FINDER_PAT_E,vt.FINDER_PAT_F,vt.FINDER_PAT_F]],vt.MAX_PAIRS=11;class ji extends Zr{constructor(r,a,l){super(r,a),this.count=0,this.finderPattern=l}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class pe extends Vn{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(r,a,l){const h=this.decodePair(a,!1,r,l);pe.addOrTally(this.possibleLeftPairs,h),a.reverse();let f=this.decodePair(a,!0,r,l);pe.addOrTally(this.possibleRightPairs,f),a.reverse();for(let m of this.possibleLeftPairs)if(m.getCount()>1){for(let p of this.possibleRightPairs)if(p.getCount()>1&&pe.checkChecksum(m,p))return pe.constructResult(m,p)}throw new st}static addOrTally(r,a){if(a==null)return;let l=!1;for(let h of r)if(h.getValue()===a.getValue()){h.incrementCount(),l=!0;break}l||r.push(a)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(r,a){let l=4537077*r.getValue()+a.getValue(),h=new String(l).toString(),f=new Y;for(let S=13-h.length;S>0;S--)f.append("0");f.append(h);let m=0;for(let S=0;S<13;S++){let R=f.charAt(S).charCodeAt(0)-48;m+=(S&1)===0?3*R:R}m=10-m%10,m===10&&(m=0),f.append(m.toString());let p=r.getFinderPattern().getResultPoints(),w=a.getFinderPattern().getResultPoints();return new Ht(f.toString(),null,0,[p[0],p[1],w[0],w[1]],Bt.RSS_14,new Date().getTime())}static checkChecksum(r,a){let l=(r.getChecksumPortion()+16*a.getChecksumPortion())%79,h=9*r.getFinderPattern().getValue()+a.getFinderPattern().getValue();return h>72&&h--,h>8&&h--,l===h}decodePair(r,a,l,h){try{let f=this.findFinderPattern(r,a),m=this.parseFoundFinderPattern(r,l,a,f),p=h==null?null:h.get(Tt.NEED_RESULT_POINT_CALLBACK);if(p!=null){let R=(f[0]+f[1])/2;a&&(R=r.getSize()-1-R),p.foundPossibleResultPoint(new qt(R,l))}let w=this.decodeDataCharacter(r,m,!0),S=this.decodeDataCharacter(r,m,!1);return new ji(1597*w.getValue()+S.getValue(),w.getChecksumPortion()+4*S.getChecksumPortion(),m)}catch{return null}}decodeDataCharacter(r,a,l){let h=this.getDataCharacterCounters();for(let ht=0;ht<h.length;ht++)h[ht]=0;if(l)sn.recordPatternInReverse(r,a.getStartEnd()[0],h);else{sn.recordPattern(r,a.getStartEnd()[1]+1,h);for(let ht=0,yt=h.length-1;ht<yt;ht++,yt--){let Lt=h[ht];h[ht]=h[yt],h[yt]=Lt}}let f=l?16:15,m=Ae.sum(new Int32Array(h))/f,p=this.getOddCounts(),w=this.getEvenCounts(),S=this.getOddRoundingErrors(),R=this.getEvenRoundingErrors();for(let ht=0;ht<h.length;ht++){let yt=h[ht]/m,Lt=Math.floor(yt+.5);Lt<1?Lt=1:Lt>8&&(Lt=8);let kt=Math.floor(ht/2);(ht&1)===0?(p[kt]=Lt,S[kt]=yt-Lt):(w[kt]=Lt,R[kt]=yt-Lt)}this.adjustOddEvenCounts(l,f);let B=0,P=0;for(let ht=p.length-1;ht>=0;ht--)P*=9,P+=p[ht],B+=p[ht];let G=0,$=0;for(let ht=w.length-1;ht>=0;ht--)G*=9,G+=w[ht],$+=w[ht];let rt=P+3*G;if(l){if((B&1)!==0||B>12||B<4)throw new st;let ht=(12-B)/2,yt=pe.OUTSIDE_ODD_WIDEST[ht],Lt=9-yt,kt=Oe.getRSSvalue(p,yt,!1),Dt=Oe.getRSSvalue(w,Lt,!0),ue=pe.OUTSIDE_EVEN_TOTAL_SUBSET[ht],le=pe.OUTSIDE_GSUM[ht];return new Zr(kt*ue+Dt+le,rt)}else{if(($&1)!==0||$>10||$<4)throw new st;let ht=(10-$)/2,yt=pe.INSIDE_ODD_WIDEST[ht],Lt=9-yt,kt=Oe.getRSSvalue(p,yt,!0),Dt=Oe.getRSSvalue(w,Lt,!1),ue=pe.INSIDE_ODD_TOTAL_SUBSET[ht],le=pe.INSIDE_GSUM[ht];return new Zr(Dt*ue+kt+le,rt)}}findFinderPattern(r,a){let l=this.getDecodeFinderCounters();l[0]=0,l[1]=0,l[2]=0,l[3]=0;let h=r.getSize(),f=!1,m=0;for(;m<h&&(f=!r.get(m),a!==f);)m++;let p=0,w=m;for(let S=m;S<h;S++)if(r.get(S)!==f)l[p]++;else{if(p===3){if(Vn.isFinderPattern(l))return[w,S];w+=l[0]+l[1],l[0]=l[2],l[1]=l[3],l[2]=0,l[3]=0,p--}else p++;l[p]=1,f=!f}throw new st}parseFoundFinderPattern(r,a,l,h){let f=r.get(h[0]),m=h[0]-1;for(;m>=0&&f!==r.get(m);)m--;m++;const p=h[0]-m,w=this.getDecodeFinderCounters(),S=new Int32Array(w.length);J.arraycopy(w,0,S,1,w.length-1),S[0]=p;const R=this.parseFinderValue(S,pe.FINDER_PATTERNS);let B=m,P=h[1];return l&&(B=r.getSize()-1-B,P=r.getSize()-1-P),new Qs(R,[m,h[1]],B,P,a)}adjustOddEvenCounts(r,a){let l=Ae.sum(new Int32Array(this.getOddCounts())),h=Ae.sum(new Int32Array(this.getEvenCounts())),f=!1,m=!1,p=!1,w=!1;r?(l>12?m=!0:l<4&&(f=!0),h>12?w=!0:h<4&&(p=!0)):(l>11?m=!0:l<5&&(f=!0),h>10?w=!0:h<4&&(p=!0));let S=l+h-a,R=(l&1)===(r?1:0),B=(h&1)===1;if(S===1)if(R){if(B)throw new st;m=!0}else{if(!B)throw new st;w=!0}else if(S===-1)if(R){if(B)throw new st;f=!0}else{if(!B)throw new st;p=!0}else if(S===0){if(R){if(!B)throw new st;l<h?(f=!0,w=!0):(m=!0,p=!0)}else if(B)throw new st}else throw new st;if(f){if(m)throw new st;Vn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(m&&Vn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),p){if(w)throw new st;Vn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}w&&Vn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}pe.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],pe.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],pe.OUTSIDE_GSUM=[0,161,961,2015,2715],pe.INSIDE_GSUM=[0,336,1036,1516],pe.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],pe.INSIDE_ODD_WIDEST=[2,4,6,8],pe.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class ii extends sn{constructor(r,a){super(),this.readers=[],this.verbose=a===!0;const l=r?r.get(Tt.POSSIBLE_FORMATS):null,h=r&&r.get(Tt.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;l?((l.includes(Bt.EAN_13)||l.includes(Bt.UPC_A)||l.includes(Bt.EAN_8)||l.includes(Bt.UPC_E))&&this.readers.push(new Ui(r)),l.includes(Bt.CODE_39)&&this.readers.push(new Ye(h)),l.includes(Bt.CODE_128)&&this.readers.push(new Vt),l.includes(Bt.ITF)&&this.readers.push(new Be),l.includes(Bt.RSS_14)&&this.readers.push(new pe),l.includes(Bt.RSS_EXPANDED)&&this.readers.push(new vt(this.verbose))):(this.readers.push(new Ui(r)),this.readers.push(new Ye),this.readers.push(new Ui(r)),this.readers.push(new Vt),this.readers.push(new Be),this.readers.push(new pe),this.readers.push(new vt(this.verbose)))}decodeRow(r,a,l){for(let h=0;h<this.readers.length;h++)try{return this.readers[h].decodeRow(r,a,l)}catch{}throw new st}reset(){this.readers.forEach(r=>r.reset())}}class Jo extends Mt{constructor(r=500,a){super(new ii(a),r,a)}}class ye{constructor(r,a,l){this.ecCodewords=r,this.ecBlocks=[a],l&&this.ecBlocks.push(l)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class _e{constructor(r,a){this.count=r,this.dataCodewords=a}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class de{constructor(r,a,l,h,f,m){this.versionNumber=r,this.symbolSizeRows=a,this.symbolSizeColumns=l,this.dataRegionSizeRows=h,this.dataRegionSizeColumns=f,this.ecBlocks=m;let p=0;const w=m.getECCodewords(),S=m.getECBlocks();for(let R of S)p+=R.getCount()*(R.getDataCodewords()+w);this.totalCodewords=p}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(r,a){if((r&1)!==0||(a&1)!==0)throw new U;for(let l of de.VERSIONS)if(l.symbolSizeRows===r&&l.symbolSizeColumns===a)return l;throw new U}toString(){return""+this.versionNumber}static buildVersions(){return[new de(1,10,10,8,8,new ye(5,new _e(1,3))),new de(2,12,12,10,10,new ye(7,new _e(1,5))),new de(3,14,14,12,12,new ye(10,new _e(1,8))),new de(4,16,16,14,14,new ye(12,new _e(1,12))),new de(5,18,18,16,16,new ye(14,new _e(1,18))),new de(6,20,20,18,18,new ye(18,new _e(1,22))),new de(7,22,22,20,20,new ye(20,new _e(1,30))),new de(8,24,24,22,22,new ye(24,new _e(1,36))),new de(9,26,26,24,24,new ye(28,new _e(1,44))),new de(10,32,32,14,14,new ye(36,new _e(1,62))),new de(11,36,36,16,16,new ye(42,new _e(1,86))),new de(12,40,40,18,18,new ye(48,new _e(1,114))),new de(13,44,44,20,20,new ye(56,new _e(1,144))),new de(14,48,48,22,22,new ye(68,new _e(1,174))),new de(15,52,52,24,24,new ye(42,new _e(2,102))),new de(16,64,64,14,14,new ye(56,new _e(2,140))),new de(17,72,72,16,16,new ye(36,new _e(4,92))),new de(18,80,80,18,18,new ye(48,new _e(4,114))),new de(19,88,88,20,20,new ye(56,new _e(4,144))),new de(20,96,96,22,22,new ye(68,new _e(4,174))),new de(21,104,104,24,24,new ye(56,new _e(6,136))),new de(22,120,120,18,18,new ye(68,new _e(6,175))),new de(23,132,132,20,20,new ye(62,new _e(8,163))),new de(24,144,144,22,22,new ye(62,new _e(8,156),new _e(2,155))),new de(25,8,18,6,16,new ye(7,new _e(1,5))),new de(26,8,32,6,14,new ye(11,new _e(1,10))),new de(27,12,26,10,24,new ye(14,new _e(1,16))),new de(28,12,36,10,16,new ye(18,new _e(1,22))),new de(29,16,36,14,16,new ye(24,new _e(1,32))),new de(30,16,48,14,22,new ye(28,new _e(1,49)))]}}de.VERSIONS=de.buildVersions();class Ws{constructor(r){const a=r.getHeight();if(a<8||a>144||(a&1)!==0)throw new U;this.version=Ws.readVersion(r),this.mappingBitMatrix=this.extractDataRegion(r),this.readMappingMatrix=new Pt(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(r){const a=r.getHeight(),l=r.getWidth();return de.getVersionForDimensions(a,l)}readCodewords(){const r=new Int8Array(this.version.getTotalCodewords());let a=0,l=4,h=0;const f=this.mappingBitMatrix.getHeight(),m=this.mappingBitMatrix.getWidth();let p=!1,w=!1,S=!1,R=!1;do if(l===f&&h===0&&!p)r[a++]=this.readCorner1(f,m)&255,l-=2,h+=2,p=!0;else if(l===f-2&&h===0&&(m&3)!==0&&!w)r[a++]=this.readCorner2(f,m)&255,l-=2,h+=2,w=!0;else if(l===f+4&&h===2&&(m&7)===0&&!S)r[a++]=this.readCorner3(f,m)&255,l-=2,h+=2,S=!0;else if(l===f-2&&h===0&&(m&7)===4&&!R)r[a++]=this.readCorner4(f,m)&255,l-=2,h+=2,R=!0;else{do l<f&&h>=0&&!this.readMappingMatrix.get(h,l)&&(r[a++]=this.readUtah(l,h,f,m)&255),l-=2,h+=2;while(l>=0&&h<m);l+=1,h+=3;do l>=0&&h<m&&!this.readMappingMatrix.get(h,l)&&(r[a++]=this.readUtah(l,h,f,m)&255),l+=2,h-=2;while(l<f&&h>=0);l+=3,h+=1}while(l<f||h<m);if(a!==this.version.getTotalCodewords())throw new U;return r}readModule(r,a,l,h){return r<0&&(r+=l,a+=4-(l+4&7)),a<0&&(a+=h,r+=4-(h+4&7)),this.readMappingMatrix.set(a,r),this.mappingBitMatrix.get(a,r)}readUtah(r,a,l,h){let f=0;return this.readModule(r-2,a-2,l,h)&&(f|=1),f<<=1,this.readModule(r-2,a-1,l,h)&&(f|=1),f<<=1,this.readModule(r-1,a-2,l,h)&&(f|=1),f<<=1,this.readModule(r-1,a-1,l,h)&&(f|=1),f<<=1,this.readModule(r-1,a,l,h)&&(f|=1),f<<=1,this.readModule(r,a-2,l,h)&&(f|=1),f<<=1,this.readModule(r,a-1,l,h)&&(f|=1),f<<=1,this.readModule(r,a,l,h)&&(f|=1),f}readCorner1(r,a){let l=0;return this.readModule(r-1,0,r,a)&&(l|=1),l<<=1,this.readModule(r-1,1,r,a)&&(l|=1),l<<=1,this.readModule(r-1,2,r,a)&&(l|=1),l<<=1,this.readModule(0,a-2,r,a)&&(l|=1),l<<=1,this.readModule(0,a-1,r,a)&&(l|=1),l<<=1,this.readModule(1,a-1,r,a)&&(l|=1),l<<=1,this.readModule(2,a-1,r,a)&&(l|=1),l<<=1,this.readModule(3,a-1,r,a)&&(l|=1),l}readCorner2(r,a){let l=0;return this.readModule(r-3,0,r,a)&&(l|=1),l<<=1,this.readModule(r-2,0,r,a)&&(l|=1),l<<=1,this.readModule(r-1,0,r,a)&&(l|=1),l<<=1,this.readModule(0,a-4,r,a)&&(l|=1),l<<=1,this.readModule(0,a-3,r,a)&&(l|=1),l<<=1,this.readModule(0,a-2,r,a)&&(l|=1),l<<=1,this.readModule(0,a-1,r,a)&&(l|=1),l<<=1,this.readModule(1,a-1,r,a)&&(l|=1),l}readCorner3(r,a){let l=0;return this.readModule(r-1,0,r,a)&&(l|=1),l<<=1,this.readModule(r-1,a-1,r,a)&&(l|=1),l<<=1,this.readModule(0,a-3,r,a)&&(l|=1),l<<=1,this.readModule(0,a-2,r,a)&&(l|=1),l<<=1,this.readModule(0,a-1,r,a)&&(l|=1),l<<=1,this.readModule(1,a-3,r,a)&&(l|=1),l<<=1,this.readModule(1,a-2,r,a)&&(l|=1),l<<=1,this.readModule(1,a-1,r,a)&&(l|=1),l}readCorner4(r,a){let l=0;return this.readModule(r-3,0,r,a)&&(l|=1),l<<=1,this.readModule(r-2,0,r,a)&&(l|=1),l<<=1,this.readModule(r-1,0,r,a)&&(l|=1),l<<=1,this.readModule(0,a-2,r,a)&&(l|=1),l<<=1,this.readModule(0,a-1,r,a)&&(l|=1),l<<=1,this.readModule(1,a-1,r,a)&&(l|=1),l<<=1,this.readModule(2,a-1,r,a)&&(l|=1),l<<=1,this.readModule(3,a-1,r,a)&&(l|=1),l}extractDataRegion(r){const a=this.version.getSymbolSizeRows(),l=this.version.getSymbolSizeColumns();if(r.getHeight()!==a)throw new I("Dimension of bitMatrix must match the version size");const h=this.version.getDataRegionSizeRows(),f=this.version.getDataRegionSizeColumns(),m=a/h|0,p=l/f|0,w=m*h,S=p*f,R=new Pt(S,w);for(let B=0;B<m;++B){const P=B*h;for(let G=0;G<p;++G){const $=G*f;for(let rt=0;rt<h;++rt){const ht=B*(h+2)+1+rt,yt=P+rt;for(let Lt=0;Lt<f;++Lt){const kt=G*(f+2)+1+Lt;if(r.get(kt,ht)){const Dt=$+Lt;R.set(Dt,yt)}}}}}return R}}class ws{constructor(r,a){this.numDataCodewords=r,this.codewords=a}static getDataBlocks(r,a){const l=a.getECBlocks();let h=0;const f=l.getECBlocks();for(let rt of f)h+=rt.getCount();const m=new Array(h);let p=0;for(let rt of f)for(let ht=0;ht<rt.getCount();ht++){const yt=rt.getDataCodewords(),Lt=l.getECCodewords()+yt;m[p++]=new ws(yt,new Uint8Array(Lt))}const S=m[0].codewords.length-l.getECCodewords(),R=S-1;let B=0;for(let rt=0;rt<R;rt++)for(let ht=0;ht<p;ht++)m[ht].codewords[rt]=r[B++];const P=a.getVersionNumber()===24,G=P?8:p;for(let rt=0;rt<G;rt++)m[rt].codewords[S-1]=r[B++];const $=m[0].codewords.length;for(let rt=S;rt<$;rt++)for(let ht=0;ht<p;ht++){const yt=P?(ht+8)%p:ht,Lt=P&&yt>7?rt-1:rt;m[yt].codewords[Lt]=r[B++]}if(B!==r.length)throw new I;return m}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class fr{constructor(r){this.bytes=r,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(r){if(r<1||r>32||r>this.available())throw new I(""+r);let a=0,l=this.bitOffset,h=this.byteOffset;const f=this.bytes;if(l>0){const m=8-l,p=r<m?r:m,w=m-p,S=255>>8-p<<w;a=(f[h]&S)>>w,r-=p,l+=p,l===8&&(l=0,h++)}if(r>0){for(;r>=8;)a=a<<8|f[h]&255,h++,r-=8;if(r>0){const m=8-r,p=255>>m<<m;a=a<<r|(f[h]&p)>>m,l+=r}}return this.bitOffset=l,this.byteOffset=h,a}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var _n;(function(L){L[L.PAD_ENCODE=0]="PAD_ENCODE",L[L.ASCII_ENCODE=1]="ASCII_ENCODE",L[L.C40_ENCODE=2]="C40_ENCODE",L[L.TEXT_ENCODE=3]="TEXT_ENCODE",L[L.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",L[L.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",L[L.BASE256_ENCODE=6]="BASE256_ENCODE"})(_n||(_n={}));class zi{static decode(r){const a=new fr(r),l=new Y,h=new Y,f=new Array;let m=_n.ASCII_ENCODE;do if(m===_n.ASCII_ENCODE)m=this.decodeAsciiSegment(a,l,h);else{switch(m){case _n.C40_ENCODE:this.decodeC40Segment(a,l);break;case _n.TEXT_ENCODE:this.decodeTextSegment(a,l);break;case _n.ANSIX12_ENCODE:this.decodeAnsiX12Segment(a,l);break;case _n.EDIFACT_ENCODE:this.decodeEdifactSegment(a,l);break;case _n.BASE256_ENCODE:this.decodeBase256Segment(a,l,f);break;default:throw new U}m=_n.ASCII_ENCODE}while(m!==_n.PAD_ENCODE&&a.available()>0);return h.length()>0&&l.append(h.toString()),new Pr(r,l.toString(),f.length===0?null:f,null)}static decodeAsciiSegment(r,a,l){let h=!1;do{let f=r.readBits(8);if(f===0)throw new U;if(f<=128)return h&&(f+=128),a.append(String.fromCharCode(f-1)),_n.ASCII_ENCODE;if(f===129)return _n.PAD_ENCODE;if(f<=229){const m=f-130;m<10&&a.append("0"),a.append(""+m)}else switch(f){case 230:return _n.C40_ENCODE;case 231:return _n.BASE256_ENCODE;case 232:a.append("");break;case 233:case 234:break;case 235:h=!0;break;case 236:a.append("[)>05"),l.insert(0,"");break;case 237:a.append("[)>06"),l.insert(0,"");break;case 238:return _n.ANSIX12_ENCODE;case 239:return _n.TEXT_ENCODE;case 240:return _n.EDIFACT_ENCODE;case 241:break;default:if(f!==254||r.available()!==0)throw new U;break}}while(r.available()>0);return _n.ASCII_ENCODE}static decodeC40Segment(r,a){let l=!1;const h=[];let f=0;do{if(r.available()===8)return;const m=r.readBits(8);if(m===254)return;this.parseTwoBytes(m,r.readBits(8),h);for(let p=0;p<3;p++){const w=h[p];switch(f){case 0:if(w<3)f=w+1;else if(w<this.C40_BASIC_SET_CHARS.length){const S=this.C40_BASIC_SET_CHARS[w];l?(a.append(String.fromCharCode(S.charCodeAt(0)+128)),l=!1):a.append(S)}else throw new U;break;case 1:l?(a.append(String.fromCharCode(w+128)),l=!1):a.append(String.fromCharCode(w)),f=0;break;case 2:if(w<this.C40_SHIFT2_SET_CHARS.length){const S=this.C40_SHIFT2_SET_CHARS[w];l?(a.append(String.fromCharCode(S.charCodeAt(0)+128)),l=!1):a.append(S)}else switch(w){case 27:a.append("");break;case 30:l=!0;break;default:throw new U}f=0;break;case 3:l?(a.append(String.fromCharCode(w+224)),l=!1):a.append(String.fromCharCode(w+96)),f=0;break;default:throw new U}}}while(r.available()>0)}static decodeTextSegment(r,a){let l=!1,h=[],f=0;do{if(r.available()===8)return;const m=r.readBits(8);if(m===254)return;this.parseTwoBytes(m,r.readBits(8),h);for(let p=0;p<3;p++){const w=h[p];switch(f){case 0:if(w<3)f=w+1;else if(w<this.TEXT_BASIC_SET_CHARS.length){const S=this.TEXT_BASIC_SET_CHARS[w];l?(a.append(String.fromCharCode(S.charCodeAt(0)+128)),l=!1):a.append(S)}else throw new U;break;case 1:l?(a.append(String.fromCharCode(w+128)),l=!1):a.append(String.fromCharCode(w)),f=0;break;case 2:if(w<this.TEXT_SHIFT2_SET_CHARS.length){const S=this.TEXT_SHIFT2_SET_CHARS[w];l?(a.append(String.fromCharCode(S.charCodeAt(0)+128)),l=!1):a.append(S)}else switch(w){case 27:a.append("");break;case 30:l=!0;break;default:throw new U}f=0;break;case 3:if(w<this.TEXT_SHIFT3_SET_CHARS.length){const S=this.TEXT_SHIFT3_SET_CHARS[w];l?(a.append(String.fromCharCode(S.charCodeAt(0)+128)),l=!1):a.append(S),f=0}else throw new U;break;default:throw new U}}}while(r.available()>0)}static decodeAnsiX12Segment(r,a){const l=[];do{if(r.available()===8)return;const h=r.readBits(8);if(h===254)return;this.parseTwoBytes(h,r.readBits(8),l);for(let f=0;f<3;f++){const m=l[f];switch(m){case 0:a.append("\r");break;case 1:a.append("*");break;case 2:a.append(">");break;case 3:a.append(" ");break;default:if(m<14)a.append(String.fromCharCode(m+44));else if(m<40)a.append(String.fromCharCode(m+51));else throw new U;break}}}while(r.available()>0)}static parseTwoBytes(r,a,l){let h=(r<<8)+a-1,f=Math.floor(h/1600);l[0]=f,h-=f*1600,f=Math.floor(h/40),l[1]=f,l[2]=h-f*40}static decodeEdifactSegment(r,a){do{if(r.available()<=16)return;for(let l=0;l<4;l++){let h=r.readBits(6);if(h===31){const f=8-r.getBitOffset();f!==8&&r.readBits(f);return}(h&32)===0&&(h|=64),a.append(String.fromCharCode(h))}}while(r.available()>0)}static decodeBase256Segment(r,a,l){let h=1+r.getByteOffset();const f=this.unrandomize255State(r.readBits(8),h++);let m;if(f===0?m=r.available()/8|0:f<250?m=f:m=250*(f-249)+this.unrandomize255State(r.readBits(8),h++),m<0)throw new U;const p=new Uint8Array(m);for(let w=0;w<m;w++){if(r.available()<8)throw new U;p[w]=this.unrandomize255State(r.readBits(8),h++)}l.push(p);try{a.append(tt.decode(p,K.ISO88591))}catch(w){throw new kr("Platform does not support required encoding: "+w.message)}}static unrandomize255State(r,a){const l=149*a%255+1,h=r-l;return h>=0?h:h+256}}zi.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],zi.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],zi.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],zi.TEXT_SHIFT2_SET_CHARS=zi.C40_SHIFT2_SET_CHARS,zi.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Ia{constructor(){this.rsDecoder=new As(Ee.DATA_MATRIX_FIELD_256)}decode(r){const a=new Ws(r),l=a.getVersion(),h=a.readCodewords(),f=ws.getDataBlocks(h,l);let m=0;for(let S of f)m+=S.getNumDataCodewords();const p=new Uint8Array(m),w=f.length;for(let S=0;S<w;S++){const R=f[S],B=R.getCodewords(),P=R.getNumDataCodewords();this.correctErrors(B,P);for(let G=0;G<P;G++)p[G*w+S]=B[G]}return zi.decode(p)}correctErrors(r,a){const l=new Int32Array(r);try{this.rsDecoder.decode(l,r.length-a)}catch{throw new H}for(let h=0;h<a;h++)r[h]=l[h]}}class un{constructor(r){this.image=r,this.rectangleDetector=new Kr(this.image)}detect(){const r=this.rectangleDetector.detect();let a=this.detectSolid1(r);if(a=this.detectSolid2(a),a[3]=this.correctTopRight(a),!a[3])throw new st;a=this.shiftToModuleCenter(a);const l=a[0],h=a[1],f=a[2],m=a[3];let p=this.transitionsBetween(l,m)+1,w=this.transitionsBetween(f,m)+1;(p&1)===1&&(p+=1),(w&1)===1&&(w+=1),4*p<7*w&&4*w<7*p&&(p=w=Math.max(p,w));let S=un.sampleGrid(this.image,l,h,f,m,p,w);return new wa(S,[l,h,f,m])}static shiftPoint(r,a,l){let h=(a.getX()-r.getX())/(l+1),f=(a.getY()-r.getY())/(l+1);return new qt(r.getX()+h,r.getY()+f)}static moveAway(r,a,l){let h=r.getX(),f=r.getY();return h<a?h-=1:h+=1,f<l?f-=1:f+=1,new qt(h,f)}detectSolid1(r){let a=r[0],l=r[1],h=r[3],f=r[2],m=this.transitionsBetween(a,l),p=this.transitionsBetween(l,h),w=this.transitionsBetween(h,f),S=this.transitionsBetween(f,a),R=m,B=[f,a,l,h];return R>p&&(R=p,B[0]=a,B[1]=l,B[2]=h,B[3]=f),R>w&&(R=w,B[0]=l,B[1]=h,B[2]=f,B[3]=a),R>S&&(B[0]=h,B[1]=f,B[2]=a,B[3]=l),B}detectSolid2(r){let a=r[0],l=r[1],h=r[2],f=r[3],m=this.transitionsBetween(a,f),p=un.shiftPoint(l,h,(m+1)*4),w=un.shiftPoint(h,l,(m+1)*4),S=this.transitionsBetween(p,a),R=this.transitionsBetween(w,f);return S<R?(r[0]=a,r[1]=l,r[2]=h,r[3]=f):(r[0]=l,r[1]=h,r[2]=f,r[3]=a),r}correctTopRight(r){let a=r[0],l=r[1],h=r[2],f=r[3],m=this.transitionsBetween(a,f),p=this.transitionsBetween(l,f),w=un.shiftPoint(a,l,(p+1)*4),S=un.shiftPoint(h,l,(m+1)*4);m=this.transitionsBetween(w,f),p=this.transitionsBetween(S,f);let R=new qt(f.getX()+(h.getX()-l.getX())/(m+1),f.getY()+(h.getY()-l.getY())/(m+1)),B=new qt(f.getX()+(a.getX()-l.getX())/(p+1),f.getY()+(a.getY()-l.getY())/(p+1));if(!this.isValid(R))return this.isValid(B)?B:null;if(!this.isValid(B))return R;let P=this.transitionsBetween(w,R)+this.transitionsBetween(S,R),G=this.transitionsBetween(w,B)+this.transitionsBetween(S,B);return P>G?R:B}shiftToModuleCenter(r){let a=r[0],l=r[1],h=r[2],f=r[3],m=this.transitionsBetween(a,f)+1,p=this.transitionsBetween(h,f)+1,w=un.shiftPoint(a,l,p*4),S=un.shiftPoint(h,l,m*4);m=this.transitionsBetween(w,f)+1,p=this.transitionsBetween(S,f)+1,(m&1)===1&&(m+=1),(p&1)===1&&(p+=1);let R=(a.getX()+l.getX()+h.getX()+f.getX())/4,B=(a.getY()+l.getY()+h.getY()+f.getY())/4;a=un.moveAway(a,R,B),l=un.moveAway(l,R,B),h=un.moveAway(h,R,B),f=un.moveAway(f,R,B);let P,G;return w=un.shiftPoint(a,l,p*4),w=un.shiftPoint(w,f,m*4),P=un.shiftPoint(l,a,p*4),P=un.shiftPoint(P,h,m*4),S=un.shiftPoint(h,f,p*4),S=un.shiftPoint(S,l,m*4),G=un.shiftPoint(f,h,p*4),G=un.shiftPoint(G,a,m*4),[w,P,S,G]}isValid(r){return r.getX()>=0&&r.getX()<this.image.getWidth()&&r.getY()>0&&r.getY()<this.image.getHeight()}static sampleGrid(r,a,l,h,f,m,p){return zn.getInstance().sampleGrid(r,m,p,.5,.5,m-.5,.5,m-.5,p-.5,.5,p-.5,a.getX(),a.getY(),f.getX(),f.getY(),h.getX(),h.getY(),l.getX(),l.getY())}transitionsBetween(r,a){let l=Math.trunc(r.getX()),h=Math.trunc(r.getY()),f=Math.trunc(a.getX()),m=Math.trunc(a.getY()),p=Math.abs(m-h)>Math.abs(f-l);if(p){let rt=l;l=h,h=rt,rt=f,f=m,m=rt}let w=Math.abs(f-l),S=Math.abs(m-h),R=-w/2,B=h<m?1:-1,P=l<f?1:-1,G=0,$=this.image.get(p?h:l,p?l:h);for(let rt=l,ht=h;rt!==f;rt+=P){let yt=this.image.get(p?ht:rt,p?rt:ht);if(yt!==$&&(G++,$=yt),R+=S,R>0){if(ht===m)break;ht+=B,R-=w}}return G}}class Fr{constructor(){this.decoder=new Ia}decode(r,a=null){let l,h;if(a!=null&&a.has(Tt.PURE_BARCODE)){const S=Fr.extractPureBits(r.getBlackMatrix());l=this.decoder.decode(S),h=Fr.NO_POINTS}else{const S=new un(r.getBlackMatrix()).detect();l=this.decoder.decode(S.getBits()),h=S.getPoints()}const f=l.getRawBytes(),m=new Ht(l.getText(),f,8*f.length,h,Bt.DATA_MATRIX,J.currentTimeMillis()),p=l.getByteSegments();p!=null&&m.putMetadata(oe.BYTE_SEGMENTS,p);const w=l.getECLevel();return w!=null&&m.putMetadata(oe.ERROR_CORRECTION_LEVEL,w),m}reset(){}static extractPureBits(r){const a=r.getTopLeftOnBit(),l=r.getBottomRightOnBit();if(a==null||l==null)throw new st;const h=this.moduleSize(a,r);let f=a[1];const m=l[1];let p=a[0];const S=(l[0]-p+1)/h,R=(m-f+1)/h;if(S<=0||R<=0)throw new st;const B=h/2;f+=B,p+=B;const P=new Pt(S,R);for(let G=0;G<R;G++){const $=f+G*h;for(let rt=0;rt<S;rt++)r.get(p+rt*h,$)&&P.set(rt,G)}return P}static moduleSize(r,a){const l=a.getWidth();let h=r[0];const f=r[1];for(;h<l&&a.get(h,f);)h++;if(h===l)throw new st;const m=h-r[0];if(m===0)throw new st;return m}}Fr.NO_POINTS=[];class nc extends Mt{constructor(r=500){super(new Fr,r)}}var hn;(function(L){L[L.L=0]="L",L[L.M=1]="M",L[L.Q=2]="Q",L[L.H=3]="H"})(hn||(hn={}));class xe{constructor(r,a,l){this.value=r,this.stringValue=a,this.bits=l,xe.FOR_BITS.set(l,this),xe.FOR_VALUE.set(r,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(r){switch(r){case"L":return xe.L;case"M":return xe.M;case"Q":return xe.Q;case"H":return xe.H;default:throw new v(r+"not available")}}toString(){return this.stringValue}equals(r){if(!(r instanceof xe))return!1;const a=r;return this.value===a.value}static forBits(r){if(r<0||r>=xe.FOR_BITS.size)throw new I;return xe.FOR_BITS.get(r)}}xe.FOR_BITS=new Map,xe.FOR_VALUE=new Map,xe.L=new xe(hn.L,"L",1),xe.M=new xe(hn.M,"M",0),xe.Q=new xe(hn.Q,"Q",3),xe.H=new xe(hn.H,"H",2);class Nn{constructor(r){this.errorCorrectionLevel=xe.forBits(r>>3&3),this.dataMask=r&7}static numBitsDiffering(r,a){return nt.bitCount(r^a)}static decodeFormatInformation(r,a){const l=Nn.doDecodeFormatInformation(r,a);return l!==null?l:Nn.doDecodeFormatInformation(r^Nn.FORMAT_INFO_MASK_QR,a^Nn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(r,a){let l=Number.MAX_SAFE_INTEGER,h=0;for(const f of Nn.FORMAT_INFO_DECODE_LOOKUP){const m=f[0];if(m===r||m===a)return new Nn(f[1]);let p=Nn.numBitsDiffering(r,m);p<l&&(h=f[1],l=p),r!==a&&(p=Nn.numBitsDiffering(a,m),p<l&&(h=f[1],l=p))}return l<=3?new Nn(h):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(r){if(!(r instanceof Nn))return!1;const a=r;return this.errorCorrectionLevel===a.errorCorrectionLevel&&this.dataMask===a.dataMask}}Nn.FORMAT_INFO_MASK_QR=21522,Nn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class lt{constructor(r,...a){this.ecCodewordsPerBlock=r,this.ecBlocks=a}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let r=0;const a=this.ecBlocks;for(const l of a)r+=l.getCount();return r}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class z{constructor(r,a){this.count=r,this.dataCodewords=a}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ft{constructor(r,a,...l){this.versionNumber=r,this.alignmentPatternCenters=a,this.ecBlocks=l;let h=0;const f=l[0].getECCodewordsPerBlock(),m=l[0].getECBlocks();for(const p of m)h+=p.getCount()*(p.getDataCodewords()+f);this.totalCodewords=h}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(r){return this.ecBlocks[r.getValue()]}static getProvisionalVersionForDimension(r){if(r%4!==1)throw new U;try{return this.getVersionForNumber((r-17)/4)}catch{throw new U}}static getVersionForNumber(r){if(r<1||r>40)throw new I;return Ft.VERSIONS[r-1]}static decodeVersionInformation(r){let a=Number.MAX_SAFE_INTEGER,l=0;for(let h=0;h<Ft.VERSION_DECODE_INFO.length;h++){const f=Ft.VERSION_DECODE_INFO[h];if(f===r)return Ft.getVersionForNumber(h+7);const m=Nn.numBitsDiffering(r,f);m<a&&(l=h+7,a=m)}return a<=3?Ft.getVersionForNumber(l):null}buildFunctionPattern(){const r=this.getDimensionForVersion(),a=new Pt(r);a.setRegion(0,0,9,9),a.setRegion(r-8,0,8,9),a.setRegion(0,r-8,9,8);const l=this.alignmentPatternCenters.length;for(let h=0;h<l;h++){const f=this.alignmentPatternCenters[h]-2;for(let m=0;m<l;m++)h===0&&(m===0||m===l-1)||h===l-1&&m===0||a.setRegion(this.alignmentPatternCenters[m]-2,f,5,5)}return a.setRegion(6,9,1,r-17),a.setRegion(9,6,r-17,1),this.versionNumber>6&&(a.setRegion(r-11,0,3,6),a.setRegion(0,r-11,6,3)),a}toString(){return""+this.versionNumber}}Ft.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Ft.VERSIONS=[new Ft(1,new Int32Array(0),new lt(7,new z(1,19)),new lt(10,new z(1,16)),new lt(13,new z(1,13)),new lt(17,new z(1,9))),new Ft(2,Int32Array.from([6,18]),new lt(10,new z(1,34)),new lt(16,new z(1,28)),new lt(22,new z(1,22)),new lt(28,new z(1,16))),new Ft(3,Int32Array.from([6,22]),new lt(15,new z(1,55)),new lt(26,new z(1,44)),new lt(18,new z(2,17)),new lt(22,new z(2,13))),new Ft(4,Int32Array.from([6,26]),new lt(20,new z(1,80)),new lt(18,new z(2,32)),new lt(26,new z(2,24)),new lt(16,new z(4,9))),new Ft(5,Int32Array.from([6,30]),new lt(26,new z(1,108)),new lt(24,new z(2,43)),new lt(18,new z(2,15),new z(2,16)),new lt(22,new z(2,11),new z(2,12))),new Ft(6,Int32Array.from([6,34]),new lt(18,new z(2,68)),new lt(16,new z(4,27)),new lt(24,new z(4,19)),new lt(28,new z(4,15))),new Ft(7,Int32Array.from([6,22,38]),new lt(20,new z(2,78)),new lt(18,new z(4,31)),new lt(18,new z(2,14),new z(4,15)),new lt(26,new z(4,13),new z(1,14))),new Ft(8,Int32Array.from([6,24,42]),new lt(24,new z(2,97)),new lt(22,new z(2,38),new z(2,39)),new lt(22,new z(4,18),new z(2,19)),new lt(26,new z(4,14),new z(2,15))),new Ft(9,Int32Array.from([6,26,46]),new lt(30,new z(2,116)),new lt(22,new z(3,36),new z(2,37)),new lt(20,new z(4,16),new z(4,17)),new lt(24,new z(4,12),new z(4,13))),new Ft(10,Int32Array.from([6,28,50]),new lt(18,new z(2,68),new z(2,69)),new lt(26,new z(4,43),new z(1,44)),new lt(24,new z(6,19),new z(2,20)),new lt(28,new z(6,15),new z(2,16))),new Ft(11,Int32Array.from([6,30,54]),new lt(20,new z(4,81)),new lt(30,new z(1,50),new z(4,51)),new lt(28,new z(4,22),new z(4,23)),new lt(24,new z(3,12),new z(8,13))),new Ft(12,Int32Array.from([6,32,58]),new lt(24,new z(2,92),new z(2,93)),new lt(22,new z(6,36),new z(2,37)),new lt(26,new z(4,20),new z(6,21)),new lt(28,new z(7,14),new z(4,15))),new Ft(13,Int32Array.from([6,34,62]),new lt(26,new z(4,107)),new lt(22,new z(8,37),new z(1,38)),new lt(24,new z(8,20),new z(4,21)),new lt(22,new z(12,11),new z(4,12))),new Ft(14,Int32Array.from([6,26,46,66]),new lt(30,new z(3,115),new z(1,116)),new lt(24,new z(4,40),new z(5,41)),new lt(20,new z(11,16),new z(5,17)),new lt(24,new z(11,12),new z(5,13))),new Ft(15,Int32Array.from([6,26,48,70]),new lt(22,new z(5,87),new z(1,88)),new lt(24,new z(5,41),new z(5,42)),new lt(30,new z(5,24),new z(7,25)),new lt(24,new z(11,12),new z(7,13))),new Ft(16,Int32Array.from([6,26,50,74]),new lt(24,new z(5,98),new z(1,99)),new lt(28,new z(7,45),new z(3,46)),new lt(24,new z(15,19),new z(2,20)),new lt(30,new z(3,15),new z(13,16))),new Ft(17,Int32Array.from([6,30,54,78]),new lt(28,new z(1,107),new z(5,108)),new lt(28,new z(10,46),new z(1,47)),new lt(28,new z(1,22),new z(15,23)),new lt(28,new z(2,14),new z(17,15))),new Ft(18,Int32Array.from([6,30,56,82]),new lt(30,new z(5,120),new z(1,121)),new lt(26,new z(9,43),new z(4,44)),new lt(28,new z(17,22),new z(1,23)),new lt(28,new z(2,14),new z(19,15))),new Ft(19,Int32Array.from([6,30,58,86]),new lt(28,new z(3,113),new z(4,114)),new lt(26,new z(3,44),new z(11,45)),new lt(26,new z(17,21),new z(4,22)),new lt(26,new z(9,13),new z(16,14))),new Ft(20,Int32Array.from([6,34,62,90]),new lt(28,new z(3,107),new z(5,108)),new lt(26,new z(3,41),new z(13,42)),new lt(30,new z(15,24),new z(5,25)),new lt(28,new z(15,15),new z(10,16))),new Ft(21,Int32Array.from([6,28,50,72,94]),new lt(28,new z(4,116),new z(4,117)),new lt(26,new z(17,42)),new lt(28,new z(17,22),new z(6,23)),new lt(30,new z(19,16),new z(6,17))),new Ft(22,Int32Array.from([6,26,50,74,98]),new lt(28,new z(2,111),new z(7,112)),new lt(28,new z(17,46)),new lt(30,new z(7,24),new z(16,25)),new lt(24,new z(34,13))),new Ft(23,Int32Array.from([6,30,54,78,102]),new lt(30,new z(4,121),new z(5,122)),new lt(28,new z(4,47),new z(14,48)),new lt(30,new z(11,24),new z(14,25)),new lt(30,new z(16,15),new z(14,16))),new Ft(24,Int32Array.from([6,28,54,80,106]),new lt(30,new z(6,117),new z(4,118)),new lt(28,new z(6,45),new z(14,46)),new lt(30,new z(11,24),new z(16,25)),new lt(30,new z(30,16),new z(2,17))),new Ft(25,Int32Array.from([6,32,58,84,110]),new lt(26,new z(8,106),new z(4,107)),new lt(28,new z(8,47),new z(13,48)),new lt(30,new z(7,24),new z(22,25)),new lt(30,new z(22,15),new z(13,16))),new Ft(26,Int32Array.from([6,30,58,86,114]),new lt(28,new z(10,114),new z(2,115)),new lt(28,new z(19,46),new z(4,47)),new lt(28,new z(28,22),new z(6,23)),new lt(30,new z(33,16),new z(4,17))),new Ft(27,Int32Array.from([6,34,62,90,118]),new lt(30,new z(8,122),new z(4,123)),new lt(28,new z(22,45),new z(3,46)),new lt(30,new z(8,23),new z(26,24)),new lt(30,new z(12,15),new z(28,16))),new Ft(28,Int32Array.from([6,26,50,74,98,122]),new lt(30,new z(3,117),new z(10,118)),new lt(28,new z(3,45),new z(23,46)),new lt(30,new z(4,24),new z(31,25)),new lt(30,new z(11,15),new z(31,16))),new Ft(29,Int32Array.from([6,30,54,78,102,126]),new lt(30,new z(7,116),new z(7,117)),new lt(28,new z(21,45),new z(7,46)),new lt(30,new z(1,23),new z(37,24)),new lt(30,new z(19,15),new z(26,16))),new Ft(30,Int32Array.from([6,26,52,78,104,130]),new lt(30,new z(5,115),new z(10,116)),new lt(28,new z(19,47),new z(10,48)),new lt(30,new z(15,24),new z(25,25)),new lt(30,new z(23,15),new z(25,16))),new Ft(31,Int32Array.from([6,30,56,82,108,134]),new lt(30,new z(13,115),new z(3,116)),new lt(28,new z(2,46),new z(29,47)),new lt(30,new z(42,24),new z(1,25)),new lt(30,new z(23,15),new z(28,16))),new Ft(32,Int32Array.from([6,34,60,86,112,138]),new lt(30,new z(17,115)),new lt(28,new z(10,46),new z(23,47)),new lt(30,new z(10,24),new z(35,25)),new lt(30,new z(19,15),new z(35,16))),new Ft(33,Int32Array.from([6,30,58,86,114,142]),new lt(30,new z(17,115),new z(1,116)),new lt(28,new z(14,46),new z(21,47)),new lt(30,new z(29,24),new z(19,25)),new lt(30,new z(11,15),new z(46,16))),new Ft(34,Int32Array.from([6,34,62,90,118,146]),new lt(30,new z(13,115),new z(6,116)),new lt(28,new z(14,46),new z(23,47)),new lt(30,new z(44,24),new z(7,25)),new lt(30,new z(59,16),new z(1,17))),new Ft(35,Int32Array.from([6,30,54,78,102,126,150]),new lt(30,new z(12,121),new z(7,122)),new lt(28,new z(12,47),new z(26,48)),new lt(30,new z(39,24),new z(14,25)),new lt(30,new z(22,15),new z(41,16))),new Ft(36,Int32Array.from([6,24,50,76,102,128,154]),new lt(30,new z(6,121),new z(14,122)),new lt(28,new z(6,47),new z(34,48)),new lt(30,new z(46,24),new z(10,25)),new lt(30,new z(2,15),new z(64,16))),new Ft(37,Int32Array.from([6,28,54,80,106,132,158]),new lt(30,new z(17,122),new z(4,123)),new lt(28,new z(29,46),new z(14,47)),new lt(30,new z(49,24),new z(10,25)),new lt(30,new z(24,15),new z(46,16))),new Ft(38,Int32Array.from([6,32,58,84,110,136,162]),new lt(30,new z(4,122),new z(18,123)),new lt(28,new z(13,46),new z(32,47)),new lt(30,new z(48,24),new z(14,25)),new lt(30,new z(42,15),new z(32,16))),new Ft(39,Int32Array.from([6,26,54,82,110,138,166]),new lt(30,new z(20,117),new z(4,118)),new lt(28,new z(40,47),new z(7,48)),new lt(30,new z(43,24),new z(22,25)),new lt(30,new z(10,15),new z(67,16))),new Ft(40,Int32Array.from([6,30,58,86,114,142,170]),new lt(30,new z(19,118),new z(6,119)),new lt(28,new z(18,47),new z(31,48)),new lt(30,new z(34,24),new z(34,25)),new lt(30,new z(20,15),new z(61,16)))];var pn;(function(L){L[L.DATA_MASK_000=0]="DATA_MASK_000",L[L.DATA_MASK_001=1]="DATA_MASK_001",L[L.DATA_MASK_010=2]="DATA_MASK_010",L[L.DATA_MASK_011=3]="DATA_MASK_011",L[L.DATA_MASK_100=4]="DATA_MASK_100",L[L.DATA_MASK_101=5]="DATA_MASK_101",L[L.DATA_MASK_110=6]="DATA_MASK_110",L[L.DATA_MASK_111=7]="DATA_MASK_111"})(pn||(pn={}));class Tn{constructor(r,a){this.value=r,this.isMasked=a}unmaskBitMatrix(r,a){for(let l=0;l<a;l++)for(let h=0;h<a;h++)this.isMasked(l,h)&&r.flip(h,l)}}Tn.values=new Map([[pn.DATA_MASK_000,new Tn(pn.DATA_MASK_000,(L,r)=>(L+r&1)===0)],[pn.DATA_MASK_001,new Tn(pn.DATA_MASK_001,(L,r)=>(L&1)===0)],[pn.DATA_MASK_010,new Tn(pn.DATA_MASK_010,(L,r)=>r%3===0)],[pn.DATA_MASK_011,new Tn(pn.DATA_MASK_011,(L,r)=>(L+r)%3===0)],[pn.DATA_MASK_100,new Tn(pn.DATA_MASK_100,(L,r)=>(Math.floor(L/2)+Math.floor(r/3)&1)===0)],[pn.DATA_MASK_101,new Tn(pn.DATA_MASK_101,(L,r)=>L*r%6===0)],[pn.DATA_MASK_110,new Tn(pn.DATA_MASK_110,(L,r)=>L*r%6<3)],[pn.DATA_MASK_111,new Tn(pn.DATA_MASK_111,(L,r)=>(L+r+L*r%3&1)===0)]]);class Ks{constructor(r){const a=r.getHeight();if(a<21||(a&3)!==1)throw new U;this.bitMatrix=r}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let r=0;for(let f=0;f<6;f++)r=this.copyBit(f,8,r);r=this.copyBit(7,8,r),r=this.copyBit(8,8,r),r=this.copyBit(8,7,r);for(let f=5;f>=0;f--)r=this.copyBit(8,f,r);const a=this.bitMatrix.getHeight();let l=0;const h=a-7;for(let f=a-1;f>=h;f--)l=this.copyBit(8,f,l);for(let f=a-8;f<a;f++)l=this.copyBit(f,8,l);if(this.parsedFormatInfo=Nn.decodeFormatInformation(r,l),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new U}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const r=this.bitMatrix.getHeight(),a=Math.floor((r-17)/4);if(a<=6)return Ft.getVersionForNumber(a);let l=0;const h=r-11;for(let m=5;m>=0;m--)for(let p=r-9;p>=h;p--)l=this.copyBit(p,m,l);let f=Ft.decodeVersionInformation(l);if(f!==null&&f.getDimensionForVersion()===r)return this.parsedVersion=f,f;l=0;for(let m=5;m>=0;m--)for(let p=r-9;p>=h;p--)l=this.copyBit(m,p,l);if(f=Ft.decodeVersionInformation(l),f!==null&&f.getDimensionForVersion()===r)return this.parsedVersion=f,f;throw new U}copyBit(r,a,l){return(this.isMirror?this.bitMatrix.get(a,r):this.bitMatrix.get(r,a))?l<<1|1:l<<1}readCodewords(){const r=this.readFormatInformation(),a=this.readVersion(),l=Tn.values.get(r.getDataMask()),h=this.bitMatrix.getHeight();l.unmaskBitMatrix(this.bitMatrix,h);const f=a.buildFunctionPattern();let m=!0;const p=new Uint8Array(a.getTotalCodewords());let w=0,S=0,R=0;for(let B=h-1;B>0;B-=2){B===6&&B--;for(let P=0;P<h;P++){const G=m?h-1-P:P;for(let $=0;$<2;$++)f.get(B-$,G)||(R++,S<<=1,this.bitMatrix.get(B-$,G)&&(S|=1),R===8&&(p[w++]=S,R=0,S=0))}m=!m}if(w!==a.getTotalCodewords())throw new U;return p}remask(){if(this.parsedFormatInfo===null)return;const r=Tn.values[this.parsedFormatInfo.getDataMask()],a=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,a)}setMirror(r){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=r}mirror(){const r=this.bitMatrix;for(let a=0,l=r.getWidth();a<l;a++)for(let h=a+1,f=r.getHeight();h<f;h++)r.get(a,h)!==r.get(h,a)&&(r.flip(h,a),r.flip(a,h))}}class Ra{constructor(r,a){this.numDataCodewords=r,this.codewords=a}static getDataBlocks(r,a,l){if(r.length!==a.getTotalCodewords())throw new I;const h=a.getECBlocksForLevel(l);let f=0;const m=h.getECBlocks();for(const $ of m)f+=$.getCount();const p=new Array(f);let w=0;for(const $ of m)for(let rt=0;rt<$.getCount();rt++){const ht=$.getDataCodewords(),yt=h.getECCodewordsPerBlock()+ht;p[w++]=new Ra(ht,new Uint8Array(yt))}const S=p[0].codewords.length;let R=p.length-1;for(;R>=0&&p[R].codewords.length!==S;)R--;R++;const B=S-h.getECCodewordsPerBlock();let P=0;for(let $=0;$<B;$++)for(let rt=0;rt<w;rt++)p[rt].codewords[$]=r[P++];for(let $=R;$<w;$++)p[$].codewords[B]=r[P++];const G=p[0].codewords.length;for(let $=B;$<G;$++)for(let rt=0;rt<w;rt++){const ht=rt<R?$:$+1;p[rt].codewords[ht]=r[P++]}return p}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var xr;(function(L){L[L.TERMINATOR=0]="TERMINATOR",L[L.NUMERIC=1]="NUMERIC",L[L.ALPHANUMERIC=2]="ALPHANUMERIC",L[L.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",L[L.BYTE=4]="BYTE",L[L.ECI=5]="ECI",L[L.KANJI=6]="KANJI",L[L.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",L[L.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",L[L.HANZI=9]="HANZI"})(xr||(xr={}));class Wt{constructor(r,a,l,h){this.value=r,this.stringValue=a,this.characterCountBitsForVersions=l,this.bits=h,Wt.FOR_BITS.set(h,this),Wt.FOR_VALUE.set(r,this)}static forBits(r){const a=Wt.FOR_BITS.get(r);if(a===void 0)throw new I;return a}getCharacterCountBits(r){const a=r.getVersionNumber();let l;return a<=9?l=0:a<=26?l=1:l=2,this.characterCountBitsForVersions[l]}getValue(){return this.value}getBits(){return this.bits}equals(r){if(!(r instanceof Wt))return!1;const a=r;return this.value===a.value}toString(){return this.stringValue}}Wt.FOR_BITS=new Map,Wt.FOR_VALUE=new Map,Wt.TERMINATOR=new Wt(xr.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Wt.NUMERIC=new Wt(xr.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Wt.ALPHANUMERIC=new Wt(xr.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Wt.STRUCTURED_APPEND=new Wt(xr.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Wt.BYTE=new Wt(xr.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Wt.ECI=new Wt(xr.ECI,"ECI",Int32Array.from([0,0,0]),7),Wt.KANJI=new Wt(xr.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Wt.FNC1_FIRST_POSITION=new Wt(xr.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Wt.FNC1_SECOND_POSITION=new Wt(xr.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Wt.HANZI=new Wt(xr.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class fn{static decode(r,a,l,h){const f=new fr(r);let m=new Y;const p=new Array;let w=-1,S=-1;try{let R=null,B=!1,P;do{if(f.available()<4)P=Wt.TERMINATOR;else{const G=f.readBits(4);P=Wt.forBits(G)}switch(P){case Wt.TERMINATOR:break;case Wt.FNC1_FIRST_POSITION:case Wt.FNC1_SECOND_POSITION:B=!0;break;case Wt.STRUCTURED_APPEND:if(f.available()<16)throw new U;w=f.readBits(8),S=f.readBits(8);break;case Wt.ECI:const G=fn.parseECIValue(f);if(R=k.getCharacterSetECIByValue(G),R===null)throw new U;break;case Wt.HANZI:const $=f.readBits(4),rt=f.readBits(P.getCharacterCountBits(a));$===fn.GB2312_SUBSET&&fn.decodeHanziSegment(f,m,rt);break;default:const ht=f.readBits(P.getCharacterCountBits(a));switch(P){case Wt.NUMERIC:fn.decodeNumericSegment(f,m,ht);break;case Wt.ALPHANUMERIC:fn.decodeAlphanumericSegment(f,m,ht,B);break;case Wt.BYTE:fn.decodeByteSegment(f,m,ht,R,p,h);break;case Wt.KANJI:fn.decodeKanjiSegment(f,m,ht);break;default:throw new U}break}}while(P!==Wt.TERMINATOR)}catch{throw new U}return new Pr(r,m.toString(),p.length===0?null:p,l===null?null:l.toString(),w,S)}static decodeHanziSegment(r,a,l){if(l*13>r.available())throw new U;const h=new Uint8Array(2*l);let f=0;for(;l>0;){const m=r.readBits(13);let p=m/96<<8&4294967295|m%96;p<959?p+=41377:p+=42657,h[f]=p>>8&255,h[f+1]=p&255,f+=2,l--}try{a.append(tt.decode(h,K.GB2312))}catch(m){throw new U(m)}}static decodeKanjiSegment(r,a,l){if(l*13>r.available())throw new U;const h=new Uint8Array(2*l);let f=0;for(;l>0;){const m=r.readBits(13);let p=m/192<<8&4294967295|m%192;p<7936?p+=33088:p+=49472,h[f]=p>>8,h[f+1]=p,f+=2,l--}try{a.append(tt.decode(h,K.SHIFT_JIS))}catch(m){throw new U(m)}}static decodeByteSegment(r,a,l,h,f,m){if(8*l>r.available())throw new U;const p=new Uint8Array(l);for(let S=0;S<l;S++)p[S]=r.readBits(8);let w;h===null?w=K.guessEncoding(p,m):w=h.getName();try{a.append(tt.decode(p,w))}catch(S){throw new U(S)}f.push(p)}static toAlphaNumericChar(r){if(r>=fn.ALPHANUMERIC_CHARS.length)throw new U;return fn.ALPHANUMERIC_CHARS[r]}static decodeAlphanumericSegment(r,a,l,h){const f=a.length();for(;l>1;){if(r.available()<11)throw new U;const m=r.readBits(11);a.append(fn.toAlphaNumericChar(Math.floor(m/45))),a.append(fn.toAlphaNumericChar(m%45)),l-=2}if(l===1){if(r.available()<6)throw new U;a.append(fn.toAlphaNumericChar(r.readBits(6)))}if(h)for(let m=f;m<a.length();m++)a.charAt(m)==="%"&&(m<a.length()-1&&a.charAt(m+1)==="%"?a.deleteCharAt(m+1):a.setCharAt(m,""))}static decodeNumericSegment(r,a,l){for(;l>=3;){if(r.available()<10)throw new U;const h=r.readBits(10);if(h>=1e3)throw new U;a.append(fn.toAlphaNumericChar(Math.floor(h/100))),a.append(fn.toAlphaNumericChar(Math.floor(h/10)%10)),a.append(fn.toAlphaNumericChar(h%10)),l-=3}if(l===2){if(r.available()<7)throw new U;const h=r.readBits(7);if(h>=100)throw new U;a.append(fn.toAlphaNumericChar(Math.floor(h/10))),a.append(fn.toAlphaNumericChar(h%10))}else if(l===1){if(r.available()<4)throw new U;const h=r.readBits(4);if(h>=10)throw new U;a.append(fn.toAlphaNumericChar(h))}}static parseECIValue(r){const a=r.readBits(8);if((a&128)===0)return a&127;if((a&192)===128){const l=r.readBits(8);return(a&63)<<8&4294967295|l}if((a&224)===192){const l=r.readBits(16);return(a&31)<<16&4294967295|l}throw new U}}fn.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",fn.GB2312_SUBSET=1;class $o{constructor(r){this.mirrored=r}isMirrored(){return this.mirrored}applyMirroredCorrection(r){if(!this.mirrored||r===null||r.length<3)return;const a=r[0];r[0]=r[2],r[2]=a}}class Na{constructor(){this.rsDecoder=new As(Ee.QR_CODE_FIELD_256)}decodeBooleanArray(r,a){return this.decodeBitMatrix(Pt.parseFromBooleanArray(r),a)}decodeBitMatrix(r,a){const l=new Ks(r);let h=null;try{return this.decodeBitMatrixParser(l,a)}catch(f){h=f}try{l.remask(),l.setMirror(!0),l.readVersion(),l.readFormatInformation(),l.mirror();const f=this.decodeBitMatrixParser(l,a);return f.setOther(new $o(!0)),f}catch(f){throw h!==null?h:f}}decodeBitMatrixParser(r,a){const l=r.readVersion(),h=r.readFormatInformation().getErrorCorrectionLevel(),f=r.readCodewords(),m=Ra.getDataBlocks(f,l,h);let p=0;for(const R of m)p+=R.getNumDataCodewords();const w=new Uint8Array(p);let S=0;for(const R of m){const B=R.getCodewords(),P=R.getNumDataCodewords();this.correctErrors(B,P);for(let G=0;G<P;G++)w[S++]=B[G]}return fn.decode(w,l,h,a)}correctErrors(r,a){const l=new Int32Array(r);try{this.rsDecoder.decode(l,r.length-a)}catch{throw new H}for(let h=0;h<a;h++)r[h]=l[h]}}class xi extends qt{constructor(r,a,l){super(r,a),this.estimatedModuleSize=l}aboutEquals(r,a,l){if(Math.abs(a-this.getY())<=r&&Math.abs(l-this.getX())<=r){const h=Math.abs(r-this.estimatedModuleSize);return h<=1||h<=this.estimatedModuleSize}return!1}combineEstimate(r,a,l){const h=(this.getX()+a)/2,f=(this.getY()+r)/2,m=(this.estimatedModuleSize+l)/2;return new xi(h,f,m)}}class vr{constructor(r,a,l,h,f,m,p){this.image=r,this.startX=a,this.startY=l,this.width=h,this.height=f,this.moduleSize=m,this.resultPointCallback=p,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const r=this.startX,a=this.height,l=this.width,h=r+l,f=this.startY+a/2,m=new Int32Array(3),p=this.image;for(let w=0;w<a;w++){const S=f+((w&1)===0?Math.floor((w+1)/2):-Math.floor((w+1)/2));m[0]=0,m[1]=0,m[2]=0;let R=r;for(;R<h&&!p.get(R,S);)R++;let B=0;for(;R<h;){if(p.get(R,S))if(B===1)m[1]++;else if(B===2){if(this.foundPatternCross(m)){const P=this.handlePossibleCenter(m,S,R);if(P!==null)return P}m[0]=m[2],m[1]=1,m[2]=0,B=1}else m[++B]++;else B===1&&B++,m[B]++;R++}if(this.foundPatternCross(m)){const P=this.handlePossibleCenter(m,S,h);if(P!==null)return P}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new st}static centerFromEnd(r,a){return a-r[2]-r[1]/2}foundPatternCross(r){const a=this.moduleSize,l=a/2;for(let h=0;h<3;h++)if(Math.abs(a-r[h])>=l)return!1;return!0}crossCheckVertical(r,a,l,h){const f=this.image,m=f.getHeight(),p=this.crossCheckStateCount;p[0]=0,p[1]=0,p[2]=0;let w=r;for(;w>=0&&f.get(a,w)&&p[1]<=l;)p[1]++,w--;if(w<0||p[1]>l)return NaN;for(;w>=0&&!f.get(a,w)&&p[0]<=l;)p[0]++,w--;if(p[0]>l)return NaN;for(w=r+1;w<m&&f.get(a,w)&&p[1]<=l;)p[1]++,w++;if(w===m||p[1]>l)return NaN;for(;w<m&&!f.get(a,w)&&p[2]<=l;)p[2]++,w++;if(p[2]>l)return NaN;const S=p[0]+p[1]+p[2];return 5*Math.abs(S-h)>=2*h?NaN:this.foundPatternCross(p)?vr.centerFromEnd(p,w):NaN}handlePossibleCenter(r,a,l){const h=r[0]+r[1]+r[2],f=vr.centerFromEnd(r,l),m=this.crossCheckVertical(a,f,2*r[1],h);if(!isNaN(m)){const p=(r[0]+r[1]+r[2])/3;for(const S of this.possibleCenters)if(S.aboutEquals(p,m,f))return S.combineEstimate(m,f,p);const w=new xi(f,m,p);this.possibleCenters.push(w),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(w)}return null}}class Ei extends qt{constructor(r,a,l,h){super(r,a),this.estimatedModuleSize=l,this.count=h,h===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(r,a,l){if(Math.abs(a-this.getY())<=r&&Math.abs(l-this.getX())<=r){const h=Math.abs(r-this.estimatedModuleSize);return h<=1||h<=this.estimatedModuleSize}return!1}combineEstimate(r,a,l){const h=this.count+1,f=(this.count*this.getX()+a)/h,m=(this.count*this.getY()+r)/h,p=(this.count*this.estimatedModuleSize+l)/h;return new Ei(f,m,p,h)}}class os{constructor(r){this.bottomLeft=r[0],this.topLeft=r[1],this.topRight=r[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Dn{constructor(r,a){this.image=r,this.resultPointCallback=a,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=a}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(r){const a=r!=null&&r.get(Tt.TRY_HARDER)!==void 0,l=r!=null&&r.get(Tt.PURE_BARCODE)!==void 0,h=this.image,f=h.getHeight(),m=h.getWidth();let p=Math.floor(3*f/(4*Dn.MAX_MODULES));(p<Dn.MIN_SKIP||a)&&(p=Dn.MIN_SKIP);let w=!1;const S=new Int32Array(5);for(let B=p-1;B<f&&!w;B+=p){S[0]=0,S[1]=0,S[2]=0,S[3]=0,S[4]=0;let P=0;for(let G=0;G<m;G++)if(h.get(G,B))(P&1)===1&&P++,S[P]++;else if((P&1)===0)if(P===4)if(Dn.foundPatternCross(S)){if(this.handlePossibleCenter(S,B,G,l)===!0)if(p=2,this.hasSkipped===!0)w=this.haveMultiplyConfirmedCenters();else{const rt=this.findRowSkip();rt>S[2]&&(B+=rt-S[2]-p,G=m-1)}else{S[0]=S[2],S[1]=S[3],S[2]=S[4],S[3]=1,S[4]=0,P=3;continue}P=0,S[0]=0,S[1]=0,S[2]=0,S[3]=0,S[4]=0}else S[0]=S[2],S[1]=S[3],S[2]=S[4],S[3]=1,S[4]=0,P=3;else S[++P]++;else S[P]++;Dn.foundPatternCross(S)&&this.handlePossibleCenter(S,B,m,l)===!0&&(p=S[0],this.hasSkipped&&(w=this.haveMultiplyConfirmedCenters()))}const R=this.selectBestPatterns();return qt.orderBestPatterns(R),new os(R)}static centerFromEnd(r,a){return a-r[4]-r[3]-r[2]/2}static foundPatternCross(r){let a=0;for(let f=0;f<5;f++){const m=r[f];if(m===0)return!1;a+=m}if(a<7)return!1;const l=a/7,h=l/2;return Math.abs(l-r[0])<h&&Math.abs(l-r[1])<h&&Math.abs(3*l-r[2])<3*h&&Math.abs(l-r[3])<h&&Math.abs(l-r[4])<h}getCrossCheckStateCount(){const r=this.crossCheckStateCount;return r[0]=0,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r}crossCheckDiagonal(r,a,l,h){const f=this.getCrossCheckStateCount();let m=0;const p=this.image;for(;r>=m&&a>=m&&p.get(a-m,r-m);)f[2]++,m++;if(r<m||a<m)return!1;for(;r>=m&&a>=m&&!p.get(a-m,r-m)&&f[1]<=l;)f[1]++,m++;if(r<m||a<m||f[1]>l)return!1;for(;r>=m&&a>=m&&p.get(a-m,r-m)&&f[0]<=l;)f[0]++,m++;if(f[0]>l)return!1;const w=p.getHeight(),S=p.getWidth();for(m=1;r+m<w&&a+m<S&&p.get(a+m,r+m);)f[2]++,m++;if(r+m>=w||a+m>=S)return!1;for(;r+m<w&&a+m<S&&!p.get(a+m,r+m)&&f[3]<l;)f[3]++,m++;if(r+m>=w||a+m>=S||f[3]>=l)return!1;for(;r+m<w&&a+m<S&&p.get(a+m,r+m)&&f[4]<l;)f[4]++,m++;if(f[4]>=l)return!1;const R=f[0]+f[1]+f[2]+f[3]+f[4];return Math.abs(R-h)<2*h&&Dn.foundPatternCross(f)}crossCheckVertical(r,a,l,h){const f=this.image,m=f.getHeight(),p=this.getCrossCheckStateCount();let w=r;for(;w>=0&&f.get(a,w);)p[2]++,w--;if(w<0)return NaN;for(;w>=0&&!f.get(a,w)&&p[1]<=l;)p[1]++,w--;if(w<0||p[1]>l)return NaN;for(;w>=0&&f.get(a,w)&&p[0]<=l;)p[0]++,w--;if(p[0]>l)return NaN;for(w=r+1;w<m&&f.get(a,w);)p[2]++,w++;if(w===m)return NaN;for(;w<m&&!f.get(a,w)&&p[3]<l;)p[3]++,w++;if(w===m||p[3]>=l)return NaN;for(;w<m&&f.get(a,w)&&p[4]<l;)p[4]++,w++;if(p[4]>=l)return NaN;const S=p[0]+p[1]+p[2]+p[3]+p[4];return 5*Math.abs(S-h)>=2*h?NaN:Dn.foundPatternCross(p)?Dn.centerFromEnd(p,w):NaN}crossCheckHorizontal(r,a,l,h){const f=this.image,m=f.getWidth(),p=this.getCrossCheckStateCount();let w=r;for(;w>=0&&f.get(w,a);)p[2]++,w--;if(w<0)return NaN;for(;w>=0&&!f.get(w,a)&&p[1]<=l;)p[1]++,w--;if(w<0||p[1]>l)return NaN;for(;w>=0&&f.get(w,a)&&p[0]<=l;)p[0]++,w--;if(p[0]>l)return NaN;for(w=r+1;w<m&&f.get(w,a);)p[2]++,w++;if(w===m)return NaN;for(;w<m&&!f.get(w,a)&&p[3]<l;)p[3]++,w++;if(w===m||p[3]>=l)return NaN;for(;w<m&&f.get(w,a)&&p[4]<l;)p[4]++,w++;if(p[4]>=l)return NaN;const S=p[0]+p[1]+p[2]+p[3]+p[4];return 5*Math.abs(S-h)>=h?NaN:Dn.foundPatternCross(p)?Dn.centerFromEnd(p,w):NaN}handlePossibleCenter(r,a,l,h){const f=r[0]+r[1]+r[2]+r[3]+r[4];let m=Dn.centerFromEnd(r,l),p=this.crossCheckVertical(a,Math.floor(m),r[2],f);if(!isNaN(p)&&(m=this.crossCheckHorizontal(Math.floor(m),Math.floor(p),r[2],f),!isNaN(m)&&(!h||this.crossCheckDiagonal(Math.floor(p),Math.floor(m),r[2],f)))){const w=f/7;let S=!1;const R=this.possibleCenters;for(let B=0,P=R.length;B<P;B++){const G=R[B];if(G.aboutEquals(w,p,m)){R[B]=G.combineEstimate(p,m,w),S=!0;break}}if(!S){const B=new Ei(m,p,w);R.push(B),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(B)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let a=null;for(const l of this.possibleCenters)if(l.getCount()>=Dn.CENTER_QUORUM)if(a==null)a=l;else return this.hasSkipped=!0,Math.floor((Math.abs(a.getX()-l.getX())-Math.abs(a.getY()-l.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let r=0,a=0;const l=this.possibleCenters.length;for(const m of this.possibleCenters)m.getCount()>=Dn.CENTER_QUORUM&&(r++,a+=m.getEstimatedModuleSize());if(r<3)return!1;const h=a/l;let f=0;for(const m of this.possibleCenters)f+=Math.abs(m.getEstimatedModuleSize()-h);return f<=.05*a}selectBestPatterns(){const r=this.possibleCenters.length;if(r<3)throw new st;const a=this.possibleCenters;let l;if(r>3){let h=0,f=0;for(const w of this.possibleCenters){const S=w.getEstimatedModuleSize();h+=S,f+=S*S}l=h/r;let m=Math.sqrt(f/r-l*l);a.sort((w,S)=>{const R=Math.abs(S.getEstimatedModuleSize()-l),B=Math.abs(w.getEstimatedModuleSize()-l);return R<B?-1:R>B?1:0});const p=Math.max(.2*l,m);for(let w=0;w<a.length&&a.length>3;w++){const S=a[w];Math.abs(S.getEstimatedModuleSize()-l)>p&&(a.splice(w,1),w--)}}if(a.length>3){let h=0;for(const f of a)h+=f.getEstimatedModuleSize();l=h/a.length,a.sort((f,m)=>{if(m.getCount()===f.getCount()){const p=Math.abs(m.getEstimatedModuleSize()-l),w=Math.abs(f.getEstimatedModuleSize()-l);return p<w?1:p>w?-1:0}else return m.getCount()-f.getCount()}),a.splice(3)}return[a[0],a[1],a[2]]}}Dn.CENTER_QUORUM=2,Dn.MIN_SKIP=3,Dn.MAX_MODULES=57;class jr{constructor(r){this.image=r}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(r){this.resultPointCallback=r==null?null:r.get(Tt.NEED_RESULT_POINT_CALLBACK);const l=new Dn(this.image,this.resultPointCallback).find(r);return this.processFinderPatternInfo(l)}processFinderPatternInfo(r){const a=r.getTopLeft(),l=r.getTopRight(),h=r.getBottomLeft(),f=this.calculateModuleSize(a,l,h);if(f<1)throw new st("No pattern found in proccess finder.");const m=jr.computeDimension(a,l,h,f),p=Ft.getProvisionalVersionForDimension(m),w=p.getDimensionForVersion()-7;let S=null;if(p.getAlignmentPatternCenters().length>0){const G=l.getX()-a.getX()+h.getX(),$=l.getY()-a.getY()+h.getY(),rt=1-3/w,ht=Math.floor(a.getX()+rt*(G-a.getX())),yt=Math.floor(a.getY()+rt*($-a.getY()));for(let Lt=4;Lt<=16;Lt<<=1)try{S=this.findAlignmentInRegion(f,ht,yt,Lt);break}catch(kt){if(!(kt instanceof st))throw kt}}const R=jr.createTransform(a,l,h,S,m),B=jr.sampleGrid(this.image,R,m);let P;return S===null?P=[h,a,l]:P=[h,a,l,S],new wa(B,P)}static createTransform(r,a,l,h,f){const m=f-3.5;let p,w,S,R;return h!==null?(p=h.getX(),w=h.getY(),S=m-3,R=S):(p=a.getX()-r.getX()+l.getX(),w=a.getY()-r.getY()+l.getY(),S=m,R=m),Le.quadrilateralToQuadrilateral(3.5,3.5,m,3.5,S,R,3.5,m,r.getX(),r.getY(),a.getX(),a.getY(),p,w,l.getX(),l.getY())}static sampleGrid(r,a,l){return zn.getInstance().sampleGridWithTransform(r,l,l,a)}static computeDimension(r,a,l,h){const f=Ae.round(qt.distance(r,a)/h),m=Ae.round(qt.distance(r,l)/h);let p=Math.floor((f+m)/2)+7;switch(p&3){case 0:p++;break;case 2:p--;break;case 3:throw new st("Dimensions could be not found.")}return p}calculateModuleSize(r,a,l){return(this.calculateModuleSizeOneWay(r,a)+this.calculateModuleSizeOneWay(r,l))/2}calculateModuleSizeOneWay(r,a){const l=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(a.getX()),Math.floor(a.getY())),h=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(a.getX()),Math.floor(a.getY()),Math.floor(r.getX()),Math.floor(r.getY()));return isNaN(l)?h/7:isNaN(h)?l/7:(l+h)/14}sizeOfBlackWhiteBlackRunBothWays(r,a,l,h){let f=this.sizeOfBlackWhiteBlackRun(r,a,l,h),m=1,p=r-(l-r);p<0?(m=r/(r-p),p=0):p>=this.image.getWidth()&&(m=(this.image.getWidth()-1-r)/(p-r),p=this.image.getWidth()-1);let w=Math.floor(a-(h-a)*m);return m=1,w<0?(m=a/(a-w),w=0):w>=this.image.getHeight()&&(m=(this.image.getHeight()-1-a)/(w-a),w=this.image.getHeight()-1),p=Math.floor(r+(p-r)*m),f+=this.sizeOfBlackWhiteBlackRun(r,a,p,w),f-1}sizeOfBlackWhiteBlackRun(r,a,l,h){const f=Math.abs(h-a)>Math.abs(l-r);if(f){let G=r;r=a,a=G,G=l,l=h,h=G}const m=Math.abs(l-r),p=Math.abs(h-a);let w=-m/2;const S=r<l?1:-1,R=a<h?1:-1;let B=0;const P=l+S;for(let G=r,$=a;G!==P;G+=S){const rt=f?$:G,ht=f?G:$;if(B===1===this.image.get(rt,ht)){if(B===2)return Ae.distance(G,$,r,a);B++}if(w+=p,w>0){if($===h)break;$+=R,w-=m}}return B===2?Ae.distance(l+S,h,r,a):NaN}findAlignmentInRegion(r,a,l,h){const f=Math.floor(h*r),m=Math.max(0,a-f),p=Math.min(this.image.getWidth()-1,a+f);if(p-m<r*3)throw new st("Alignment top exceeds estimated module size.");const w=Math.max(0,l-f),S=Math.min(this.image.getHeight()-1,l+f);if(S-w<r*3)throw new st("Alignment bottom exceeds estimated module size.");return new vr(this.image,m,w,p-m,S-w,r,this.resultPointCallback).find()}}class Ai{constructor(){this.decoder=new Na}getDecoder(){return this.decoder}decode(r,a){let l,h;if(a!=null&&a.get(Tt.PURE_BARCODE)!==void 0){const w=Ai.extractPureBits(r.getBlackMatrix());l=this.decoder.decodeBitMatrix(w,a),h=Ai.NO_POINTS}else{const w=new jr(r.getBlackMatrix()).detect(a);l=this.decoder.decodeBitMatrix(w.getBits(),a),h=w.getPoints()}l.getOther()instanceof $o&&l.getOther().applyMirroredCorrection(h);const f=new Ht(l.getText(),l.getRawBytes(),void 0,h,Bt.QR_CODE,void 0),m=l.getByteSegments();m!==null&&f.putMetadata(oe.BYTE_SEGMENTS,m);const p=l.getECLevel();return p!==null&&f.putMetadata(oe.ERROR_CORRECTION_LEVEL,p),l.hasStructuredAppend()&&(f.putMetadata(oe.STRUCTURED_APPEND_SEQUENCE,l.getStructuredAppendSequenceNumber()),f.putMetadata(oe.STRUCTURED_APPEND_PARITY,l.getStructuredAppendParity())),f}reset(){}static extractPureBits(r){const a=r.getTopLeftOnBit(),l=r.getBottomRightOnBit();if(a===null||l===null)throw new st;const h=this.moduleSize(a,r);let f=a[1],m=l[1],p=a[0],w=l[0];if(p>=w||f>=m)throw new st;if(m-f!==w-p&&(w=p+(m-f),w>=r.getWidth()))throw new st;const S=Math.round((w-p+1)/h),R=Math.round((m-f+1)/h);if(S<=0||R<=0)throw new st;if(R!==S)throw new st;const B=Math.floor(h/2);f+=B,p+=B;const P=p+Math.floor((S-1)*h)-w;if(P>0){if(P>B)throw new st;p-=P}const G=f+Math.floor((R-1)*h)-m;if(G>0){if(G>B)throw new st;f-=G}const $=new Pt(S,R);for(let rt=0;rt<R;rt++){const ht=f+Math.floor(rt*h);for(let yt=0;yt<S;yt++)r.get(p+Math.floor(yt*h),ht)&&$.set(yt,rt)}return $}static moduleSize(r,a){const l=a.getHeight(),h=a.getWidth();let f=r[0],m=r[1],p=!0,w=0;for(;f<h&&m<l;){if(p!==a.get(f,m)){if(++w===5)break;p=!p}f++,m++}if(f===h||m===l)throw new st;return(f-r[0])/7}}Ai.NO_POINTS=new Array;class Kt{PDF417Common(){}static getBitCountSum(r){return Ae.sum(r)}static toIntArray(r){if(r==null||!r.length)return Kt.EMPTY_INT_ARRAY;const a=new Int32Array(r.length);let l=0;for(const h of r)a[l++]=h;return a}static getCodeword(r){const a=ft.binarySearch(Kt.SYMBOL_TABLE,r&262143);return a<0?-1:(Kt.CODEWORD_TABLE[a]-1)%Kt.NUMBER_OF_CODEWORDS}}Kt.NUMBER_OF_CODEWORDS=929,Kt.MAX_CODEWORDS_IN_BARCODE=Kt.NUMBER_OF_CODEWORDS-1,Kt.MIN_ROWS_IN_BARCODE=3,Kt.MAX_ROWS_IN_BARCODE=90,Kt.MODULES_IN_CODEWORD=17,Kt.MODULES_IN_STOP_PATTERN=18,Kt.BARS_IN_MODULE=8,Kt.EMPTY_INT_ARRAY=new Int32Array([]),Kt.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Kt.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class wi{constructor(r,a){this.bits=r,this.points=a}getBits(){return this.bits}getPoints(){return this.points}}class ee{static detectMultiple(r,a,l){let h=r.getBlackMatrix(),f=ee.detect(l,h);return f.length||(h=h.clone(),h.rotate180(),f=ee.detect(l,h)),new wi(h,f)}static detect(r,a){const l=new Array;let h=0,f=0,m=!1;for(;h<a.getHeight();){const p=ee.findVertices(a,h,f);if(p[0]==null&&p[3]==null){if(!m)break;m=!1,f=0;for(const w of l)w[1]!=null&&(h=Math.trunc(Math.max(h,w[1].getY()))),w[3]!=null&&(h=Math.max(h,Math.trunc(w[3].getY())));h+=ee.ROW_STEP;continue}if(m=!0,l.push(p),!r)break;p[2]!=null?(f=Math.trunc(p[2].getX()),h=Math.trunc(p[2].getY())):(f=Math.trunc(p[4].getX()),h=Math.trunc(p[4].getY()))}return l}static findVertices(r,a,l){const h=r.getHeight(),f=r.getWidth(),m=new Array(8);return ee.copyToResult(m,ee.findRowsWithPattern(r,h,f,a,l,ee.START_PATTERN),ee.INDEXES_START_PATTERN),m[4]!=null&&(l=Math.trunc(m[4].getX()),a=Math.trunc(m[4].getY())),ee.copyToResult(m,ee.findRowsWithPattern(r,h,f,a,l,ee.STOP_PATTERN),ee.INDEXES_STOP_PATTERN),m}static copyToResult(r,a,l){for(let h=0;h<l.length;h++)r[l[h]]=a[h]}static findRowsWithPattern(r,a,l,h,f,m){const p=new Array(4);let w=!1;const S=new Int32Array(m.length);for(;h<a;h+=ee.ROW_STEP){let B=ee.findGuardPattern(r,f,h,l,!1,m,S);if(B!=null){for(;h>0;){const P=ee.findGuardPattern(r,f,--h,l,!1,m,S);if(P!=null)B=P;else{h++;break}}p[0]=new qt(B[0],h),p[1]=new qt(B[1],h),w=!0;break}}let R=h+1;if(w){let B=0,P=Int32Array.from([Math.trunc(p[0].getX()),Math.trunc(p[1].getX())]);for(;R<a;R++){const G=ee.findGuardPattern(r,P[0],R,l,!1,m,S);if(G!=null&&Math.abs(P[0]-G[0])<ee.MAX_PATTERN_DRIFT&&Math.abs(P[1]-G[1])<ee.MAX_PATTERN_DRIFT)P=G,B=0;else{if(B>ee.SKIPPED_ROW_COUNT_MAX)break;B++}}R-=B+1,p[2]=new qt(P[0],R),p[3]=new qt(P[1],R)}return R-h<ee.BARCODE_MIN_HEIGHT&&ft.fill(p,null),p}static findGuardPattern(r,a,l,h,f,m,p){ft.fillWithin(p,0,p.length,0);let w=a,S=0;for(;r.get(w,l)&&w>0&&S++<ee.MAX_PIXEL_DRIFT;)w--;let R=w,B=0,P=m.length;for(let G=f;R<h;R++)if(r.get(R,l)!==G)p[B]++;else{if(B===P-1){if(ee.patternMatchVariance(p,m,ee.MAX_INDIVIDUAL_VARIANCE)<ee.MAX_AVG_VARIANCE)return new Int32Array([w,R]);w+=p[0]+p[1],J.arraycopy(p,2,p,0,B-1),p[B-1]=0,p[B]=0,B--}else B++;p[B]=1,G=!G}return B===P-1&&ee.patternMatchVariance(p,m,ee.MAX_INDIVIDUAL_VARIANCE)<ee.MAX_AVG_VARIANCE?new Int32Array([w,R-1]):null}static patternMatchVariance(r,a,l){let h=r.length,f=0,m=0;for(let S=0;S<h;S++)f+=r[S],m+=a[S];if(f<m)return 1/0;let p=f/m;l*=p;let w=0;for(let S=0;S<h;S++){let R=r[S],B=a[S]*p,P=R>B?R-B:B-R;if(P>l)return 1/0;w+=P}return w/f}}ee.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),ee.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),ee.MAX_AVG_VARIANCE=.42,ee.MAX_INDIVIDUAL_VARIANCE=.8,ee.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),ee.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),ee.MAX_PIXEL_DRIFT=3,ee.MAX_PATTERN_DRIFT=5,ee.SKIPPED_ROW_COUNT_MAX=25,ee.ROW_STEP=5,ee.BARCODE_MIN_HEIGHT=10;class Cn{constructor(r,a){if(a.length===0)throw new I;this.field=r;let l=a.length;if(l>1&&a[0]===0){let h=1;for(;h<l&&a[h]===0;)h++;h===l?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(l-h),J.arraycopy(a,h,this.coefficients,0,this.coefficients.length))}else this.coefficients=a}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(r){return this.coefficients[this.coefficients.length-1-r]}evaluateAt(r){if(r===0)return this.getCoefficient(0);if(r===1){let h=0;for(let f of this.coefficients)h=this.field.add(h,f);return h}let a=this.coefficients[0],l=this.coefficients.length;for(let h=1;h<l;h++)a=this.field.add(this.field.multiply(r,a),this.coefficients[h]);return a}add(r){if(!this.field.equals(r.field))throw new I("ModulusPolys do not have same ModulusGF field");if(this.isZero())return r;if(r.isZero())return this;let a=this.coefficients,l=r.coefficients;if(a.length>l.length){let m=a;a=l,l=m}let h=new Int32Array(l.length),f=l.length-a.length;J.arraycopy(l,0,h,0,f);for(let m=f;m<l.length;m++)h[m]=this.field.add(a[m-f],l[m]);return new Cn(this.field,h)}subtract(r){if(!this.field.equals(r.field))throw new I("ModulusPolys do not have same ModulusGF field");return r.isZero()?this:this.add(r.negative())}multiply(r){return r instanceof Cn?this.multiplyOther(r):this.multiplyScalar(r)}multiplyOther(r){if(!this.field.equals(r.field))throw new I("ModulusPolys do not have same ModulusGF field");if(this.isZero()||r.isZero())return new Cn(this.field,new Int32Array([0]));let a=this.coefficients,l=a.length,h=r.coefficients,f=h.length,m=new Int32Array(l+f-1);for(let p=0;p<l;p++){let w=a[p];for(let S=0;S<f;S++)m[p+S]=this.field.add(m[p+S],this.field.multiply(w,h[S]))}return new Cn(this.field,m)}negative(){let r=this.coefficients.length,a=new Int32Array(r);for(let l=0;l<r;l++)a[l]=this.field.subtract(0,this.coefficients[l]);return new Cn(this.field,a)}multiplyScalar(r){if(r===0)return new Cn(this.field,new Int32Array([0]));if(r===1)return this;let a=this.coefficients.length,l=new Int32Array(a);for(let h=0;h<a;h++)l[h]=this.field.multiply(this.coefficients[h],r);return new Cn(this.field,l)}multiplyByMonomial(r,a){if(r<0)throw new I;if(a===0)return new Cn(this.field,new Int32Array([0]));let l=this.coefficients.length,h=new Int32Array(l+r);for(let f=0;f<l;f++)h[f]=this.field.multiply(this.coefficients[f],a);return new Cn(this.field,h)}toString(){let r=new Y;for(let a=this.getDegree();a>=0;a--){let l=this.getCoefficient(a);l!==0&&(l<0?(r.append(" - "),l=-l):r.length()>0&&r.append(" + "),(a===0||l!==1)&&r.append(l),a!==0&&(a===1?r.append("x"):(r.append("x^"),r.append(a))))}return r.toString()}}class Hi{add(r,a){return(r+a)%this.modulus}subtract(r,a){return(this.modulus+r-a)%this.modulus}exp(r){return this.expTable[r]}log(r){if(r===0)throw new I;return this.logTable[r]}inverse(r){if(r===0)throw new Vi;return this.expTable[this.modulus-this.logTable[r]-1]}multiply(r,a){return r===0||a===0?0:this.expTable[(this.logTable[r]+this.logTable[a])%(this.modulus-1)]}getSize(){return this.modulus}equals(r){return r===this}}class Gi extends Hi{constructor(r,a){super(),this.modulus=r,this.expTable=new Int32Array(r),this.logTable=new Int32Array(r);let l=1;for(let h=0;h<r;h++)this.expTable[h]=l,l=l*a%r;for(let h=0;h<r-1;h++)this.logTable[this.expTable[h]]=h;this.zero=new Cn(this,new Int32Array([0])),this.one=new Cn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(r,a){if(r<0)throw new I;if(a===0)return this.zero;let l=new Int32Array(r+1);return l[0]=a,new Cn(this,l)}}Gi.PDF417_GF=new Gi(Kt.NUMBER_OF_CODEWORDS,3);class qi{constructor(){this.field=Gi.PDF417_GF}decode(r,a,l){let h=new Cn(this.field,r),f=new Int32Array(a),m=!1;for(let $=a;$>0;$--){let rt=h.evaluateAt(this.field.exp($));f[a-$]=rt,rt!==0&&(m=!0)}if(!m)return 0;let p=this.field.getOne();if(l!=null)for(const $ of l){let rt=this.field.exp(r.length-1-$),ht=new Cn(this.field,new Int32Array([this.field.subtract(0,rt),1]));p=p.multiply(ht)}let w=new Cn(this.field,f),S=this.runEuclideanAlgorithm(this.field.buildMonomial(a,1),w,a),R=S[0],B=S[1],P=this.findErrorLocations(R),G=this.findErrorMagnitudes(B,R,P);for(let $=0;$<P.length;$++){let rt=r.length-1-this.field.log(P[$]);if(rt<0)throw H.getChecksumInstance();r[rt]=this.field.subtract(r[rt],G[$])}return P.length}runEuclideanAlgorithm(r,a,l){if(r.getDegree()<a.getDegree()){let P=r;r=a,a=P}let h=r,f=a,m=this.field.getZero(),p=this.field.getOne();for(;f.getDegree()>=Math.round(l/2);){let P=h,G=m;if(h=f,m=p,h.isZero())throw H.getChecksumInstance();f=P;let $=this.field.getZero(),rt=h.getCoefficient(h.getDegree()),ht=this.field.inverse(rt);for(;f.getDegree()>=h.getDegree()&&!f.isZero();){let yt=f.getDegree()-h.getDegree(),Lt=this.field.multiply(f.getCoefficient(f.getDegree()),ht);$=$.add(this.field.buildMonomial(yt,Lt)),f=f.subtract(h.multiplyByMonomial(yt,Lt))}p=$.multiply(m).subtract(G).negative()}let w=p.getCoefficient(0);if(w===0)throw H.getChecksumInstance();let S=this.field.inverse(w),R=p.multiply(S),B=f.multiply(S);return[R,B]}findErrorLocations(r){let a=r.getDegree(),l=new Int32Array(a),h=0;for(let f=1;f<this.field.getSize()&&h<a;f++)r.evaluateAt(f)===0&&(l[h]=this.field.inverse(f),h++);if(h!==a)throw H.getChecksumInstance();return l}findErrorMagnitudes(r,a,l){let h=a.getDegree(),f=new Int32Array(h);for(let S=1;S<=h;S++)f[h-S]=this.field.multiply(S,a.getCoefficient(S));let m=new Cn(this.field,f),p=l.length,w=new Int32Array(p);for(let S=0;S<p;S++){let R=this.field.inverse(l[S]),B=this.field.subtract(0,r.evaluateAt(R)),P=this.field.inverse(m.evaluateAt(R));w[S]=this.field.multiply(B,P)}return w}}class _i{constructor(r,a,l,h,f){r instanceof _i?this.constructor_2(r):this.constructor_1(r,a,l,h,f)}constructor_1(r,a,l,h,f){const m=a==null||l==null,p=h==null||f==null;if(m&&p)throw new st;m?(a=new qt(0,h.getY()),l=new qt(0,f.getY())):p&&(h=new qt(r.getWidth()-1,a.getY()),f=new qt(r.getWidth()-1,l.getY())),this.image=r,this.topLeft=a,this.bottomLeft=l,this.topRight=h,this.bottomRight=f,this.minX=Math.trunc(Math.min(a.getX(),l.getX())),this.maxX=Math.trunc(Math.max(h.getX(),f.getX())),this.minY=Math.trunc(Math.min(a.getY(),h.getY())),this.maxY=Math.trunc(Math.max(l.getY(),f.getY()))}constructor_2(r){this.image=r.image,this.topLeft=r.getTopLeft(),this.bottomLeft=r.getBottomLeft(),this.topRight=r.getTopRight(),this.bottomRight=r.getBottomRight(),this.minX=r.getMinX(),this.maxX=r.getMaxX(),this.minY=r.getMinY(),this.maxY=r.getMaxY()}static merge(r,a){return r==null?a:a==null?r:new _i(r.image,r.topLeft,r.bottomLeft,a.topRight,a.bottomRight)}addMissingRows(r,a,l){let h=this.topLeft,f=this.bottomLeft,m=this.topRight,p=this.bottomRight;if(r>0){let w=l?this.topLeft:this.topRight,S=Math.trunc(w.getY()-r);S<0&&(S=0);let R=new qt(w.getX(),S);l?h=R:m=R}if(a>0){let w=l?this.bottomLeft:this.bottomRight,S=Math.trunc(w.getY()+a);S>=this.image.getHeight()&&(S=this.image.getHeight()-1);let R=new qt(w.getX(),S);l?f=R:p=R}return new _i(this.image,h,f,m,p)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Yi{constructor(r,a,l,h){this.columnCount=r,this.errorCorrectionLevel=h,this.rowCountUpperPart=a,this.rowCountLowerPart=l,this.rowCount=a+l}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class zr{constructor(){this.buffer=""}static form(r,a){let l=-1;function h(m,p,w,S,R,B){if(m==="%%")return"%";if(a[++l]===void 0)return;m=S?parseInt(S.substr(1)):void 0;let P=R?parseInt(R.substr(1)):void 0,G;switch(B){case"s":G=a[l];break;case"c":G=a[l][0];break;case"f":G=parseFloat(a[l]).toFixed(m);break;case"p":G=parseFloat(a[l]).toPrecision(m);break;case"e":G=parseFloat(a[l]).toExponential(m);break;case"x":G=parseInt(a[l]).toString(P||16);break;case"d":G=parseFloat(parseInt(a[l],P||10).toPrecision(m)).toFixed(0);break}G=typeof G=="object"?JSON.stringify(G):(+G).toString(P);let $=parseInt(w),rt=w&&w[0]+""=="0"?"0":" ";for(;G.length<$;)G=p!==void 0?G+rt:rt+G;return G}let f=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(f,h)}format(r,...a){this.buffer+=zr.form(r,a)}toString(){return this.buffer}}class ls{constructor(r){this.boundingBox=new _i(r),this.codewords=new Array(r.getMaxY()-r.getMinY()+1)}getCodewordNearby(r){let a=this.getCodeword(r);if(a!=null)return a;for(let l=1;l<ls.MAX_NEARBY_DISTANCE;l++){let h=this.imageRowToCodewordIndex(r)-l;if(h>=0&&(a=this.codewords[h],a!=null)||(h=this.imageRowToCodewordIndex(r)+l,h<this.codewords.length&&(a=this.codewords[h],a!=null)))return a}return null}imageRowToCodewordIndex(r){return r-this.boundingBox.getMinY()}setCodeword(r,a){this.codewords[this.imageRowToCodewordIndex(r)]=a}getCodeword(r){return this.codewords[this.imageRowToCodewordIndex(r)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const r=new zr;let a=0;for(const l of this.codewords){if(l==null){r.format("%3d:    |   %n",a++);continue}r.format("%3d: %3d|%3d%n",a++,l.getRowNumber(),l.getValue())}return r.toString()}}ls.MAX_NEARBY_DISTANCE=5;class Mn{constructor(){this.values=new Map}setValue(r){r=Math.trunc(r);let a=this.values.get(r);a==null&&(a=0),a++,this.values.set(r,a)}getValue(){let r=-1,a=new Array;for(const[l,h]of this.values.entries()){const f={getKey:()=>l,getValue:()=>h};f.getValue()>r?(r=f.getValue(),a=[],a.push(f.getKey())):f.getValue()===r&&a.push(f.getKey())}return Kt.toIntArray(a)}getConfidence(r){return this.values.get(r)}}class Ue extends ls{constructor(r,a){super(r),this._isLeft=a}setRowNumbers(){for(let r of this.getCodewords())r?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(r){let a=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(a,r);let l=this.getBoundingBox(),h=this._isLeft?l.getTopLeft():l.getTopRight(),f=this._isLeft?l.getBottomLeft():l.getBottomRight(),m=this.imageRowToCodewordIndex(Math.trunc(h.getY())),p=this.imageRowToCodewordIndex(Math.trunc(f.getY())),w=-1,S=1,R=0;for(let B=m;B<p;B++){if(a[B]==null)continue;let P=a[B],G=P.getRowNumber()-w;if(G===0)R++;else if(G===1)S=Math.max(S,R),R=1,w=P.getRowNumber();else if(G<0||P.getRowNumber()>=r.getRowCount()||G>B)a[B]=null;else{let $;S>2?$=(S-2)*G:$=G;let rt=$>=B;for(let ht=1;ht<=$&&!rt;ht++)rt=a[B-ht]!=null;rt?a[B]=null:(w=P.getRowNumber(),R=1)}}}getRowHeights(){let r=this.getBarcodeMetadata();if(r==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(r);let a=new Int32Array(r.getRowCount());for(let l of this.getCodewords())if(l!=null){let h=l.getRowNumber();if(h>=a.length)continue;a[h]++}return a}adjustIncompleteIndicatorColumnRowNumbers(r){let a=this.getBoundingBox(),l=this._isLeft?a.getTopLeft():a.getTopRight(),h=this._isLeft?a.getBottomLeft():a.getBottomRight(),f=this.imageRowToCodewordIndex(Math.trunc(l.getY())),m=this.imageRowToCodewordIndex(Math.trunc(h.getY())),p=this.getCodewords(),w=-1;for(let S=f;S<m;S++){if(p[S]==null)continue;let R=p[S];R.setRowNumberAsRowIndicatorColumn();let B=R.getRowNumber()-w;B===0||(B===1?w=R.getRowNumber():R.getRowNumber()>=r.getRowCount()?p[S]=null:w=R.getRowNumber())}}getBarcodeMetadata(){let r=this.getCodewords(),a=new Mn,l=new Mn,h=new Mn,f=new Mn;for(let p of r){if(p==null)continue;p.setRowNumberAsRowIndicatorColumn();let w=p.getValue()%30,S=p.getRowNumber();switch(this._isLeft||(S+=2),S%3){case 0:l.setValue(w*3+1);break;case 1:f.setValue(w/3),h.setValue(w%3);break;case 2:a.setValue(w+1);break}}if(a.getValue().length===0||l.getValue().length===0||h.getValue().length===0||f.getValue().length===0||a.getValue()[0]<1||l.getValue()[0]+h.getValue()[0]<Kt.MIN_ROWS_IN_BARCODE||l.getValue()[0]+h.getValue()[0]>Kt.MAX_ROWS_IN_BARCODE)return null;let m=new Yi(a.getValue()[0],l.getValue()[0],h.getValue()[0],f.getValue()[0]);return this.removeIncorrectCodewords(r,m),m}removeIncorrectCodewords(r,a){for(let l=0;l<r.length;l++){let h=r[l];if(r[l]==null)continue;let f=h.getValue()%30,m=h.getRowNumber();if(m>a.getRowCount()){r[l]=null;continue}switch(this._isLeft||(m+=2),m%3){case 0:f*3+1!==a.getRowCountUpperPart()&&(r[l]=null);break;case 1:(Math.trunc(f/3)!==a.getErrorCorrectionLevel()||f%3!==a.getRowCountLowerPart())&&(r[l]=null);break;case 2:f+1!==a.getColumnCount()&&(r[l]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Xi{constructor(r,a){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=r,this.barcodeColumnCount=r.getColumnCount(),this.boundingBox=a,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let r=Kt.MAX_CODEWORDS_IN_BARCODE,a;do a=r,r=this.adjustRowNumbersAndGetCount();while(r>0&&r<a);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(r){r?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let r=this.adjustRowNumbersByRow();if(r===0)return 0;for(let a=1;a<this.barcodeColumnCount+1;a++){let l=this.detectionResultColumns[a].getCodewords();for(let h=0;h<l.length;h++)l[h]!=null&&(l[h].hasValidRowNumber()||this.adjustRowNumbers(a,h,l))}return r}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let r=this.detectionResultColumns[0].getCodewords(),a=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<r.length;l++)if(r[l]!=null&&a[l]!=null&&r[l].getRowNumber()===a[l].getRowNumber())for(let h=1;h<=this.barcodeColumnCount;h++){let f=this.detectionResultColumns[h].getCodewords()[l];f!=null&&(f.setRowNumber(r[l].getRowNumber()),f.hasValidRowNumber()||(this.detectionResultColumns[h].getCodewords()[l]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let r=0,a=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<a.length;l++){if(a[l]==null)continue;let h=a[l].getRowNumber(),f=0;for(let m=this.barcodeColumnCount+1;m>0&&f<this.ADJUST_ROW_NUMBER_SKIP;m--){let p=this.detectionResultColumns[m].getCodewords()[l];p!=null&&(f=Xi.adjustRowNumberIfValid(h,f,p),p.hasValidRowNumber()||r++)}}return r}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let r=0,a=this.detectionResultColumns[0].getCodewords();for(let l=0;l<a.length;l++){if(a[l]==null)continue;let h=a[l].getRowNumber(),f=0;for(let m=1;m<this.barcodeColumnCount+1&&f<this.ADJUST_ROW_NUMBER_SKIP;m++){let p=this.detectionResultColumns[m].getCodewords()[l];p!=null&&(f=Xi.adjustRowNumberIfValid(h,f,p),p.hasValidRowNumber()||r++)}}return r}static adjustRowNumberIfValid(r,a,l){return l==null||l.hasValidRowNumber()||(l.isValidRowNumber(r)?(l.setRowNumber(r),a=0):++a),a}adjustRowNumbers(r,a,l){if(!this.detectionResultColumns[r-1])return;let h=l[a],f=this.detectionResultColumns[r-1].getCodewords(),m=f;this.detectionResultColumns[r+1]!=null&&(m=this.detectionResultColumns[r+1].getCodewords());let p=new Array(14);p[2]=f[a],p[3]=m[a],a>0&&(p[0]=l[a-1],p[4]=f[a-1],p[5]=m[a-1]),a>1&&(p[8]=l[a-2],p[10]=f[a-2],p[11]=m[a-2]),a<l.length-1&&(p[1]=l[a+1],p[6]=f[a+1],p[7]=m[a+1]),a<l.length-2&&(p[9]=l[a+2],p[12]=f[a+2],p[13]=m[a+2]);for(let w of p)if(Xi.adjustRowNumber(h,w))return}static adjustRowNumber(r,a){return a==null?!1:a.hasValidRowNumber()&&a.getBucket()===r.getBucket()?(r.setRowNumber(a.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(r){this.boundingBox=r}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(r,a){this.detectionResultColumns[r]=a}getDetectionResultColumn(r){return this.detectionResultColumns[r]}toString(){let r=this.detectionResultColumns[0];r==null&&(r=this.detectionResultColumns[this.barcodeColumnCount+1]);let a=new zr;for(let l=0;l<r.getCodewords().length;l++){a.format("CW %3d:",l);for(let h=0;h<this.barcodeColumnCount+2;h++){if(this.detectionResultColumns[h]==null){a.format("    |   ");continue}let f=this.detectionResultColumns[h].getCodewords()[l];if(f==null){a.format("    |   ");continue}a.format(" %3d|%3d",f.getRowNumber(),f.getValue())}a.format("%n")}return a.toString()}}class Ti{constructor(r,a,l,h){this.rowNumber=Ti.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(r),this.endX=Math.trunc(a),this.bucket=Math.trunc(l),this.value=Math.trunc(h)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(r){return r!==Ti.BARCODE_ROW_UNKNOWN&&this.bucket===r%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(r){this.rowNumber=r}toString(){return this.rowNumber+"|"+this.value}}Ti.BARCODE_ROW_UNKNOWN=-1;class dr{static initialize(){for(let r=0;r<Kt.SYMBOL_TABLE.length;r++){let a=Kt.SYMBOL_TABLE[r],l=a&1;for(let h=0;h<Kt.BARS_IN_MODULE;h++){let f=0;for(;(a&1)===l;)f+=1,a>>=1;l=a&1,dr.RATIOS_TABLE[r]||(dr.RATIOS_TABLE[r]=new Array(Kt.BARS_IN_MODULE)),dr.RATIOS_TABLE[r][Kt.BARS_IN_MODULE-h-1]=Math.fround(f/Kt.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(r){let a=dr.getDecodedCodewordValue(dr.sampleBitCounts(r));return a!==-1?a:dr.getClosestDecodedValue(r)}static sampleBitCounts(r){let a=Ae.sum(r),l=new Int32Array(Kt.BARS_IN_MODULE),h=0,f=0;for(let m=0;m<Kt.MODULES_IN_CODEWORD;m++){let p=a/(2*Kt.MODULES_IN_CODEWORD)+m*a/Kt.MODULES_IN_CODEWORD;f+r[h]<=p&&(f+=r[h],h++),l[h]++}return l}static getDecodedCodewordValue(r){let a=dr.getBitValue(r);return Kt.getCodeword(a)===-1?-1:a}static getBitValue(r){let a=0;for(let l=0;l<r.length;l++)for(let h=0;h<r[l];h++)a=a<<1|(l%2===0?1:0);return Math.trunc(a)}static getClosestDecodedValue(r){let a=Ae.sum(r),l=new Array(Kt.BARS_IN_MODULE);if(a>1)for(let m=0;m<l.length;m++)l[m]=Math.fround(r[m]/a);let h=is.MAX_VALUE,f=-1;this.bSymbolTableReady||dr.initialize();for(let m=0;m<dr.RATIOS_TABLE.length;m++){let p=0,w=dr.RATIOS_TABLE[m];for(let S=0;S<Kt.BARS_IN_MODULE;S++){let R=Math.fround(w[S]-l[S]);if(p+=Math.fround(R*R),p>=h)break}p<h&&(h=p,f=Kt.SYMBOL_TABLE[m])}return f}}dr.bSymbolTableReady=!1,dr.RATIOS_TABLE=new Array(Kt.SYMBOL_TABLE.length).map(L=>new Array(Kt.BARS_IN_MODULE));class Zs{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(r){this.segmentIndex=r}getFileId(){return this.fileId}setFileId(r){this.fileId=r}getOptionalData(){return this.optionalData}setOptionalData(r){this.optionalData=r}isLastSegment(){return this.lastSegment}setLastSegment(r){this.lastSegment=r}getSegmentCount(){return this.segmentCount}setSegmentCount(r){this.segmentCount=r}getSender(){return this.sender||null}setSender(r){this.sender=r}getAddressee(){return this.addressee||null}setAddressee(r){this.addressee=r}getFileName(){return this.fileName}setFileName(r){this.fileName=r}getFileSize(){return this.fileSize}setFileSize(r){this.fileSize=r}getChecksum(){return this.checksum}setChecksum(r){this.checksum=r}getTimestamp(){return this.timestamp}setTimestamp(r){this.timestamp=r}}class Js{static parseLong(r,a=void 0){return parseInt(r,a)}}class Ci extends x{}Ci.kind="NullPointerException";class $s{writeBytes(r){this.writeBytesOffset(r,0,r.length)}writeBytesOffset(r,a,l){if(r==null)throw new Ci;if(a<0||a>r.length||l<0||a+l>r.length||a+l<0)throw new q;if(l===0)return;for(let h=0;h<l;h++)this.write(r[a+h])}flush(){}close(){}}class si extends x{}class tl extends $s{constructor(r=32){if(super(),this.count=0,r<0)throw new I("Negative initial size: "+r);this.buf=new Uint8Array(r)}ensureCapacity(r){r-this.buf.length>0&&this.grow(r)}grow(r){let l=this.buf.length<<1;if(l-r<0&&(l=r),l<0){if(r<0)throw new si;l=nt.MAX_VALUE}this.buf=ft.copyOfUint8Array(this.buf,l)}write(r){this.ensureCapacity(this.count+1),this.buf[this.count]=r,this.count+=1}writeBytesOffset(r,a,l){if(a<0||a>r.length||l<0||a+l-r.length>0)throw new q;this.ensureCapacity(this.count+l),J.arraycopy(r,a,this.buf,this.count,l),this.count+=l}writeTo(r){r.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return ft.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(r){return r?typeof r=="string"?this.toString_string(r):this.toString_number(r):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(r){return new String(this.buf).toString()}toString_number(r){return new String(this.buf).toString()}close(){}}var He;(function(L){L[L.ALPHA=0]="ALPHA",L[L.LOWER=1]="LOWER",L[L.MIXED=2]="MIXED",L[L.PUNCT=3]="PUNCT",L[L.ALPHA_SHIFT=4]="ALPHA_SHIFT",L[L.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(He||(He={}));function _s(){if(typeof window<"u")return window.BigInt||null;if(typeof wh<"u")return wh.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let cs;function ai(L){if(typeof cs>"u"&&(cs=_s()),cs===null)throw new Error("BigInt is not supported!");return cs(L)}function Da(){let L=[];L[0]=ai(1);let r=ai(900);L[1]=r;for(let a=2;a<16;a++)L[a]=L[a-1]*r;return L}class Et{static decode(r,a){let l=new Y(""),h=k.ISO8859_1;l.enableDecoding(h);let f=1,m=r[f++],p=new Zs;for(;f<r[0];){switch(m){case Et.TEXT_COMPACTION_MODE_LATCH:f=Et.textCompaction(r,f,l);break;case Et.BYTE_COMPACTION_MODE_LATCH:case Et.BYTE_COMPACTION_MODE_LATCH_6:f=Et.byteCompaction(m,r,h,f,l);break;case Et.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(r[f++]);break;case Et.NUMERIC_COMPACTION_MODE_LATCH:f=Et.numericCompaction(r,f,l);break;case Et.ECI_CHARSET:k.getCharacterSetECIByValue(r[f++]);break;case Et.ECI_GENERAL_PURPOSE:f+=2;break;case Et.ECI_USER_DEFINED:f++;break;case Et.BEGIN_MACRO_PDF417_CONTROL_BLOCK:f=Et.decodeMacroBlock(r,f,p);break;case Et.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Et.MACRO_PDF417_TERMINATOR:throw new U;default:f--,f=Et.textCompaction(r,f,l);break}if(f<r.length)m=r[f++];else throw U.getFormatInstance()}if(l.length()===0)throw U.getFormatInstance();let w=new Pr(null,l.toString(),null,a);return w.setOther(p),w}static decodeMacroBlock(r,a,l){if(a+Et.NUMBER_OF_SEQUENCE_CODEWORDS>r[0])throw U.getFormatInstance();let h=new Int32Array(Et.NUMBER_OF_SEQUENCE_CODEWORDS);for(let p=0;p<Et.NUMBER_OF_SEQUENCE_CODEWORDS;p++,a++)h[p]=r[a];l.setSegmentIndex(nt.parseInt(Et.decodeBase900toBase10(h,Et.NUMBER_OF_SEQUENCE_CODEWORDS)));let f=new Y;a=Et.textCompaction(r,a,f),l.setFileId(f.toString());let m=-1;for(r[a]===Et.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(m=a+1);a<r[0];)switch(r[a]){case Et.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(a++,r[a]){case Et.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let p=new Y;a=Et.textCompaction(r,a+1,p),l.setFileName(p.toString());break;case Et.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let w=new Y;a=Et.textCompaction(r,a+1,w),l.setSender(w.toString());break;case Et.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let S=new Y;a=Et.textCompaction(r,a+1,S),l.setAddressee(S.toString());break;case Et.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let R=new Y;a=Et.numericCompaction(r,a+1,R),l.setSegmentCount(nt.parseInt(R.toString()));break;case Et.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let B=new Y;a=Et.numericCompaction(r,a+1,B),l.setTimestamp(Js.parseLong(B.toString()));break;case Et.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let P=new Y;a=Et.numericCompaction(r,a+1,P),l.setChecksum(nt.parseInt(P.toString()));break;case Et.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let G=new Y;a=Et.numericCompaction(r,a+1,G),l.setFileSize(Js.parseLong(G.toString()));break;default:throw U.getFormatInstance()}break;case Et.MACRO_PDF417_TERMINATOR:a++,l.setLastSegment(!0);break;default:throw U.getFormatInstance()}if(m!==-1){let p=a-m;l.isLastSegment()&&p--,l.setOptionalData(ft.copyOfRange(r,m,m+p))}return a}static textCompaction(r,a,l){let h=new Int32Array((r[0]-a)*2),f=new Int32Array((r[0]-a)*2),m=0,p=!1;for(;a<r[0]&&!p;){let w=r[a++];if(w<Et.TEXT_COMPACTION_MODE_LATCH)h[m]=w/30,h[m+1]=w%30,m+=2;else switch(w){case Et.TEXT_COMPACTION_MODE_LATCH:h[m++]=Et.TEXT_COMPACTION_MODE_LATCH;break;case Et.BYTE_COMPACTION_MODE_LATCH:case Et.BYTE_COMPACTION_MODE_LATCH_6:case Et.NUMERIC_COMPACTION_MODE_LATCH:case Et.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Et.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Et.MACRO_PDF417_TERMINATOR:a--,p=!0;break;case Et.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h[m]=Et.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,w=r[a++],f[m]=w,m++;break}}return Et.decodeTextCompaction(h,f,m,l),a}static decodeTextCompaction(r,a,l,h){let f=He.ALPHA,m=He.ALPHA,p=0;for(;p<l;){let w=r[p],S="";switch(f){case He.ALPHA:if(w<26)S=String.fromCharCode(65+w);else switch(w){case 26:S=" ";break;case Et.LL:f=He.LOWER;break;case Et.ML:f=He.MIXED;break;case Et.PS:m=f,f=He.PUNCT_SHIFT;break;case Et.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(a[p]);break;case Et.TEXT_COMPACTION_MODE_LATCH:f=He.ALPHA;break}break;case He.LOWER:if(w<26)S=String.fromCharCode(97+w);else switch(w){case 26:S=" ";break;case Et.AS:m=f,f=He.ALPHA_SHIFT;break;case Et.ML:f=He.MIXED;break;case Et.PS:m=f,f=He.PUNCT_SHIFT;break;case Et.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(a[p]);break;case Et.TEXT_COMPACTION_MODE_LATCH:f=He.ALPHA;break}break;case He.MIXED:if(w<Et.PL)S=Et.MIXED_CHARS[w];else switch(w){case Et.PL:f=He.PUNCT;break;case 26:S=" ";break;case Et.LL:f=He.LOWER;break;case Et.AL:f=He.ALPHA;break;case Et.PS:m=f,f=He.PUNCT_SHIFT;break;case Et.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(a[p]);break;case Et.TEXT_COMPACTION_MODE_LATCH:f=He.ALPHA;break}break;case He.PUNCT:if(w<Et.PAL)S=Et.PUNCT_CHARS[w];else switch(w){case Et.PAL:f=He.ALPHA;break;case Et.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(a[p]);break;case Et.TEXT_COMPACTION_MODE_LATCH:f=He.ALPHA;break}break;case He.ALPHA_SHIFT:if(f=m,w<26)S=String.fromCharCode(65+w);else switch(w){case 26:S=" ";break;case Et.TEXT_COMPACTION_MODE_LATCH:f=He.ALPHA;break}break;case He.PUNCT_SHIFT:if(f=m,w<Et.PAL)S=Et.PUNCT_CHARS[w];else switch(w){case Et.PAL:f=He.ALPHA;break;case Et.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(a[p]);break;case Et.TEXT_COMPACTION_MODE_LATCH:f=He.ALPHA;break}break}S!==""&&h.append(S),p++}}static byteCompaction(r,a,l,h,f){let m=new tl,p=0,w=0,S=!1;switch(r){case Et.BYTE_COMPACTION_MODE_LATCH:let R=new Int32Array(6),B=a[h++];for(;h<a[0]&&!S;)switch(R[p++]=B,w=900*w+B,B=a[h++],B){case Et.TEXT_COMPACTION_MODE_LATCH:case Et.BYTE_COMPACTION_MODE_LATCH:case Et.NUMERIC_COMPACTION_MODE_LATCH:case Et.BYTE_COMPACTION_MODE_LATCH_6:case Et.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Et.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Et.MACRO_PDF417_TERMINATOR:h--,S=!0;break;default:if(p%5===0&&p>0){for(let P=0;P<6;++P)m.write(Number(ai(w)>>ai(8*(5-P))));w=0,p=0}break}h===a[0]&&B<Et.TEXT_COMPACTION_MODE_LATCH&&(R[p++]=B);for(let P=0;P<p;P++)m.write(R[P]);break;case Et.BYTE_COMPACTION_MODE_LATCH_6:for(;h<a[0]&&!S;){let P=a[h++];if(P<Et.TEXT_COMPACTION_MODE_LATCH)p++,w=900*w+P;else switch(P){case Et.TEXT_COMPACTION_MODE_LATCH:case Et.BYTE_COMPACTION_MODE_LATCH:case Et.NUMERIC_COMPACTION_MODE_LATCH:case Et.BYTE_COMPACTION_MODE_LATCH_6:case Et.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Et.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Et.MACRO_PDF417_TERMINATOR:h--,S=!0;break}if(p%5===0&&p>0){for(let G=0;G<6;++G)m.write(Number(ai(w)>>ai(8*(5-G))));w=0,p=0}}break}return f.append(tt.decode(m.toByteArray(),l)),h}static numericCompaction(r,a,l){let h=0,f=!1,m=new Int32Array(Et.MAX_NUMERIC_CODEWORDS);for(;a<r[0]&&!f;){let p=r[a++];if(a===r[0]&&(f=!0),p<Et.TEXT_COMPACTION_MODE_LATCH)m[h]=p,h++;else switch(p){case Et.TEXT_COMPACTION_MODE_LATCH:case Et.BYTE_COMPACTION_MODE_LATCH:case Et.BYTE_COMPACTION_MODE_LATCH_6:case Et.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Et.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Et.MACRO_PDF417_TERMINATOR:a--,f=!0;break}(h%Et.MAX_NUMERIC_CODEWORDS===0||p===Et.NUMERIC_COMPACTION_MODE_LATCH||f)&&h>0&&(l.append(Et.decodeBase900toBase10(m,h)),h=0)}return a}static decodeBase900toBase10(r,a){let l=ai(0);for(let f=0;f<a;f++)l+=Et.EXP900[a-f-1]*ai(r[f]);let h=l.toString();if(h.charAt(0)!=="1")throw new U;return h.substring(1)}}Et.TEXT_COMPACTION_MODE_LATCH=900,Et.BYTE_COMPACTION_MODE_LATCH=901,Et.NUMERIC_COMPACTION_MODE_LATCH=902,Et.BYTE_COMPACTION_MODE_LATCH_6=924,Et.ECI_USER_DEFINED=925,Et.ECI_GENERAL_PURPOSE=926,Et.ECI_CHARSET=927,Et.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,Et.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,Et.MACRO_PDF417_TERMINATOR=922,Et.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,Et.MAX_NUMERIC_CODEWORDS=15,Et.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,Et.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,Et.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,Et.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,Et.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,Et.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,Et.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,Et.PL=25,Et.LL=27,Et.AS=27,Et.ML=28,Et.AL=28,Et.PS=29,Et.PAL=29,Et.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,Et.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",Et.EXP900=_s()?Da():[],Et.NUMBER_OF_SEQUENCE_CODEWORDS=2;class ae{constructor(){}static decode(r,a,l,h,f,m,p){let w=new _i(r,a,l,h,f),S=null,R=null,B;for(let $=!0;;$=!1){if(a!=null&&(S=ae.getRowIndicatorColumn(r,w,a,!0,m,p)),h!=null&&(R=ae.getRowIndicatorColumn(r,w,h,!1,m,p)),B=ae.merge(S,R),B==null)throw st.getNotFoundInstance();let rt=B.getBoundingBox();if($&&rt!=null&&(rt.getMinY()<w.getMinY()||rt.getMaxY()>w.getMaxY()))w=rt;else break}B.setBoundingBox(w);let P=B.getBarcodeColumnCount()+1;B.setDetectionResultColumn(0,S),B.setDetectionResultColumn(P,R);let G=S!=null;for(let $=1;$<=P;$++){let rt=G?$:P-$;if(B.getDetectionResultColumn(rt)!==void 0)continue;let ht;rt===0||rt===P?ht=new Ue(w,rt===0):ht=new ls(w),B.setDetectionResultColumn(rt,ht);let yt=-1,Lt=yt;for(let kt=w.getMinY();kt<=w.getMaxY();kt++){if(yt=ae.getStartColumn(B,rt,kt,G),yt<0||yt>w.getMaxX()){if(Lt===-1)continue;yt=Lt}let Dt=ae.detectCodeword(r,w.getMinX(),w.getMaxX(),G,yt,kt,m,p);Dt!=null&&(ht.setCodeword(kt,Dt),Lt=yt,m=Math.min(m,Dt.getWidth()),p=Math.max(p,Dt.getWidth()))}}return ae.createDecoderResult(B)}static merge(r,a){if(r==null&&a==null)return null;let l=ae.getBarcodeMetadata(r,a);if(l==null)return null;let h=_i.merge(ae.adjustBoundingBox(r),ae.adjustBoundingBox(a));return new Xi(l,h)}static adjustBoundingBox(r){if(r==null)return null;let a=r.getRowHeights();if(a==null)return null;let l=ae.getMax(a),h=0;for(let p of a)if(h+=l-p,p>0)break;let f=r.getCodewords();for(let p=0;h>0&&f[p]==null;p++)h--;let m=0;for(let p=a.length-1;p>=0&&(m+=l-a[p],!(a[p]>0));p--);for(let p=f.length-1;m>0&&f[p]==null;p--)m--;return r.getBoundingBox().addMissingRows(h,m,r.isLeft())}static getMax(r){let a=-1;for(let l of r)a=Math.max(a,l);return a}static getBarcodeMetadata(r,a){let l;if(r==null||(l=r.getBarcodeMetadata())==null)return a==null?null:a.getBarcodeMetadata();let h;return a==null||(h=a.getBarcodeMetadata())==null?l:l.getColumnCount()!==h.getColumnCount()&&l.getErrorCorrectionLevel()!==h.getErrorCorrectionLevel()&&l.getRowCount()!==h.getRowCount()?null:l}static getRowIndicatorColumn(r,a,l,h,f,m){let p=new Ue(a,h);for(let w=0;w<2;w++){let S=w===0?1:-1,R=Math.trunc(Math.trunc(l.getX()));for(let B=Math.trunc(Math.trunc(l.getY()));B<=a.getMaxY()&&B>=a.getMinY();B+=S){let P=ae.detectCodeword(r,0,r.getWidth(),h,R,B,f,m);P!=null&&(p.setCodeword(B,P),h?R=P.getStartX():R=P.getEndX())}}return p}static adjustCodewordCount(r,a){let l=a[0][1],h=l.getValue(),f=r.getBarcodeColumnCount()*r.getBarcodeRowCount()-ae.getNumberOfECCodeWords(r.getBarcodeECLevel());if(h.length===0){if(f<1||f>Kt.MAX_CODEWORDS_IN_BARCODE)throw st.getNotFoundInstance();l.setValue(f)}else h[0]!==f&&l.setValue(f)}static createDecoderResult(r){let a=ae.createBarcodeMatrix(r);ae.adjustCodewordCount(r,a);let l=new Array,h=new Int32Array(r.getBarcodeRowCount()*r.getBarcodeColumnCount()),f=[],m=new Array;for(let w=0;w<r.getBarcodeRowCount();w++)for(let S=0;S<r.getBarcodeColumnCount();S++){let R=a[w][S+1].getValue(),B=w*r.getBarcodeColumnCount()+S;R.length===0?l.push(B):R.length===1?h[B]=R[0]:(m.push(B),f.push(R))}let p=new Array(f.length);for(let w=0;w<p.length;w++)p[w]=f[w];return ae.createDecoderResultFromAmbiguousValues(r.getBarcodeECLevel(),h,Kt.toIntArray(l),Kt.toIntArray(m),p)}static createDecoderResultFromAmbiguousValues(r,a,l,h,f){let m=new Int32Array(h.length),p=100;for(;p-- >0;){for(let w=0;w<m.length;w++)a[h[w]]=f[w][m[w]];try{return ae.decodeCodewords(a,r,l)}catch(w){if(!(w instanceof H))throw w}if(m.length===0)throw H.getChecksumInstance();for(let w=0;w<m.length;w++)if(m[w]<f[w].length-1){m[w]++;break}else if(m[w]=0,w===m.length-1)throw H.getChecksumInstance()}throw H.getChecksumInstance()}static createBarcodeMatrix(r){let a=Array.from({length:r.getBarcodeRowCount()},()=>new Array(r.getBarcodeColumnCount()+2));for(let h=0;h<a.length;h++)for(let f=0;f<a[h].length;f++)a[h][f]=new Mn;let l=0;for(let h of r.getDetectionResultColumns()){if(h!=null){for(let f of h.getCodewords())if(f!=null){let m=f.getRowNumber();if(m>=0){if(m>=a.length)continue;a[m][l].setValue(f.getValue())}}}l++}return a}static isValidBarcodeColumn(r,a){return a>=0&&a<=r.getBarcodeColumnCount()+1}static getStartColumn(r,a,l,h){let f=h?1:-1,m=null;if(ae.isValidBarcodeColumn(r,a-f)&&(m=r.getDetectionResultColumn(a-f).getCodeword(l)),m!=null)return h?m.getEndX():m.getStartX();if(m=r.getDetectionResultColumn(a).getCodewordNearby(l),m!=null)return h?m.getStartX():m.getEndX();if(ae.isValidBarcodeColumn(r,a-f)&&(m=r.getDetectionResultColumn(a-f).getCodewordNearby(l)),m!=null)return h?m.getEndX():m.getStartX();let p=0;for(;ae.isValidBarcodeColumn(r,a-f);){a-=f;for(let w of r.getDetectionResultColumn(a).getCodewords())if(w!=null)return(h?w.getEndX():w.getStartX())+f*p*(w.getEndX()-w.getStartX());p++}return h?r.getBoundingBox().getMinX():r.getBoundingBox().getMaxX()}static detectCodeword(r,a,l,h,f,m,p,w){f=ae.adjustCodewordStartColumn(r,a,l,h,f,m);let S=ae.getModuleBitCount(r,a,l,h,f,m);if(S==null)return null;let R,B=Ae.sum(S);if(h)R=f+B;else{for(let $=0;$<S.length/2;$++){let rt=S[$];S[$]=S[S.length-1-$],S[S.length-1-$]=rt}R=f,f=R-B}if(!ae.checkCodewordSkew(B,p,w))return null;let P=dr.getDecodedValue(S),G=Kt.getCodeword(P);return G===-1?null:new Ti(f,R,ae.getCodewordBucketNumber(P),G)}static getModuleBitCount(r,a,l,h,f,m){let p=f,w=new Int32Array(8),S=0,R=h?1:-1,B=h;for(;(h?p<l:p>=a)&&S<w.length;)r.get(p,m)===B?(w[S]++,p+=R):(S++,B=!B);return S===w.length||p===(h?l:a)&&S===w.length-1?w:null}static getNumberOfECCodeWords(r){return 2<<r}static adjustCodewordStartColumn(r,a,l,h,f,m){let p=f,w=h?-1:1;for(let S=0;S<2;S++){for(;(h?p>=a:p<l)&&h===r.get(p,m);){if(Math.abs(f-p)>ae.CODEWORD_SKEW_SIZE)return f;p+=w}w=-w,h=!h}return p}static checkCodewordSkew(r,a,l){return a-ae.CODEWORD_SKEW_SIZE<=r&&r<=l+ae.CODEWORD_SKEW_SIZE}static decodeCodewords(r,a,l){if(r.length===0)throw U.getFormatInstance();let h=1<<a+1,f=ae.correctErrors(r,l,h);ae.verifyCodewordCount(r,h);let m=Et.decode(r,""+a);return m.setErrorsCorrected(f),m.setErasures(l.length),m}static correctErrors(r,a,l){if(a!=null&&a.length>l/2+ae.MAX_ERRORS||l<0||l>ae.MAX_EC_CODEWORDS)throw H.getChecksumInstance();return ae.errorCorrection.decode(r,l,a)}static verifyCodewordCount(r,a){if(r.length<4)throw U.getFormatInstance();let l=r[0];if(l>r.length)throw U.getFormatInstance();if(l===0)if(a<r.length)r[0]=r.length-a;else throw U.getFormatInstance()}static getBitCountForCodeword(r){let a=new Int32Array(8),l=0,h=a.length-1;for(;!((r&1)!==l&&(l=r&1,h--,h<0));)a[h]++,r>>=1;return a}static getCodewordBucketNumber(r){return r instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(r):this.getCodewordBucketNumber_number(r)}static getCodewordBucketNumber_number(r){return ae.getCodewordBucketNumber(ae.getBitCountForCodeword(r))}static getCodewordBucketNumber_Int32Array(r){return(r[0]-r[2]+r[4]-r[6]+9)%9}static toString(r){let a=new zr;for(let l=0;l<r.length;l++){a.format("Row %2d: ",l);for(let h=0;h<r[l].length;h++){let f=r[l][h];f.getValue().length===0?a.format("        ",null):a.format("%4d(%2d)",f.getValue()[0],f.getConfidence(f.getValue()[0]))}a.format("%n")}return a.toString()}}ae.CODEWORD_SKEW_SIZE=2,ae.MAX_ERRORS=3,ae.MAX_EC_CODEWORDS=512,ae.errorCorrection=new qi;class Jn{decode(r,a=null){let l=Jn.decode(r,a,!1);if(l==null||l.length===0||l[0]==null)throw st.getNotFoundInstance();return l[0]}decodeMultiple(r,a=null){try{return Jn.decode(r,a,!0)}catch(l){throw l instanceof U||l instanceof H?st.getNotFoundInstance():l}}static decode(r,a,l){const h=new Array,f=ee.detectMultiple(r,a,l);for(const m of f.getPoints()){const p=ae.decode(f.getBits(),m[4],m[5],m[6],m[7],Jn.getMinCodewordWidth(m),Jn.getMaxCodewordWidth(m)),w=new Ht(p.getText(),p.getRawBytes(),void 0,m,Bt.PDF_417);w.putMetadata(oe.ERROR_CORRECTION_LEVEL,p.getECLevel());const S=p.getOther();S!=null&&w.putMetadata(oe.PDF417_EXTRA_METADATA,S),h.push(w)}return h.map(m=>m)}static getMaxWidth(r,a){return r==null||a==null?0:Math.trunc(Math.abs(r.getX()-a.getX()))}static getMinWidth(r,a){return r==null||a==null?nt.MAX_VALUE:Math.trunc(Math.abs(r.getX()-a.getX()))}static getMaxCodewordWidth(r){return Math.floor(Math.max(Math.max(Jn.getMaxWidth(r[0],r[4]),Jn.getMaxWidth(r[6],r[2])*Kt.MODULES_IN_CODEWORD/Kt.MODULES_IN_STOP_PATTERN),Math.max(Jn.getMaxWidth(r[1],r[5]),Jn.getMaxWidth(r[7],r[3])*Kt.MODULES_IN_CODEWORD/Kt.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(r){return Math.floor(Math.min(Math.min(Jn.getMinWidth(r[0],r[4]),Jn.getMinWidth(r[6],r[2])*Kt.MODULES_IN_CODEWORD/Kt.MODULES_IN_STOP_PATTERN),Math.min(Jn.getMinWidth(r[1],r[5]),Jn.getMinWidth(r[7],r[3])*Kt.MODULES_IN_CODEWORD/Kt.MODULES_IN_STOP_PATTERN)))}reset(){}}class Ts extends x{}Ts.kind="ReaderException";class Cs{constructor(r,a){this.verbose=r===!0,a&&this.setHints(a)}decode(r,a){return a&&this.setHints(a),this.decodeInternal(r)}decodeWithState(r){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(r)}setHints(r){this.hints=r;const a=!o(r)&&r.get(Tt.TRY_HARDER)===!0,l=o(r)?null:r.get(Tt.POSSIBLE_FORMATS),h=new Array;if(!o(l)){const f=l.some(m=>m===Bt.UPC_A||m===Bt.UPC_E||m===Bt.EAN_13||m===Bt.EAN_8||m===Bt.CODABAR||m===Bt.CODE_39||m===Bt.CODE_93||m===Bt.CODE_128||m===Bt.ITF||m===Bt.RSS_14||m===Bt.RSS_EXPANDED);f&&!a&&h.push(new ii(r,this.verbose)),l.includes(Bt.QR_CODE)&&h.push(new Ai),l.includes(Bt.DATA_MATRIX)&&h.push(new Fr),l.includes(Bt.AZTEC)&&h.push(new Ta),l.includes(Bt.PDF_417)&&h.push(new Jn),f&&a&&h.push(new ii(r,this.verbose))}h.length===0&&(a||h.push(new ii(r,this.verbose)),h.push(new Ai),h.push(new Fr),h.push(new Ta),h.push(new Jn),a&&h.push(new ii(r,this.verbose))),this.readers=h}reset(){if(this.readers!==null)for(const r of this.readers)r.reset()}decodeInternal(r){if(this.readers===null)throw new Ts("No readers where selected, nothing can be read.");for(const a of this.readers)try{return a.decode(r,this.hints)}catch(l){if(l instanceof Ts)continue}throw new st("No MultiFormat Readers were able to detect the code.")}}class el extends Mt{constructor(r=null,a=500){const l=new Cs;l.setHints(r),super(l,a)}decodeBitmap(r){return this.reader.decodeWithState(r)}}class nl extends Mt{constructor(r=500){super(new Jn,r)}}class To extends Mt{constructor(r=500){super(new Ai,r)}}var us;(function(L){L[L.ERROR_CORRECTION=0]="ERROR_CORRECTION",L[L.CHARACTER_SET=1]="CHARACTER_SET",L[L.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",L[L.MIN_SIZE=3]="MIN_SIZE",L[L.MAX_SIZE=4]="MAX_SIZE",L[L.MARGIN=5]="MARGIN",L[L.PDF417_COMPACT=6]="PDF417_COMPACT",L[L.PDF417_COMPACTION=7]="PDF417_COMPACTION",L[L.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",L[L.AZTEC_LAYERS=9]="AZTEC_LAYERS",L[L.QR_VERSION=10]="QR_VERSION"})(us||(us={}));var On=us;class Ss{constructor(r){this.field=r,this.cachedGenerators=[],this.cachedGenerators.push(new In(r,Int32Array.from([1])))}buildGenerator(r){const a=this.cachedGenerators;if(r>=a.length){let l=a[a.length-1];const h=this.field;for(let f=a.length;f<=r;f++){const m=l.multiply(new In(h,Int32Array.from([1,h.exp(f-1+h.getGeneratorBase())])));a.push(m),l=m}}return a[r]}encode(r,a){if(a===0)throw new I("No error correction bytes");const l=r.length-a;if(l<=0)throw new I("No data bytes provided");const h=this.buildGenerator(a),f=new Int32Array(l);J.arraycopy(r,0,f,0,l);let m=new In(this.field,f);m=m.multiplyByMonomial(a,1);const w=m.divide(h)[1].getCoefficients(),S=a-w.length;for(let R=0;R<S;R++)r[l+R]=0;J.arraycopy(w,0,r,l+S,w.length)}}class dn{constructor(){}static applyMaskPenaltyRule1(r){return dn.applyMaskPenaltyRule1Internal(r,!0)+dn.applyMaskPenaltyRule1Internal(r,!1)}static applyMaskPenaltyRule2(r){let a=0;const l=r.getArray(),h=r.getWidth(),f=r.getHeight();for(let m=0;m<f-1;m++){const p=l[m];for(let w=0;w<h-1;w++){const S=p[w];S===p[w+1]&&S===l[m+1][w]&&S===l[m+1][w+1]&&a++}}return dn.N2*a}static applyMaskPenaltyRule3(r){let a=0;const l=r.getArray(),h=r.getWidth(),f=r.getHeight();for(let m=0;m<f;m++)for(let p=0;p<h;p++){const w=l[m];p+6<h&&w[p]===1&&w[p+1]===0&&w[p+2]===1&&w[p+3]===1&&w[p+4]===1&&w[p+5]===0&&w[p+6]===1&&(dn.isWhiteHorizontal(w,p-4,p)||dn.isWhiteHorizontal(w,p+7,p+11))&&a++,m+6<f&&l[m][p]===1&&l[m+1][p]===0&&l[m+2][p]===1&&l[m+3][p]===1&&l[m+4][p]===1&&l[m+5][p]===0&&l[m+6][p]===1&&(dn.isWhiteVertical(l,p,m-4,m)||dn.isWhiteVertical(l,p,m+7,m+11))&&a++}return a*dn.N3}static isWhiteHorizontal(r,a,l){a=Math.max(a,0),l=Math.min(l,r.length);for(let h=a;h<l;h++)if(r[h]===1)return!1;return!0}static isWhiteVertical(r,a,l,h){l=Math.max(l,0),h=Math.min(h,r.length);for(let f=l;f<h;f++)if(r[f][a]===1)return!1;return!0}static applyMaskPenaltyRule4(r){let a=0;const l=r.getArray(),h=r.getWidth(),f=r.getHeight();for(let w=0;w<f;w++){const S=l[w];for(let R=0;R<h;R++)S[R]===1&&a++}const m=r.getHeight()*r.getWidth();return Math.floor(Math.abs(a*2-m)*10/m)*dn.N4}static getDataMaskBit(r,a,l){let h,f;switch(r){case 0:h=l+a&1;break;case 1:h=l&1;break;case 2:h=a%3;break;case 3:h=(l+a)%3;break;case 4:h=Math.floor(l/2)+Math.floor(a/3)&1;break;case 5:f=l*a,h=(f&1)+f%3;break;case 6:f=l*a,h=(f&1)+f%3&1;break;case 7:f=l*a,h=f%3+(l+a&1)&1;break;default:throw new I("Invalid mask pattern: "+r)}return h===0}static applyMaskPenaltyRule1Internal(r,a){let l=0;const h=a?r.getHeight():r.getWidth(),f=a?r.getWidth():r.getHeight(),m=r.getArray();for(let p=0;p<h;p++){let w=0,S=-1;for(let R=0;R<f;R++){const B=a?m[p][R]:m[R][p];B===S?w++:(w>=5&&(l+=dn.N1+(w-5)),w=1,S=B)}w>=5&&(l+=dn.N1+(w-5))}return l}}dn.N1=3,dn.N2=3,dn.N3=40,dn.N4=10;class vs{constructor(r,a){this.width=r,this.height=a;const l=new Array(a);for(let h=0;h!==a;h++)l[h]=new Uint8Array(r);this.bytes=l}getHeight(){return this.height}getWidth(){return this.width}get(r,a){return this.bytes[a][r]}getArray(){return this.bytes}setNumber(r,a,l){this.bytes[a][r]=l}setBoolean(r,a,l){this.bytes[a][r]=l?1:0}clear(r){for(const a of this.bytes)ft.fill(a,r)}equals(r){if(!(r instanceof vs))return!1;const a=r;if(this.width!==a.width||this.height!==a.height)return!1;for(let l=0,h=this.height;l<h;++l){const f=this.bytes[l],m=a.bytes[l];for(let p=0,w=this.width;p<w;++p)if(f[p]!==m[p])return!1}return!0}toString(){const r=new Y;for(let a=0,l=this.height;a<l;++a){const h=this.bytes[a];for(let f=0,m=this.width;f<m;++f)switch(h[f]){case 0:r.append(" 0");break;case 1:r.append(" 1");break;default:r.append("  ");break}r.append(`
`)}return r.toString()}}class br{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const r=new Y;return r.append(`<<
`),r.append(" mode: "),r.append(this.mode?this.mode.toString():"null"),r.append(`
 ecLevel: `),r.append(this.ecLevel?this.ecLevel.toString():"null"),r.append(`
 version: `),r.append(this.version?this.version.toString():"null"),r.append(`
 maskPattern: `),r.append(this.maskPattern.toString()),this.matrix?(r.append(`
 matrix:
`),r.append(this.matrix.toString())):r.append(`
 matrix: null
`),r.append(`>>
`),r.toString()}setMode(r){this.mode=r}setECLevel(r){this.ecLevel=r}setVersion(r){this.version=r}setMaskPattern(r){this.maskPattern=r}setMatrix(r){this.matrix=r}static isValidMaskPattern(r){return r>=0&&r<br.NUM_MASK_PATTERNS}}br.NUM_MASK_PATTERNS=8;class Ge extends x{}Ge.kind="WriterException";class Jt{constructor(){}static clearMatrix(r){r.clear(255)}static buildMatrix(r,a,l,h,f){Jt.clearMatrix(f),Jt.embedBasicPatterns(l,f),Jt.embedTypeInfo(a,h,f),Jt.maybeEmbedVersionInfo(l,f),Jt.embedDataBits(r,h,f)}static embedBasicPatterns(r,a){Jt.embedPositionDetectionPatternsAndSeparators(a),Jt.embedDarkDotAtLeftBottomCorner(a),Jt.maybeEmbedPositionAdjustmentPatterns(r,a),Jt.embedTimingPatterns(a)}static embedTypeInfo(r,a,l){const h=new _t;Jt.makeTypeInfoBits(r,a,h);for(let f=0,m=h.getSize();f<m;++f){const p=h.get(h.getSize()-1-f),w=Jt.TYPE_INFO_COORDINATES[f],S=w[0],R=w[1];if(l.setBoolean(S,R,p),f<8){const B=l.getWidth()-f-1;l.setBoolean(B,8,p)}else{const P=l.getHeight()-7+(f-8);l.setBoolean(8,P,p)}}}static maybeEmbedVersionInfo(r,a){if(r.getVersionNumber()<7)return;const l=new _t;Jt.makeVersionInfoBits(r,l);let h=17;for(let f=0;f<6;++f)for(let m=0;m<3;++m){const p=l.get(h);h--,a.setBoolean(f,a.getHeight()-11+m,p),a.setBoolean(a.getHeight()-11+m,f,p)}}static embedDataBits(r,a,l){let h=0,f=-1,m=l.getWidth()-1,p=l.getHeight()-1;for(;m>0;){for(m===6&&(m-=1);p>=0&&p<l.getHeight();){for(let w=0;w<2;++w){const S=m-w;if(!Jt.isEmpty(l.get(S,p)))continue;let R;h<r.getSize()?(R=r.get(h),++h):R=!1,a!==255&&dn.getDataMaskBit(a,S,p)&&(R=!R),l.setBoolean(S,p,R)}p+=f}f=-f,p+=f,m-=2}if(h!==r.getSize())throw new Ge("Not all bits consumed: "+h+"/"+r.getSize())}static findMSBSet(r){return 32-nt.numberOfLeadingZeros(r)}static calculateBCHCode(r,a){if(a===0)throw new I("0 polynomial");const l=Jt.findMSBSet(a);for(r<<=l-1;Jt.findMSBSet(r)>=l;)r^=a<<Jt.findMSBSet(r)-l;return r}static makeTypeInfoBits(r,a,l){if(!br.isValidMaskPattern(a))throw new Ge("Invalid mask pattern");const h=r.getBits()<<3|a;l.appendBits(h,5);const f=Jt.calculateBCHCode(h,Jt.TYPE_INFO_POLY);l.appendBits(f,10);const m=new _t;if(m.appendBits(Jt.TYPE_INFO_MASK_PATTERN,15),l.xor(m),l.getSize()!==15)throw new Ge("should not happen but we got: "+l.getSize())}static makeVersionInfoBits(r,a){a.appendBits(r.getVersionNumber(),6);const l=Jt.calculateBCHCode(r.getVersionNumber(),Jt.VERSION_INFO_POLY);if(a.appendBits(l,12),a.getSize()!==18)throw new Ge("should not happen but we got: "+a.getSize())}static isEmpty(r){return r===255}static embedTimingPatterns(r){for(let a=8;a<r.getWidth()-8;++a){const l=(a+1)%2;Jt.isEmpty(r.get(a,6))&&r.setNumber(a,6,l),Jt.isEmpty(r.get(6,a))&&r.setNumber(6,a,l)}}static embedDarkDotAtLeftBottomCorner(r){if(r.get(8,r.getHeight()-8)===0)throw new Ge;r.setNumber(8,r.getHeight()-8,1)}static embedHorizontalSeparationPattern(r,a,l){for(let h=0;h<8;++h){if(!Jt.isEmpty(l.get(r+h,a)))throw new Ge;l.setNumber(r+h,a,0)}}static embedVerticalSeparationPattern(r,a,l){for(let h=0;h<7;++h){if(!Jt.isEmpty(l.get(r,a+h)))throw new Ge;l.setNumber(r,a+h,0)}}static embedPositionAdjustmentPattern(r,a,l){for(let h=0;h<5;++h){const f=Jt.POSITION_ADJUSTMENT_PATTERN[h];for(let m=0;m<5;++m)l.setNumber(r+m,a+h,f[m])}}static embedPositionDetectionPattern(r,a,l){for(let h=0;h<7;++h){const f=Jt.POSITION_DETECTION_PATTERN[h];for(let m=0;m<7;++m)l.setNumber(r+m,a+h,f[m])}}static embedPositionDetectionPatternsAndSeparators(r){const a=Jt.POSITION_DETECTION_PATTERN[0].length;Jt.embedPositionDetectionPattern(0,0,r),Jt.embedPositionDetectionPattern(r.getWidth()-a,0,r),Jt.embedPositionDetectionPattern(0,r.getWidth()-a,r);const l=8;Jt.embedHorizontalSeparationPattern(0,l-1,r),Jt.embedHorizontalSeparationPattern(r.getWidth()-l,l-1,r),Jt.embedHorizontalSeparationPattern(0,r.getWidth()-l,r);const h=7;Jt.embedVerticalSeparationPattern(h,0,r),Jt.embedVerticalSeparationPattern(r.getHeight()-h-1,0,r),Jt.embedVerticalSeparationPattern(h,r.getHeight()-h,r)}static maybeEmbedPositionAdjustmentPatterns(r,a){if(r.getVersionNumber()<2)return;const l=r.getVersionNumber()-1,h=Jt.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[l];for(let f=0,m=h.length;f!==m;f++){const p=h[f];if(p>=0)for(let w=0;w!==m;w++){const S=h[w];S>=0&&Jt.isEmpty(a.get(S,p))&&Jt.embedPositionAdjustmentPattern(S-2,p-2,a)}}}}Jt.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Jt.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Jt.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Jt.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Jt.VERSION_INFO_POLY=7973,Jt.TYPE_INFO_POLY=1335,Jt.TYPE_INFO_MASK_PATTERN=21522;class rl{constructor(r,a){this.dataBytes=r,this.errorCorrectionBytes=a}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Ze{constructor(){}static calculateMaskPenalty(r){return dn.applyMaskPenaltyRule1(r)+dn.applyMaskPenaltyRule2(r)+dn.applyMaskPenaltyRule3(r)+dn.applyMaskPenaltyRule4(r)}static encode(r,a,l=null){let h=Ze.DEFAULT_BYTE_MODE_ENCODING;const f=l!==null&&l.get(On.CHARACTER_SET)!==void 0;f&&(h=l.get(On.CHARACTER_SET).toString());const m=this.chooseMode(r,h),p=new _t;if(m===Wt.BYTE&&(f||Ze.DEFAULT_BYTE_MODE_ENCODING!==h)){const kt=k.getCharacterSetECIByName(h);kt!==void 0&&this.appendECI(kt,p)}this.appendModeInfo(m,p);const w=new _t;this.appendBytes(r,m,w,h);let S;if(l!==null&&l.get(On.QR_VERSION)!==void 0){const kt=Number.parseInt(l.get(On.QR_VERSION).toString(),10);S=Ft.getVersionForNumber(kt);const Dt=this.calculateBitsNeeded(m,p,w,S);if(!this.willFit(Dt,S,a))throw new Ge("Data too big for requested version")}else S=this.recommendVersion(a,m,p,w);const R=new _t;R.appendBitArray(p);const B=m===Wt.BYTE?w.getSizeInBytes():r.length;this.appendLengthInfo(B,S,m,R),R.appendBitArray(w);const P=S.getECBlocksForLevel(a),G=S.getTotalCodewords()-P.getTotalECCodewords();this.terminateBits(G,R);const $=this.interleaveWithECBytes(R,S.getTotalCodewords(),G,P.getNumBlocks()),rt=new br;rt.setECLevel(a),rt.setMode(m),rt.setVersion(S);const ht=S.getDimensionForVersion(),yt=new vs(ht,ht),Lt=this.chooseMaskPattern($,a,S,yt);return rt.setMaskPattern(Lt),Jt.buildMatrix($,a,S,Lt,yt),rt.setMatrix(yt),rt}static recommendVersion(r,a,l,h){const f=this.calculateBitsNeeded(a,l,h,Ft.getVersionForNumber(1)),m=this.chooseVersion(f,r),p=this.calculateBitsNeeded(a,l,h,m);return this.chooseVersion(p,r)}static calculateBitsNeeded(r,a,l,h){return a.getSize()+r.getCharacterCountBits(h)+l.getSize()}static getAlphanumericCode(r){return r<Ze.ALPHANUMERIC_TABLE.length?Ze.ALPHANUMERIC_TABLE[r]:-1}static chooseMode(r,a=null){if(k.SJIS.getName()===a&&this.isOnlyDoubleByteKanji(r))return Wt.KANJI;let l=!1,h=!1;for(let f=0,m=r.length;f<m;++f){const p=r.charAt(f);if(Ze.isDigit(p))l=!0;else if(this.getAlphanumericCode(p.charCodeAt(0))!==-1)h=!0;else return Wt.BYTE}return h?Wt.ALPHANUMERIC:l?Wt.NUMERIC:Wt.BYTE}static isOnlyDoubleByteKanji(r){let a;try{a=tt.encode(r,k.SJIS)}catch{return!1}const l=a.length;if(l%2!==0)return!1;for(let h=0;h<l;h+=2){const f=a[h]&255;if((f<129||f>159)&&(f<224||f>235))return!1}return!0}static chooseMaskPattern(r,a,l,h){let f=Number.MAX_SAFE_INTEGER,m=-1;for(let p=0;p<br.NUM_MASK_PATTERNS;p++){Jt.buildMatrix(r,a,l,p,h);let w=this.calculateMaskPenalty(h);w<f&&(f=w,m=p)}return m}static chooseVersion(r,a){for(let l=1;l<=40;l++){const h=Ft.getVersionForNumber(l);if(Ze.willFit(r,h,a))return h}throw new Ge("Data too big")}static willFit(r,a,l){const h=a.getTotalCodewords(),m=a.getECBlocksForLevel(l).getTotalECCodewords(),p=h-m,w=(r+7)/8;return p>=w}static terminateBits(r,a){const l=r*8;if(a.getSize()>l)throw new Ge("data bits cannot fit in the QR Code"+a.getSize()+" > "+l);for(let m=0;m<4&&a.getSize()<l;++m)a.appendBit(!1);const h=a.getSize()&7;if(h>0)for(let m=h;m<8;m++)a.appendBit(!1);const f=r-a.getSizeInBytes();for(let m=0;m<f;++m)a.appendBits((m&1)===0?236:17,8);if(a.getSize()!==l)throw new Ge("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(r,a,l,h,f,m){if(h>=l)throw new Ge("Block ID too large");const p=r%l,w=l-p,S=Math.floor(r/l),R=S+1,B=Math.floor(a/l),P=B+1,G=S-B,$=R-P;if(G!==$)throw new Ge("EC bytes mismatch");if(l!==w+p)throw new Ge("RS blocks mismatch");if(r!==(B+G)*w+(P+$)*p)throw new Ge("Total bytes mismatch");h<w?(f[0]=B,m[0]=G):(f[0]=P,m[0]=$)}static interleaveWithECBytes(r,a,l,h){if(r.getSizeInBytes()!==l)throw new Ge("Number of bits and data bytes does not match");let f=0,m=0,p=0;const w=new Array;for(let R=0;R<h;++R){const B=new Int32Array(1),P=new Int32Array(1);Ze.getNumDataBytesAndNumECBytesForBlockID(a,l,h,R,B,P);const G=B[0],$=new Uint8Array(G);r.toBytes(8*f,$,0,G);const rt=Ze.generateECBytes($,P[0]);w.push(new rl($,rt)),m=Math.max(m,G),p=Math.max(p,rt.length),f+=B[0]}if(l!==f)throw new Ge("Data bytes does not match offset");const S=new _t;for(let R=0;R<m;++R)for(const B of w){const P=B.getDataBytes();R<P.length&&S.appendBits(P[R],8)}for(let R=0;R<p;++R)for(const B of w){const P=B.getErrorCorrectionBytes();R<P.length&&S.appendBits(P[R],8)}if(a!==S.getSizeInBytes())throw new Ge("Interleaving error: "+a+" and "+S.getSizeInBytes()+" differ.");return S}static generateECBytes(r,a){const l=r.length,h=new Int32Array(l+a);for(let m=0;m<l;m++)h[m]=r[m]&255;new Ss(Ee.QR_CODE_FIELD_256).encode(h,a);const f=new Uint8Array(a);for(let m=0;m<a;m++)f[m]=h[l+m];return f}static appendModeInfo(r,a){a.appendBits(r.getBits(),4)}static appendLengthInfo(r,a,l,h){const f=l.getCharacterCountBits(a);if(r>=1<<f)throw new Ge(r+" is bigger than "+((1<<f)-1));h.appendBits(r,f)}static appendBytes(r,a,l,h){switch(a){case Wt.NUMERIC:Ze.appendNumericBytes(r,l);break;case Wt.ALPHANUMERIC:Ze.appendAlphanumericBytes(r,l);break;case Wt.BYTE:Ze.append8BitBytes(r,l,h);break;case Wt.KANJI:Ze.appendKanjiBytes(r,l);break;default:throw new Ge("Invalid mode: "+a)}}static getDigit(r){return r.charCodeAt(0)-48}static isDigit(r){const a=Ze.getDigit(r);return a>=0&&a<=9}static appendNumericBytes(r,a){const l=r.length;let h=0;for(;h<l;){const f=Ze.getDigit(r.charAt(h));if(h+2<l){const m=Ze.getDigit(r.charAt(h+1)),p=Ze.getDigit(r.charAt(h+2));a.appendBits(f*100+m*10+p,10),h+=3}else if(h+1<l){const m=Ze.getDigit(r.charAt(h+1));a.appendBits(f*10+m,7),h+=2}else a.appendBits(f,4),h++}}static appendAlphanumericBytes(r,a){const l=r.length;let h=0;for(;h<l;){const f=Ze.getAlphanumericCode(r.charCodeAt(h));if(f===-1)throw new Ge;if(h+1<l){const m=Ze.getAlphanumericCode(r.charCodeAt(h+1));if(m===-1)throw new Ge;a.appendBits(f*45+m,11),h+=2}else a.appendBits(f,6),h++}}static append8BitBytes(r,a,l){let h;try{h=tt.encode(r,l)}catch(f){throw new Ge(f)}for(let f=0,m=h.length;f!==m;f++){const p=h[f];a.appendBits(p,8)}}static appendKanjiBytes(r,a){let l;try{l=tt.encode(r,k.SJIS)}catch(f){throw new Ge(f)}const h=l.length;for(let f=0;f<h;f+=2){const m=l[f]&255,p=l[f+1]&255,w=m<<8&4294967295|p;let S=-1;if(w>=33088&&w<=40956?S=w-33088:w>=57408&&w<=60351&&(S=w-49472),S===-1)throw new Ge("Invalid byte sequence");const R=(S>>8)*192+(S&255);a.appendBits(R,13)}}static appendECI(r,a){a.appendBits(Wt.ECI.getBits(),4),a.appendBits(r.getValue(),8)}}Ze.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Ze.DEFAULT_BYTE_MODE_ENCODING=k.UTF8.getName();class oi{write(r,a,l,h=null){if(r.length===0)throw new I("Found empty contents");if(a<0||l<0)throw new I("Requested dimensions are too small: "+a+"x"+l);let f=xe.L,m=oi.QUIET_ZONE_SIZE;h!==null&&(h.get(On.ERROR_CORRECTION)!==void 0&&(f=xe.fromString(h.get(On.ERROR_CORRECTION).toString())),h.get(On.MARGIN)!==void 0&&(m=Number.parseInt(h.get(On.MARGIN).toString(),10)));const p=Ze.encode(r,f,h);return this.renderResult(p,a,l,m)}writeToDom(r,a,l,h,f=null){typeof r=="string"&&(r=document.querySelector(r));const m=this.write(a,l,h,f);r&&r.appendChild(m)}renderResult(r,a,l,h){const f=r.getMatrix();if(f===null)throw new kr;const m=f.getWidth(),p=f.getHeight(),w=m+h*2,S=p+h*2,R=Math.max(a,w),B=Math.max(l,S),P=Math.min(Math.floor(R/w),Math.floor(B/S)),G=Math.floor((R-m*P)/2),$=Math.floor((B-p*P)/2),rt=this.createSVGElement(R,B);for(let ht=0,yt=$;ht<p;ht++,yt+=P)for(let Lt=0,kt=G;Lt<m;Lt++,kt+=P)if(f.get(Lt,ht)===1){const Dt=this.createSvgRectElement(kt,yt,P,P);rt.appendChild(Dt)}return rt}createSVGElement(r,a){const l=document.createElementNS(oi.SVG_NS,"svg");return l.setAttributeNS(null,"height",r.toString()),l.setAttributeNS(null,"width",a.toString()),l}createSvgRectElement(r,a,l,h){const f=document.createElementNS(oi.SVG_NS,"rect");return f.setAttributeNS(null,"x",r.toString()),f.setAttributeNS(null,"y",a.toString()),f.setAttributeNS(null,"height",l.toString()),f.setAttributeNS(null,"width",h.toString()),f.setAttributeNS(null,"fill","#000000"),f}}oi.QUIET_ZONE_SIZE=4,oi.SVG_NS="http://www.w3.org/2000/svg";class Gn{encode(r,a,l,h,f){if(r.length===0)throw new I("Found empty contents");if(a!==Bt.QR_CODE)throw new I("Can only encode QR_CODE, but got "+a);if(l<0||h<0)throw new I(`Requested dimensions are too small: ${l}x${h}`);let m=xe.L,p=Gn.QUIET_ZONE_SIZE;f!==null&&(f.get(On.ERROR_CORRECTION)!==void 0&&(m=xe.fromString(f.get(On.ERROR_CORRECTION).toString())),f.get(On.MARGIN)!==void 0&&(p=Number.parseInt(f.get(On.MARGIN).toString(),10)));const w=Ze.encode(r,m,f);return Gn.renderResult(w,l,h,p)}static renderResult(r,a,l,h){const f=r.getMatrix();if(f===null)throw new kr;const m=f.getWidth(),p=f.getHeight(),w=m+h*2,S=p+h*2,R=Math.max(a,w),B=Math.max(l,S),P=Math.min(Math.floor(R/w),Math.floor(B/S)),G=Math.floor((R-m*P)/2),$=Math.floor((B-p*P)/2),rt=new Pt(R,B);for(let ht=0,yt=$;ht<p;ht++,yt+=P)for(let Lt=0,kt=G;Lt<m;Lt++,kt+=P)f.get(Lt,ht)===1&&rt.setRegion(kt,yt,P,P);return rt}}Gn.QUIET_ZONE_SIZE=4;class il{encode(r,a,l,h,f){let m;switch(a){case Bt.QR_CODE:m=new Gn;break;default:throw new I("No encoder available for format "+a)}return m.encode(r,a,l,h,f)}}class $r extends jt{constructor(r,a,l,h,f,m,p,w){if(super(m,p),this.yuvData=r,this.dataWidth=a,this.dataHeight=l,this.left=h,this.top=f,h+m>a||f+p>l)throw new I("Crop rectangle does not fit within image data.");w&&this.reverseHorizontal(m,p)}getRow(r,a){if(r<0||r>=this.getHeight())throw new I("Requested row is outside the image: "+r);const l=this.getWidth();(a==null||a.length<l)&&(a=new Uint8ClampedArray(l));const h=(r+this.top)*this.dataWidth+this.left;return J.arraycopy(this.yuvData,h,a,0,l),a}getMatrix(){const r=this.getWidth(),a=this.getHeight();if(r===this.dataWidth&&a===this.dataHeight)return this.yuvData;const l=r*a,h=new Uint8ClampedArray(l);let f=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return J.arraycopy(this.yuvData,f,h,0,l),h;for(let m=0;m<a;m++){const p=m*r;J.arraycopy(this.yuvData,f,h,p,r),f+=this.dataWidth}return h}isCropSupported(){return!0}crop(r,a,l,h){return new $r(this.yuvData,this.dataWidth,this.dataHeight,this.left+r,this.top+a,l,h,!1)}renderThumbnail(){const r=this.getWidth()/$r.THUMBNAIL_SCALE_FACTOR,a=this.getHeight()/$r.THUMBNAIL_SCALE_FACTOR,l=new Int32Array(r*a),h=this.yuvData;let f=this.top*this.dataWidth+this.left;for(let m=0;m<a;m++){const p=m*r;for(let w=0;w<r;w++){const S=h[f+w*$r.THUMBNAIL_SCALE_FACTOR]&255;l[p+w]=4278190080|S*65793}f+=this.dataWidth*$r.THUMBNAIL_SCALE_FACTOR}return l}getThumbnailWidth(){return this.getWidth()/$r.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/$r.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(r,a){const l=this.yuvData;for(let h=0,f=this.top*this.dataWidth+this.left;h<a;h++,f+=this.dataWidth){const m=f+r/2;for(let p=f,w=f+r-1;p<m;p++,w--){const S=l[p];l[p]=l[w],l[w]=S}}}invert(){return new $t(this)}}$r.THUMBNAIL_SCALE_FACTOR=2;class li extends jt{constructor(r,a,l,h,f,m,p){if(super(a,l),this.dataWidth=h,this.dataHeight=f,this.left=m,this.top=p,r.BYTES_PER_ELEMENT===4){const w=a*l,S=new Uint8ClampedArray(w);for(let R=0;R<w;R++){const B=r[R],P=B>>16&255,G=B>>7&510,$=B&255;S[R]=(P+G+$)/4&255}this.luminances=S}else this.luminances=r;if(h===void 0&&(this.dataWidth=a),f===void 0&&(this.dataHeight=l),m===void 0&&(this.left=0),p===void 0&&(this.top=0),this.left+a>this.dataWidth||this.top+l>this.dataHeight)throw new I("Crop rectangle does not fit within image data.")}getRow(r,a){if(r<0||r>=this.getHeight())throw new I("Requested row is outside the image: "+r);const l=this.getWidth();(a==null||a.length<l)&&(a=new Uint8ClampedArray(l));const h=(r+this.top)*this.dataWidth+this.left;return J.arraycopy(this.luminances,h,a,0,l),a}getMatrix(){const r=this.getWidth(),a=this.getHeight();if(r===this.dataWidth&&a===this.dataHeight)return this.luminances;const l=r*a,h=new Uint8ClampedArray(l);let f=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return J.arraycopy(this.luminances,f,h,0,l),h;for(let m=0;m<a;m++){const p=m*r;J.arraycopy(this.luminances,f,h,p,r),f+=this.dataWidth}return h}isCropSupported(){return!0}crop(r,a,l,h){return new li(this.luminances,l,h,this.dataWidth,this.dataHeight,this.left+r,this.top+a)}invert(){return new $t(this)}}class y extends k{static forName(r){return this.getCharacterSetECIByName(r)}}class b{}b.ISO_8859_1=k.ISO8859_1;class N{isCompact(){return this.compact}setCompact(r){this.compact=r}getSize(){return this.size}setSize(r){this.size=r}getLayers(){return this.layers}setLayers(r){this.layers=r}getCodeWords(){return this.codeWords}setCodeWords(r){this.codeWords=r}getMatrix(){return this.matrix}setMatrix(r){this.matrix=r}}class j{static singletonList(r){return[r]}static min(r,a){return r.sort(a)[0]}}class ct{constructor(r){this.previous=r}getPrevious(){return this.previous}}class wt extends ct{constructor(r,a,l){super(r),this.value=a,this.bitCount=l}appendTo(r,a){r.appendBits(this.value,this.bitCount)}add(r,a){return new wt(this,r,a)}addBinaryShift(r,a){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new wt(this,r,a)}toString(){let r=this.value&(1<<this.bitCount)-1;return r|=1<<this.bitCount,"<"+nt.toBinaryString(r|1<<this.bitCount).substring(1)+">"}}class Ut extends wt{constructor(r,a,l){super(r,0,0),this.binaryShiftStart=a,this.binaryShiftByteCount=l}appendTo(r,a){for(let l=0;l<this.binaryShiftByteCount;l++)(l===0||l===31&&this.binaryShiftByteCount<=62)&&(r.appendBits(31,5),this.binaryShiftByteCount>62?r.appendBits(this.binaryShiftByteCount-31,16):l===0?r.appendBits(Math.min(this.binaryShiftByteCount,31),5):r.appendBits(this.binaryShiftByteCount-31,5)),r.appendBits(a[this.binaryShiftStart+l],8)}addBinaryShift(r,a){return new Ut(this,r,a)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function be(L,r,a){return new Ut(L,r,a)}function Sn(L,r,a){return new wt(L,r,a)}const Ie=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],gn=0,Ln=1,qn=2,ar=3,$n=4,Co=new wt(null,0,0),Ma=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function Au(L){for(let r of L)ft.fill(r,-1);return L[gn][$n]=0,L[Ln][$n]=0,L[Ln][gn]=28,L[ar][$n]=0,L[qn][$n]=0,L[qn][gn]=15,L}const rc=Au(ft.createInt32Array(6,6));class ci{constructor(r,a,l,h){this.token=r,this.mode=a,this.binaryShiftByteCount=l,this.bitCount=h}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(r,a){let l=this.bitCount,h=this.token;if(r!==this.mode){let m=Ma[this.mode][r];h=Sn(h,m&65535,m>>16),l+=m>>16}let f=r===qn?4:5;return h=Sn(h,a,f),new ci(h,r,0,l+f)}shiftAndAppend(r,a){let l=this.token,h=this.mode===qn?4:5;return l=Sn(l,rc[this.mode][r],h),l=Sn(l,a,5),new ci(l,this.mode,0,this.bitCount+h+5)}addBinaryShiftChar(r){let a=this.token,l=this.mode,h=this.bitCount;if(this.mode===$n||this.mode===qn){let p=Ma[l][gn];a=Sn(a,p&65535,p>>16),h+=p>>16,l=gn}let f=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,m=new ci(a,l,this.binaryShiftByteCount+1,h+f);return m.binaryShiftByteCount===2078&&(m=m.endBinaryShift(r+1)),m}endBinaryShift(r){if(this.binaryShiftByteCount===0)return this;let a=this.token;return a=be(a,r-this.binaryShiftByteCount,this.binaryShiftByteCount),new ci(a,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(r){let a=this.bitCount+(Ma[this.mode][r.mode]>>16);return this.binaryShiftByteCount<r.binaryShiftByteCount?a+=ci.calculateBinaryShiftCost(r)-ci.calculateBinaryShiftCost(this):this.binaryShiftByteCount>r.binaryShiftByteCount&&r.binaryShiftByteCount>0&&(a+=10),a<=r.bitCount}toBitArray(r){let a=[];for(let h=this.endBinaryShift(r.length).token;h!==null;h=h.getPrevious())a.unshift(h);let l=new _t;for(const h of a)h.appendTo(l,r);return l}toString(){return K.format("%s bits=%d bytes=%d",Ie[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(r){return r.binaryShiftByteCount>62?21:r.binaryShiftByteCount>31?20:r.binaryShiftByteCount>0?10:0}}ci.INITIAL_STATE=new ci(Co,gn,0,0);function ic(L){const r=K.getCharCode(" "),a=K.getCharCode("."),l=K.getCharCode(",");L[gn][r]=1;const h=K.getCharCode("Z"),f=K.getCharCode("A");for(let P=f;P<=h;P++)L[gn][P]=P-f+2;L[Ln][r]=1;const m=K.getCharCode("z"),p=K.getCharCode("a");for(let P=p;P<=m;P++)L[Ln][P]=P-p+2;L[qn][r]=1;const w=K.getCharCode("9"),S=K.getCharCode("0");for(let P=S;P<=w;P++)L[qn][P]=P-S+2;L[qn][l]=12,L[qn][a]=13;const R=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let P=0;P<R.length;P++)L[ar][K.getCharCode(R[P])]=P;const B=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let P=0;P<B.length;P++)K.getCharCode(B[P])>0&&(L[$n][K.getCharCode(B[P])]=P);return L}const sl=ic(ft.createInt32Array(5,256));class Oa{constructor(r){this.text=r}encode(){const r=K.getCharCode(" "),a=K.getCharCode(`
`);let l=j.singletonList(ci.INITIAL_STATE);for(let f=0;f<this.text.length;f++){let m,p=f+1<this.text.length?this.text[f+1]:0;switch(this.text[f]){case K.getCharCode("\r"):m=p===a?2:0;break;case K.getCharCode("."):m=p===r?3:0;break;case K.getCharCode(","):m=p===r?4:0;break;case K.getCharCode(":"):m=p===r?5:0;break;default:m=0}m>0?(l=Oa.updateStateListForPair(l,f,m),f++):l=this.updateStateListForChar(l,f)}return j.min(l,(f,m)=>f.getBitCount()-m.getBitCount()).toBitArray(this.text)}updateStateListForChar(r,a){const l=[];for(let h of r)this.updateStateForChar(h,a,l);return Oa.simplifyStates(l)}updateStateForChar(r,a,l){let h=this.text[a]&255,f=sl[r.getMode()][h]>0,m=null;for(let p=0;p<=$n;p++){let w=sl[p][h];if(w>0){if(m==null&&(m=r.endBinaryShift(a)),!f||p===r.getMode()||p===qn){const S=m.latchAndAppend(p,w);l.push(S)}if(!f&&rc[r.getMode()][p]>=0){const S=m.shiftAndAppend(p,w);l.push(S)}}}if(r.getBinaryShiftByteCount()>0||sl[r.getMode()][h]===0){let p=r.addBinaryShiftChar(a);l.push(p)}}static updateStateListForPair(r,a,l){const h=[];for(let f of r)this.updateStateForPair(f,a,l,h);return this.simplifyStates(h)}static updateStateForPair(r,a,l,h){let f=r.endBinaryShift(a);if(h.push(f.latchAndAppend($n,l)),r.getMode()!==$n&&h.push(f.shiftAndAppend($n,l)),l===3||l===4){let m=f.latchAndAppend(qn,16-l).latchAndAppend(qn,1);h.push(m)}if(r.getBinaryShiftByteCount()>0){let m=r.addBinaryShiftChar(a).addBinaryShiftChar(a+1);h.push(m)}}static simplifyStates(r){let a=[];for(const l of r){let h=!0;for(const f of a){if(f.isBetterThanOrEqualTo(l)){h=!1;break}l.isBetterThanOrEqualTo(f)&&(a=a.filter(m=>m!==f))}h&&a.push(l)}return a}}class Re{constructor(){}static encodeBytes(r){return Re.encode(r,Re.DEFAULT_EC_PERCENT,Re.DEFAULT_AZTEC_LAYERS)}static encode(r,a,l){let h=new Oa(r).encode(),f=nt.truncDivision(h.getSize()*a,100)+11,m=h.getSize()+f,p,w,S,R,B;if(l!==Re.DEFAULT_AZTEC_LAYERS){if(p=l<0,w=Math.abs(l),w>(p?Re.MAX_NB_BITS_COMPACT:Re.MAX_NB_BITS))throw new I(K.format("Illegal value %s for layers",l));S=Re.totalBitsInLayer(w,p),R=Re.WORD_SIZE[w];let Dt=S-S%R;if(B=Re.stuffBits(h,R),B.getSize()+f>Dt)throw new I("Data to large for user specified layer");if(p&&B.getSize()>R*64)throw new I("Data to large for user specified layer")}else{R=0,B=null;for(let Dt=0;;Dt++){if(Dt>Re.MAX_NB_BITS)throw new I("Data too large for an Aztec code");if(p=Dt<=3,w=p?Dt+1:Dt,S=Re.totalBitsInLayer(w,p),m>S)continue;(B==null||R!==Re.WORD_SIZE[w])&&(R=Re.WORD_SIZE[w],B=Re.stuffBits(h,R));let ue=S-S%R;if(!(p&&B.getSize()>R*64)&&B.getSize()+f<=ue)break}}let P=Re.generateCheckWords(B,S,R),G=B.getSize()/R,$=Re.generateModeMessage(p,w,G),rt=(p?11:14)+w*4,ht=new Int32Array(rt),yt;if(p){yt=rt;for(let Dt=0;Dt<ht.length;Dt++)ht[Dt]=Dt}else{yt=rt+1+2*nt.truncDivision(nt.truncDivision(rt,2)-1,15);let Dt=nt.truncDivision(rt,2),ue=nt.truncDivision(yt,2);for(let le=0;le<Dt;le++){let Ir=le+nt.truncDivision(le,15);ht[Dt-le-1]=ue-Ir-1,ht[Dt+le]=ue+Ir+1}}let Lt=new Pt(yt);for(let Dt=0,ue=0;Dt<w;Dt++){let le=(w-Dt)*4+(p?9:12);for(let Ir=0;Ir<le;Ir++){let ui=Ir*2;for(let Hr=0;Hr<2;Hr++)P.get(ue+ui+Hr)&&Lt.set(ht[Dt*2+Hr],ht[Dt*2+Ir]),P.get(ue+le*2+ui+Hr)&&Lt.set(ht[Dt*2+Ir],ht[rt-1-Dt*2-Hr]),P.get(ue+le*4+ui+Hr)&&Lt.set(ht[rt-1-Dt*2-Hr],ht[rt-1-Dt*2-Ir]),P.get(ue+le*6+ui+Hr)&&Lt.set(ht[rt-1-Dt*2-Ir],ht[Dt*2+Hr])}ue+=le*8}if(Re.drawModeMessage(Lt,p,yt,$),p)Re.drawBullsEye(Lt,nt.truncDivision(yt,2),5);else{Re.drawBullsEye(Lt,nt.truncDivision(yt,2),7);for(let Dt=0,ue=0;Dt<nt.truncDivision(rt,2)-1;Dt+=15,ue+=16)for(let le=nt.truncDivision(yt,2)&1;le<yt;le+=2)Lt.set(nt.truncDivision(yt,2)-ue,le),Lt.set(nt.truncDivision(yt,2)+ue,le),Lt.set(le,nt.truncDivision(yt,2)-ue),Lt.set(le,nt.truncDivision(yt,2)+ue)}let kt=new N;return kt.setCompact(p),kt.setSize(yt),kt.setLayers(w),kt.setCodeWords(G),kt.setMatrix(Lt),kt}static drawBullsEye(r,a,l){for(let h=0;h<l;h+=2)for(let f=a-h;f<=a+h;f++)r.set(f,a-h),r.set(f,a+h),r.set(a-h,f),r.set(a+h,f);r.set(a-l,a-l),r.set(a-l+1,a-l),r.set(a-l,a-l+1),r.set(a+l,a-l),r.set(a+l,a-l+1),r.set(a+l,a+l-1)}static generateModeMessage(r,a,l){let h=new _t;return r?(h.appendBits(a-1,2),h.appendBits(l-1,6),h=Re.generateCheckWords(h,28,4)):(h.appendBits(a-1,5),h.appendBits(l-1,11),h=Re.generateCheckWords(h,40,4)),h}static drawModeMessage(r,a,l,h){let f=nt.truncDivision(l,2);if(a)for(let m=0;m<7;m++){let p=f-3+m;h.get(m)&&r.set(p,f-5),h.get(m+7)&&r.set(f+5,p),h.get(20-m)&&r.set(p,f+5),h.get(27-m)&&r.set(f-5,p)}else for(let m=0;m<10;m++){let p=f-5+m+nt.truncDivision(m,5);h.get(m)&&r.set(p,f-7),h.get(m+10)&&r.set(f+7,p),h.get(29-m)&&r.set(p,f+7),h.get(39-m)&&r.set(f-7,p)}}static generateCheckWords(r,a,l){let h=r.getSize()/l,f=new Ss(Re.getGF(l)),m=nt.truncDivision(a,l),p=Re.bitsToWords(r,l,m);f.encode(p,m-h);let w=a%l,S=new _t;S.appendBits(0,w);for(const R of Array.from(p))S.appendBits(R,l);return S}static bitsToWords(r,a,l){let h=new Int32Array(l),f,m;for(f=0,m=r.getSize()/a;f<m;f++){let p=0;for(let w=0;w<a;w++)p|=r.get(f*a+w)?1<<a-w-1:0;h[f]=p}return h}static getGF(r){switch(r){case 4:return Ee.AZTEC_PARAM;case 6:return Ee.AZTEC_DATA_6;case 8:return Ee.AZTEC_DATA_8;case 10:return Ee.AZTEC_DATA_10;case 12:return Ee.AZTEC_DATA_12;default:throw new I("Unsupported word size "+r)}}static stuffBits(r,a){let l=new _t,h=r.getSize(),f=(1<<a)-2;for(let m=0;m<h;m+=a){let p=0;for(let w=0;w<a;w++)(m+w>=h||r.get(m+w))&&(p|=1<<a-1-w);(p&f)===f?(l.appendBits(p&f,a),m--):(p&f)===0?(l.appendBits(p|1,a),m--):l.appendBits(p,a)}return l}static totalBitsInLayer(r,a){return((a?88:112)+16*r)*r}}Re.DEFAULT_EC_PERCENT=33,Re.DEFAULT_AZTEC_LAYERS=0,Re.MAX_NB_BITS=32,Re.MAX_NB_BITS_COMPACT=4,Re.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class al{encode(r,a,l,h){return this.encodeWithHints(r,a,l,h,null)}encodeWithHints(r,a,l,h,f){let m=b.ISO_8859_1,p=Re.DEFAULT_EC_PERCENT,w=Re.DEFAULT_AZTEC_LAYERS;return f!=null&&(f.has(On.CHARACTER_SET)&&(m=y.forName(f.get(On.CHARACTER_SET).toString())),f.has(On.ERROR_CORRECTION)&&(p=nt.parseInt(f.get(On.ERROR_CORRECTION).toString())),f.has(On.AZTEC_LAYERS)&&(w=nt.parseInt(f.get(On.AZTEC_LAYERS).toString()))),al.encodeLayers(r,a,l,h,m,p,w)}static encodeLayers(r,a,l,h,f,m,p){if(a!==Bt.AZTEC)throw new I("Can only encode AZTEC, but got "+a);let w=Re.encode(K.getBytes(r,f),m,p);return al.renderResult(w,l,h)}static renderResult(r,a,l){let h=r.getMatrix();if(h==null)throw new kr;let f=h.getWidth(),m=h.getHeight(),p=Math.max(a,f),w=Math.max(l,m),S=Math.min(p/f,w/m),R=(p-f*S)/2,B=(w-m*S)/2,P=new Pt(p,w);for(let G=0,$=B;G<m;G++,$+=S)for(let rt=0,ht=R;rt<f;rt++,ht+=S)h.get(rt,G)&&P.setRegion(ht,$,S,S);return P}}n.AbstractExpandedDecoder=Fi,n.ArgumentException=v,n.ArithmeticException=Vi,n.AztecCode=N,n.AztecCodeReader=Ta,n.AztecCodeWriter=al,n.AztecDecoder=We,n.AztecDetector=Ao,n.AztecDetectorResult=qs,n.AztecEncoder=Re,n.AztecHighLevelEncoder=Oa,n.AztecPoint=je,n.BarcodeFormat=Bt,n.Binarizer=X,n.BinaryBitmap=O,n.BitArray=_t,n.BitMatrix=Pt,n.BitSource=fr,n.BrowserAztecCodeReader=Ys,n.BrowserBarcodeReader=Jo,n.BrowserCodeReader=Mt,n.BrowserDatamatrixCodeReader=nc,n.BrowserMultiFormatReader=el,n.BrowserPDF417Reader=nl,n.BrowserQRCodeReader=To,n.BrowserQRCodeSvgWriter=oi,n.CharacterSetECI=k,n.ChecksumException=H,n.Code128Reader=Vt,n.Code39Reader=Ye,n.DataMatrixDecodedBitStreamParser=zi,n.DataMatrixReader=Fr,n.DecodeHintType=Tt,n.DecoderResult=Pr,n.DefaultGridSampler=Fe,n.DetectorResult=wa,n.EAN13Reader=Tr,n.EncodeHintType=On,n.Exception=x,n.FormatException=U,n.GenericGF=Ee,n.GenericGFPoly=In,n.GlobalHistogramBinarizer=ut,n.GridSampler=_a,n.GridSamplerInstance=zn,n.HTMLCanvasElementLuminanceSource=Z,n.HybridBinarizer=xt,n.ITFReader=Be,n.IllegalArgumentException=I,n.IllegalStateException=kr,n.InvertedLuminanceSource=$t,n.LuminanceSource=jt,n.MathUtils=Ae,n.MultiFormatOneDReader=ii,n.MultiFormatReader=Cs,n.MultiFormatWriter=il,n.NotFoundException=st,n.OneDReader=sn,n.PDF417DecodedBitStreamParser=Et,n.PDF417DecoderErrorCorrection=qi,n.PDF417Reader=Jn,n.PDF417ResultMetadata=Zs,n.PerspectiveTransform=Le,n.PlanarYUVLuminanceSource=$r,n.QRCodeByteMatrix=vs,n.QRCodeDataMask=Tn,n.QRCodeDecodedBitStreamParser=fn,n.QRCodeDecoderErrorCorrectionLevel=xe,n.QRCodeDecoderFormatInformation=Nn,n.QRCodeEncoder=Ze,n.QRCodeEncoderQRCode=br,n.QRCodeMaskUtil=dn,n.QRCodeMatrixUtil=Jt,n.QRCodeMode=Wt,n.QRCodeReader=Ai,n.QRCodeVersion=Ft,n.QRCodeWriter=Gn,n.RGBLuminanceSource=li,n.RSS14Reader=pe,n.RSSExpandedReader=vt,n.ReaderException=Ts,n.ReedSolomonDecoder=As,n.ReedSolomonEncoder=Ss,n.ReedSolomonException=ni,n.Result=Ht,n.ResultMetadataType=oe,n.ResultPoint=qt,n.StringUtils=K,n.UnsupportedOperationException=et,n.VideoInputDevice=It,n.WhiteRectangleDetector=Kr,n.WriterException=Ge,n.ZXingArrays=ft,n.ZXingCharset=y,n.ZXingInteger=nt,n.ZXingStandardCharsets=b,n.ZXingStringBuilder=Y,n.ZXingStringEncoding=tt,n.ZXingSystem=J,n.createAbstractExpandedDecoder=_o,Object.defineProperty(n,"__esModule",{value:!0})})}(Wc,Wc.exports)),Wc.exports}var vn=C4();const S4=Jy(vn),v4=Qw({__proto__:null,default:S4},[vn]);var Uy=function(){function i(t,n,o){if(this.formatMap=new Map([[Xt.QR_CODE,vn.BarcodeFormat.QR_CODE],[Xt.AZTEC,vn.BarcodeFormat.AZTEC],[Xt.CODABAR,vn.BarcodeFormat.CODABAR],[Xt.CODE_39,vn.BarcodeFormat.CODE_39],[Xt.CODE_93,vn.BarcodeFormat.CODE_93],[Xt.CODE_128,vn.BarcodeFormat.CODE_128],[Xt.DATA_MATRIX,vn.BarcodeFormat.DATA_MATRIX],[Xt.MAXICODE,vn.BarcodeFormat.MAXICODE],[Xt.ITF,vn.BarcodeFormat.ITF],[Xt.EAN_13,vn.BarcodeFormat.EAN_13],[Xt.EAN_8,vn.BarcodeFormat.EAN_8],[Xt.PDF_417,vn.BarcodeFormat.PDF_417],[Xt.RSS_14,vn.BarcodeFormat.RSS_14],[Xt.RSS_EXPANDED,vn.BarcodeFormat.RSS_EXPANDED],[Xt.UPC_A,vn.BarcodeFormat.UPC_A],[Xt.UPC_E,vn.BarcodeFormat.UPC_E],[Xt.UPC_EAN_EXTENSION,vn.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!v4)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=o;var u=this.createZXingFormats(t),d=new Map;d.set(vn.DecodeHintType.POSSIBLE_FORMATS,u),d.set(vn.DecodeHintType.TRY_HARDER,!1),this.hints=d}return i.prototype.decodeAsync=function(t){var n=this;return new Promise(function(o,u){try{o(n.decode(t))}catch(d){u(d)}})},i.prototype.decode=function(t){var n=new vn.MultiFormatReader(this.verbose,this.hints),o=new vn.HTMLCanvasElementLuminanceSource(t),u=new vn.BinaryBitmap(new vn.HybridBinarizer(o)),d=n.decode(u);return{text:d.text,format:SA.create(this.toHtml5QrcodeSupportedFormats(d.format)),debugData:this.createDebugData()}},i.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(n,o,u){t.set(n,o)}),t},i.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},i.prototype.createZXingFormats=function(t){for(var n=[],o=0,u=t;o<u.length;o++){var d=u[o];this.formatMap.has(d)?n.push(this.formatMap.get(d)):this.logger.logError("".concat(d," is not supported by")+"ZXingHtml5QrcodeShim")}return n},i.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},i}(),b4=function(i,t,n,o){function u(d){return d instanceof n?d:new n(function(A){A(d)})}return new(n||(n=Promise))(function(d,A){function C(v){try{x(o.next(v))}catch(I){A(I)}}function _(v){try{x(o.throw(v))}catch(I){A(I)}}function x(v){v.done?d(v.value):u(v.value).then(C,_)}x((o=o.apply(i,t||[])).next())})},I4=function(i,t){var n={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},o,u,d,A;return A={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(A[Symbol.iterator]=function(){return this}),A;function C(x){return function(v){return _([x,v])}}function _(x){if(o)throw new TypeError("Generator is already executing.");for(;A&&(A=0,x[0]&&(n=0)),n;)try{if(o=1,u&&(d=x[0]&2?u.return:x[0]?u.throw||((d=u.return)&&d.call(u),0):u.next)&&!(d=d.call(u,x[1])).done)return d;switch(u=0,d&&(x=[x[0]&2,d.value]),x[0]){case 0:case 1:d=x;break;case 4:return n.label++,{value:x[1],done:!1};case 5:n.label++,u=x[1],x=[0];continue;case 7:x=n.ops.pop(),n.trys.pop();continue;default:if(d=n.trys,!(d=d.length>0&&d[d.length-1])&&(x[0]===6||x[0]===2)){n=0;continue}if(x[0]===3&&(!d||x[1]>d[0]&&x[1]<d[3])){n.label=x[1];break}if(x[0]===6&&n.label<d[1]){n.label=d[1],d=x;break}if(d&&n.label<d[2]){n.label=d[2],n.ops.push(x);break}d[2]&&n.ops.pop(),n.trys.pop();continue}x=t.call(i,n)}catch(v){x=[6,v],u=0}finally{o=d=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},Fy=function(){function i(t,n,o){if(this.formatMap=new Map([[Xt.QR_CODE,"qr_code"],[Xt.AZTEC,"aztec"],[Xt.CODABAR,"codabar"],[Xt.CODE_39,"code_39"],[Xt.CODE_93,"code_93"],[Xt.CODE_128,"code_128"],[Xt.DATA_MATRIX,"data_matrix"],[Xt.ITF,"itf"],[Xt.EAN_13,"ean_13"],[Xt.EAN_8,"ean_8"],[Xt.PDF_417,"pdf417"],[Xt.UPC_A,"upc_a"],[Xt.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!i.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=o;var u=this.createBarcodeDetectorFormats(t);if(this.detector=new BarcodeDetector(u),!this.detector)throw"BarcodeDetector detector not supported"}return i.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var t=new BarcodeDetector({formats:["qr_code"]});return typeof t<"u"},i.prototype.decodeAsync=function(t){return b4(this,void 0,void 0,function(){var n,o;return I4(this,function(u){switch(u.label){case 0:return[4,this.detector.detect(t)];case 1:if(n=u.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return o=this.selectLargestBarcode(n),[2,{text:o.rawValue,format:SA.create(this.toHtml5QrcodeSupportedFormats(o.format)),debugData:this.createDebugData()}]}})})},i.prototype.selectLargestBarcode=function(t){for(var n=null,o=0,u=0,d=t;u<d.length;u++){var A=d[u],C=A.boundingBox.width*A.boundingBox.height;C>o&&(o=C,n=A)}if(!n)throw"No largest barcode found";return n},i.prototype.createBarcodeDetectorFormats=function(t){for(var n=[],o=0,u=t;o<u.length;o++){var d=u[o];this.formatMap.has(d)?n.push(this.formatMap.get(d)):this.logger.warn("".concat(d," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},i.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},i.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(n,o,u){t.set(n,o)}),t},i.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},i}(),jy=function(i,t,n,o){function u(d){return d instanceof n?d:new n(function(A){A(d)})}return new(n||(n=Promise))(function(d,A){function C(v){try{x(o.next(v))}catch(I){A(I)}}function _(v){try{x(o.throw(v))}catch(I){A(I)}}function x(v){v.done?d(v.value):u(v.value).then(C,_)}x((o=o.apply(i,t||[])).next())})},zy=function(i,t){var n={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},o,u,d,A;return A={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(A[Symbol.iterator]=function(){return this}),A;function C(x){return function(v){return _([x,v])}}function _(x){if(o)throw new TypeError("Generator is already executing.");for(;A&&(A=0,x[0]&&(n=0)),n;)try{if(o=1,u&&(d=x[0]&2?u.return:x[0]?u.throw||((d=u.return)&&d.call(u),0):u.next)&&!(d=d.call(u,x[1])).done)return d;switch(u=0,d&&(x=[x[0]&2,d.value]),x[0]){case 0:case 1:d=x;break;case 4:return n.label++,{value:x[1],done:!1};case 5:n.label++,u=x[1],x=[0];continue;case 7:x=n.ops.pop(),n.trys.pop();continue;default:if(d=n.trys,!(d=d.length>0&&d[d.length-1])&&(x[0]===6||x[0]===2)){n=0;continue}if(x[0]===3&&(!d||x[1]>d[0]&&x[1]<d[3])){n.label=x[1];break}if(x[0]===6&&n.label<d[1]){n.label=d[1],d=x;break}if(d&&n.label<d[2]){n.label=d[2],n.ops.push(x);break}d[2]&&n.ops.pop(),n.trys.pop();continue}x=t.call(i,n)}catch(v){x=[6,v],u=0}finally{o=d=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},R4=function(){function i(t,n,o,u){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=o,n&&Fy.isSupported()?(this.primaryDecoder=new Fy(t,o,u),this.secondaryDecoder=new Uy(t,o,u)):this.primaryDecoder=new Uy(t,o,u)}return i.prototype.decodeAsync=function(t){return jy(this,void 0,void 0,function(){var n;return zy(this,function(o){switch(o.label){case 0:n=performance.now(),o.label=1;case 1:return o.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(t)];case 2:return[2,o.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},i.prototype.decodeRobustlyAsync=function(t){return jy(this,void 0,void 0,function(){var n,o;return zy(this,function(u){switch(u.label){case 0:n=performance.now(),u.label=1;case 1:return u.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(t)];case 2:return[2,u.sent()];case 3:if(o=u.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(t)];throw o;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},i.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},i.prototype.possiblyLogPerformance=function(t){if(this.verbose){var n=performance.now()-t;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},i.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var t=0,n=0,o=this.executionResults;n<o.length;n++){var u=o[n];t+=u}var d=t/this.executionResults.length;console.log("".concat(d," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},i}(),sg=function(){var i=function(t,n){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,u){o.__proto__=u}||function(o,u){for(var d in u)Object.prototype.hasOwnProperty.call(u,d)&&(o[d]=u[d])},i(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");i(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),af=function(i,t,n,o){function u(d){return d instanceof n?d:new n(function(A){A(d)})}return new(n||(n=Promise))(function(d,A){function C(v){try{x(o.next(v))}catch(I){A(I)}}function _(v){try{x(o.throw(v))}catch(I){A(I)}}function x(v){v.done?d(v.value):u(v.value).then(C,_)}x((o=o.apply(i,t||[])).next())})},of=function(i,t){var n={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},o,u,d,A;return A={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(A[Symbol.iterator]=function(){return this}),A;function C(x){return function(v){return _([x,v])}}function _(x){if(o)throw new TypeError("Generator is already executing.");for(;A&&(A=0,x[0]&&(n=0)),n;)try{if(o=1,u&&(d=x[0]&2?u.return:x[0]?u.throw||((d=u.return)&&d.call(u),0):u.next)&&!(d=d.call(u,x[1])).done)return d;switch(u=0,d&&(x=[x[0]&2,d.value]),x[0]){case 0:case 1:d=x;break;case 4:return n.label++,{value:x[1],done:!1};case 5:n.label++,u=x[1],x=[0];continue;case 7:x=n.ops.pop(),n.trys.pop();continue;default:if(d=n.trys,!(d=d.length>0&&d[d.length-1])&&(x[0]===6||x[0]===2)){n=0;continue}if(x[0]===3&&(!d||x[1]>d[0]&&x[1]<d[3])){n.label=x[1];break}if(x[0]===6&&n.label<d[1]){n.label=d[1],d=x;break}if(d&&n.label<d[2]){n.label=d[2],n.ops.push(x);break}d[2]&&n.ops.pop(),n.trys.pop();continue}x=t.call(i,n)}catch(v){x=[6,v],u=0}finally{o=d=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},RA=function(){function i(t,n){this.name=t,this.track=n}return i.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},i.prototype.apply=function(t){var n={};n[this.name]=t;var o={advanced:[n]};return this.track.applyConstraints(o)},i.prototype.value=function(){var t=this.track.getSettings();if(this.name in t){var n=t[this.name];return n}return null},i}(),N4=function(i){sg(t,i);function t(n,o){return i.call(this,n,o)||this}return t.prototype.min=function(){return this.getCapabilities().min},t.prototype.max=function(){return this.getCapabilities().max},t.prototype.step=function(){return this.getCapabilities().step},t.prototype.apply=function(n){var o={};o[this.name]=n;var u={advanced:[o]};return this.track.applyConstraints(u)},t.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),o=n[this.name];return{min:o.min,max:o.max,step:o.step}},t.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},t}(RA),D4=function(i){sg(t,i);function t(n){return i.call(this,"zoom",n)||this}return t}(N4),M4=function(i){sg(t,i);function t(n){return i.call(this,"torch",n)||this}return t}(RA),O4=function(){function i(t){this.track=t}return i.prototype.zoomFeature=function(){return new D4(this.track)},i.prototype.torchFeature=function(){return new M4(this.track)},i}(),L4=function(){function i(t,n,o){this.isClosed=!1,this.parentElement=t,this.mediaStream=n,this.callbacks=o,this.surface=this.createVideoElement(this.parentElement.clientWidth),t.append(this.surface)}return i.prototype.createVideoElement=function(t){var n=document.createElement("video");return n.style.width="".concat(t,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},i.prototype.setupSurface=function(){var t=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var o=t.surface.clientWidth,u=t.surface.clientHeight;t.callbacks.onRenderSurfaceReady(o,u),t.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},i.create=function(t,n,o,u){return af(this,void 0,void 0,function(){var d,A;return of(this,function(C){switch(C.label){case 0:return d=new i(t,n,u),o.aspectRatio?(A={aspectRatio:o.aspectRatio},[4,d.getFirstTrackOrFail().applyConstraints(A)]):[3,2];case 1:C.sent(),C.label=2;case 2:return d.setupSurface(),[2,d]}})})},i.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},i.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},i.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},i.prototype.resume=function(t){this.failIfClosed();var n=this,o=function(){setTimeout(t,200),n.surface.removeEventListener("playing",o)};this.surface.addEventListener("playing",o),this.surface.play()},i.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},i.prototype.getSurface=function(){return this.failIfClosed(),this.surface},i.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},i.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},i.prototype.applyVideoConstraints=function(t){return af(this,void 0,void 0,function(){return of(this,function(n){if("aspectRatio"in t)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(t)]})})},i.prototype.close=function(){if(this.isClosed)return Promise.resolve();var t=this;return new Promise(function(n,o){var u=t.mediaStream.getVideoTracks(),d=u.length,A=0;t.mediaStream.getVideoTracks().forEach(function(C){t.mediaStream.removeTrack(C),C.stop(),++A,A>=d&&(t.isClosed=!0,t.parentElement.removeChild(t.surface),n())})})},i.prototype.getCapabilities=function(){return new O4(this.getFirstTrackOrFail())},i}(),B4=function(){function i(t){this.mediaStream=t}return i.prototype.render=function(t,n,o){return af(this,void 0,void 0,function(){return of(this,function(u){return[2,L4.create(t,this.mediaStream,n,o)]})})},i.create=function(t){return af(this,void 0,void 0,function(){var n,o;return of(this,function(u){switch(u.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:t},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return o=u.sent(),[2,new i(o)]}})})},i}(),Hy=function(i,t,n,o){function u(d){return d instanceof n?d:new n(function(A){A(d)})}return new(n||(n=Promise))(function(d,A){function C(v){try{x(o.next(v))}catch(I){A(I)}}function _(v){try{x(o.throw(v))}catch(I){A(I)}}function x(v){v.done?d(v.value):u(v.value).then(C,_)}x((o=o.apply(i,t||[])).next())})},Gy=function(i,t){var n={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},o,u,d,A;return A={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(A[Symbol.iterator]=function(){return this}),A;function C(x){return function(v){return _([x,v])}}function _(x){if(o)throw new TypeError("Generator is already executing.");for(;A&&(A=0,x[0]&&(n=0)),n;)try{if(o=1,u&&(d=x[0]&2?u.return:x[0]?u.throw||((d=u.return)&&d.call(u),0):u.next)&&!(d=d.call(u,x[1])).done)return d;switch(u=0,d&&(x=[x[0]&2,d.value]),x[0]){case 0:case 1:d=x;break;case 4:return n.label++,{value:x[1],done:!1};case 5:n.label++,u=x[1],x=[0];continue;case 7:x=n.ops.pop(),n.trys.pop();continue;default:if(d=n.trys,!(d=d.length>0&&d[d.length-1])&&(x[0]===6||x[0]===2)){n=0;continue}if(x[0]===3&&(!d||x[1]>d[0]&&x[1]<d[3])){n.label=x[1];break}if(x[0]===6&&n.label<d[1]){n.label=d[1],d=x;break}if(d&&n.label<d[2]){n.label=d[2],n.ops.push(x);break}d[2]&&n.ops.pop(),n.trys.pop();continue}x=t.call(i,n)}catch(v){x=[6,v],u=0}finally{o=d=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},P4=function(){function i(){}return i.failIfNotSupported=function(){return Hy(this,void 0,void 0,function(){return Gy(this,function(t){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new i]})})},i.prototype.create=function(t){return Hy(this,void 0,void 0,function(){return Gy(this,function(n){return[2,B4.create(t)]})})},i}(),k4=function(i,t,n,o){function u(d){return d instanceof n?d:new n(function(A){A(d)})}return new(n||(n=Promise))(function(d,A){function C(v){try{x(o.next(v))}catch(I){A(I)}}function _(v){try{x(o.throw(v))}catch(I){A(I)}}function x(v){v.done?d(v.value):u(v.value).then(C,_)}x((o=o.apply(i,t||[])).next())})},V4=function(i,t){var n={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},o,u,d,A;return A={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(A[Symbol.iterator]=function(){return this}),A;function C(x){return function(v){return _([x,v])}}function _(x){if(o)throw new TypeError("Generator is already executing.");for(;A&&(A=0,x[0]&&(n=0)),n;)try{if(o=1,u&&(d=x[0]&2?u.return:x[0]?u.throw||((d=u.return)&&d.call(u),0):u.next)&&!(d=d.call(u,x[1])).done)return d;switch(u=0,d&&(x=[x[0]&2,d.value]),x[0]){case 0:case 1:d=x;break;case 4:return n.label++,{value:x[1],done:!1};case 5:n.label++,u=x[1],x=[0];continue;case 7:x=n.ops.pop(),n.trys.pop();continue;default:if(d=n.trys,!(d=d.length>0&&d[d.length-1])&&(x[0]===6||x[0]===2)){n=0;continue}if(x[0]===3&&(!d||x[1]>d[0]&&x[1]<d[3])){n.label=x[1];break}if(x[0]===6&&n.label<d[1]){n.label=d[1],d=x;break}if(d&&n.label<d[2]){n.label=d[2],n.ops.push(x);break}d[2]&&n.ops.pop(),n.trys.pop();continue}x=t.call(i,n)}catch(v){x=[6,v],u=0}finally{o=d=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},U4=function(){function i(){}return i.retrieve=function(){if(navigator.mediaDevices)return i.getCamerasFromMediaDevices();var t=MediaStreamTrack;return MediaStreamTrack&&t.getSources?i.getCamerasFromMediaStreamTrack():i.rejectWithError()},i.rejectWithError=function(){var t=Vl.unableToQuerySupportedDevices();return i.isHttpsOrLocalhost()||(t=Vl.insecureContextCameraQueryError()),Promise.reject(t)},i.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var t=location.host.split(":")[0];return t==="127.0.0.1"||t==="localhost"},i.getCamerasFromMediaDevices=function(){return k4(this,void 0,void 0,function(){var t,n,o,u,d,A,C;return V4(this,function(_){switch(_.label){case 0:return t=function(x){for(var v=x.getVideoTracks(),I=0,O=v;I<O.length;I++){var H=O[I];H.enabled=!1,H.stop(),x.removeTrack(H)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=_.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(o=_.sent(),u=[],d=0,A=o;d<A.length;d++)C=A[d],C.kind==="videoinput"&&u.push({id:C.deviceId,label:C.label});return t(n),[2,u]}})})},i.getCamerasFromMediaStreamTrack=function(){return new Promise(function(t,n){var o=function(d){for(var A=[],C=0,_=d;C<_.length;C++){var x=_[C];x.kind==="video"&&A.push({id:x.id,label:x.label})}t(A)},u=MediaStreamTrack;u.getSources(o)})},i}(),Wn;(function(i){i[i.UNKNOWN=0]="UNKNOWN",i[i.NOT_STARTED=1]="NOT_STARTED",i[i.SCANNING=2]="SCANNING",i[i.PAUSED=3]="PAUSED"})(Wn||(Wn={}));var F4=function(){function i(){this.state=Wn.NOT_STARTED,this.onGoingTransactionNewState=Wn.UNKNOWN}return i.prototype.directTransition=function(t){this.failIfTransitionOngoing(),this.validateTransition(t),this.state=t},i.prototype.startTransition=function(t){return this.failIfTransitionOngoing(),this.validateTransition(t),this.onGoingTransactionNewState=t,this},i.prototype.execute=function(){if(this.onGoingTransactionNewState===Wn.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var t=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Wn.UNKNOWN,this.directTransition(t)},i.prototype.cancel=function(){if(this.onGoingTransactionNewState===Wn.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Wn.UNKNOWN},i.prototype.getState=function(){return this.state},i.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Wn.UNKNOWN)throw"Cannot transition to a new state, already under transition"},i.prototype.validateTransition=function(t){switch(this.state){case Wn.UNKNOWN:throw"Transition from unknown is not allowed";case Wn.NOT_STARTED:this.failIfNewStateIs(t,[Wn.PAUSED]);break;case Wn.SCANNING:break;case Wn.PAUSED:break}},i.prototype.failIfNewStateIs=function(t,n){for(var o=0,u=n;o<u.length;o++){var d=u[o];if(t===d)throw"Cannot transition from ".concat(this.state," to ").concat(t)}},i}(),j4=function(){function i(t){this.stateManager=t}return i.prototype.startTransition=function(t){return this.stateManager.startTransition(t)},i.prototype.directTransition=function(t){this.stateManager.directTransition(t)},i.prototype.getState=function(){return this.stateManager.getState()},i.prototype.canScanFile=function(){return this.stateManager.getState()===Wn.NOT_STARTED},i.prototype.isScanning=function(){return this.stateManager.getState()!==Wn.NOT_STARTED},i.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Wn.SCANNING},i.prototype.isPaused=function(){return this.stateManager.getState()===Wn.PAUSED},i}(),z4=function(){function i(){}return i.create=function(){return new j4(new F4)},i}(),H4=function(){var i=function(t,n){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,u){o.__proto__=u}||function(o,u){for(var d in u)Object.prototype.hasOwnProperty.call(u,d)&&(o[d]=u[d])},i(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");i(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),Oi=function(i){H4(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.DEFAULT_WIDTH=300,t.DEFAULT_WIDTH_OFFSET=2,t.FILE_SCAN_MIN_HEIGHT=300,t.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,t.MIN_QR_BOX_SIZE=50,t.SHADED_LEFT=1,t.SHADED_RIGHT=2,t.SHADED_TOP=3,t.SHADED_BOTTOM=4,t.SHADED_REGION_ELEMENT_ID="qr-shaded-region",t.VERBOSE=!1,t.BORDER_SHADER_DEFAULT_COLOR="#ffffff",t.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",t}(ds),G4=function(){function i(t,n){this.logger=n,this.fps=Oi.SCAN_DEFAULT_FPS,t?(t.fps&&(this.fps=t.fps),this.disableFlip=t.disableFlip===!0,this.qrbox=t.qrbox,this.aspectRatio=t.aspectRatio,this.videoConstraints=t.videoConstraints):this.disableFlip=Oi.DEFAULT_DISABLE_FLIP}return i.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?IA.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},i.prototype.isShadedBoxEnabled=function(){return!Ls(this.qrbox)},i.create=function(t,n){return new i(t,n)},i}(),qy=function(){function i(t,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.elementId=t,this.verbose=!1;var o;typeof n=="boolean"?this.verbose=n===!0:n&&(o=n,this.verbose=o.verbose===!0,o.experimentalFeatures),this.logger=new bA(this.verbose),this.qrcode=new R4(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(o),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=z4.create()}return i.prototype.start=function(t,n,o,u){var d=this;if(!t)throw"cameraIdOrConfig is required";if(!o||typeof o!="function")throw"qrCodeSuccessCallback is required and should be a function.";var A;u?A=u:A=this.verbose?this.logger.log:function(){};var C=G4.create(n,this.logger);this.clearElement();var _=!1;C.videoConstraints&&(C.isMediaStreamConstraintsValid()?_=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var x=_,v=document.getElementById(this.elementId);v.clientWidth?v.clientWidth:Oi.DEFAULT_WIDTH,v.style.position="relative",this.shouldScan=!0,this.element=v;var I=this,O=this.stateManagerProxy.startTransition(Wn.SCANNING);return new Promise(function(H,X){var J=x?C.videoConstraints:I.createVideoConstraints(t);if(!J){O.cancel(),X("videoConstraints should be defined");return}var q={};(!x||C.aspectRatio)&&(q.aspectRatio=C.aspectRatio);var Q={onRenderSurfaceReady:function(ft,nt){I.setupUi(ft,nt,C),I.isScanning=!0,I.foreverScan(C,o,A)}};P4.failIfNotSupported().then(function(ft){ft.create(J).then(function(nt){return nt.render(d.element,q,Q).then(function(_t){I.renderedCamera=_t,O.execute(),H(null)}).catch(function(_t){O.cancel(),X(_t)})}).catch(function(nt){O.cancel(),X(Vl.errorGettingUserMedia(nt))})}).catch(function(ft){O.cancel(),X(Vl.cameraStreamingNotSupported())})})},i.prototype.pause=function(t){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Wn.PAUSED),this.showPausedState(),(Ls(t)||t!==!0)&&(t=!1),t&&this.renderedCamera&&this.renderedCamera.pause()},i.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var t=this,n=function(){t.stateManagerProxy.directTransition(Wn.SCANNING),t.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},i.prototype.getState=function(){return this.stateManagerProxy.getState()},i.prototype.stop=function(){var t=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(Wn.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var o=function(){if(t.element){var d=document.getElementById(Oi.SHADED_REGION_ELEMENT_ID);d&&t.element.removeChild(d)}},u=this;return this.renderedCamera.close().then(function(){return u.renderedCamera=null,u.element&&(u.element.removeChild(u.canvasElement),u.canvasElement=null),o(),u.qrRegion&&(u.qrRegion=null),u.context&&(u.context=null),n.execute(),u.hidePausedState(),u.isScanning=!1,Promise.resolve()})},i.prototype.scanFile=function(t,n){return this.scanFileV2(t,n).then(function(o){return o.decodedText})},i.prototype.scanFileV2=function(t,n){var o=this;if(!t||!(t instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Ls(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(u,d){o.possiblyCloseLastScanImageFile(),o.clearElement(),o.lastScanImageFile=URL.createObjectURL(t);var A=new Image;A.onload=function(){var C=A.width,_=A.height,x=document.getElementById(o.elementId),v=x.clientWidth?x.clientWidth:Oi.DEFAULT_WIDTH,I=Math.max(x.clientHeight?x.clientHeight:_,Oi.FILE_SCAN_MIN_HEIGHT),O=o.computeCanvasDrawConfig(C,_,v,I);if(n){var H=o.createCanvasElement(v,I,"qr-canvas-visible");H.style.display="inline-block",x.appendChild(H);var X=H.getContext("2d");if(!X)throw"Unable to get 2d context from canvas";X.canvas.width=v,X.canvas.height=I,X.drawImage(A,0,0,C,_,O.x,O.y,O.width,O.height)}var J=Oi.FILE_SCAN_HIDDEN_CANVAS_PADDING,q=Math.max(A.width,O.width),Q=Math.max(A.height,O.height),ft=q+2*J,nt=Q+2*J,_t=o.createCanvasElement(ft,nt);x.appendChild(_t);var mt=_t.getContext("2d");if(!mt)throw"Unable to get 2d context from canvas";mt.canvas.width=ft,mt.canvas.height=nt,mt.drawImage(A,0,0,C,_,J,J,q,Q);try{o.qrcode.decodeRobustlyAsync(_t).then(function(Tt){u(Py.createFromQrcodeResult(Tt))}).catch(d)}catch(Tt){d("QR code parse error, error = ".concat(Tt))}},A.onerror=d,A.onabort=d,A.onstalled=d,A.onsuspend=d,A.src=URL.createObjectURL(t)})},i.prototype.clear=function(){this.clearElement()},i.getCameras=function(){return U4.retrieve()},i.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},i.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},i.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},i.prototype.applyVideoConstraints=function(t){if(t){if(!IA.isMediaStreamConstraintsValid(t,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(t)},i.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},i.prototype.getSupportedFormats=function(t){var n=[Xt.QR_CODE,Xt.AZTEC,Xt.CODABAR,Xt.CODE_39,Xt.CODE_93,Xt.CODE_128,Xt.DATA_MATRIX,Xt.MAXICODE,Xt.ITF,Xt.EAN_13,Xt.EAN_8,Xt.PDF_417,Xt.RSS_14,Xt.RSS_EXPANDED,Xt.UPC_A,Xt.UPC_E,Xt.UPC_EAN_EXTENSION];if(!t||typeof t=="boolean"||!t.formatsToSupport)return n;if(!Array.isArray(t.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(t.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var o=[],u=0,d=t.formatsToSupport;u<d.length;u++){var A=d[u];w4(A)?o.push(A):this.logger.warn("Invalid format: ".concat(A," passed in config, ignoring."))}if(o.length===0)throw"None of formatsToSupport match supported values.";return o},i.prototype.getUseBarCodeDetectorIfSupported=function(t){if(Ls(t))return!0;if(!Ls(t.useBarCodeDetectorIfSupported))return t.useBarCodeDetectorIfSupported!==!1;if(Ls(t.experimentalFeatures))return!0;var n=t.experimentalFeatures;return Ls(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},i.prototype.validateQrboxSize=function(t,n,o){var u=this,d=o.qrbox;this.validateQrboxConfig(d);var A=this.toQrdimensions(t,n,d),C=function(x){if(x<Oi.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Oi.MIN_QR_BOX_SIZE,"px.")},_=function(x){return x>t&&(u.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),x=t),x};C(A.width),C(A.height),A.width=_(A.width)},i.prototype.validateQrboxConfig=function(t){if(typeof t!="number"&&typeof t!="function"&&(t.width===void 0||t.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},i.prototype.toQrdimensions=function(t,n,o){if(typeof o=="number")return{width:o,height:o};if(typeof o=="function")try{return o(t,n)}catch(u){throw new Error("qrbox config was passed as a function but it failed with unknown error"+u)}return o},i.prototype.setupUi=function(t,n,o){o.isShadedBoxEnabled()&&this.validateQrboxSize(t,n,o);var u=Ls(o.qrbox)?{width:t,height:n}:o.qrbox;this.validateQrboxConfig(u);var d=this.toQrdimensions(t,n,u);d.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var A=o.isShadedBoxEnabled()&&d.height<=n,C={x:0,y:0,width:t,height:n},_=A?this.getShadedRegionBounds(t,n,d):C,x=this.createCanvasElement(_.width,_.height),v={willReadFrequently:!0},I=x.getContext("2d",v);I.canvas.width=_.width,I.canvas.height=_.height,this.element.append(x),A&&this.possiblyInsertShadingElement(this.element,t,n,d),this.createScannerPausedUiElement(this.element),this.qrRegion=_,this.context=I,this.canvasElement=x},i.prototype.createScannerPausedUiElement=function(t){var n=document.createElement("div");n.innerText=Vl.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",t.appendChild(n),this.scannerPausedUiElement=n},i.prototype.scanContext=function(t,n){var o=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(u){return t(u.text,Py.createFromQrcodeResult(u)),o.possiblyUpdateShaders(!0),!0}).catch(function(u){o.possiblyUpdateShaders(!1);var d=Vl.codeParseError(u);return n(d,vA.createFrom(d)),!1})},i.prototype.foreverScan=function(t,n,o){var u=this;if(this.shouldScan&&this.renderedCamera){var d=this.renderedCamera.getSurface(),A=d.videoWidth/d.clientWidth,C=d.videoHeight/d.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var _=this.qrRegion.width*A,x=this.qrRegion.height*C,v=this.qrRegion.x*A,I=this.qrRegion.y*C;this.context.drawImage(d,v,I,_,x,0,0,this.qrRegion.width,this.qrRegion.height);var O=function(){u.foreverScanTimeout=setTimeout(function(){u.foreverScan(t,n,o)},u.getTimeoutFps(t.fps))};this.scanContext(n,o).then(function(H){!H&&t.disableFlip!==!0?(u.context.translate(u.context.canvas.width,0),u.context.scale(-1,1),u.scanContext(n,o).finally(function(){O()})):O()}).catch(function(H){u.logger.logError("Error happend while scanning context",H),O()})}},i.prototype.createVideoConstraints=function(t){if(typeof t=="string")return{deviceId:{exact:t}};if(typeof t=="object"){var n="facingMode",o="deviceId",u={user:!0,environment:!0},d="exact",A=function(X){if(X in u)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(X,"'")},C=Object.keys(t);if(C.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(C.length," keys");var _=Object.keys(t)[0];if(_!==n&&_!==o)throw"Only '".concat(n,"' and '").concat(o,"' ")+" are supported for 'cameraIdOrConfig'";if(_===n){var x=t.facingMode;if(typeof x=="string"){if(A(x))return{facingMode:x}}else if(typeof x=="object")if(d in x){if(A(x["".concat(d)]))return{facingMode:{exact:x["".concat(d)]}}}else throw"'facingMode' should be string or object with"+" ".concat(d," as key.");else{var v=typeof x;throw"Invalid type of 'facingMode' = ".concat(v)}}else{var I=t.deviceId;if(typeof I=="string")return{deviceId:I};if(typeof I=="object"){if(d in I)return{deviceId:{exact:I["".concat(d)]}};throw"'deviceId' should be string or object with"+" ".concat(d," as key.")}else{var O=typeof I;throw"Invalid type of 'deviceId' = ".concat(O)}}}var H=typeof t;throw"Invalid type of 'cameraIdOrConfig' = ".concat(H)},i.prototype.computeCanvasDrawConfig=function(t,n,o,u){if(t<=o&&n<=u){var d=(o-t)/2,A=(u-n)/2;return{x:d,y:A,width:t,height:n}}else{var C=t,_=n;return t>o&&(n=o/t*n,t=o),n>u&&(t=u/n*t,n=u),this.logger.log("Image downsampled from "+"".concat(C,"X").concat(_)+" to ".concat(t,"X").concat(n,".")),this.computeCanvasDrawConfig(t,n,o,u)}},i.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var t=document.getElementById(this.elementId);t&&(t.innerHTML="")},i.prototype.possiblyUpdateShaders=function(t){this.qrMatch!==t&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=t?Oi.BORDER_SHADER_MATCH_COLOR:Oi.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=t)},i.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},i.prototype.createCanvasElement=function(t,n,o){var u=t,d=n,A=document.createElement("canvas");return A.style.width="".concat(u,"px"),A.style.height="".concat(d,"px"),A.style.display="none",A.id=Ls(o)?"qr-canvas":o,A},i.prototype.getShadedRegionBounds=function(t,n,o){if(o.width>t||o.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(t-o.width)/2,y:(n-o.height)/2,width:o.width,height:o.height}},i.prototype.possiblyInsertShadingElement=function(t,n,o,u){if(!(n-u.width<1||o-u.height<1)){var d=document.createElement("div");d.style.position="absolute";var A=(n-u.width)/2,C=(o-u.height)/2;if(d.style.borderLeft="".concat(A,"px solid rgba(0, 0, 0, 0.48)"),d.style.borderRight="".concat(A,"px solid rgba(0, 0, 0, 0.48)"),d.style.borderTop="".concat(C,"px solid rgba(0, 0, 0, 0.48)"),d.style.borderBottom="".concat(C,"px solid rgba(0, 0, 0, 0.48)"),d.style.boxSizing="border-box",d.style.top="0px",d.style.bottom="0px",d.style.left="0px",d.style.right="0px",d.id="".concat(Oi.SHADED_REGION_ELEMENT_ID),n-u.width<11||o-u.height<11)this.hasBorderShaders=!1;else{var _=5,x=40;this.insertShaderBorders(d,x,_,-_,null,0,!0),this.insertShaderBorders(d,x,_,-_,null,0,!1),this.insertShaderBorders(d,x,_,null,-_,0,!0),this.insertShaderBorders(d,x,_,null,-_,0,!1),this.insertShaderBorders(d,_,x+_,-_,null,-_,!0),this.insertShaderBorders(d,_,x+_,null,-_,-_,!0),this.insertShaderBorders(d,_,x+_,-_,null,-_,!1),this.insertShaderBorders(d,_,x+_,null,-_,-_,!1),this.hasBorderShaders=!0}t.append(d)}},i.prototype.insertShaderBorders=function(t,n,o,u,d,A,C){var _=document.createElement("div");_.style.position="absolute",_.style.backgroundColor=Oi.BORDER_SHADER_DEFAULT_COLOR,_.style.width="".concat(n,"px"),_.style.height="".concat(o,"px"),u!==null&&(_.style.top="".concat(u,"px")),d!==null&&(_.style.bottom="".concat(d,"px")),C?_.style.left="".concat(A,"px"):_.style.right="".concat(A,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(_),t.appendChild(_)},i.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},i.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},i.prototype.getTimeoutFps=function(t){return 1e3/t},i}(),ag="data:image/svg+xml;base64,",q4=ag+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",Y4=ag+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",Yy=ag+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",X4="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",Xy=function(){function i(){}return i.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},i}(),Q4=function(){function i(){this.data=Xy.createDefault();var t=localStorage.getItem(i.LOCAL_STORAGE_KEY);t?this.data=JSON.parse(t):this.reset()}return i.prototype.hasCameraPermissions=function(){return this.data.hasPermission},i.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},i.prototype.setHasPermission=function(t){this.data.hasPermission=t,this.flush()},i.prototype.setLastUsedCameraId=function(t){this.data.lastUsedCameraId=t,this.flush()},i.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},i.prototype.reset=function(){this.data=Xy.createDefault(),this.flush()},i.prototype.flush=function(){localStorage.setItem(i.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},i.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",i}(),W4=function(){function i(){this.infoDiv=document.createElement("div")}return i.prototype.renderInto=function(t){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=ky.poweredBy();var n=document.createElement("a");n.innerText="ScanApp",n.href="https://scanapp.org",n.target="new",n.style.color="white",this.infoDiv.appendChild(n);var o=document.createElement("br"),u=document.createElement("br");this.infoDiv.appendChild(o),this.infoDiv.appendChild(u);var d=document.createElement("a");d.innerText=ky.reportIssues(),d.href="https://github.com/mebjas/html5-qrcode/issues",d.target="new",d.style.color="white",this.infoDiv.appendChild(d),t.appendChild(this.infoDiv)},i.prototype.show=function(){this.infoDiv.style.display="block"},i.prototype.hide=function(){this.infoDiv.style.display="none"},i}(),K4=function(){function i(t,n){this.isShowingInfoIcon=!0,this.onTapIn=t,this.onTapOut=n,this.infoIcon=document.createElement("img")}return i.prototype.renderInto=function(t){var n=this;this.infoIcon.alt="Info icon",this.infoIcon.src=Yy,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(o){return n.onHoverIn()},this.infoIcon.onmouseout=function(o){return n.onHoverOut()},this.infoIcon.onclick=function(o){return n.onClick()},t.appendChild(this.infoIcon)},i.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},i.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},i.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=X4,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=Yy,this.infoIcon.style.opacity="0.6")},i}(),Z4=function(){function i(){var t=this;this.infoDiv=new W4,this.infoIcon=new K4(function(){t.infoDiv.show()},function(){t.infoDiv.hide()})}return i.prototype.renderInto=function(t){this.infoDiv.renderInto(t),this.infoIcon.renderInto(t)},i}(),J4=function(i,t,n,o){function u(d){return d instanceof n?d:new n(function(A){A(d)})}return new(n||(n=Promise))(function(d,A){function C(v){try{x(o.next(v))}catch(I){A(I)}}function _(v){try{x(o.throw(v))}catch(I){A(I)}}function x(v){v.done?d(v.value):u(v.value).then(C,_)}x((o=o.apply(i,t||[])).next())})},$4=function(i,t){var n={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},o,u,d,A;return A={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(A[Symbol.iterator]=function(){return this}),A;function C(x){return function(v){return _([x,v])}}function _(x){if(o)throw new TypeError("Generator is already executing.");for(;A&&(A=0,x[0]&&(n=0)),n;)try{if(o=1,u&&(d=x[0]&2?u.return:x[0]?u.throw||((d=u.return)&&d.call(u),0):u.next)&&!(d=d.call(u,x[1])).done)return d;switch(u=0,d&&(x=[x[0]&2,d.value]),x[0]){case 0:case 1:d=x;break;case 4:return n.label++,{value:x[1],done:!1};case 5:n.label++,u=x[1],x=[0];continue;case 7:x=n.ops.pop(),n.trys.pop();continue;default:if(d=n.trys,!(d=d.length>0&&d[d.length-1])&&(x[0]===6||x[0]===2)){n=0;continue}if(x[0]===3&&(!d||x[1]>d[0]&&x[1]<d[3])){n.label=x[1];break}if(x[0]===6&&n.label<d[1]){n.label=d[1],d=x;break}if(d&&n.label<d[2]){n.label=d[2],n.ops.push(x);break}d[2]&&n.ops.pop(),n.trys.pop();continue}x=t.call(i,n)}catch(v){x=[6,v],u=0}finally{o=d=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},Qy=function(){function i(){}return i.hasPermissions=function(){return J4(this,void 0,void 0,function(){var t,n,o,u;return $4(this,function(d){switch(d.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(t=d.sent(),n=0,o=t;n<o.length;n++)if(u=o[n],u.kind==="videoinput"&&u.label)return[2,!0];return[2,!1]}})})},i}(),eo=function(){function i(t){this.supportedScanTypes=this.validateAndReturnScanTypes(t)}return i.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},i.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},i.prototype.isCameraScanRequired=function(){for(var t=0,n=this.supportedScanTypes;t<n.length;t++){var o=n[t];if(i.isCameraScanType(o))return!0}return!1},i.isCameraScanType=function(t){return t===po.SCAN_TYPE_CAMERA},i.isFileScanType=function(t){return t===po.SCAN_TYPE_FILE},i.prototype.validateAndReturnScanTypes=function(t){if(!t||t.length===0)return ds.DEFAULT_SUPPORTED_SCAN_TYPE;var n=ds.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(t.length>n)throw"Max ".concat(n," values expected for ")+"supportedScanTypes";for(var o=0,u=t;o<u.length;o++){var d=u[o];if(!ds.DEFAULT_SUPPORTED_SCAN_TYPE.includes(d))throw"Unsupported scan type ".concat(d)}return t},i}(),Pi=function(){function i(){}return i.ALL_ELEMENT_CLASS="html5-qrcode-element",i.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",i.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",i.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",i.TORCH_BUTTON_ID="html5-qrcode-button-torch",i.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",i.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",i.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",i.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",i.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",i.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",i}(),ga=function(){function i(){}return i.createElement=function(t,n){var o=document.createElement(t);return o.id=n,o.classList.add(Pi.ALL_ELEMENT_CLASS),t==="button"&&o.setAttribute("type","button"),o},i}(),NA=function(i,t,n,o){function u(d){return d instanceof n?d:new n(function(A){A(d)})}return new(n||(n=Promise))(function(d,A){function C(v){try{x(o.next(v))}catch(I){A(I)}}function _(v){try{x(o.throw(v))}catch(I){A(I)}}function x(v){v.done?d(v.value):u(v.value).then(C,_)}x((o=o.apply(i,t||[])).next())})},DA=function(i,t){var n={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},o,u,d,A;return A={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(A[Symbol.iterator]=function(){return this}),A;function C(x){return function(v){return _([x,v])}}function _(x){if(o)throw new TypeError("Generator is already executing.");for(;A&&(A=0,x[0]&&(n=0)),n;)try{if(o=1,u&&(d=x[0]&2?u.return:x[0]?u.throw||((d=u.return)&&d.call(u),0):u.next)&&!(d=d.call(u,x[1])).done)return d;switch(u=0,d&&(x=[x[0]&2,d.value]),x[0]){case 0:case 1:d=x;break;case 4:return n.label++,{value:x[1],done:!1};case 5:n.label++,u=x[1],x=[0];continue;case 7:x=n.ops.pop(),n.trys.pop();continue;default:if(d=n.trys,!(d=d.length>0&&d[d.length-1])&&(x[0]===6||x[0]===2)){n=0;continue}if(x[0]===3&&(!d||x[1]>d[0]&&x[1]<d[3])){n.label=x[1];break}if(x[0]===6&&n.label<d[1]){n.label=d[1],d=x;break}if(d&&n.label<d[2]){n.label=d[2],n.ops.push(x);break}d[2]&&n.ops.pop(),n.trys.pop();continue}x=t.call(i,n)}catch(v){x=[6,v],u=0}finally{o=d=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},Wy=function(){function i(t,n,o){this.isTorchOn=!1,this.torchCapability=t,this.buttonController=n,this.onTorchActionFailureCallback=o}return i.prototype.isTorchEnabled=function(){return this.isTorchOn},i.prototype.flipState=function(){return NA(this,void 0,void 0,function(){var t,n;return DA(this,function(o){switch(o.label){case 0:this.buttonController.disable(),t=!this.isTorchOn,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.torchCapability.apply(t)];case 2:return o.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),t),[3,4];case 3:return n=o.sent(),this.propagateFailure(t,n),this.buttonController.enable(),[3,4];case 4:return[2]}})})},i.prototype.updateUiBasedOnLatestSettings=function(t,n){t===n?(this.buttonController.setText(n?rn.torchOffButton():rn.torchOnButton()),this.isTorchOn=n):this.propagateFailure(n),this.buttonController.enable()},i.prototype.propagateFailure=function(t,n){var o=t?rn.torchOnFailedMessage():rn.torchOffFailedMessage();n&&(o+="; Error = "+n),this.onTorchActionFailureCallback(o)},i.prototype.reset=function(){this.isTorchOn=!1},i}(),tI=function(){function i(t,n){this.onTorchActionFailureCallback=n,this.torchButton=ga.createElement("button",Pi.TORCH_BUTTON_ID),this.torchController=new Wy(t,this,n)}return i.prototype.render=function(t,n){var o=this;this.torchButton.innerText=rn.torchOnButton(),this.torchButton.style.display=n.display,this.torchButton.style.marginLeft=n.marginLeft;var u=this;this.torchButton.addEventListener("click",function(d){return NA(o,void 0,void 0,function(){return DA(this,function(A){switch(A.label){case 0:return[4,u.torchController.flipState()];case 1:return A.sent(),u.torchController.isTorchEnabled()?(u.torchButton.classList.remove(Pi.TORCH_BUTTON_CLASS_TORCH_OFF),u.torchButton.classList.add(Pi.TORCH_BUTTON_CLASS_TORCH_ON)):(u.torchButton.classList.remove(Pi.TORCH_BUTTON_CLASS_TORCH_ON),u.torchButton.classList.add(Pi.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),t.appendChild(this.torchButton)},i.prototype.updateTorchCapability=function(t){this.torchController=new Wy(t,this,this.onTorchActionFailureCallback)},i.prototype.getTorchButton=function(){return this.torchButton},i.prototype.hide=function(){this.torchButton.style.display="none"},i.prototype.show=function(){this.torchButton.style.display="inline-block"},i.prototype.disable=function(){this.torchButton.disabled=!0},i.prototype.enable=function(){this.torchButton.disabled=!1},i.prototype.setText=function(t){this.torchButton.innerText=t},i.prototype.reset=function(){this.torchButton.innerText=rn.torchOnButton(),this.torchController.reset()},i.create=function(t,n,o,u){var d=new i(n,u);return d.render(t,o),d},i}(),eI=function(){function i(t,n,o){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=n?"block":"none",t.appendChild(this.fileBasedScanRegion);var u=document.createElement("label");u.setAttribute("for",this.getFileScanInputId()),u.style.display="inline-block",this.fileBasedScanRegion.appendChild(u),this.fileSelectionButton=ga.createElement("button",Pi.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(C){u.click()}),u.append(this.fileSelectionButton),this.fileScanInput=ga.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",u.appendChild(this.fileScanInput);var d=this;this.fileScanInput.addEventListener("change",function(C){if(!(C==null||C.target==null)){var _=C.target;if(!(_.files&&_.files.length===0)){var x=_.files,v=x[0],I=v.name;d.setImageNameToButton(I),o(v)}}});var A=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(A),this.fileBasedScanRegion.addEventListener("dragenter",function(C){d.fileBasedScanRegion.style.border=d.fileBasedScanRegionActiveBorder(),C.stopPropagation(),C.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(C){d.fileBasedScanRegion.style.border=d.fileBasedScanRegionDefaultBorder(),C.stopPropagation(),C.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(C){d.fileBasedScanRegion.style.border=d.fileBasedScanRegionActiveBorder(),C.stopPropagation(),C.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(C){C.stopPropagation(),C.preventDefault(),d.fileBasedScanRegion.style.border=d.fileBasedScanRegionDefaultBorder();var _=C.dataTransfer;if(_){var x=_.files;if(!x||x.length===0)return;for(var v=!1,I=0;I<x.length;++I){var O=x.item(I);if(O){var H=/image.*/;if(O.type.match(H)){v=!0;var X=O.name;d.setImageNameToButton(X),o(O),A.innerText=rn.dragAndDropMessage();break}}}v||(A.innerText=rn.dragAndDropMessageOnlyImages())}})}return i.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},i.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},i.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},i.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},i.prototype.createFileBasedScanRegion=function(){var t=document.createElement("div");return t.style.textAlign="center",t.style.margin="auto",t.style.width="80%",t.style.maxWidth="600px",t.style.border=this.fileBasedScanRegionDefaultBorder(),t.style.padding="10px",t.style.marginBottom="10px",t},i.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},i.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},i.prototype.createDragAndDropMessage=function(){var t=document.createElement("div");return t.innerText=rn.dragAndDropMessage(),t.style.fontWeight="400",t},i.prototype.setImageNameToButton=function(t){var n=20;if(t.length>n){var o=t.substring(0,8),u=t.length,d=t.substring(u-8,u);t="".concat(o,"....").concat(d)}var A=rn.fileSelectionChooseAnother()+" - "+t;this.fileSelectionButton.innerText=A},i.prototype.setInitialValueToButton=function(){var t=rn.fileSelectionChooseImage()+" - "+rn.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=t},i.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},i.create=function(t,n,o){var u=new i(t,n,o);return u},i}(),nI=function(){function i(t){this.selectElement=ga.createElement("select",Pi.CAMERA_SELECTION_SELECT_ID),this.cameras=t,this.options=[]}return i.prototype.render=function(t){var n=document.createElement("span");n.style.marginRight="10px";var o=this.cameras.length;if(o===0)throw new Error("No cameras found");if(o===1)n.style.display="none";else{var u=rn.selectCamera();n.innerText="".concat(u," (").concat(this.cameras.length,")  ")}for(var d=1,A=0,C=this.cameras;A<C.length;A++){var _=C[A],x=_.id,v=_.label==null?x:_.label;(!v||v==="")&&(v=[rn.anonymousCameraPrefix(),d++].join(" "));var I=document.createElement("option");I.value=x,I.innerText=v,this.options.push(I),this.selectElement.appendChild(I)}n.appendChild(this.selectElement),t.appendChild(n)},i.prototype.disable=function(){this.selectElement.disabled=!0},i.prototype.isDisabled=function(){return this.selectElement.disabled===!0},i.prototype.enable=function(){this.selectElement.disabled=!1},i.prototype.getValue=function(){return this.selectElement.value},i.prototype.hasValue=function(t){for(var n=0,o=this.options;n<o.length;n++){var u=o[n];if(u.value===t)return!0}return!1},i.prototype.setValue=function(t){if(!this.hasValue(t))throw new Error("".concat(t," is not present in the camera list."));this.selectElement.value=t},i.prototype.hasSingleItem=function(){return this.cameras.length===1},i.prototype.numCameras=function(){return this.cameras.length},i.create=function(t,n){var o=new i(n);return o.render(t),o},i}(),rI=function(){function i(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=ga.createElement("input",Pi.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return i.prototype.render=function(t,n){this.zoomElementContainer.style.display=n?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",t.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var o=rn.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(o),this.rangeText.style.marginRight="10px";var u=this;this.rangeInput.addEventListener("input",function(){return u.onValueChange()}),this.rangeInput.addEventListener("change",function(){return u.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},i.prototype.onValueChange=function(){var t=rn.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(t),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},i.prototype.setValues=function(t,n,o,u){this.rangeInput.min=t.toString(),this.rangeInput.max=n.toString(),this.rangeInput.step=u.toString(),this.rangeInput.value=o.toString(),this.onValueChange()},i.prototype.show=function(){this.zoomElementContainer.style.display="block"},i.prototype.hide=function(){this.zoomElementContainer.style.display="none"},i.prototype.setOnCameraZoomValueChangeCallback=function(t){this.onChangeCallback=t},i.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},i.create=function(t,n){var o=new i;return o.render(t,n),o},i}(),Li;(function(i){i[i.STATUS_DEFAULT=0]="STATUS_DEFAULT",i[i.STATUS_SUCCESS=1]="STATUS_SUCCESS",i[i.STATUS_WARNING=2]="STATUS_WARNING",i[i.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Li||(Li={}));function iI(i){return{fps:i.fps,qrbox:i.qrbox,aspectRatio:i.aspectRatio,disableFlip:i.disableFlip,videoConstraints:i.videoConstraints}}function sI(i,t){return{formatsToSupport:i.formatsToSupport,useBarCodeDetectorIfSupported:i.useBarCodeDetectorIfSupported,experimentalFeatures:i.experimentalFeatures,verbose:t}}var o0=function(){function i(t,n,o){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=t,this.config=this.createConfig(n),this.verbose=o===!0,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.scanTypeSelector=new eo(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new bA(this.verbose),this.persistedDataManager=new Q4,n.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return i.prototype.render=function(t,n){var o=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(d,A){if(t)t(d,A);else{if(o.lastMatchFound===d)return;o.lastMatchFound=d,o.setHeaderMessage(rn.lastMatch(d),Li.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(d,A){n&&n(d,A)};var u=document.getElementById(this.elementId);if(!u)throw"HTML Element with id=".concat(this.elementId," not found");u.innerHTML="",this.createBasicLayout(u),this.html5Qrcode=new qy(this.getScanRegionId(),sI(this.config,this.verbose))},i.prototype.pause=function(t){(Ls(t)||t!==!0)&&(t=!1),this.getHtml5QrcodeOrFail().pause(t)},i.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},i.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},i.prototype.clear=function(){var t=this,n=function(){var o=document.getElementById(t.elementId);o&&(o.innerHTML="",t.resetBasicLayout(o))};return this.html5Qrcode?new Promise(function(o,u){if(!t.html5Qrcode){o();return}t.html5Qrcode.isScanning?t.html5Qrcode.stop().then(function(d){if(!t.html5Qrcode){o();return}t.html5Qrcode.clear(),n(),o()}).catch(function(d){t.verbose&&t.logger.logError("Unable to stop qrcode scanner",d),u(d)}):(t.html5Qrcode.clear(),n(),o())}):Promise.resolve()},i.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},i.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},i.prototype.applyVideoConstraints=function(t){return this.getHtml5QrcodeOrFail().applyVideoConstraints(t)},i.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},i.prototype.createConfig=function(t){return t?(t.fps||(t.fps=ds.SCAN_DEFAULT_FPS),t.rememberLastUsedCamera!==!ds.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(t.rememberLastUsedCamera=ds.DEFAULT_REMEMBER_LAST_CAMERA_USED),t.supportedScanTypes||(t.supportedScanTypes=ds.DEFAULT_SUPPORTED_SCAN_TYPE),t):{fps:ds.SCAN_DEFAULT_FPS,rememberLastUsedCamera:ds.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:ds.DEFAULT_SUPPORTED_SCAN_TYPE}},i.prototype.createBasicLayout=function(t){t.style.position="relative",t.style.padding="0px",t.style.border="1px solid silver",this.createHeader(t);var n=document.createElement("div"),o=this.getScanRegionId();n.id=o,n.style.width="100%",n.style.minHeight="100px",n.style.textAlign="center",t.appendChild(n),eo.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var u=document.createElement("div"),d=this.getDashboardId();u.id=d,u.style.width="100%",t.appendChild(u),this.setupInitialDashboard(u)},i.prototype.resetBasicLayout=function(t){t.style.border="none"},i.prototype.setupInitialDashboard=function(t){this.createSection(t),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},i.prototype.createHeader=function(t){var n=document.createElement("div");n.style.textAlign="left",n.style.margin="0px",t.appendChild(n);var o=new Z4;o.renderInto(n);var u=document.createElement("div");u.id=this.getHeaderMessageContainerId(),u.style.display="none",u.style.textAlign="center",u.style.fontSize="14px",u.style.padding="2px 10px",u.style.margin="4px",u.style.borderTop="1px solid #f6f6f6",n.appendChild(u)},i.prototype.createSection=function(t){var n=document.createElement("div");n.id=this.getDashboardSectionId(),n.style.width="100%",n.style.padding="10px 0px 10px 0px",n.style.textAlign="left",t.appendChild(n)},i.prototype.createCameraListUi=function(t,n,o){var u=this;u.showHideScanTypeSwapLink(!1),u.setHeaderMessage(rn.cameraPermissionRequesting());var d=function(){o||u.createPermissionButton(t,n)};qy.getCameras().then(function(A){u.persistedDataManager.setHasPermission(!0),u.showHideScanTypeSwapLink(!0),u.resetHeaderMessage(),A&&A.length>0?(t.removeChild(n),u.renderCameraSelection(A)):(u.setHeaderMessage(rn.noCameraFound(),Li.STATUS_WARNING),d())}).catch(function(A){u.persistedDataManager.setHasPermission(!1),o?o.disabled=!1:d(),u.setHeaderMessage(A,Li.STATUS_WARNING),u.showHideScanTypeSwapLink(!0)})},i.prototype.createPermissionButton=function(t,n){var o=this,u=ga.createElement("button",this.getCameraPermissionButtonId());u.innerText=rn.cameraPermissionTitle(),u.addEventListener("click",function(){u.disabled=!0,o.createCameraListUi(t,n,u)}),n.appendChild(u)},i.prototype.createPermissionsUi=function(t,n){var o=this;if(eo.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){Qy.hasPermissions().then(function(u){u?o.createCameraListUi(t,n):(o.persistedDataManager.setHasPermission(!1),o.createPermissionButton(t,n))}).catch(function(u){o.persistedDataManager.setHasPermission(!1),o.createPermissionButton(t,n)});return}this.createPermissionButton(t,n)},i.prototype.createSectionControlPanel=function(){var t=document.getElementById(this.getDashboardSectionId()),n=document.createElement("div");t.appendChild(n);var o=document.createElement("div");o.id=this.getDashboardSectionCameraScanRegionId(),o.style.display=eo.isCameraScanType(this.currentScanType)?"block":"none",n.appendChild(o);var u=document.createElement("div");u.style.textAlign="center",o.appendChild(u),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(o,u),this.renderFileScanUi(n)},i.prototype.renderFileScanUi=function(t){var n=eo.isFileScanType(this.currentScanType),o=this,u=function(d){if(!o.html5Qrcode)throw"html5Qrcode not defined";eo.isFileScanType(o.currentScanType)&&(o.setHeaderMessage(rn.loadingImage()),o.html5Qrcode.scanFileV2(d,!0).then(function(A){o.resetHeaderMessage(),o.qrCodeSuccessCallback(A.decodedText,A)}).catch(function(A){o.setHeaderMessage(A,Li.STATUS_WARNING),o.qrCodeErrorCallback(A,vA.createFrom(A))}))};this.fileSelectionUi=eI.create(t,n,u)},i.prototype.renderCameraSelection=function(t){var n=this,o=this,u=document.getElementById(this.getDashboardSectionCameraScanRegionId());u.style.textAlign="center";var d=rI.create(u,!1),A=function(J){var q=J.zoomFeature();if(q.isSupported()){d.setOnCameraZoomValueChangeCallback(function(ft){q.apply(ft)});var Q=1;n.config.defaultZoomValueIfSupported&&(Q=n.config.defaultZoomValueIfSupported),Q=_4(Q,q.min(),q.max()),d.setValues(q.min(),q.max(),Q,q.step()),d.show()}},C=nI.create(u,t),_=document.createElement("span"),x=ga.createElement("button",Pi.CAMERA_START_BUTTON_ID);x.innerText=rn.scanButtonStartScanningText(),_.appendChild(x);var v=ga.createElement("button",Pi.CAMERA_STOP_BUTTON_ID);v.innerText=rn.scanButtonStopScanningText(),v.style.display="none",v.disabled=!0,_.appendChild(v);var I,O=function(J){if(!J.torchFeature().isSupported()){I&&I.hide();return}I?I.updateTorchCapability(J.torchFeature()):I=tI.create(_,J.torchFeature(),{display:"none",marginLeft:"5px"},function(q){o.setHeaderMessage(q,Li.STATUS_WARNING)}),I.show()};u.appendChild(_);var H=function(J){J||(x.style.display="none"),x.innerText=rn.scanButtonStartScanningText(),x.style.opacity="1",x.disabled=!1,J&&(x.style.display="inline-block")};if(x.addEventListener("click",function(J){x.innerText=rn.scanButtonScanningStarting(),C.disable(),x.disabled=!0,x.style.opacity="0.5",n.scanTypeSelector.hasMoreThanOneScanType()&&o.showHideScanTypeSwapLink(!1),o.resetHeaderMessage();var q=C.getValue();o.persistedDataManager.setLastUsedCameraId(q),o.html5Qrcode.start(q,iI(o.config),o.qrCodeSuccessCallback,o.qrCodeErrorCallback).then(function(Q){v.disabled=!1,v.style.display="inline-block",H(!1);var ft=o.html5Qrcode.getRunningTrackCameraCapabilities();n.config.showTorchButtonIfSupported===!0&&O(ft),n.config.showZoomSliderIfSupported===!0&&A(ft)}).catch(function(Q){o.showHideScanTypeSwapLink(!0),C.enable(),H(!0),o.setHeaderMessage(Q,Li.STATUS_WARNING)})}),C.hasSingleItem()&&x.click(),v.addEventListener("click",function(J){if(!o.html5Qrcode)throw"html5Qrcode not defined";v.disabled=!0,o.html5Qrcode.stop().then(function(q){n.scanTypeSelector.hasMoreThanOneScanType()&&o.showHideScanTypeSwapLink(!0),C.enable(),x.disabled=!1,v.style.display="none",x.style.display="inline-block",I&&(I.reset(),I.hide()),d.removeOnCameraZoomValueChangeCallback(),d.hide(),o.insertCameraScanImageToScanRegion()}).catch(function(q){v.disabled=!1,o.setHeaderMessage(q,Li.STATUS_WARNING)})}),o.persistedDataManager.getLastUsedCameraId()){var X=o.persistedDataManager.getLastUsedCameraId();C.hasValue(X)?(C.setValue(X),x.click()):o.persistedDataManager.resetLastUsedCameraId()}},i.prototype.createSectionSwap=function(){var t=this,n=rn.textIfCameraScanSelected(),o=rn.textIfFileScanSelected(),u=document.getElementById(this.getDashboardSectionId()),d=document.createElement("div");d.style.textAlign="center";var A=ga.createElement("span",this.getDashboardSectionSwapLinkId());A.style.textDecoration="underline",A.style.cursor="pointer",A.innerText=eo.isCameraScanType(this.currentScanType)?n:o,A.addEventListener("click",function(){if(!t.sectionSwapAllowed){t.verbose&&t.logger.logError("Section swap called when not allowed");return}t.resetHeaderMessage(),t.fileSelectionUi.resetValue(),t.sectionSwapAllowed=!1,eo.isCameraScanType(t.currentScanType)?(t.clearScanRegion(),t.getCameraScanRegion().style.display="none",t.fileSelectionUi.show(),A.innerText=o,t.currentScanType=po.SCAN_TYPE_FILE,t.insertFileScanImageToScanRegion()):(t.clearScanRegion(),t.getCameraScanRegion().style.display="block",t.fileSelectionUi.hide(),A.innerText=n,t.currentScanType=po.SCAN_TYPE_CAMERA,t.insertCameraScanImageToScanRegion(),t.startCameraScanIfPermissionExistsOnSwap()),t.sectionSwapAllowed=!0}),d.appendChild(A),u.appendChild(d)},i.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var t=this,n=this;if(this.persistedDataManager.hasCameraPermissions()){Qy.hasPermissions().then(function(o){if(o){var u=document.getElementById(n.getCameraPermissionButtonId());if(!u)throw t.logger.logError("Permission button not found, fail;"),"Permission button not found";u.click()}else n.persistedDataManager.setHasPermission(!1)}).catch(function(o){n.persistedDataManager.setHasPermission(!1)});return}},i.prototype.resetHeaderMessage=function(){var t=document.getElementById(this.getHeaderMessageContainerId());t.style.display="none"},i.prototype.setHeaderMessage=function(t,n){n||(n=Li.STATUS_DEFAULT);var o=this.getHeaderMessageDiv();switch(o.innerText=t,o.style.display="block",n){case Li.STATUS_SUCCESS:o.style.background="rgba(106, 175, 80, 0.26)",o.style.color="#477735";break;case Li.STATUS_WARNING:o.style.background="rgba(203, 36, 49, 0.14)",o.style.color="#cb2431";break;case Li.STATUS_DEFAULT:default:o.style.background="rgba(0, 0, 0, 0)",o.style.color="rgb(17, 17, 17)";break}},i.prototype.showHideScanTypeSwapLink=function(t){this.scanTypeSelector.hasMoreThanOneScanType()&&(t!==!0&&(t=!1),this.sectionSwapAllowed=t,this.getDashboardSectionSwapLink().style.display=t?"inline-block":"none")},i.prototype.insertCameraScanImageToScanRegion=function(){var t=this,n=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){n.innerHTML="<br>",n.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(o){n.innerHTML="<br>",n.appendChild(t.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=q4,this.cameraScanImage.alt=rn.cameraScanAltText()},i.prototype.insertFileScanImageToScanRegion=function(){var t=this,n=document.getElementById(this.getScanRegionId());if(this.fileScanImage){n.innerHTML="<br>",n.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(o){n.innerHTML="<br>",n.appendChild(t.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=Y4,this.fileScanImage.alt=rn.fileScanAltText()},i.prototype.clearScanRegion=function(){var t=document.getElementById(this.getScanRegionId());t.innerHTML=""},i.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},i.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},i.prototype.getDashboardSectionSwapLinkId=function(){return Pi.SCAN_TYPE_CHANGE_ANCHOR_ID},i.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},i.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},i.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},i.prototype.getCameraPermissionButtonId=function(){return Pi.CAMERA_PERMISSION_BUTTON_ID},i.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},i.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},i.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},i}();const aI=()=>{const[i,t]=at.useState([]),[n,o]=at.useState(!0),[u,d]=at.useState(!1),[A,C]=at.useState(null),[_,x]=at.useState(null),[v,I]=at.useState(!1),O=async(Q=null)=>{try{o(!0);let ft;if(Q){const _t=Fl(bn(Ne,"orders"),jl("customerId","==",Q));ft=await Bi(_t)}else ft=await Bi(bn(Ne,"orders"));const nt=ft.docs.map(_t=>{const mt=_t.data(),Tt=mt.placedAt||mt.date||"";let U="";Tt?.toDate?U=Tt.toDate().toISOString().split("T")[0]:typeof Tt=="string"&&(U=Tt.split("T")[0]);const F=Array.isArray(mt.items)?mt.items:[],k=mt.paidByWallet?"Wallet":mt.paymentMethod||(mt.type==="points-used"?"Points":"Cash");return{id:_t.id,customerEmail:mt.customerId||"N/A",date:U,amount:mt.subtotal||mt.total||mt.amount||0,status:mt.status||"Pending",items:F,paymentMethod:k,paidByWallet:!!mt.paidByWallet,pointsEarned:mt.pointsEarned||0}});t(nt)}catch(ft){console.error("Error fetching orders:",ft)}finally{o(!1)}};at.useEffect(()=>{O()},[]);const H=async({customerEmail:Q,orderId:ft,amount:nt,paymentMethod:_t,type:mt,status:Tt,date:U,items:F})=>{await Ps(bn(Ne,"transactions"),{orderId:ft,amount:nt,paymentMethod:_t,type:mt,status:Tt,date:U,items:F}),await Ps(bn(Ne,"customers",Q,"transactions"),{orderId:ft,amount:nt,paymentMethod:_t,type:mt,status:Tt,date:U,items:F})},X=async Q=>{try{const ft=Pn(Ne,"customers",Q.customerEmail),nt=await Wl(ft);if(!nt.exists()){alert(" Customer not found.");return}const _t=nt.data(),mt=_t.points||0,Tt=Q.amount;if(mt<Tt){alert(" Not enough points to complete this order!");return}await gs(ft,{points:mt-Tt,totalSpent:(_t.totalSpent||0)+Tt,updatedAt:kh()}),await gs(Pn(Ne,"orders",Q.id),{status:"Completed",paymentMethod:"Points",updatedAt:kh()}),await H({customerEmail:Q.customerEmail,orderId:Q.id,amount:Q.amount,paymentMethod:"Points",type:"points-used",status:"Completed",date:kh(),items:Q.items||[]}),alert(" Order completed and points deducted successfully."),O(A)}catch(ft){console.error("Error completing order:",ft),alert(" Failed to complete order.")}},J=async(Q,ft)=>{if(confirm("Are you sure you want to delete this order and related transactions?"))try{await Fo(Pn(Ne,"orders",Q));const nt=Fl(bn(Ne,"transactions"),jl("orderId","==",Q)),_t=await Bi(nt);for(const U of _t.docs){const F=await Bi(bn(Ne,"transactions",U.id,"items"));for(const k of F.docs)await Fo(Pn(Ne,"transactions",U.id,"items",k.id));await Fo(Pn(Ne,"transactions",U.id))}const mt=Fl(bn(Ne,"customers",ft,"transactions"),jl("orderId","==",Q)),Tt=await Bi(mt);for(const U of Tt.docs)await Fo(Pn(Ne,"customers",ft,"transactions",U.id));alert(" Order and related transactions deleted successfully."),O(A)}catch(nt){console.error("Error deleting order:",nt),alert("Failed to delete order.")}},q=()=>{d(!0);const Q=new o0("reader",{fps:10,qrbox:{width:250,height:250}},!1);Q.render(async ft=>{try{const nt=Pn(Ne,"customers",ft),_t=await Wl(nt);_t.exists()?(C(ft),alert(` Showing orders for: ${_t.data().fullName}`),O(ft)):alert(" Customer not found!")}catch(nt){console.error("Error scanning QR:",nt)}Q.clear().catch(()=>{}),d(!1)},ft=>console.warn(ft))};return D.jsxs(D.Fragment,{children:[D.jsx(Xo,{}),D.jsxs("div",{className:"p-6 ml-64",children:[D.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Redeem Orders"}),D.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[D.jsx("button",{onClick:q,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition",children:" Scan QR to Filter"}),A&&D.jsx("button",{className:"px-4 py-2 bg-gray-300 rounded-lg hover:bg-gray-400 transition",onClick:()=>{C(null),O()},children:" Show All"})]}),u&&D.jsx("div",{id:"reader",className:"w-[300px] h-[300px] border-2 border-gray-300 mb-4"}),n?D.jsx("p",{children:"Loading orders..."}):i.length===0?D.jsx("p",{children:"No orders found."}):D.jsx("div",{className:"orders-grid",children:i.map(Q=>{const ft=_?.id===Q.id;return D.jsx("div",{className:`flip-card ${ft?"flipped":""}`,children:D.jsxs("div",{className:"flip-card-inner",children:[D.jsxs("div",{className:"flip-card-front order-card",children:[D.jsxs("div",{children:[D.jsxs("h3",{children:[" Order ID: ",Q.id]}),D.jsxs("p",{children:[D.jsx("strong",{children:"Date:"})," ",Q.date]}),D.jsxs("p",{children:[D.jsx("strong",{children:"Items:"})," ",Q.items&&Q.items.length?Q.items.map(nt=>nt.name).join(", "):"N/A"]}),D.jsxs("p",{children:[D.jsx("strong",{children:"Amount:"})," ",Q.amount]}),D.jsx("span",{className:`order-status ${Q.status.toLowerCase()}`,children:Q.status})]}),D.jsxs("div",{className:"card-actions",children:[D.jsx("button",{className:"view-btn",onClick:()=>x(ft?null:Q),children:"View Details"}),Q.status!=="Completed"&&D.jsx("button",{className:"complete-btn",onClick:()=>X(Q),children:" Complete"}),D.jsx("button",{className:"delete-btn",onClick:()=>J(Q.id,Q.customerEmail),children:" Delete"})]})]}),D.jsxs("div",{className:"flip-card-back order-card",children:[D.jsxs("div",{children:[D.jsxs("h3",{children:["Order Details  ",Q.id]}),D.jsxs("p",{children:[D.jsx("strong",{children:"Customer:"})," ",Q.customerEmail]}),D.jsxs("p",{children:[D.jsx("strong",{children:"Payment:"})," ",Q.paymentMethod," ",Q.paidByWallet?"(Wallet)":""]}),D.jsx("hr",{}),D.jsx("h4",{children:"Items"}),D.jsxs("table",{className:"items-table",children:[D.jsx("thead",{children:D.jsxs("tr",{children:[D.jsx("th",{children:"Name"}),D.jsx("th",{children:"Category"}),D.jsx("th",{children:"Qty"}),D.jsx("th",{children:"Price"}),D.jsx("th",{children:"Total"})]})}),D.jsx("tbody",{children:Q.items.map((nt,_t)=>D.jsxs("tr",{children:[D.jsx("td",{children:nt.name||"N/A"}),D.jsx("td",{children:nt.category||"N/A"}),D.jsx("td",{children:nt.qty}),D.jsxs("td",{children:["",Number(nt.price).toFixed(2)]}),D.jsxs("td",{children:["",(nt.qty*Number(nt.price)).toFixed(2)]})]},_t))})]}),D.jsx("hr",{}),D.jsxs("p",{className:"total",children:["Total: ",Q.amount]})]}),D.jsx("div",{className:"card-actions",children:D.jsx("button",{className:"back-btn",onClick:()=>x(null),children:" Back"})})]})]})},Q.id)})})]})]})};function oI(){const[i,t]=at.useState([]),[n,o]=at.useState({}),[u,d]=at.useState(null);at.useEffect(()=>{(async()=>{const H=(await Bi(bn(Ne,"promotions"))).docs.map(X=>({id:X.id,...X.data()}));t(H)})()},[]);const A=I=>{const{name:O,value:H}=I.target;o(X=>({...X,[O]:O==="discount"?parseFloat(H):H}))},C=async()=>{if(!n.title||!n.description||!n.discount||!n.startDate||!n.endDate){alert("Please fill in all fields.");return}if(u){const I=Pn(Ne,"promotions",u);await gs(I,{title:n.title,description:n.description,discount:n.discount,startDate:n.startDate,endDate:n.endDate}),t(O=>O.map(H=>H.id===u?{...H,...n}:H)),d(null)}else{const I=await Ps(bn(Ne,"promotions"),{title:n.title,description:n.description,discount:n.discount,startDate:n.startDate,endDate:n.endDate,createdAt:kh()});t(O=>[...O,{id:I.id,...n}])}o({})},_=I=>{o(I),d(I.id)},x=async I=>{await Fo(Pn(Ne,"promotions",I)),t(O=>O.filter(H=>H.id!==I))},v=I=>{const O=new Date;return new Date(I)>=O?" Active":" Expired"};return D.jsxs(D.Fragment,{children:[D.jsx(Xo,{}),D.jsxs("div",{className:"p-6 max-w-5xl mx-auto",children:[D.jsx("h1",{className:"text-2xl font-bold mb-4",children:" Promotion Management"}),D.jsxs("div",{className:"bg-white p-4 rounded-lg shadow mb-6",children:[D.jsx("h2",{className:"text-lg font-semibold mb-2",children:u?"Edit Promotion":"Add Promotion"}),D.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[D.jsx("input",{type:"text",name:"title",placeholder:"Promotion Title",value:n.title||"",onChange:A,className:"border px-3 py-2 rounded"}),D.jsx("input",{type:"number",name:"discount",placeholder:"Discount (%)",value:n.discount||"",onChange:A,className:"border px-3 py-2 rounded"}),D.jsx("input",{type:"date",name:"startDate",value:n.startDate||"",onChange:A,className:"border px-3 py-2 rounded"}),D.jsx("input",{type:"date",name:"endDate",value:n.endDate||"",onChange:A,className:"border px-3 py-2 rounded"})]}),D.jsx("textarea",{name:"description",placeholder:"Description",value:n.description||"",onChange:A,className:"border px-3 py-2 rounded mt-3 w-full",rows:3}),D.jsx("button",{onClick:C,className:"mt-4 bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:u?"Update Promotion":"Add Promotion"})]}),D.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[D.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Current Promotions"}),i.length===0?D.jsx("p",{className:"text-gray-500",children:"No promotions added yet."}):D.jsx("ul",{className:"space-y-3",children:i.map(I=>D.jsxs("li",{className:"border p-3 rounded flex justify-between items-center",children:[D.jsxs("div",{children:[D.jsx("h3",{className:"font-bold text-lg",children:I.title}),D.jsx("p",{className:"text-sm text-gray-700",children:I.description}),D.jsxs("p",{className:"text-sm",children:["Discount: ",D.jsxs("b",{children:[I.discount,"%"]})]}),D.jsxs("p",{className:"text-xs text-gray-500",children:[I.startDate,"  ",I.endDate," | Status:"," ",D.jsx("b",{children:v(I.endDate)})]})]}),D.jsxs("div",{className:"flex gap-2",children:[D.jsx("button",{onClick:()=>_(I),className:"text-blue-600 hover:underline",children:"Edit"}),D.jsx("button",{onClick:()=>x(I.id),className:"text-red-600 hover:underline",children:"Delete"})]})]},I.id))})]})]})]})}function lI(){const[i,t]=at.useState([]),[n,o]=at.useState({name:"",description:"",price:0,category:"",image:"",availability:!0}),[u,d]=at.useState(null),[A,C]=at.useState(!1),[_,x]=at.useState(!1),[v,I]=at.useState(null),[O,H]=at.useState(""),[X,J]=at.useState(null);at.useEffect(()=>{(async()=>{const k=(await Bi(bn(Ne,"menu"))).docs.map(et=>({id:et.id,...et.data()}));t(k)})()},[]);const q=U=>{const{name:F,value:k,type:et,checked:tt}=U.target;o(K=>({...K,[F]:et==="checkbox"?tt:k}))},Q=U=>{const F=U.target.files?.[0];if(F){const k=URL.createObjectURL(F);o(et=>({...et,image:k}))}},ft=(U,F)=>{I(U),U==="delete"&&F&&J(F),x(!0)},nt=async()=>{if(O==="admin123"){if(v==="add"){if(u){const U=Pn(Ne,"menu",u);await gs(U,n),t(F=>F.map(k=>k.id===u?{id:u,...n}:k)),d(null)}else{const U=await Ps(bn(Ne,"menu"),n);t(F=>[...F,{id:U.id,...n}])}Tt()}else v==="delete"&&X&&(await Fo(Pn(Ne,"menu",X)),t(U=>U.filter(F=>F.id!==X)),J(null));x(!1),H("")}else alert(" Incorrect PIN!")},_t=U=>{U.preventDefault(),ft("add")},mt=U=>{const F=i.find(k=>k.id===U);F&&(o({...F}),d(U),C(!0))},Tt=()=>{o({name:"",description:"",price:0,category:"",image:"",availability:!0}),C(!1)};return D.jsxs(D.Fragment,{children:[D.jsx(Xo,{}),D.jsxs("div",{className:"menu-container",children:[D.jsx("h1",{children:" Menu Management"}),D.jsx("button",{onClick:()=>{Tt(),C(!0)},style:{padding:"10px 20px",background:"#69481d",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",marginBottom:"20px"},children:" Add Menu Item"}),D.jsx("div",{className:"menu-list",children:i.map(U=>D.jsxs("div",{className:"menu-card",children:[D.jsx("img",{src:U.image,alt:U.name}),D.jsx("h3",{children:U.name}),D.jsx("p",{children:U.description}),D.jsx("p",{children:D.jsxs("strong",{children:["",U.price]})}),D.jsxs("p",{children:["Category: ",U.category]}),D.jsxs("p",{children:["Status: ",U.availability?"Available":"Unavailable"]}),D.jsxs("div",{className:"menu-buttons",children:[D.jsx("button",{onClick:()=>mt(U.id),children:"Edit"}),D.jsx("button",{onClick:()=>ft("delete",U.id),children:"Delete"})]})]},U.id))})]}),A&&D.jsx("div",{className:"modal-overlay",children:D.jsxs("div",{className:"modal-content",children:[D.jsx("h2",{children:u?"Edit Menu Item":"Add Menu Item"}),D.jsxs("form",{onSubmit:_t,className:"menu-form",children:[D.jsx("input",{name:"name",placeholder:"Item Name",value:n.name,onChange:q,required:!0}),D.jsx("textarea",{name:"description",placeholder:"Description",value:n.description,onChange:q,required:!0}),D.jsx("input",{name:"price",type:"number",placeholder:"Price",value:n.price,onChange:q,required:!0}),D.jsxs("select",{name:"category",value:n.category,onChange:q,required:!0,children:[D.jsx("option",{value:"",children:"Category"}),D.jsx("option",{value:"Pork",children:"Pork"}),D.jsx("option",{value:"Beef",children:"Beef"}),D.jsx("option",{value:"Chicken",children:"Chicken"}),D.jsx("option",{value:"Sea Food",children:"Sea Food"}),D.jsx("option",{value:"Appetizer",children:"Appetizer"}),D.jsx("option",{value:"Soup",children:"Soup"}),D.jsx("option",{value:"Pasta",children:"Pasta"}),D.jsx("option",{value:"Vegetable",children:"Vegetable"}),D.jsx("option",{value:"Burger & Sandwiches",children:"Burger & Sandwiches"}),D.jsx("option",{value:"Bento",children:"Bento"}),D.jsx("option",{value:"Package Bundles",children:"Package Bundles"})]}),D.jsx("input",{type:"file",accept:"image/*",onChange:Q}),n.image&&D.jsx("img",{src:n.image,alt:"Preview",className:"image-preview"}),D.jsxs("label",{children:[D.jsx("input",{name:"availability",type:"checkbox",checked:n.availability,onChange:q}),"Available"]}),D.jsxs("button",{type:"submit",children:[u?"Update":"Add"," Item"]}),D.jsx("button",{type:"button",onClick:Tt,style:{background:"#aaa",color:"#fff"},children:"Cancel"})]})]})}),_&&D.jsx("div",{className:"modal-overlay",children:D.jsxs("div",{className:"modal-content",children:[D.jsx("h3",{children:"Enter Admin PIN"}),D.jsx("input",{type:"password",value:O,onChange:U=>H(U.target.value),placeholder:"Enter PIN"}),D.jsx("br",{}),D.jsx("button",{onClick:nt,children:"Confirm"}),D.jsx("button",{onClick:()=>x(!1),children:"Cancel"})]})})]})}const Mr=[];for(let i=0;i<256;++i)Mr.push((i+256).toString(16).slice(1));function cI(i,t=0){return(Mr[i[t+0]]+Mr[i[t+1]]+Mr[i[t+2]]+Mr[i[t+3]]+"-"+Mr[i[t+4]]+Mr[i[t+5]]+"-"+Mr[i[t+6]]+Mr[i[t+7]]+"-"+Mr[i[t+8]]+Mr[i[t+9]]+"-"+Mr[i[t+10]]+Mr[i[t+11]]+Mr[i[t+12]]+Mr[i[t+13]]+Mr[i[t+14]]+Mr[i[t+15]]).toLowerCase()}let M1;const uI=new Uint8Array(16);function hI(){if(!M1){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");M1=crypto.getRandomValues.bind(crypto)}return M1(uI)}const fI=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Ky={randomUUID:fI};function Zy(i,t,n){if(Ky.randomUUID&&!i)return Ky.randomUUID();i=i||{};const o=i.random??i.rng?.()??hI();if(o.length<16)throw new Error("Random bytes length must be >= 16");return o[6]=o[6]&15|64,o[8]=o[8]&63|128,cI(o)}const dI=()=>{const[i,t]=at.useState(""),[n,o]=at.useState(null),[u,d]=at.useState(0),[A,C]=at.useState("GCash"),[_,x]=at.useState([]),[v,I]=at.useState(!1),[O,H]=at.useState(0),[X,J]=at.useState(null);at.useEffect(()=>{const mt=Fl(bn(Ne,"walletRequests"),jl("status","==","pending")),Tt=aA(mt,U=>{x(U.docs.map(F=>({id:F.id,...F.data()})))});return()=>Tt()},[]);const q=async()=>{if(!i.trim()){alert("Enter a mobile number to search");return}const mt=Fl(bn(Ne,"customers"),jl("mobile","==",i.trim())),Tt=await Bi(mt);if(Tt.empty){alert(" Customer not found"),o(null);return}const U=Tt.docs[0],F=U.data();o({id:U.id,name:F.name,mobile:F.mobile,balance:F.wallet||0,logs:F.logs||[]})},Q=async()=>{if(!n){alert("Search a customer first");return}if(u<=0){alert(" Amount must be greater than 0");return}const mt=n.balance+u,Tt={id:Zy(),method:A,amount:u,date:new Date().toISOString().split("T")[0],type:"Over The Counter"},U=Pn(Ne,"customers",n.id);await gs(U,{wallet:mt,logs:[...n.logs,Tt]}),o({...n,balance:mt,logs:[...n.logs,Tt]}),d(0),alert(" Wallet updated successfully!")},ft=mt=>{J(mt),H(0),I(!0)},nt=async()=>{if(X){if(O<=0){alert("Enter valid amount");return}try{const mt=Fl(bn(Ne,"customers"),jl("email","==",X.email)),Tt=await Bi(mt);if(Tt.empty){alert(" Customer not found for this request.");return}const U=Tt.docs[0],F=U.data(),k=(F.wallet||0)+O,et={id:Zy(),method:"GCash",amount:O,date:new Date().toISOString().split("T")[0],type:"request"};await gs(Pn(Ne,"customers",U.id),{wallet:k,logs:[...F.logs||[],et]}),await gs(Pn(Ne,"walletRequests",X.id),{status:"approved"}),I(!1),J(null),H(0),alert(" Wallet request approved!")}catch(mt){console.error(mt),alert(" Failed to approve request.")}}},_t=async mt=>{try{await gs(Pn(Ne,"walletRequests",mt),{status:"rejected"}),alert(" Request rejected.")}catch(Tt){console.error(Tt),alert("Failed to reject request.")}};return D.jsxs(D.Fragment,{children:[D.jsx(Xo,{}),D.jsxs("div",{className:"wallet-container",children:[D.jsx("h1",{className:"wallet-title",children:" Wallet System (Admin)"}),D.jsxs("div",{className:"section",children:[D.jsx("h2",{children:"Search Customer"}),D.jsx("input",{type:"text",value:i,onChange:mt=>t(mt.target.value),placeholder:"Enter mobile number"}),D.jsx("button",{onClick:q,children:"Search"})]}),n&&D.jsxs(D.Fragment,{children:[D.jsxs("div",{className:"section customer-info",children:[D.jsx("h2",{children:"Customer Info"}),D.jsxs("p",{children:[" ",D.jsx("strong",{children:"Name:"})," ",n.name]}),D.jsxs("p",{children:[" ",D.jsx("strong",{children:"Mobile:"})," ",n.mobile]}),D.jsxs("p",{children:[" ",D.jsx("strong",{children:"Wallet Balance:"})," ",n.balance.toFixed(2)]})]}),D.jsxs("div",{className:"section",children:[D.jsx("h2",{children:" Manual Adjustment"}),D.jsxs("div",{className:"form-group",children:[D.jsxs("select",{value:A,onChange:mt=>C(mt.target.value),children:[D.jsx("option",{value:"GCash",children:"GCash"}),D.jsx("option",{value:"Cash",children:"Cash"})]}),D.jsx("input",{type:"number",value:u,onChange:mt=>d(Number(mt.target.value)),placeholder:"Enter amount"}),D.jsx("button",{onClick:Q,className:"adjust-button",children:"Confirm Adjustment"})]})]}),D.jsxs("div",{className:"section",children:[D.jsx("h2",{children:" Top-up Logs"}),n.logs.length>0?D.jsxs("table",{className:"logs-table",children:[D.jsx("thead",{children:D.jsxs("tr",{children:[D.jsx("th",{children:"#"}),D.jsx("th",{children:"Method"}),D.jsx("th",{children:"Amount"}),D.jsx("th",{children:"Date"}),D.jsx("th",{children:"Type"})]})}),D.jsx("tbody",{children:[...n.logs].sort((mt,Tt)=>mt.date<Tt.date?1:-1).map((mt,Tt)=>D.jsxs("tr",{children:[D.jsx("td",{children:Tt+1}),D.jsx("td",{children:mt.method}),D.jsxs("td",{children:["",mt.amount.toFixed(2)]}),D.jsx("td",{children:mt.date}),D.jsx("td",{children:mt.type})]},mt.id))})]}):D.jsx("p",{className:"empty-log",children:"No logs available."})]})]}),D.jsxs("div",{className:"section",children:[D.jsx("h2",{children:" Pending Wallet Requests"}),_.length>0?D.jsxs("table",{className:"logs-table",children:[D.jsx("thead",{children:D.jsxs("tr",{children:[D.jsx("th",{children:"Email"}),D.jsx("th",{children:"Reference No."}),D.jsx("th",{children:"Status"}),D.jsx("th",{children:"Action"})]})}),D.jsx("tbody",{children:_.map(mt=>D.jsxs("tr",{children:[D.jsx("td",{children:mt.email}),D.jsx("td",{children:mt.referenceNo}),D.jsx("td",{children:mt.status}),D.jsxs("td",{children:[D.jsx("button",{onClick:()=>ft(mt),children:" Approve"}),D.jsx("button",{onClick:()=>_t(mt.id),children:" Reject"})]})]},mt.id))})]}):D.jsx("p",{children:"No pending requests."})]})]}),v&&D.jsx("div",{className:"modal-overlay",children:D.jsxs("div",{className:"modal-box",children:[D.jsx("h2",{children:"Approve Wallet Request"}),D.jsxs("p",{children:["Enter amount to add for ",D.jsx("strong",{children:X?.email})]}),D.jsx("input",{type:"number",value:O,onChange:mt=>H(Number(mt.target.value)),placeholder:"Enter amount"}),D.jsxs("div",{className:"modal-actions",children:[D.jsx("button",{onClick:nt,children:" Confirm"}),D.jsx("button",{onClick:()=>I(!1),children:" Cancel"})]})]})})]})};function MA(){return D.jsx(D.Fragment,{children:D.jsxs("div",{className:"sidebar",children:[D.jsx("h2",{className:"sidebar-title",children:"Staff Panel"}),D.jsxs("nav",{className:"sidebar-nav",children:[D.jsx(gi,{to:"/take-order",className:"sidebar-link",children:"Take Order"}),D.jsx(gi,{to:"/orders",className:"sidebar-link",children:"-"}),D.jsx(gi,{to:"/rewards",className:"sidebar-link",children:"-"}),D.jsx(gi,{to:"/menu",className:"sidebar-link",children:"-"}),D.jsx(gi,{to:"/wallet",className:"sidebar-link",children:"-"}),D.jsx(gi,{to:"/feedback",className:"sidebar-link",children:"-"}),D.jsx(gi,{to:"/notifications",className:"sidebar-link",children:"-"}),D.jsx(gi,{to:"/settings",className:"sidebar-link",children:"Settings"}),D.jsx(gi,{to:"/",className:"sidebar-link",children:"Logout"})]})]})})}const gI={apiKey:"AIzaSyDxosd6yCZCVd2NGLlIiAthRoCfxAEUrdA",authDomain:"systemproject-de072.firebaseapp.com",projectId:"systemproject-de072",storageBucket:"systemproject-de072.appspot.com",messagingSenderId:"427445110062",appId:"1:427445110062:web:3a870fac07be2b369326bf"},mI=hf(gI),Os=Q0(mI);function pI(){const[i,t]=at.useState([{id:1,name:"",price:0,qty:1}]),[n,o]=at.useState([]),[u,d]=at.useState([]),[A,C]=at.useState(""),[_,x]=at.useState(null),[v,I]=at.useState(!1),[O,H]=at.useState([]),[X,J]=at.useState(null),[q,Q]=at.useState(null),[ft,nt]=at.useState(!1),_t=()=>{nt(!0);const Pt=new o0("wallet-reader",{fps:10,qrbox:{width:250,height:250}},!1);Pt.render(async st=>{J(st);try{const ut=Pn(Os,"customers",st),xt=await Wl(ut);if(xt.exists()){const jt=xt.data();Q({id:st,...jt})}else Q(null)}catch{Q(null)}await Pt.clear().catch(()=>{}),nt(!1)},st=>console.warn(st))},mt=i.reduce((Pt,st)=>Pt+st.price*st.qty,0),Tt=+mt.toFixed(2),U=+(mt*.05).toFixed(2);at.useEffect(()=>{(async()=>{const st=await Bi(bn(Os,"menu")),ut=[],xt=new Set;st.forEach(jt=>{const $t=jt.data(),Z=Number($t.price)||0;ut.push({id:jt.id,...$t,price:Z}),$t.category&&xt.add($t.category.trim())}),o(ut),d(Array.from(xt))})()},[]);const F=()=>{const st={id:i.length?i[i.length-1].id+1:1,name:"",price:0,qty:1};t(ut=>[...ut,st])},k=(Pt,st,ut)=>{t(xt=>xt.map(jt=>jt.id===Pt?{...jt,[st]:ut}:jt))},et=Pt=>{t(st=>st.filter(ut=>ut.id!==Pt))},tt=Pt=>{C(Pt.target.value)},K=()=>{I(!0);const Pt=new o0("reader",{fps:10,qrbox:{width:250,height:250}},!1);Pt.render(async st=>{try{const ut=Pn(Os,"customers",st),xt=await Wl(ut);if(xt.exists()){const jt=xt.data();x({id:st,...jt}),alert(" Customer found and linked!")}else alert(" Customer not found!")}catch(ut){console.error("Error fetching customer:",ut)}await Pt.clear().catch(()=>{}),I(!1)},st=>console.warn(st))},Y=async()=>{if(i.length===0)return alert("Add at least one item.");const Pt=new Date,st=Pt.toISOString().slice(0,10),ut=An.fromDate(Pt),xt=`ORD-${Date.now()}`;if(q){if((q.wallet||0)<Tt){alert(` Insufficient wallet balance. Available: ${q.wallet}, Required: ${Tt}`);return}const jt=Pn(Os,"customers",q.id),$t=+(Number(q.wallet)-Tt).toFixed(2),Z=(q.points||0)+U,It=(q.totalSpent||0)+Tt,Ot={transactionId:xt,amount:Tt,date:st,earnedPoints:U,items:i,type:"wallet",method:"Wallet",status:"Completed",paymentMethod:"Wallet"};await gs(jt,{wallet:$t,points:+Z.toFixed(2),totalSpent:+It.toFixed(2)}),await Ps(bn(Os,"customers",q.id,"transactions"),{orderId:xt,amount:Tt,paymentMethod:"Wallet",type:"wallet",status:"Completed",date:ut,items:i}),await Ps(bn(Os,"transactions"),{customerId:q.id,fullName:q.fullName,orderId:xt,amount:Tt,paymentMethod:"Wallet",type:"wallet",status:"Completed",date:ut,items:i}),alert(` Order placed! ${Tt} deducted from wallet. ${U} points added to ${q.fullName}.`),H(Mt=>[{id:xt,items:i,subtotal:mt,total:Tt,pointsEarned:U,customerId:q.id,placedAt:Pt.toISOString(),paidByWallet:!0},...Mt]),Q({...q,wallet:$t,points:+Z.toFixed(2),logs:q.logs?[...q.logs,Ot]:[Ot]}),t([{id:1,name:"",price:0,qty:1}]),x(null),J(null),Q(null);return}if(_){const jt=Pn(Os,"customers",_.id),$t=+(mt*.05).toFixed(2),Z=+(Number(_.points||0)+$t).toFixed(2),It=(_.totalSpent||0)+Tt;await gs(jt,{points:Z,totalSpent:+It.toFixed(2)}),await Ps(bn(Os,"customers",_.id,"transactions"),{orderId:xt,amount:Tt,paymentMethod:"Over the Counter",type:"points-earned",status:"Completed",date:ut,items:i}),await Ps(bn(Os,"transactions"),{customerId:_.id,fullName:_.fullName,orderId:xt,amount:Tt,paymentMethod:"Over the Counter",type:"points-earned",status:"Completed",date:ut,items:i}),alert(` Order placed (Over the Counter)! ${$t} points added to ${_.fullName}.`),H(Ot=>[{id:xt,items:i,subtotal:mt,total:Tt,pointsEarned:$t,customerId:_.id,placedAt:Pt.toISOString(),paidByWallet:!1},...Ot]),t([{id:1,name:"",price:0,qty:1}]),x(null),Q(null),J(null);return}await Ps(bn(Os,"transactions"),{customerId:"WALK-IN",fullName:"Walk-in Customer",orderId:xt,amount:Tt,paymentMethod:"Cash",type:"walk-in",status:"Completed",date:ut,items:i}),alert(" Order placed for Walk-in Customer (No points earned)."),t([{id:1,name:"",price:0,qty:1}])};return D.jsxs(D.Fragment,{children:[D.jsx(MA,{}),D.jsxs("div",{className:"assisted-ordering",children:[D.jsx("h2",{children:"Take Order"}),D.jsxs("div",{className:"columns",children:[D.jsxs("div",{className:"column",children:[D.jsx("h3",{children:"Order Items"}),D.jsx("label",{children:"Category:"}),D.jsxs("select",{value:A,onChange:tt,children:[D.jsx("option",{value:"",children:"Select Category"}),u.map(Pt=>D.jsx("option",{value:Pt,children:Pt},Pt))]}),i.map(Pt=>D.jsxs("div",{className:"order-item",children:[D.jsxs("select",{value:Pt.name,onChange:st=>{const ut=st.target.value,xt=n.find(jt=>jt.name===ut&&(A?jt.category.trim().toLowerCase()===A.trim().toLowerCase():!0));xt?(k(Pt.id,"name",xt.name),k(Pt.id,"price",Number(xt.price)),k(Pt.id,"category",xt.category)):(k(Pt.id,"name",ut),k(Pt.id,"price",0),k(Pt.id,"category",A||"Uncategorized"))},disabled:!A,children:[D.jsx("option",{value:"",children:A?"Select Item":"Select a category first"}),A&&n.filter(st=>st.category.trim().toLowerCase()===A.trim().toLowerCase()).map(st=>D.jsxs("option",{value:st.name,disabled:!st.availability,children:[st.name," ",st.availability?"":"(Unavailable)"]},st.id))]}),D.jsx("input",{type:"number",value:Pt.qty,onChange:st=>k(Pt.id,"qty",Number(st.target.value)),placeholder:"Qty"}),D.jsx("input",{type:"number",value:Pt.price,readOnly:!0,placeholder:"Price"}),D.jsx("button",{onClick:()=>et(Pt.id),children:""})]},Pt.id)),D.jsx("button",{onClick:F,children:"+ Add Item"}),D.jsxs("div",{className:"order-summary-list",style:{marginTop:"18px"},children:[D.jsx("h3",{children:"Current Items:"}),D.jsx("ul",{children:i.map((Pt,st)=>D.jsxs("li",{children:[D.jsx("b",{children:Pt.name||D.jsx("i",{children:"No item selected"})})," (",Pt.category||"",")  ",Pt.qty,"  ",(Pt.price*Pt.qty).toFixed(2)]},Pt.id||st))})]}),D.jsxs("div",{className:"summary",children:[D.jsxs("p",{children:["Subtotal: ",mt]}),D.jsxs("p",{children:["Total: ",Tt]}),D.jsxs("p",{children:["Earnable Points: ",U]})]})]}),D.jsxs("div",{className:"column",children:[D.jsx("h3",{children:"Action"}),_?D.jsxs("div",{className:"customer-info",children:[D.jsxs("p",{children:[D.jsx("b",{children:"Linked Customer:"})," ",_.fullName]}),D.jsxs("p",{children:["Current Points: ",_.points]})]}):D.jsxs(D.Fragment,{children:[D.jsx("button",{onClick:K,children:" Scan QR for Points"}),v&&D.jsx("div",{id:"reader",style:{width:350,height:300,marginTop:10}})]}),D.jsx("button",{onClick:_t,style:{marginTop:10},children:" Scan QR for Pay Wallet"}),ft&&D.jsx("div",{id:"wallet-reader",style:{width:350,height:300,marginTop:10}}),X&&D.jsxs("div",{style:{marginTop:10},children:[D.jsx("b",{children:"Wallet QR Result:"}),q?D.jsxs("div",{children:[D.jsxs("div",{children:[D.jsx("b",{children:"Full Name:"})," ",q.fullName]}),D.jsxs("div",{children:[D.jsx("b",{children:"Mobile:"})," ",q.mobile]}),D.jsxs("div",{children:[D.jsx("b",{children:"Wallet Balance:"})," ",q.wallet]})]}):D.jsx("div",{children:D.jsx("i",{children:"No customer found for this QR."})})]}),D.jsx("button",{onClick:Y,style:{marginTop:20},children:" Place Order"})]})]}),D.jsxs("div",{className:"column",style:{marginTop:20},children:[D.jsx("h3",{children:"Recent Orders"}),O.length===0?D.jsx("p",{children:"No recent orders."}):O.map(Pt=>D.jsxs("p",{children:[D.jsx("b",{children:Pt.id}),"  ",Pt.total," (",Pt.customerId,")"]},Pt.id))]})]})]})}function yI(){return D.jsxs(W_,{children:[D.jsx(Mi,{path:"/",element:D.jsx(X_,{to:"/Intro",replace:!0})}),D.jsx(Mi,{path:"/Intro",element:D.jsx(PT,{})}),D.jsx(Mi,{path:"/Owner",element:D.jsx(Rb,{})}),D.jsx(Mi,{path:"/Sidebar",element:D.jsx(Xo,{})}),D.jsx(Mi,{path:"/SideBarStaff",element:D.jsx(MA,{})}),D.jsx(Mi,{path:"/Dashboard",element:D.jsx(c4,{})}),D.jsx(Mi,{path:"/customers",element:D.jsx(A4,{})}),D.jsx(Mi,{path:"/orders",element:D.jsx(aI,{})}),D.jsx(Mi,{path:"/rewards",element:D.jsx(oI,{})}),D.jsx(Mi,{path:"/menu",element:D.jsx(lI,{})}),D.jsx(Mi,{path:"/wallet",element:D.jsx(dI,{})}),D.jsx(Mi,{path:"/take-order",element:D.jsx(pI,{})})]})}i_.createRoot(document.getElementById("root")).render(D.jsx(at.StrictMode,{children:D.jsx(xT,{children:D.jsx(yI,{})})}));
